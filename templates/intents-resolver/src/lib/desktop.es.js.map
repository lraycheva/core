{"version":3,"file":"desktop.es.js","sources":["../node_modules/@glue42/core/dist/core.es.js","../src/activity/entities/activityEntity.ts","../src/activity/helpers/util.ts","../src/activity/entities/activityType.ts","../src/activity/entities/windowType.ts","../src/activity/contracts/entityEvent.ts","../src/activity/core/activityAGM.ts","../src/activity/entities/attachedActivityDescriptor.ts","../src/activity/helpers/promiseExtensions.ts","../src/activity/entities/activity.ts","../src/activity/helpers/logger.ts","../src/activity/entities/activityWindow.ts","../src/activity/contracts/activityStatus.ts","../src/activity/bridges/gw3Bridge.ts","../src/activity/API/activityMyAPI.ts","../src/activity/helpers/readyMarker.ts","../src/activity/helpers/entityObservableCollection.ts","../src/activity/core/activityManager.ts","../src/activity/API/activityManagementAPI.ts","../src/activity/API/activityAPI.ts","../src/activity/activityModule.ts","../src/app-manager/const/agm-names.ts","../node_modules/callback-registry/lib/index.js","../src/app-manager/helper.ts","../src/app-manager/application.ts","../src/app-manager/instance.ts","../src/app-manager/app-manager.ts","../src/app-manager/entitlements.ts","../src/app-manager/snapshot.ts","../src/app-manager/const/event-names.ts","../src/app-manager/data-subscription.ts","../src/app-manager/in-memory.ts","../src/app-manager/main.ts","../node_modules/shortid/lib/random/random-from-seed.js","../node_modules/shortid/lib/alphabet.js","../node_modules/shortid/lib/random/random-byte-browser.js","../node_modules/shortid/lib/encode.js","../node_modules/shortid/lib/decode.js","../node_modules/shortid/lib/build.js","../node_modules/shortid/lib/is-valid.js","../node_modules/shortid/lib/index.js","../node_modules/shortid/index.js","../src/windows/jumpList/manager.ts","../src/windows/store.ts","../src/utils.ts","../src/windows/jumpList/actions.ts","../src/windows/jumpList/categories.ts","../src/windows/jumpList/main.ts","../src/windows/window.ts","../src/windows/environment/gd/executor.ts","../src/windows/environment/helpers.ts","../src/windows/environment/gd/gd.ts","../src/windows/environment/detector.ts","../src/windows/group.ts","../src/windows/groups.ts","../src/windows/main.ts","../src/layouts/store.ts","../src/layouts/contextProvider.ts","../src/layouts/transform.ts","../src/layouts/layout.ts","../src/layouts/layouts.ts","../src/layouts/stream/acsStream.ts","../src/layouts/stream/nullStream.ts","../src/layouts/main.ts","../src/displays/displayManager.ts","../src/channels/agm.ts","../src/channels/contexts.ts","../src/channels/channels.ts","../src/channels/main.ts","../src/hotkeys/hotkeys.ts","../src/hotkeys/main.ts","../src/config.ts","../src/notifications/notification.ts","../src/notifications/panel.ts","../src/notifications/main.ts","../src/themes/themes.ts","../src/themes/main.ts","../src/intents/constants.ts","../src/intents/intents.ts","../src/factoryCallInfo.ts","../src/prefs/index.ts","../src/cookies/index.ts","../src/cookies/main.ts","../src/eventsDispatcher.ts","../src/glue.ts","../src/index.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nfunction __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nfunction __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\n\nvar MetricTypes = {\r\n    STRING: 1,\r\n    NUMBER: 2,\r\n    TIMESTAMP: 3,\r\n    OBJECT: 4\r\n};\n\nfunction getMetricTypeByValue(metric) {\r\n    if (metric.type === MetricTypes.TIMESTAMP) {\r\n        return \"timestamp\";\r\n    }\r\n    else if (metric.type === MetricTypes.NUMBER) {\r\n        return \"number\";\r\n    }\r\n    else if (metric.type === MetricTypes.STRING) {\r\n        return \"string\";\r\n    }\r\n    else if (metric.type === MetricTypes.OBJECT) {\r\n        return \"object\";\r\n    }\r\n    return \"unknown\";\r\n}\r\nfunction getTypeByValue(value) {\r\n    if (value.constructor === Date) {\r\n        return \"timestamp\";\r\n    }\r\n    else if (typeof value === \"number\") {\r\n        return \"number\";\r\n    }\r\n    else if (typeof value === \"string\") {\r\n        return \"string\";\r\n    }\r\n    else if (typeof value === \"object\") {\r\n        return \"object\";\r\n    }\r\n    else {\r\n        return \"string\";\r\n    }\r\n}\r\nfunction serializeMetric(metric) {\r\n    var serializedMetrics = {};\r\n    var type = getMetricTypeByValue(metric);\r\n    if (type === \"object\") {\r\n        var values = Object.keys(metric.value).reduce(function (memo, key) {\r\n            var innerType = getTypeByValue(metric.value[key]);\r\n            if (innerType === \"object\") {\r\n                var composite = defineNestedComposite(metric.value[key]);\r\n                memo[key] = {\r\n                    type: \"object\",\r\n                    description: \"\",\r\n                    context: {},\r\n                    composite: composite,\r\n                };\r\n            }\r\n            else {\r\n                memo[key] = {\r\n                    type: innerType,\r\n                    description: \"\",\r\n                    context: {},\r\n                };\r\n            }\r\n            return memo;\r\n        }, {});\r\n        serializedMetrics.composite = values;\r\n    }\r\n    serializedMetrics.name = normalizeMetricName(metric.path.join(\"/\") + \"/\" + metric.name);\r\n    serializedMetrics.type = type;\r\n    serializedMetrics.description = metric.description;\r\n    serializedMetrics.context = {};\r\n    return serializedMetrics;\r\n}\r\nfunction defineNestedComposite(values) {\r\n    return Object.keys(values).reduce(function (memo, key) {\r\n        var type = getTypeByValue(values[key]);\r\n        if (type === \"object\") {\r\n            memo[key] = {\r\n                type: \"object\",\r\n                description: \"\",\r\n                context: {},\r\n                composite: defineNestedComposite(values[key]),\r\n            };\r\n        }\r\n        else {\r\n            memo[key] = {\r\n                type: type,\r\n                description: \"\",\r\n                context: {},\r\n            };\r\n        }\r\n        return memo;\r\n    }, {});\r\n}\r\nfunction normalizeMetricName(name) {\r\n    if (typeof name !== \"undefined\" && name.length > 0 && name[0] !== \"/\") {\r\n        return \"/\" + name;\r\n    }\r\n    else {\r\n        return name;\r\n    }\r\n}\r\nfunction getMetricValueByType(metric) {\r\n    var type = getMetricTypeByValue(metric);\r\n    if (type === \"timestamp\") {\r\n        return Date.now();\r\n    }\r\n    else {\r\n        return publishNestedComposite(metric.value);\r\n    }\r\n}\r\nfunction publishNestedComposite(values) {\r\n    if (typeof values !== \"object\") {\r\n        return values;\r\n    }\r\n    return Object.keys(values).reduce(function (memo, key) {\r\n        var value = values[key];\r\n        if (typeof value === \"object\" && value.constructor !== Date) {\r\n            memo[key] = publishNestedComposite(value);\r\n        }\r\n        else if (value.constructor === Date) {\r\n            memo[key] = new Date(value).getTime();\r\n        }\r\n        else if (value.constructor === Boolean) {\r\n            memo[key] = value.toString();\r\n        }\r\n        else {\r\n            memo[key] = value;\r\n        }\r\n        return memo;\r\n    }, {});\r\n}\r\nfunction flatten(arr) {\r\n    return arr.reduce(function (flat, toFlatten) {\r\n        return flat.concat(Array.isArray(toFlatten) ? flatten(toFlatten) : toFlatten);\r\n    }, []);\r\n}\r\nfunction getHighestState(arr) {\r\n    return arr.sort(function (a, b) {\r\n        if (!a.state) {\r\n            return 1;\r\n        }\r\n        if (!b.state) {\r\n            return -1;\r\n        }\r\n        return b.state - a.state;\r\n    })[0];\r\n}\r\nfunction aggregateDescription(arr) {\r\n    var msg = \"\";\r\n    arr.forEach(function (m, idx, a) {\r\n        var path = m.path.join(\".\");\r\n        if (idx === a.length - 1) {\r\n            msg += path + \".\" + m.name + \": \" + m.description;\r\n        }\r\n        else {\r\n            msg += path + \".\" + m.name + \": \" + m.description + \",\";\r\n        }\r\n    });\r\n    if (msg.length > 100) {\r\n        return msg.slice(0, 100) + \"...\";\r\n    }\r\n    else {\r\n        return msg;\r\n    }\r\n}\r\nfunction composeMsgForRootStateMetric(system) {\r\n    var aggregatedState = system.root.getAggregateState();\r\n    var merged = flatten(aggregatedState);\r\n    var highestState = getHighestState(merged);\r\n    var aggregateDesc = aggregateDescription(merged);\r\n    return {\r\n        description: aggregateDesc,\r\n        value: highestState.state,\r\n    };\r\n}\n\nfunction gw3 (connection, config) {\r\n    var _this = this;\r\n    if (!connection || typeof connection !== \"object\") {\r\n        throw new Error(\"Connection is required parameter\");\r\n    }\r\n    var joinPromise;\r\n    var session;\r\n    var init = function (repo) {\r\n        var resolveReadyPromise;\r\n        joinPromise = new Promise(function (resolve) {\r\n            resolveReadyPromise = resolve;\r\n        });\r\n        session = connection.domain(\"metrics\");\r\n        session.onJoined(function (reconnect) {\r\n            if (!reconnect && resolveReadyPromise) {\r\n                resolveReadyPromise();\r\n                resolveReadyPromise = undefined;\r\n            }\r\n            var rootStateMetric = {\r\n                name: \"/State\",\r\n                type: \"object\",\r\n                composite: {\r\n                    Description: {\r\n                        type: \"string\",\r\n                        description: \"\",\r\n                    },\r\n                    Value: {\r\n                        type: \"number\",\r\n                        description: \"\",\r\n                    },\r\n                },\r\n                description: \"System state\",\r\n                context: {},\r\n            };\r\n            var defineRootMetricsMsg = {\r\n                type: \"define\",\r\n                metrics: [rootStateMetric],\r\n            };\r\n            session.send(defineRootMetricsMsg);\r\n            if (reconnect) {\r\n                replayRepo(repo);\r\n            }\r\n        });\r\n        session.join({\r\n            system: config.system,\r\n            service: config.service,\r\n            instance: config.instance\r\n        });\r\n    };\r\n    var replayRepo = function (repo) {\r\n        replaySystem(repo.root);\r\n    };\r\n    var replaySystem = function (system) {\r\n        createSystem(system);\r\n        system.metrics.forEach(function (m) {\r\n            createMetric(m);\r\n        });\r\n        system.subSystems.forEach(function (ss) {\r\n            replaySystem(ss);\r\n        });\r\n    };\r\n    var createSystem = function (system) { return __awaiter(_this, void 0, void 0, function () {\r\n        var metric, createMetricsMsg;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    if (system.parent === undefined) {\r\n                        return [2];\r\n                    }\r\n                    return [4, joinPromise];\r\n                case 1:\r\n                    _a.sent();\r\n                    metric = {\r\n                        name: normalizeMetricName(system.path.join(\"/\") + \"/\" + system.name + \"/State\"),\r\n                        type: \"object\",\r\n                        composite: {\r\n                            Description: {\r\n                                type: \"string\",\r\n                                description: \"\",\r\n                            },\r\n                            Value: {\r\n                                type: \"number\",\r\n                                description: \"\",\r\n                            },\r\n                        },\r\n                        description: \"System state\",\r\n                        context: {},\r\n                    };\r\n                    createMetricsMsg = {\r\n                        type: \"define\",\r\n                        metrics: [metric],\r\n                    };\r\n                    session.send(createMetricsMsg);\r\n                    return [2];\r\n            }\r\n        });\r\n    }); };\r\n    var updateSystem = function (system, state) { return __awaiter(_this, void 0, void 0, function () {\r\n        var shadowedUpdateMetric, stateObj, rootMetric;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0: return [4, joinPromise];\r\n                case 1:\r\n                    _a.sent();\r\n                    shadowedUpdateMetric = {\r\n                        type: \"publish\",\r\n                        values: [{\r\n                                name: normalizeMetricName(system.path.join(\"/\") + \"/\" + system.name + \"/State\"),\r\n                                value: {\r\n                                    Description: state.description,\r\n                                    Value: state.state,\r\n                                },\r\n                                timestamp: Date.now(),\r\n                            }],\r\n                    };\r\n                    session.send(shadowedUpdateMetric);\r\n                    stateObj = composeMsgForRootStateMetric(system);\r\n                    rootMetric = {\r\n                        type: \"publish\",\r\n                        peer_id: connection.peerId,\r\n                        values: [{\r\n                                name: \"/State\",\r\n                                value: {\r\n                                    Description: stateObj.description,\r\n                                    Value: stateObj.value,\r\n                                },\r\n                                timestamp: Date.now(),\r\n                            }],\r\n                    };\r\n                    session.send(rootMetric);\r\n                    return [2];\r\n            }\r\n        });\r\n    }); };\r\n    var createMetric = function (metric) { return __awaiter(_this, void 0, void 0, function () {\r\n        var metricClone, m, createMetricsMsg;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    metricClone = cloneMetric(metric);\r\n                    return [4, joinPromise];\r\n                case 1:\r\n                    _a.sent();\r\n                    m = serializeMetric(metricClone);\r\n                    createMetricsMsg = {\r\n                        type: \"define\",\r\n                        metrics: [m],\r\n                    };\r\n                    session.send(createMetricsMsg);\r\n                    if (typeof metricClone.value !== \"undefined\") {\r\n                        updateMetricCore(metricClone);\r\n                    }\r\n                    return [2];\r\n            }\r\n        });\r\n    }); };\r\n    var updateMetric = function (metric) { return __awaiter(_this, void 0, void 0, function () {\r\n        var metricClone;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    metricClone = cloneMetric(metric);\r\n                    return [4, joinPromise];\r\n                case 1:\r\n                    _a.sent();\r\n                    updateMetricCore(metricClone);\r\n                    return [2];\r\n            }\r\n        });\r\n    }); };\r\n    var updateMetricCore = function (metric) {\r\n        if (canUpdate()) {\r\n            var value = getMetricValueByType(metric);\r\n            var publishMetricsMsg = {\r\n                type: \"publish\",\r\n                values: [{\r\n                        name: normalizeMetricName(metric.path.join(\"/\") + \"/\" + metric.name),\r\n                        value: value,\r\n                        timestamp: Date.now(),\r\n                    }],\r\n            };\r\n            return session.sendFireAndForget(publishMetricsMsg);\r\n        }\r\n        return Promise.resolve();\r\n    };\r\n    var cloneMetric = function (metric) {\r\n        var metricClone = __assign({}, metric);\r\n        if (typeof metric.value === \"object\" && metric.value !== null) {\r\n            metricClone.value = __assign({}, metric.value);\r\n        }\r\n        return metricClone;\r\n    };\r\n    var canUpdate = function () {\r\n        var _a;\r\n        try {\r\n            var func = (_a = config.canUpdateMetric) !== null && _a !== void 0 ? _a : (function () { return true; });\r\n            return func();\r\n        }\r\n        catch (_b) {\r\n            return true;\r\n        }\r\n    };\r\n    return {\r\n        init: init,\r\n        createSystem: createSystem,\r\n        updateSystem: updateSystem,\r\n        createMetric: createMetric,\r\n        updateMetric: updateMetric,\r\n    };\r\n}\n\nvar Helpers = {\r\n    validate: function (definition, parent, transport) {\r\n        if (definition === null || typeof definition !== \"object\") {\r\n            throw new Error(\"Missing definition\");\r\n        }\r\n        if (parent === null || typeof parent !== \"object\") {\r\n            throw new Error(\"Missing parent\");\r\n        }\r\n        if (transport === null || typeof transport !== \"object\") {\r\n            throw new Error(\"Missing transport\");\r\n        }\r\n    },\r\n};\n\nvar BaseMetric = (function () {\r\n    function BaseMetric(definition, system, transport, value, type) {\r\n        this.definition = definition;\r\n        this.system = system;\r\n        this.transport = transport;\r\n        this.value = value;\r\n        this.type = type;\r\n        this.path = [];\r\n        Helpers.validate(definition, system, transport);\r\n        this.path = system.path.slice(0);\r\n        this.path.push(system.name);\r\n        this.name = definition.name;\r\n        this.description = definition.description;\r\n        transport.createMetric(this);\r\n    }\r\n    Object.defineProperty(BaseMetric.prototype, \"repo\", {\r\n        get: function () {\r\n            var _a;\r\n            return (_a = this.system) === null || _a === void 0 ? void 0 : _a.repo;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(BaseMetric.prototype, \"id\", {\r\n        get: function () { return this.system.path + \"/\" + name; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    BaseMetric.prototype.update = function (newValue) {\r\n        this.value = newValue;\r\n        return this.transport.updateMetric(this);\r\n    };\r\n    return BaseMetric;\r\n}());\n\nvar NumberMetric = (function (_super) {\r\n    __extends(NumberMetric, _super);\r\n    function NumberMetric(definition, system, transport, value) {\r\n        return _super.call(this, definition, system, transport, value, MetricTypes.NUMBER) || this;\r\n    }\r\n    NumberMetric.prototype.incrementBy = function (num) {\r\n        this.update(this.value + num);\r\n    };\r\n    NumberMetric.prototype.increment = function () {\r\n        this.incrementBy(1);\r\n    };\r\n    NumberMetric.prototype.decrement = function () {\r\n        this.incrementBy(-1);\r\n    };\r\n    NumberMetric.prototype.decrementBy = function (num) {\r\n        this.incrementBy(num * -1);\r\n    };\r\n    return NumberMetric;\r\n}(BaseMetric));\n\nvar ObjectMetric = (function (_super) {\r\n    __extends(ObjectMetric, _super);\r\n    function ObjectMetric(definition, system, transport, value) {\r\n        return _super.call(this, definition, system, transport, value, MetricTypes.OBJECT) || this;\r\n    }\r\n    ObjectMetric.prototype.update = function (newValue) {\r\n        this.mergeValues(newValue);\r\n        return this.transport.updateMetric(this);\r\n    };\r\n    ObjectMetric.prototype.mergeValues = function (values) {\r\n        var _this = this;\r\n        return Object.keys(this.value).forEach(function (k) {\r\n            if (typeof values[k] !== \"undefined\") {\r\n                _this.value[k] = values[k];\r\n            }\r\n        });\r\n    };\r\n    return ObjectMetric;\r\n}(BaseMetric));\n\nvar StringMetric = (function (_super) {\r\n    __extends(StringMetric, _super);\r\n    function StringMetric(definition, system, transport, value) {\r\n        return _super.call(this, definition, system, transport, value, MetricTypes.STRING) || this;\r\n    }\r\n    return StringMetric;\r\n}(BaseMetric));\n\nvar TimestampMetric = (function (_super) {\r\n    __extends(TimestampMetric, _super);\r\n    function TimestampMetric(definition, system, transport, value) {\r\n        return _super.call(this, definition, system, transport, value, MetricTypes.TIMESTAMP) || this;\r\n    }\r\n    TimestampMetric.prototype.now = function () {\r\n        this.update(new Date());\r\n    };\r\n    return TimestampMetric;\r\n}(BaseMetric));\n\nfunction system(name, repo, protocol, parent, description) {\r\n    if (!repo) {\r\n        throw new Error(\"Repository is required\");\r\n    }\r\n    if (!protocol) {\r\n        throw new Error(\"Transport is required\");\r\n    }\r\n    var _transport = protocol;\r\n    var _name = name;\r\n    var _description = description || \"\";\r\n    var _repo = repo;\r\n    var _parent = parent;\r\n    var _path = _buildPath(parent);\r\n    var _state = {};\r\n    var id = _arrayToString(_path, \"/\") + name;\r\n    var root = repo.root;\r\n    var _subSystems = [];\r\n    var _metrics = [];\r\n    function subSystem(nameSystem, descriptionSystem) {\r\n        if (!nameSystem || nameSystem.length === 0) {\r\n            throw new Error(\"name is required\");\r\n        }\r\n        var match = _subSystems.filter(function (s) { return s.name === nameSystem; });\r\n        if (match.length > 0) {\r\n            return match[0];\r\n        }\r\n        var _system = system(nameSystem, _repo, _transport, me, descriptionSystem);\r\n        _subSystems.push(_system);\r\n        return _system;\r\n    }\r\n    function setState(state, stateDescription) {\r\n        _state = { state: state, description: stateDescription };\r\n        _transport.updateSystem(me, _state);\r\n    }\r\n    function stringMetric(definition, value) {\r\n        return _getOrCreateMetric(definition, MetricTypes.STRING, value, function (metricDef) { return new StringMetric(metricDef, me, _transport, value); });\r\n    }\r\n    function numberMetric(definition, value) {\r\n        return _getOrCreateMetric(definition, MetricTypes.NUMBER, value, function (metricDef) { return new NumberMetric(metricDef, me, _transport, value); });\r\n    }\r\n    function objectMetric(definition, value) {\r\n        return _getOrCreateMetric(definition, MetricTypes.OBJECT, value, function (metricDef) { return new ObjectMetric(metricDef, me, _transport, value); });\r\n    }\r\n    function timestampMetric(definition, value) {\r\n        return _getOrCreateMetric(definition, MetricTypes.TIMESTAMP, value, function (metricDef) { return new TimestampMetric(metricDef, me, _transport, value); });\r\n    }\r\n    function _getOrCreateMetric(metricObject, expectedType, value, createMetric) {\r\n        var metricDef = { name: \"\" };\r\n        if (typeof metricObject === \"string\") {\r\n            metricDef = { name: metricObject };\r\n        }\r\n        else {\r\n            metricDef = metricObject;\r\n        }\r\n        var matching = _metrics.filter(function (shadowedMetric) { return shadowedMetric.name === metricDef.name; });\r\n        if (matching.length > 0) {\r\n            var existing = matching[0];\r\n            if (existing.type !== expectedType) {\r\n                throw new Error(\"A metric named \" + metricDef.name + \" is already defined with different type.\");\r\n            }\r\n            if (typeof value !== \"undefined\") {\r\n                existing\r\n                    .update(value)\r\n                    .catch(function () { });\r\n            }\r\n            return existing;\r\n        }\r\n        var metric = createMetric(metricDef);\r\n        _metrics.push(metric);\r\n        return metric;\r\n    }\r\n    function _buildPath(shadowedSystem) {\r\n        if (!shadowedSystem || !shadowedSystem.parent) {\r\n            return [];\r\n        }\r\n        var path = _buildPath(shadowedSystem.parent);\r\n        path.push(shadowedSystem.name);\r\n        return path;\r\n    }\r\n    function _arrayToString(path, separator) {\r\n        return ((path && path.length > 0) ? path.join(separator) : \"\");\r\n    }\r\n    function getAggregateState() {\r\n        var aggState = [];\r\n        if (Object.keys(_state).length > 0) {\r\n            aggState.push({\r\n                name: _name,\r\n                path: _path,\r\n                state: _state.state,\r\n                description: _state.description,\r\n            });\r\n        }\r\n        _subSystems.forEach(function (shadowedSubSystem) {\r\n            var result = shadowedSubSystem.getAggregateState();\r\n            if (result.length > 0) {\r\n                aggState.push.apply(aggState, result);\r\n            }\r\n        });\r\n        return aggState;\r\n    }\r\n    var me = {\r\n        get name() {\r\n            return _name;\r\n        },\r\n        get description() {\r\n            return _description;\r\n        },\r\n        get repo() {\r\n            return _repo;\r\n        },\r\n        get parent() {\r\n            return _parent;\r\n        },\r\n        path: _path,\r\n        id: id,\r\n        root: root,\r\n        get subSystems() {\r\n            return _subSystems;\r\n        },\r\n        get metrics() {\r\n            return _metrics;\r\n        },\r\n        subSystem: subSystem,\r\n        getState: function () {\r\n            return _state;\r\n        },\r\n        setState: setState,\r\n        stringMetric: stringMetric,\r\n        timestampMetric: timestampMetric,\r\n        objectMetric: objectMetric,\r\n        numberMetric: numberMetric,\r\n        getAggregateState: getAggregateState,\r\n    };\r\n    _transport.createSystem(me);\r\n    return me;\r\n}\n\nvar Repository = (function () {\r\n    function Repository(options, protocol) {\r\n        protocol.init(this);\r\n        this.root = system(\"\", this, protocol);\r\n        this.addSystemMetrics(this.root, options.clickStream || options.clickStream === undefined);\r\n    }\r\n    Repository.prototype.addSystemMetrics = function (rootSystem, useClickStream) {\r\n        if (typeof navigator !== \"undefined\") {\r\n            rootSystem.stringMetric(\"UserAgent\", navigator.userAgent);\r\n        }\r\n        if (useClickStream && typeof document !== \"undefined\") {\r\n            var clickStream_1 = rootSystem.subSystem(\"ClickStream\");\r\n            var documentClickHandler = function (e) {\r\n                var _a;\r\n                if (!e.target) {\r\n                    return;\r\n                }\r\n                var target = e.target;\r\n                var className = target ? (_a = target.getAttribute(\"class\")) !== null && _a !== void 0 ? _a : \"\" : \"\";\r\n                clickStream_1.objectMetric(\"LastBrowserEvent\", {\r\n                    type: \"click\",\r\n                    timestamp: new Date(),\r\n                    target: {\r\n                        className: className,\r\n                        id: target.id,\r\n                        type: \"<\" + target.tagName.toLowerCase() + \">\",\r\n                        href: target.href || \"\",\r\n                    },\r\n                });\r\n            };\r\n            clickStream_1.objectMetric(\"Page\", {\r\n                title: document.title,\r\n                page: window.location.href,\r\n            });\r\n            if (document.addEventListener) {\r\n                document.addEventListener(\"click\", documentClickHandler);\r\n            }\r\n            else {\r\n                document.attachEvent(\"onclick\", documentClickHandler);\r\n            }\r\n        }\r\n        var startTime = rootSystem.stringMetric(\"StartTime\", (new Date()).toString());\r\n        var urlMetric = rootSystem.stringMetric(\"StartURL\", \"\");\r\n        var appNameMetric = rootSystem.stringMetric(\"AppName\", \"\");\r\n        if (typeof window !== \"undefined\") {\r\n            if (typeof window.location !== \"undefined\") {\r\n                var startUrl = window.location.href;\r\n                urlMetric.update(startUrl);\r\n            }\r\n            if (typeof window.glue42gd !== \"undefined\") {\r\n                appNameMetric.update(window.glue42gd.appName);\r\n            }\r\n        }\r\n    };\r\n    return Repository;\r\n}());\n\nvar NullProtocol = (function () {\r\n    function NullProtocol() {\r\n    }\r\n    NullProtocol.prototype.init = function (repo) {\r\n    };\r\n    NullProtocol.prototype.createSystem = function (system) {\r\n        return Promise.resolve();\r\n    };\r\n    NullProtocol.prototype.updateSystem = function (metric, state) {\r\n        return Promise.resolve();\r\n    };\r\n    NullProtocol.prototype.createMetric = function (metric) {\r\n        return Promise.resolve();\r\n    };\r\n    NullProtocol.prototype.updateMetric = function (metric) {\r\n        return Promise.resolve();\r\n    };\r\n    return NullProtocol;\r\n}());\n\nvar PerfTracker = (function () {\r\n    function PerfTracker(api, initialPublishTimeout, publishInterval) {\r\n        this.api = api;\r\n        this.lastCount = 0;\r\n        this.initialPublishTimeout = 10 * 1000;\r\n        this.publishInterval = 60 * 1000;\r\n        this.initialPublishTimeout = initialPublishTimeout !== null && initialPublishTimeout !== void 0 ? initialPublishTimeout : this.initialPublishTimeout;\r\n        this.publishInterval = publishInterval !== null && publishInterval !== void 0 ? publishInterval : this.publishInterval;\r\n        this.scheduleCollection();\r\n        this.system = this.api.subSystem(\"performance\", \"Performance data published by the web application\");\r\n    }\r\n    PerfTracker.prototype.scheduleCollection = function () {\r\n        var _this = this;\r\n        setTimeout(function () {\r\n            _this.collect();\r\n            setInterval(function () {\r\n                _this.collect();\r\n            }, _this.publishInterval);\r\n        }, this.initialPublishTimeout);\r\n    };\r\n    PerfTracker.prototype.collect = function () {\r\n        try {\r\n            this.collectMemory();\r\n            this.collectEntries();\r\n        }\r\n        catch (_a) {\r\n        }\r\n    };\r\n    PerfTracker.prototype.collectMemory = function () {\r\n        var memory = window.performance.memory;\r\n        this.system.stringMetric(\"memory\", JSON.stringify({\r\n            totalJSHeapSize: memory.totalJSHeapSize,\r\n            usedJSHeapSize: memory.usedJSHeapSize\r\n        }));\r\n    };\r\n    PerfTracker.prototype.collectEntries = function () {\r\n        var allEntries = window.performance.getEntries();\r\n        if (allEntries.length <= this.lastCount) {\r\n            return;\r\n        }\r\n        this.lastCount = allEntries.length;\r\n        var jsonfiedEntries = allEntries.map(function (i) { return i.toJSON(); });\r\n        this.system.stringMetric(\"entries\", JSON.stringify(jsonfiedEntries));\r\n    };\r\n    return PerfTracker;\r\n}());\n\nvar metrics = (function (options) {\r\n    var protocol;\r\n    if (!options.connection || typeof options.connection !== \"object\") {\r\n        protocol = new NullProtocol();\r\n    }\r\n    else {\r\n        protocol = gw3(options.connection, options);\r\n    }\r\n    var repo = new Repository(options, protocol);\r\n    var rootSystem = repo.root;\r\n    if (!options.disableAutoAppSystem) {\r\n        rootSystem = rootSystem.subSystem(\"App\");\r\n    }\r\n    var api = addFAVSupport(rootSystem);\r\n    initPerf(api, options.pagePerformanceMetrics);\r\n    return api;\r\n});\r\nvar perf;\r\nfunction initPerf(api, config) {\r\n    var _a, _b;\r\n    if (typeof window === \"undefined\") {\r\n        return;\r\n    }\r\n    var perfConfig = (_b = (_a = window === null || window === void 0 ? void 0 : window.glue42gd) === null || _a === void 0 ? void 0 : _a.metrics) === null || _b === void 0 ? void 0 : _b.pagePerformanceMetrics;\r\n    if (perfConfig) {\r\n        config = perfConfig;\r\n    }\r\n    if (config === null || config === void 0 ? void 0 : config.enabled) {\r\n        perf = new PerfTracker(api, config.initialPublishTimeout, config.publishInterval);\r\n    }\r\n}\r\nfunction addFAVSupport(system) {\r\n    var reportingSystem = system.subSystem(\"reporting\");\r\n    var def = {\r\n        name: \"features\"\r\n    };\r\n    var featureMetric;\r\n    var featureMetricFunc = function (name, action, payload) {\r\n        if (typeof name === \"undefined\" || name === \"\") {\r\n            throw new Error(\"name is mandatory\");\r\n        }\r\n        else if (typeof action === \"undefined\" || action === \"\") {\r\n            throw new Error(\"action is mandatory\");\r\n        }\r\n        else if (typeof payload === \"undefined\" || payload === \"\") {\r\n            throw new Error(\"payload is mandatory\");\r\n        }\r\n        if (!featureMetric) {\r\n            featureMetric = reportingSystem.objectMetric(def, { name: name, action: action, payload: payload });\r\n        }\r\n        else {\r\n            featureMetric.update({\r\n                name: name,\r\n                action: action,\r\n                payload: payload\r\n            });\r\n        }\r\n    };\r\n    system.featureMetric = featureMetricFunc;\r\n    return system;\r\n}\n\nfunction createRegistry(options) {\r\n    if (options && options.errorHandling\r\n        && typeof options.errorHandling !== \"function\"\r\n        && options.errorHandling !== \"log\"\r\n        && options.errorHandling !== \"silent\"\r\n        && options.errorHandling !== \"throw\") {\r\n        throw new Error(\"Invalid options passed to createRegistry. Prop errorHandling should be [\\\"log\\\" | \\\"silent\\\" | \\\"throw\\\" | (err) => void], but \" + typeof options.errorHandling + \" was passed\");\r\n    }\r\n    var _userErrorHandler = options && typeof options.errorHandling === \"function\" && options.errorHandling;\r\n    var callbacks = {};\r\n    function add(key, callback, replayArgumentsArr) {\r\n        var callbacksForKey = callbacks[key];\r\n        if (!callbacksForKey) {\r\n            callbacksForKey = [];\r\n            callbacks[key] = callbacksForKey;\r\n        }\r\n        callbacksForKey.push(callback);\r\n        if (replayArgumentsArr) {\r\n            setTimeout(function () {\r\n                replayArgumentsArr.forEach(function (replayArgument) {\r\n                    var _a;\r\n                    if ((_a = callbacks[key]) === null || _a === void 0 ? void 0 : _a.includes(callback)) {\r\n                        try {\r\n                            if (Array.isArray(replayArgument)) {\r\n                                callback.apply(undefined, replayArgument);\r\n                            }\r\n                            else {\r\n                                callback.apply(undefined, [replayArgument]);\r\n                            }\r\n                        }\r\n                        catch (err) {\r\n                            _handleError(err, key);\r\n                        }\r\n                    }\r\n                });\r\n            }, 0);\r\n        }\r\n        return function () {\r\n            var allForKey = callbacks[key];\r\n            if (!allForKey) {\r\n                return;\r\n            }\r\n            allForKey = allForKey.reduce(function (acc, element, index) {\r\n                if (!(element === callback && acc.length === index)) {\r\n                    acc.push(element);\r\n                }\r\n                return acc;\r\n            }, []);\r\n            if (allForKey.length === 0) {\r\n                delete callbacks[key];\r\n            }\r\n            else {\r\n                callbacks[key] = allForKey;\r\n            }\r\n        };\r\n    }\r\n    function execute(key) {\r\n        var argumentsArr = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            argumentsArr[_i - 1] = arguments[_i];\r\n        }\r\n        var callbacksForKey = callbacks[key];\r\n        if (!callbacksForKey || callbacksForKey.length === 0) {\r\n            return [];\r\n        }\r\n        var results = [];\r\n        callbacksForKey.forEach(function (callback) {\r\n            try {\r\n                var result = callback.apply(undefined, argumentsArr);\r\n                results.push(result);\r\n            }\r\n            catch (err) {\r\n                results.push(undefined);\r\n                _handleError(err, key);\r\n            }\r\n        });\r\n        return results;\r\n    }\r\n    function _handleError(exceptionArtifact, key) {\r\n        var errParam = exceptionArtifact instanceof Error ? exceptionArtifact : new Error(exceptionArtifact);\r\n        if (_userErrorHandler) {\r\n            _userErrorHandler(errParam);\r\n            return;\r\n        }\r\n        var msg = \"[ERROR] callback-registry: User callback for key \\\"\" + key + \"\\\" failed: \" + errParam.stack;\r\n        if (options) {\r\n            switch (options.errorHandling) {\r\n                case \"log\":\r\n                    return console.error(msg);\r\n                case \"silent\":\r\n                    return;\r\n                case \"throw\":\r\n                    throw new Error(msg);\r\n            }\r\n        }\r\n        console.error(msg);\r\n    }\r\n    function clear() {\r\n        callbacks = {};\r\n    }\r\n    function clearKey(key) {\r\n        var callbacksForKey = callbacks[key];\r\n        if (!callbacksForKey) {\r\n            return;\r\n        }\r\n        delete callbacks[key];\r\n    }\r\n    return {\r\n        add: add,\r\n        execute: execute,\r\n        clear: clear,\r\n        clearKey: clearKey\r\n    };\r\n}\r\ncreateRegistry.default = createRegistry;\r\nvar lib = createRegistry;\n\nvar InProcTransport = (function () {\r\n    function InProcTransport(settings, logger) {\r\n        var _this = this;\r\n        this.registry = lib();\r\n        this.gw = settings.facade;\r\n        this.gw.connect(function (_client, message) {\r\n            _this.messageHandler(message);\r\n        }).then(function (client) {\r\n            _this.client = client;\r\n        });\r\n    }\r\n    Object.defineProperty(InProcTransport.prototype, \"isObjectBasedTransport\", {\r\n        get: function () {\r\n            return true;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    InProcTransport.prototype.sendObject = function (msg) {\r\n        if (this.client) {\r\n            this.client.send(msg);\r\n            return Promise.resolve(undefined);\r\n        }\r\n        else {\r\n            return Promise.reject(\"not connected\");\r\n        }\r\n    };\r\n    InProcTransport.prototype.send = function (_msg) {\r\n        return Promise.reject(\"not supported\");\r\n    };\r\n    InProcTransport.prototype.onMessage = function (callback) {\r\n        return this.registry.add(\"onMessage\", callback);\r\n    };\r\n    InProcTransport.prototype.onConnectedChanged = function (callback) {\r\n        callback(true);\r\n        return function () { };\r\n    };\r\n    InProcTransport.prototype.close = function () {\r\n        return Promise.resolve();\r\n    };\r\n    InProcTransport.prototype.open = function () {\r\n        return Promise.resolve();\r\n    };\r\n    InProcTransport.prototype.name = function () {\r\n        return \"in-memory\";\r\n    };\r\n    InProcTransport.prototype.reconnect = function () {\r\n        return Promise.resolve();\r\n    };\r\n    InProcTransport.prototype.messageHandler = function (msg) {\r\n        this.registry.execute(\"onMessage\", msg);\r\n    };\r\n    return InProcTransport;\r\n}());\n\nvar SharedWorkerTransport = (function () {\r\n    function SharedWorkerTransport(workerFile, logger) {\r\n        var _this = this;\r\n        this.logger = logger;\r\n        this.registry = lib();\r\n        this.worker = new SharedWorker(workerFile);\r\n        this.worker.port.onmessage = function (e) {\r\n            _this.messageHandler(e.data);\r\n        };\r\n    }\r\n    Object.defineProperty(SharedWorkerTransport.prototype, \"isObjectBasedTransport\", {\r\n        get: function () {\r\n            return true;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    SharedWorkerTransport.prototype.sendObject = function (msg) {\r\n        this.worker.port.postMessage(msg);\r\n        return Promise.resolve();\r\n    };\r\n    SharedWorkerTransport.prototype.send = function (_msg) {\r\n        return Promise.reject(\"not supported\");\r\n    };\r\n    SharedWorkerTransport.prototype.onMessage = function (callback) {\r\n        return this.registry.add(\"onMessage\", callback);\r\n    };\r\n    SharedWorkerTransport.prototype.onConnectedChanged = function (callback) {\r\n        callback(true);\r\n        return function () { };\r\n    };\r\n    SharedWorkerTransport.prototype.close = function () {\r\n        return Promise.resolve();\r\n    };\r\n    SharedWorkerTransport.prototype.open = function () {\r\n        return Promise.resolve();\r\n    };\r\n    SharedWorkerTransport.prototype.name = function () {\r\n        return \"shared-worker\";\r\n    };\r\n    SharedWorkerTransport.prototype.reconnect = function () {\r\n        return Promise.resolve();\r\n    };\r\n    SharedWorkerTransport.prototype.messageHandler = function (msg) {\r\n        this.registry.execute(\"onMessage\", msg);\r\n    };\r\n    return SharedWorkerTransport;\r\n}());\n\nvar Utils = (function () {\r\n    function Utils() {\r\n    }\r\n    Utils.getGDMajorVersion = function () {\r\n        if (typeof window === \"undefined\") {\r\n            return undefined;\r\n        }\r\n        if (!window.glueDesktop) {\r\n            return undefined;\r\n        }\r\n        if (!window.glueDesktop.version) {\r\n            return undefined;\r\n        }\r\n        var ver = Number(window.glueDesktop.version.substr(0, 1));\r\n        return isNaN(ver) ? undefined : ver;\r\n    };\r\n    Utils.isNode = function () {\r\n        if (typeof Utils._isNode !== \"undefined\") {\r\n            return Utils._isNode;\r\n        }\r\n        if (typeof window !== \"undefined\") {\r\n            Utils._isNode = false;\r\n            return false;\r\n        }\r\n        try {\r\n            Utils._isNode = Object.prototype.toString.call(global.process) === \"[object process]\";\r\n        }\r\n        catch (e) {\r\n            Utils._isNode = false;\r\n        }\r\n        return Utils._isNode;\r\n    };\r\n    return Utils;\r\n}());\n\nvar PromiseWrapper = (function () {\r\n    function PromiseWrapper() {\r\n        var _this = this;\r\n        this.rejected = false;\r\n        this.resolved = false;\r\n        this.promise = new Promise(function (resolve, reject) {\r\n            _this.resolve = function (t) {\r\n                _this.resolved = true;\r\n                resolve(t);\r\n            };\r\n            _this.reject = function (err) {\r\n                _this.rejected = true;\r\n                reject(err);\r\n            };\r\n        });\r\n    }\r\n    PromiseWrapper.delay = function (time) {\r\n        return new Promise(function (resolve) { return setTimeout(resolve, time); });\r\n    };\r\n    Object.defineProperty(PromiseWrapper.prototype, \"ended\", {\r\n        get: function () {\r\n            return this.rejected || this.resolved;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return PromiseWrapper;\r\n}());\n\nvar timers = {};\r\nfunction getAllTimers() {\r\n    return timers;\r\n}\r\nfunction timer (timerName) {\r\n    var existing = timers[timerName];\r\n    if (existing) {\r\n        return existing;\r\n    }\r\n    var marks = [];\r\n    function now() {\r\n        return new Date().getTime();\r\n    }\r\n    var startTime = now();\r\n    mark(\"start\", startTime);\r\n    var endTime;\r\n    var period;\r\n    function stop() {\r\n        endTime = now();\r\n        mark(\"end\", endTime);\r\n        period = endTime - startTime;\r\n        return period;\r\n    }\r\n    function mark(name, time) {\r\n        var currentTime = time !== null && time !== void 0 ? time : now();\r\n        var diff = 0;\r\n        if (marks.length > 0) {\r\n            diff = currentTime - marks[marks.length - 1].time;\r\n        }\r\n        marks.push({ name: name, time: currentTime, diff: diff });\r\n    }\r\n    var timerObj = {\r\n        get startTime() {\r\n            return startTime;\r\n        },\r\n        get endTime() {\r\n            return endTime;\r\n        },\r\n        get period() {\r\n            return period;\r\n        },\r\n        stop: stop,\r\n        mark: mark,\r\n        marks: marks\r\n    };\r\n    timers[timerName] = timerObj;\r\n    return timerObj;\r\n}\n\nvar WebSocketConstructor = Utils.isNode() ? require(\"ws\") : window.WebSocket;\r\nvar WS = (function () {\r\n    function WS(settings, logger) {\r\n        this.startupTimer = timer(\"connection\");\r\n        this._running = true;\r\n        this._registry = lib();\r\n        this.wsRequests = [];\r\n        this.settings = settings;\r\n        this.logger = logger;\r\n        if (!this.settings.ws) {\r\n            throw new Error(\"ws is missing\");\r\n        }\r\n    }\r\n    WS.prototype.onMessage = function (callback) {\r\n        return this._registry.add(\"onMessage\", callback);\r\n    };\r\n    WS.prototype.send = function (msg, options) {\r\n        var _this = this;\r\n        return new Promise(function (resolve, reject) {\r\n            _this.waitForSocketConnection(function () {\r\n                var _a;\r\n                try {\r\n                    (_a = _this.ws) === null || _a === void 0 ? void 0 : _a.send(msg);\r\n                    resolve();\r\n                }\r\n                catch (e) {\r\n                    reject(e);\r\n                }\r\n            }, reject);\r\n        });\r\n    };\r\n    WS.prototype.open = function () {\r\n        var _this = this;\r\n        this.logger.info(\"opening ws...\");\r\n        this._running = true;\r\n        return new Promise(function (resolve, reject) {\r\n            _this.waitForSocketConnection(resolve, reject);\r\n        });\r\n    };\r\n    WS.prototype.close = function () {\r\n        this._running = false;\r\n        if (this.ws) {\r\n            this.ws.close();\r\n        }\r\n        return Promise.resolve();\r\n    };\r\n    WS.prototype.onConnectedChanged = function (callback) {\r\n        return this._registry.add(\"onConnectedChanged\", callback);\r\n    };\r\n    WS.prototype.name = function () {\r\n        return this.settings.ws;\r\n    };\r\n    WS.prototype.reconnect = function () {\r\n        var _a;\r\n        (_a = this.ws) === null || _a === void 0 ? void 0 : _a.close();\r\n        var pw = new PromiseWrapper();\r\n        this.waitForSocketConnection(function () {\r\n            pw.resolve();\r\n        });\r\n        return pw.promise;\r\n    };\r\n    WS.prototype.waitForSocketConnection = function (callback, failed) {\r\n        var _a;\r\n        failed = failed !== null && failed !== void 0 ? failed : (function () { });\r\n        if (!this._running) {\r\n            failed(\"wait for socket on \" + this.settings.ws + \" failed - socket closed by user\");\r\n            return;\r\n        }\r\n        if (((_a = this.ws) === null || _a === void 0 ? void 0 : _a.readyState) === 1) {\r\n            callback();\r\n            return;\r\n        }\r\n        this.wsRequests.push({ callback: callback, failed: failed });\r\n        if (this.wsRequests.length > 1) {\r\n            return;\r\n        }\r\n        this.openSocket();\r\n    };\r\n    WS.prototype.openSocket = function (retryInterval, retriesLeft) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _a;\r\n            var _this = this;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        this.startupTimer.mark(\"opening-socket\");\r\n                        if (retryInterval === undefined) {\r\n                            retryInterval = this.settings.reconnectInterval;\r\n                        }\r\n                        if (typeof retriesLeft === \"undefined\") {\r\n                            retriesLeft = this.settings.reconnectAttempts;\r\n                        }\r\n                        if (retriesLeft !== undefined) {\r\n                            if (retriesLeft === 0) {\r\n                                this.notifyForSocketState(\"wait for socket on \" + this.settings.ws + \" failed - no more retries left\");\r\n                                return [2];\r\n                            }\r\n                            this.logger.debug(\"will retry \" + retriesLeft + \" more times (every \" + retryInterval + \" ms)\");\r\n                        }\r\n                        _b.label = 1;\r\n                    case 1:\r\n                        _b.trys.push([1, 3, , 4]);\r\n                        return [4, this.initiateSocket()];\r\n                    case 2:\r\n                        _b.sent();\r\n                        this.startupTimer.mark(\"socket-initiated\");\r\n                        this.notifyForSocketState();\r\n                        return [3, 4];\r\n                    case 3:\r\n                        _a = _b.sent();\r\n                        setTimeout(function () {\r\n                            var retries = retriesLeft === undefined ? undefined : retriesLeft - 1;\r\n                            _this.openSocket(retryInterval, retries);\r\n                        }, retryInterval);\r\n                        return [3, 4];\r\n                    case 4: return [2];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    WS.prototype.initiateSocket = function () {\r\n        var _this = this;\r\n        var pw = new PromiseWrapper();\r\n        this.logger.debug(\"initiating ws to \" + this.settings.ws + \"...\");\r\n        this.ws = new WebSocketConstructor(this.settings.ws || \"\");\r\n        this.ws.onerror = function (err) {\r\n            var reason = \"\";\r\n            try {\r\n                reason = JSON.stringify(err);\r\n            }\r\n            catch (error) {\r\n                var seen_1 = new WeakSet();\r\n                var replacer = function (key, value) {\r\n                    if (typeof value === \"object\" && value !== null) {\r\n                        if (seen_1.has(value)) {\r\n                            return;\r\n                        }\r\n                        seen_1.add(value);\r\n                    }\r\n                    return value;\r\n                };\r\n                reason = JSON.stringify(err, replacer);\r\n            }\r\n            pw.reject(\"error\");\r\n            _this.notifyStatusChanged(false, reason);\r\n        };\r\n        this.ws.onclose = function (err) {\r\n            _this.logger.info(\"ws closed \" + err);\r\n            pw.reject(\"closed\");\r\n            _this.notifyStatusChanged(false);\r\n        };\r\n        this.ws.onopen = function () {\r\n            var _a;\r\n            _this.startupTimer.mark(\"ws-opened\");\r\n            _this.logger.info(\"ws opened \" + ((_a = _this.settings.identity) === null || _a === void 0 ? void 0 : _a.application));\r\n            pw.resolve();\r\n            _this.notifyStatusChanged(true);\r\n        };\r\n        this.ws.onmessage = function (message) {\r\n            _this._registry.execute(\"onMessage\", message.data);\r\n        };\r\n        return pw.promise;\r\n    };\r\n    WS.prototype.notifyForSocketState = function (error) {\r\n        this.wsRequests.forEach(function (wsRequest) {\r\n            if (error) {\r\n                if (wsRequest.failed) {\r\n                    wsRequest.failed(error);\r\n                }\r\n            }\r\n            else {\r\n                wsRequest.callback();\r\n            }\r\n        });\r\n        this.wsRequests = [];\r\n    };\r\n    WS.prototype.notifyStatusChanged = function (status, reason) {\r\n        this._registry.execute(\"onConnectedChanged\", status, reason);\r\n    };\r\n    return WS;\r\n}());\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\n// Found this seed-based random generator somewhere\n// Based on The Central Randomizer 1.3 (C) 1997 by Paul Houle (houle@msc.cornell.edu)\n\nvar seed = 1;\n\n/**\n * return a random number based on a seed\n * @param seed\n * @returns {number}\n */\nfunction getNextValue() {\n    seed = (seed * 9301 + 49297) % 233280;\n    return seed/(233280.0);\n}\n\nfunction setSeed(_seed_) {\n    seed = _seed_;\n}\n\nvar randomFromSeed = {\n    nextValue: getNextValue,\n    seed: setSeed\n};\n\nvar ORIGINAL = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-';\nvar alphabet;\nvar previousSeed;\n\nvar shuffled;\n\nfunction reset() {\n    shuffled = false;\n}\n\nfunction setCharacters(_alphabet_) {\n    if (!_alphabet_) {\n        if (alphabet !== ORIGINAL) {\n            alphabet = ORIGINAL;\n            reset();\n        }\n        return;\n    }\n\n    if (_alphabet_ === alphabet) {\n        return;\n    }\n\n    if (_alphabet_.length !== ORIGINAL.length) {\n        throw new Error('Custom alphabet for shortid must be ' + ORIGINAL.length + ' unique characters. You submitted ' + _alphabet_.length + ' characters: ' + _alphabet_);\n    }\n\n    var unique = _alphabet_.split('').filter(function(item, ind, arr){\n       return ind !== arr.lastIndexOf(item);\n    });\n\n    if (unique.length) {\n        throw new Error('Custom alphabet for shortid must be ' + ORIGINAL.length + ' unique characters. These characters were not unique: ' + unique.join(', '));\n    }\n\n    alphabet = _alphabet_;\n    reset();\n}\n\nfunction characters(_alphabet_) {\n    setCharacters(_alphabet_);\n    return alphabet;\n}\n\nfunction setSeed$1(seed) {\n    randomFromSeed.seed(seed);\n    if (previousSeed !== seed) {\n        reset();\n        previousSeed = seed;\n    }\n}\n\nfunction shuffle() {\n    if (!alphabet) {\n        setCharacters(ORIGINAL);\n    }\n\n    var sourceArray = alphabet.split('');\n    var targetArray = [];\n    var r = randomFromSeed.nextValue();\n    var characterIndex;\n\n    while (sourceArray.length > 0) {\n        r = randomFromSeed.nextValue();\n        characterIndex = Math.floor(r * sourceArray.length);\n        targetArray.push(sourceArray.splice(characterIndex, 1)[0]);\n    }\n    return targetArray.join('');\n}\n\nfunction getShuffled() {\n    if (shuffled) {\n        return shuffled;\n    }\n    shuffled = shuffle();\n    return shuffled;\n}\n\n/**\n * lookup shuffled letter\n * @param index\n * @returns {string}\n */\nfunction lookup(index) {\n    var alphabetShuffled = getShuffled();\n    return alphabetShuffled[index];\n}\n\nvar alphabet_1 = {\n    characters: characters,\n    seed: setSeed$1,\n    lookup: lookup,\n    shuffled: getShuffled\n};\n\nvar crypto = typeof window === 'object' && (window.crypto || window.msCrypto); // IE 11 uses window.msCrypto\n\nfunction randomByte() {\n    if (!crypto || !crypto.getRandomValues) {\n        return Math.floor(Math.random() * 256) & 0x30;\n    }\n    var dest = new Uint8Array(1);\n    crypto.getRandomValues(dest);\n    return dest[0] & 0x30;\n}\n\nvar randomByteBrowser = randomByte;\n\nfunction encode(lookup, number) {\n    var loopCounter = 0;\n    var done;\n\n    var str = '';\n\n    while (!done) {\n        str = str + lookup( ( (number >> (4 * loopCounter)) & 0x0f ) | randomByteBrowser() );\n        done = number < (Math.pow(16, loopCounter + 1 ) );\n        loopCounter++;\n    }\n    return str;\n}\n\nvar encode_1 = encode;\n\n/**\n * Decode the id to get the version and worker\n * Mainly for debugging and testing.\n * @param id - the shortid-generated id.\n */\nfunction decode(id) {\n    var characters = alphabet_1.shuffled();\n    return {\n        version: characters.indexOf(id.substr(0, 1)) & 0x0f,\n        worker: characters.indexOf(id.substr(1, 1)) & 0x0f\n    };\n}\n\nvar decode_1 = decode;\n\nfunction isShortId(id) {\n    if (!id || typeof id !== 'string' || id.length < 6 ) {\n        return false;\n    }\n\n    var characters = alphabet_1.characters();\n    var len = id.length;\n    for(var i = 0; i < len;i++) {\n        if (characters.indexOf(id[i]) === -1) {\n            return false;\n        }\n    }\n    return true;\n}\n\nvar isValid = isShortId;\n\nvar lib$1 = createCommonjsModule(function (module) {\n\n\n\n\n\n\n// Ignore all milliseconds before a certain time to reduce the size of the date entropy without sacrificing uniqueness.\n// This number should be updated every year or so to keep the generated id short.\n// To regenerate `new Date() - 0` and bump the version. Always bump the version!\nvar REDUCE_TIME = 1459707606518;\n\n// don't change unless we change the algos or REDUCE_TIME\n// must be an integer and less than 16\nvar version = 6;\n\n// if you are using cluster or multiple servers use this to make each instance\n// has a unique value for worker\n// Note: I don't know if this is automatically set when using third\n// party cluster solutions such as pm2.\nvar clusterWorkerId =  0;\n\n// Counter is used when shortid is called multiple times in one second.\nvar counter;\n\n// Remember the last time shortid was called in case counter is needed.\nvar previousSeconds;\n\n/**\n * Generate unique id\n * Returns string id\n */\nfunction generate() {\n\n    var str = '';\n\n    var seconds = Math.floor((Date.now() - REDUCE_TIME) * 0.001);\n\n    if (seconds === previousSeconds) {\n        counter++;\n    } else {\n        counter = 0;\n        previousSeconds = seconds;\n    }\n\n    str = str + encode_1(alphabet_1.lookup, version);\n    str = str + encode_1(alphabet_1.lookup, clusterWorkerId);\n    if (counter > 0) {\n        str = str + encode_1(alphabet_1.lookup, counter);\n    }\n    str = str + encode_1(alphabet_1.lookup, seconds);\n\n    return str;\n}\n\n\n/**\n * Set the seed.\n * Highly recommended if you don't want people to try to figure out your id schema.\n * exposed as shortid.seed(int)\n * @param seed Integer value to seed the random alphabet.  ALWAYS USE THE SAME SEED or you might get overlaps.\n */\nfunction seed(seedValue) {\n    alphabet_1.seed(seedValue);\n    return module.exports;\n}\n\n/**\n * Set the cluster worker or machine id\n * exposed as shortid.worker(int)\n * @param workerId worker must be positive integer.  Number less than 16 is recommended.\n * returns shortid module so it can be chained.\n */\nfunction worker(workerId) {\n    clusterWorkerId = workerId;\n    return module.exports;\n}\n\n/**\n *\n * sets new characters to use in the alphabet\n * returns the shuffled alphabet\n */\nfunction characters(newCharacters) {\n    if (newCharacters !== undefined) {\n        alphabet_1.characters(newCharacters);\n    }\n\n    return alphabet_1.shuffled();\n}\n\n\n// Export all other functions as properties of the generate function\nmodule.exports = generate;\nmodule.exports.generate = generate;\nmodule.exports.seed = seed;\nmodule.exports.worker = worker;\nmodule.exports.characters = characters;\nmodule.exports.decode = decode_1;\nmodule.exports.isValid = isValid;\n});\nvar lib_1 = lib$1.generate;\nvar lib_2 = lib$1.seed;\nvar lib_3 = lib$1.worker;\nvar lib_4 = lib$1.characters;\nvar lib_5 = lib$1.decode;\nvar lib_6 = lib$1.isValid;\n\nvar shortid = lib$1;\n\nfunction domainSession (domain, connection, logger, successMessages, errorMessages) {\r\n    if (domain == null) {\r\n        domain = \"global\";\r\n    }\r\n    successMessages = successMessages || [\"success\"];\r\n    errorMessages = errorMessages || [\"error\"];\r\n    var isJoined = false;\r\n    var tryReconnecting = false;\r\n    var _latestOptions;\r\n    var _connectionOn = false;\r\n    var callbacks = lib();\r\n    connection.disconnected(handleConnectionDisconnected);\r\n    connection.loggedIn(handleConnectionLoggedIn);\r\n    connection.on(\"success\", function (msg) { return handleSuccessMessage(msg); });\r\n    connection.on(\"error\", function (msg) { return handleErrorMessage(msg); });\r\n    connection.on(\"result\", function (msg) { return handleSuccessMessage(msg); });\r\n    if (successMessages) {\r\n        successMessages.forEach(function (sm) {\r\n            connection.on(sm, function (msg) { return handleSuccessMessage(msg); });\r\n        });\r\n    }\r\n    if (errorMessages) {\r\n        errorMessages.forEach(function (sm) {\r\n            connection.on(sm, function (msg) { return handleErrorMessage(msg); });\r\n        });\r\n    }\r\n    var requestsMap = {};\r\n    function join(options) {\r\n        _latestOptions = options;\r\n        return new Promise(function (resolve, reject) {\r\n            if (isJoined) {\r\n                resolve();\r\n                return;\r\n            }\r\n            var joinPromise;\r\n            if (domain === \"global\") {\r\n                joinPromise = _connectionOn ? Promise.resolve({}) : Promise.reject(\"not connected to gateway\");\r\n            }\r\n            else {\r\n                logger.debug(\"joining domain \" + domain);\r\n                var joinMsg = {\r\n                    type: \"join\",\r\n                    destination: domain,\r\n                    domain: \"global\",\r\n                    options: options,\r\n                };\r\n                joinPromise = send(joinMsg);\r\n            }\r\n            joinPromise\r\n                .then(function () {\r\n                handleJoined();\r\n                resolve();\r\n            })\r\n                .catch(function (err) {\r\n                logger.debug(\"error joining \" + domain + \" domain: \" + JSON.stringify(err));\r\n                reject(err);\r\n            });\r\n        });\r\n    }\r\n    function leave() {\r\n        if (domain === \"global\") {\r\n            return Promise.resolve();\r\n        }\r\n        logger.debug(\"stopping session \" + domain + \"...\");\r\n        var leaveMsg = {\r\n            type: \"leave\",\r\n            destination: domain,\r\n            domain: \"global\",\r\n        };\r\n        tryReconnecting = false;\r\n        return send(leaveMsg)\r\n            .then(function () {\r\n            isJoined = false;\r\n            callbacks.execute(\"onLeft\");\r\n        })\r\n            .catch(function () {\r\n            isJoined = false;\r\n            callbacks.execute(\"onLeft\");\r\n        });\r\n    }\r\n    function handleJoined() {\r\n        logger.debug(\"did join \" + domain);\r\n        isJoined = true;\r\n        var wasReconnect = tryReconnecting;\r\n        tryReconnecting = false;\r\n        callbacks.execute(\"onJoined\", wasReconnect);\r\n    }\r\n    function handleConnectionDisconnected() {\r\n        _connectionOn = false;\r\n        logger.debug(\"connection is down\");\r\n        isJoined = false;\r\n        tryReconnecting = true;\r\n        callbacks.execute(\"onLeft\", { disconnected: true });\r\n    }\r\n    function handleConnectionLoggedIn() {\r\n        _connectionOn = true;\r\n        if (tryReconnecting) {\r\n            logger.debug(\"connection is now up - trying to reconnect...\");\r\n            join(_latestOptions);\r\n        }\r\n    }\r\n    function onJoined(callback) {\r\n        if (isJoined) {\r\n            callback(false);\r\n        }\r\n        return callbacks.add(\"onJoined\", callback);\r\n    }\r\n    function onLeft(callback) {\r\n        if (!isJoined) {\r\n            callback();\r\n        }\r\n        return callbacks.add(\"onLeft\", callback);\r\n    }\r\n    function handleErrorMessage(msg) {\r\n        if (domain !== msg.domain) {\r\n            return;\r\n        }\r\n        var requestId = msg.request_id;\r\n        if (!requestId) {\r\n            return;\r\n        }\r\n        var entry = requestsMap[requestId];\r\n        if (!entry) {\r\n            return;\r\n        }\r\n        entry.error(msg);\r\n    }\r\n    function handleSuccessMessage(msg) {\r\n        if (msg.domain !== domain) {\r\n            return;\r\n        }\r\n        var requestId = msg.request_id;\r\n        if (!requestId) {\r\n            return;\r\n        }\r\n        var entry = requestsMap[requestId];\r\n        if (!entry) {\r\n            return;\r\n        }\r\n        entry.success(msg);\r\n    }\r\n    function getNextRequestId() {\r\n        return shortid();\r\n    }\r\n    function send(msg, tag, options) {\r\n        options = options || {};\r\n        msg.request_id = msg.request_id || getNextRequestId();\r\n        msg.domain = msg.domain || domain;\r\n        if (!options.skipPeerId) {\r\n            msg.peer_id = connection.peerId;\r\n        }\r\n        var requestId = msg.request_id;\r\n        return new Promise(function (resolve, reject) {\r\n            requestsMap[requestId] = {\r\n                success: function (successMsg) {\r\n                    delete requestsMap[requestId];\r\n                    successMsg._tag = tag;\r\n                    resolve(successMsg);\r\n                },\r\n                error: function (errorMsg) {\r\n                    logger.warn(\"GW error - \" + JSON.stringify(errorMsg) + \" for request \" + JSON.stringify(msg));\r\n                    delete requestsMap[requestId];\r\n                    errorMsg._tag = tag;\r\n                    reject(errorMsg);\r\n                },\r\n            };\r\n            connection\r\n                .send(msg, options)\r\n                .catch(function (err) {\r\n                requestsMap[requestId].error({ err: err });\r\n            });\r\n        });\r\n    }\r\n    function sendFireAndForget(msg) {\r\n        msg.request_id = msg.request_id ? msg.request_id : getNextRequestId();\r\n        msg.domain = msg.domain || domain;\r\n        msg.peer_id = connection.peerId;\r\n        return connection.send(msg);\r\n    }\r\n    return {\r\n        join: join,\r\n        leave: leave,\r\n        onJoined: onJoined,\r\n        onLeft: onLeft,\r\n        send: send,\r\n        sendFireAndForget: sendFireAndForget,\r\n        on: function (type, callback) {\r\n            connection.on(type, function (msg) {\r\n                if (msg.domain !== domain) {\r\n                    return;\r\n                }\r\n                try {\r\n                    callback(msg);\r\n                }\r\n                catch (e) {\r\n                    logger.error(\"Callback  failed: \" + e + \" \\n \" + e.stack + \" \\n msg was: \" + JSON.stringify(msg), e);\r\n                }\r\n            });\r\n        },\r\n        loggedIn: function (callback) { return connection.loggedIn(callback); },\r\n        connected: function (callback) { return connection.connected(callback); },\r\n        disconnected: function (callback) { return connection.disconnected(callback); },\r\n        get peerId() {\r\n            return connection.peerId;\r\n        },\r\n        get domain() {\r\n            return domain;\r\n        },\r\n    };\r\n}\n\nvar GW3ProtocolImpl = (function () {\r\n    function GW3ProtocolImpl(connection, settings, logger) {\r\n        var _this = this;\r\n        this.connection = connection;\r\n        this.settings = settings;\r\n        this.logger = logger;\r\n        this.protocolVersion = 3;\r\n        this.datePrefix = \"#T42_DATE#\";\r\n        this.datePrefixLen = this.datePrefix.length;\r\n        this.dateMinLen = this.datePrefixLen + 1;\r\n        this.datePrefixFirstChar = this.datePrefix[0];\r\n        this.registry = lib();\r\n        this._isLoggedIn = false;\r\n        this.shouldTryLogin = true;\r\n        this.initialLogin = true;\r\n        this.initialLoginAttempts = 3;\r\n        this.sessions = [];\r\n        connection.disconnected(function () {\r\n            _this.handleDisconnected();\r\n        });\r\n        this.ping();\r\n    }\r\n    Object.defineProperty(GW3ProtocolImpl.prototype, \"isLoggedIn\", {\r\n        get: function () {\r\n            return this._isLoggedIn;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    GW3ProtocolImpl.prototype.processStringMessage = function (message) {\r\n        var _this = this;\r\n        var msg = JSON.parse(message, function (key, value) {\r\n            if (typeof value !== \"string\") {\r\n                return value;\r\n            }\r\n            if (value.length < _this.dateMinLen) {\r\n                return value;\r\n            }\r\n            if (value[0] !== _this.datePrefixFirstChar) {\r\n                return value;\r\n            }\r\n            if (value.substring(0, _this.datePrefixLen) !== _this.datePrefix) {\r\n                return value;\r\n            }\r\n            try {\r\n                var milliseconds = parseInt(value.substring(_this.datePrefixLen, value.length), 10);\r\n                if (isNaN(milliseconds)) {\r\n                    return value;\r\n                }\r\n                return new Date(milliseconds);\r\n            }\r\n            catch (ex) {\r\n                return value;\r\n            }\r\n        });\r\n        return {\r\n            msg: msg,\r\n            msgType: msg.type,\r\n        };\r\n    };\r\n    GW3ProtocolImpl.prototype.createStringMessage = function (message) {\r\n        var oldToJson = Date.prototype.toJSON;\r\n        try {\r\n            var datePrefix_1 = this.datePrefix;\r\n            Date.prototype.toJSON = function () {\r\n                return datePrefix_1 + this.getTime();\r\n            };\r\n            var result = JSON.stringify(message);\r\n            return result;\r\n        }\r\n        finally {\r\n            Date.prototype.toJSON = oldToJson;\r\n        }\r\n    };\r\n    GW3ProtocolImpl.prototype.processObjectMessage = function (message) {\r\n        if (!message.type) {\r\n            throw new Error(\"Object should have type property\");\r\n        }\r\n        return {\r\n            msg: message,\r\n            msgType: message.type,\r\n        };\r\n    };\r\n    GW3ProtocolImpl.prototype.createObjectMessage = function (message) {\r\n        return message;\r\n    };\r\n    GW3ProtocolImpl.prototype.login = function (config, reconnect) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var authentication, token, e_1, _a, helloMsg, sendOptions, welcomeMsg, msg, token, _b, err_1;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0:\r\n                        this.logger.debug(\"logging in...\");\r\n                        this.loginConfig = config;\r\n                        if (!this.loginConfig) {\r\n                            this.loginConfig = { username: \"\", password: \"\" };\r\n                        }\r\n                        this.shouldTryLogin = true;\r\n                        authentication = {};\r\n                        this.connection.gatewayToken = config.gatewayToken;\r\n                        if (!config.gatewayToken) return [3, 5];\r\n                        if (!reconnect) return [3, 4];\r\n                        _c.label = 1;\r\n                    case 1:\r\n                        _c.trys.push([1, 3, , 4]);\r\n                        return [4, this.getNewGWToken()];\r\n                    case 2:\r\n                        token = _c.sent();\r\n                        config.gatewayToken = token;\r\n                        return [3, 4];\r\n                    case 3:\r\n                        e_1 = _c.sent();\r\n                        this.logger.warn(\"failed to get GW token when reconnecting \" + ((e_1 === null || e_1 === void 0 ? void 0 : e_1.message) || e_1));\r\n                        return [3, 4];\r\n                    case 4:\r\n                        authentication.method = \"gateway-token\";\r\n                        authentication.token = config.gatewayToken;\r\n                        this.connection.gatewayToken = config.gatewayToken;\r\n                        return [3, 10];\r\n                    case 5:\r\n                        if (!(config.flowName === \"sspi\")) return [3, 9];\r\n                        authentication.provider = \"win\";\r\n                        authentication.method = \"access-token\";\r\n                        if (!(config.flowCallback && config.sessionId)) return [3, 7];\r\n                        _a = authentication;\r\n                        return [4, config.flowCallback(config.sessionId, null)];\r\n                    case 6:\r\n                        _a.token =\r\n                            (_c.sent())\r\n                                .data\r\n                                .toString(\"base64\");\r\n                        return [3, 8];\r\n                    case 7: throw new Error(\"Invalid SSPI config\");\r\n                    case 8: return [3, 10];\r\n                    case 9:\r\n                        if (config.token) {\r\n                            authentication.method = \"access-token\";\r\n                            authentication.token = config.token;\r\n                        }\r\n                        else if (config.username) {\r\n                            authentication.method = \"secret\";\r\n                            authentication.login = config.username;\r\n                            authentication.secret = config.password;\r\n                        }\r\n                        else if (config.provider) {\r\n                            authentication.provider = config.provider;\r\n                            authentication.providerContext = config.providerContext;\r\n                        }\r\n                        else {\r\n                            throw new Error(\"invalid auth message\" + JSON.stringify(config));\r\n                        }\r\n                        _c.label = 10;\r\n                    case 10:\r\n                        helloMsg = {\r\n                            type: \"hello\",\r\n                            identity: this.settings.identity,\r\n                            authentication: authentication\r\n                        };\r\n                        if (config.sessionId) {\r\n                            helloMsg.request_id = config.sessionId;\r\n                        }\r\n                        this.globalDomain = domainSession(\"global\", this.connection, this.logger.subLogger(\"global-domain\"), [\r\n                            \"welcome\",\r\n                            \"token\",\r\n                            \"authentication-request\"\r\n                        ]);\r\n                        sendOptions = { skipPeerId: true };\r\n                        if (this.initialLogin) {\r\n                            sendOptions.retryInterval = this.settings.reconnectInterval;\r\n                            sendOptions.maxRetries = this.settings.reconnectAttempts;\r\n                        }\r\n                        _c.label = 11;\r\n                    case 11:\r\n                        _c.trys.push([11, 19, 20, 21]);\r\n                        welcomeMsg = void 0;\r\n                        _c.label = 12;\r\n                    case 12:\r\n                        return [4, this.globalDomain.send(helloMsg, undefined, sendOptions)];\r\n                    case 13:\r\n                        msg = _c.sent();\r\n                        if (!(msg.type === \"authentication-request\")) return [3, 16];\r\n                        token = Buffer.from(msg.authentication.token, \"base64\");\r\n                        if (!(config.flowCallback && config.sessionId)) return [3, 15];\r\n                        _b = helloMsg.authentication;\r\n                        return [4, config.flowCallback(config.sessionId, token)];\r\n                    case 14:\r\n                        _b.token =\r\n                            (_c.sent())\r\n                                .data\r\n                                .toString(\"base64\");\r\n                        _c.label = 15;\r\n                    case 15:\r\n                        helloMsg.request_id = config.sessionId;\r\n                        return [3, 12];\r\n                    case 16:\r\n                        if (msg.type === \"welcome\") {\r\n                            welcomeMsg = msg;\r\n                            return [3, 18];\r\n                        }\r\n                        else if (msg.type === \"error\") {\r\n                            throw new Error(\"Authentication failed: \" + msg.reason);\r\n                        }\r\n                        else {\r\n                            throw new Error(\"Unexpected message type during authentication: \" + msg.type);\r\n                        }\r\n                    case 17: return [3, 12];\r\n                    case 18:\r\n                        this.initialLogin = false;\r\n                        this.logger.debug(\"login successful with peerId \" + welcomeMsg.peer_id);\r\n                        this.connection.peerId = welcomeMsg.peer_id;\r\n                        this.connection.resolvedIdentity = welcomeMsg.resolved_identity;\r\n                        this.connection.availableDomains = welcomeMsg.available_domains;\r\n                        if (welcomeMsg.options) {\r\n                            this.connection.token = welcomeMsg.options.access_token;\r\n                            this.connection.info = welcomeMsg.options.info;\r\n                        }\r\n                        this.setLoggedIn(true);\r\n                        return [2, welcomeMsg.resolved_identity];\r\n                    case 19:\r\n                        err_1 = _c.sent();\r\n                        this.logger.error(\"error sending hello message - \" + (err_1.message || err_1.msg || err_1.reason || err_1), err_1);\r\n                        throw err_1;\r\n                    case 20:\r\n                        if (config && config.flowCallback && config.sessionId) {\r\n                            config.flowCallback(config.sessionId, null);\r\n                        }\r\n                        return [7];\r\n                    case 21: return [2];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    GW3ProtocolImpl.prototype.logout = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var promises;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        this.logger.debug(\"logging out...\");\r\n                        this.shouldTryLogin = false;\r\n                        if (this.pingTimer) {\r\n                            clearTimeout(this.pingTimer);\r\n                        }\r\n                        promises = this.sessions.map(function (session) {\r\n                            session.leave();\r\n                        });\r\n                        return [4, Promise.all(promises)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [2];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    GW3ProtocolImpl.prototype.loggedIn = function (callback) {\r\n        if (this._isLoggedIn) {\r\n            callback();\r\n        }\r\n        return this.registry.add(\"onLoggedIn\", callback);\r\n    };\r\n    GW3ProtocolImpl.prototype.domain = function (domainName, domainLogger, successMessages, errorMessages) {\r\n        var session = this.sessions.filter(function (s) { return s.domain === domainName; })[0];\r\n        if (!session) {\r\n            session = domainSession(domainName, this.connection, domainLogger, successMessages, errorMessages);\r\n            this.sessions.push(session);\r\n        }\r\n        return session;\r\n    };\r\n    GW3ProtocolImpl.prototype.handleDisconnected = function () {\r\n        var _this = this;\r\n        this.setLoggedIn(false);\r\n        var tryToLogin = this.shouldTryLogin;\r\n        if (tryToLogin && this.initialLogin) {\r\n            if (this.initialLoginAttempts <= 0) {\r\n                return;\r\n            }\r\n            this.initialLoginAttempts--;\r\n        }\r\n        this.logger.debug(\"disconnected - will try new login?\" + this.shouldTryLogin);\r\n        if (this.shouldTryLogin) {\r\n            if (!this.loginConfig) {\r\n                throw new Error(\"no login info\");\r\n            }\r\n            this.connection.login(this.loginConfig, true)\r\n                .catch(function () {\r\n                setTimeout(_this.handleDisconnected.bind(_this), _this.settings.reconnectInterval || 1000);\r\n            });\r\n        }\r\n    };\r\n    GW3ProtocolImpl.prototype.setLoggedIn = function (value) {\r\n        this._isLoggedIn = value;\r\n        if (this._isLoggedIn) {\r\n            this.registry.execute(\"onLoggedIn\");\r\n        }\r\n    };\r\n    GW3ProtocolImpl.prototype.ping = function () {\r\n        var _this = this;\r\n        if (!this.shouldTryLogin) {\r\n            return;\r\n        }\r\n        if (this._isLoggedIn) {\r\n            this.connection.send({ type: \"ping\" });\r\n        }\r\n        this.pingTimer = setTimeout(function () {\r\n            _this.ping();\r\n        }, 30 * 1000);\r\n    };\r\n    GW3ProtocolImpl.prototype.authToken = function () {\r\n        var createTokenReq = {\r\n            type: \"create-token\"\r\n        };\r\n        if (!this.globalDomain) {\r\n            return Promise.reject(new Error(\"no global domain session\"));\r\n        }\r\n        return this.globalDomain.send(createTokenReq)\r\n            .then(function (res) {\r\n            return res.token;\r\n        });\r\n    };\r\n    GW3ProtocolImpl.prototype.getNewGWToken = function () {\r\n        if (typeof window !== undefined) {\r\n            var glue42gd = window.glue42gd;\r\n            if (glue42gd) {\r\n                return glue42gd.getGWToken();\r\n            }\r\n        }\r\n        return Promise.reject(new Error(\"not running in GD\"));\r\n    };\r\n    return GW3ProtocolImpl;\r\n}());\n\nvar MessageReplayerImpl = (function () {\r\n    function MessageReplayerImpl(specs) {\r\n        this.specsNames = [];\r\n        this.messages = {};\r\n        this.subs = {};\r\n        this.subsRefCount = {};\r\n        this.specs = {};\r\n        for (var _i = 0, specs_1 = specs; _i < specs_1.length; _i++) {\r\n            var spec = specs_1[_i];\r\n            this.specs[spec.name] = spec;\r\n            this.specsNames.push(spec.name);\r\n        }\r\n    }\r\n    MessageReplayerImpl.prototype.init = function (connection) {\r\n        var _this = this;\r\n        this.connection = connection;\r\n        for (var _i = 0, _a = this.specsNames; _i < _a.length; _i++) {\r\n            var name_1 = _a[_i];\r\n            var _loop_1 = function (type) {\r\n                var refCount = this_1.subsRefCount[type];\r\n                if (!refCount) {\r\n                    refCount = 0;\r\n                }\r\n                refCount += 1;\r\n                this_1.subsRefCount[type] = refCount;\r\n                if (refCount > 1) {\r\n                    return \"continue\";\r\n                }\r\n                var sub = connection.on(type, function (msg) { return _this.processMessage(type, msg); });\r\n                this_1.subs[type] = sub;\r\n            };\r\n            var this_1 = this;\r\n            for (var _b = 0, _c = this.specs[name_1].types; _b < _c.length; _b++) {\r\n                var type = _c[_b];\r\n                _loop_1(type);\r\n            }\r\n        }\r\n    };\r\n    MessageReplayerImpl.prototype.processMessage = function (type, msg) {\r\n        if (this.isDone || !msg) {\r\n            return;\r\n        }\r\n        for (var _i = 0, _a = this.specsNames; _i < _a.length; _i++) {\r\n            var name_2 = _a[_i];\r\n            if (this.specs[name_2].types.indexOf(type) !== -1) {\r\n                var messages = this.messages[name_2] || [];\r\n                this.messages[name_2] = messages;\r\n                messages.push(msg);\r\n            }\r\n        }\r\n    };\r\n    MessageReplayerImpl.prototype.drain = function (name, callback) {\r\n        var _a;\r\n        if (callback) {\r\n            (this.messages[name] || []).forEach(callback);\r\n        }\r\n        delete this.messages[name];\r\n        for (var _i = 0, _b = this.specs[name].types; _i < _b.length; _i++) {\r\n            var type = _b[_i];\r\n            this.subsRefCount[type] -= 1;\r\n            if (this.subsRefCount[type] <= 0) {\r\n                (_a = this.connection) === null || _a === void 0 ? void 0 : _a.off(this.subs[type]);\r\n                delete this.subs[type];\r\n                delete this.subsRefCount[type];\r\n            }\r\n        }\r\n        delete this.specs[name];\r\n        if (!this.specs.length) {\r\n            this.isDone = true;\r\n        }\r\n    };\r\n    return MessageReplayerImpl;\r\n}());\n\nvar PromisePlus = function (executor, timeoutMilliseconds, timeoutMessage) {\r\n    return new Promise(function (resolve, reject) {\r\n        var timeout = setTimeout(function () {\r\n            var message = timeoutMessage || \"Promise timeout hit: \" + timeoutMilliseconds;\r\n            reject(message);\r\n        }, timeoutMilliseconds);\r\n        var providedPromise = new Promise(executor);\r\n        providedPromise\r\n            .then(function (result) {\r\n            clearTimeout(timeout);\r\n            resolve(result);\r\n        })\r\n            .catch(function (error) {\r\n            clearTimeout(timeout);\r\n            reject(error);\r\n        });\r\n    });\r\n};\n\nvar WebPlatformTransport = (function () {\r\n    function WebPlatformTransport(settings, logger, identity) {\r\n        this.settings = settings;\r\n        this.logger = logger;\r\n        this.identity = identity;\r\n        this.iAmConnected = false;\r\n        this.parentReady = false;\r\n        this.rejected = false;\r\n        this.children = [];\r\n        this.extContentAvailable = false;\r\n        this.extContentConnecting = false;\r\n        this.extContentConnected = false;\r\n        this.parentInExtMode = false;\r\n        this.parentPingTimeout = 5000;\r\n        this.connectionRequestTimeout = 7000;\r\n        this.defaultTargetString = \"*\";\r\n        this.registry = lib();\r\n        this.messages = {\r\n            connectionAccepted: { name: \"connectionAccepted\", handle: this.handleConnectionAccepted.bind(this) },\r\n            connectionRejected: { name: \"connectionRejected\", handle: this.handleConnectionRejected.bind(this) },\r\n            connectionRequest: { name: \"connectionRequest\", handle: this.handleConnectionRequest.bind(this) },\r\n            parentReady: { name: \"parentReady\", handle: this.handleParentReady.bind(this) },\r\n            parentPing: { name: \"parentPing\", handle: this.handleParentPing.bind(this) },\r\n            platformPing: { name: \"platformPing\", handle: this.handlePlatformPing.bind(this) },\r\n            platformReady: { name: \"platformReady\", handle: this.handlePlatformReady.bind(this) },\r\n            clientUnload: { name: \"clientUnload\", handle: this.handleClientUnload.bind(this) },\r\n            manualUnload: { name: \"manualUnload\", handle: this.handleManualUnload.bind(this) },\r\n            extConnectionResponse: { name: \"extConnectionResponse\", handle: this.handleExtConnectionResponse.bind(this) },\r\n            extSetupRequest: { name: \"extSetupRequest\", handle: this.handleExtSetupRequest.bind(this) },\r\n            gatewayDisconnect: { name: \"gatewayDisconnect\", handle: this.handleGatewayDisconnect.bind(this) },\r\n            gatewayInternalConnect: { name: \"gatewayInternalConnect\", handle: this.handleGatewayInternalConnect.bind(this) }\r\n        };\r\n        this.extContentAvailable = !!window.glue42ext;\r\n        this.setUpMessageListener();\r\n        this.setUpUnload();\r\n        this.setupPlatformUnloadListener();\r\n        if (!this.settings.port) {\r\n            this.parent = window.opener || window.top;\r\n            this.parentType = window.opener ? \"opener\" :\r\n                window.name.indexOf(\"#wsp\") !== -1 ? \"workspace\" : \"top\";\r\n        }\r\n    }\r\n    WebPlatformTransport.prototype.manualSetReadyState = function () {\r\n        this.iAmConnected = true;\r\n        this.parentReady = true;\r\n    };\r\n    Object.defineProperty(WebPlatformTransport.prototype, \"transportWindowId\", {\r\n        get: function () {\r\n            return this.publicWindowId;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(WebPlatformTransport.prototype, \"communicationId\", {\r\n        get: function () {\r\n            return this._communicationId;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    WebPlatformTransport.prototype.sendObject = function (msg) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                if (this.extContentConnected) {\r\n                    return [2, window.postMessage({ glue42ExtOut: msg }, this.defaultTargetString)];\r\n                }\r\n                if (!this.port) {\r\n                    throw new Error(\"Cannot send message, because the port was not opened yet\");\r\n                }\r\n                this.port.postMessage(msg);\r\n                return [2];\r\n            });\r\n        });\r\n    };\r\n    Object.defineProperty(WebPlatformTransport.prototype, \"isObjectBasedTransport\", {\r\n        get: function () {\r\n            return true;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    WebPlatformTransport.prototype.onMessage = function (callback) {\r\n        return this.registry.add(\"onMessage\", callback);\r\n    };\r\n    WebPlatformTransport.prototype.send = function () {\r\n        return Promise.reject(\"not supported\");\r\n    };\r\n    WebPlatformTransport.prototype.onConnectedChanged = function (callback) {\r\n        return this.registry.add(\"onConnectedChanged\", callback);\r\n    };\r\n    WebPlatformTransport.prototype.open = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        this.logger.debug(\"opening a connection to the web platform gateway.\");\r\n                        return [4, this.connect()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        this.notifyStatusChanged(true);\r\n                        return [2];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    WebPlatformTransport.prototype.close = function () {\r\n        var _a, _b;\r\n        var message = {\r\n            glue42core: {\r\n                type: this.messages.gatewayDisconnect.name,\r\n                data: {\r\n                    clientId: this.myClientId,\r\n                    ownWindowId: (_a = this.identity) === null || _a === void 0 ? void 0 : _a.windowId\r\n                }\r\n            }\r\n        };\r\n        (_b = this.port) === null || _b === void 0 ? void 0 : _b.postMessage(message);\r\n        this.parentReady = false;\r\n        this.notifyStatusChanged(false, \"manual reconnection\");\r\n        return Promise.resolve();\r\n    };\r\n    WebPlatformTransport.prototype.name = function () {\r\n        return \"web-platform\";\r\n    };\r\n    WebPlatformTransport.prototype.reconnect = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4, this.close()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [2, Promise.resolve()];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    WebPlatformTransport.prototype.connect = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!this.settings.port) return [3, 2];\r\n                        return [4, this.initiateInternalConnection()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        this.logger.debug(\"internal web platform connection completed\");\r\n                        return [2];\r\n                    case 2:\r\n                        if (!this.parentType || !this.parent) {\r\n                            throw new Error(\"Cannot initiate a connection, because there is no opener, no top and no port.\");\r\n                        }\r\n                        this.logger.debug(\"opening a \" + (this.parentType === \"opener\" ? \"child\" : \"grandchild\") + \" client web platform connection\");\r\n                        return [4, this.waitParent(this.parent, this.parentType)];\r\n                    case 3:\r\n                        _a.sent();\r\n                        if (!this.parentInExtMode) return [3, 5];\r\n                        return [4, this.requestConnectionPermissionFromExt()];\r\n                    case 4:\r\n                        _a.sent();\r\n                        _a.label = 5;\r\n                    case 5: return [4, this.initiateRemoteConnection(this.parent, this.parentType)];\r\n                    case 6:\r\n                        _a.sent();\r\n                        this.logger.debug(\"the \" + (this.parentType === \"opener\" ? \"child\" : \"grandchild\") + \" client is connected\");\r\n                        return [2];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    WebPlatformTransport.prototype.initiateInternalConnection = function () {\r\n        var _this = this;\r\n        return new Promise(function (resolve, reject) {\r\n            _this.logger.debug(\"opening an internal web platform connection\");\r\n            _this.port = _this.settings.port;\r\n            if (_this.iAmConnected) {\r\n                _this.logger.warn(\"cannot open a new connection, because this client is currently connected\");\r\n                return;\r\n            }\r\n            _this.port.onmessage = function (event) {\r\n                var _a, _b;\r\n                if (_this.iAmConnected && !((_a = event.data) === null || _a === void 0 ? void 0 : _a.glue42core)) {\r\n                    _this.registry.execute(\"onMessage\", event.data);\r\n                    return;\r\n                }\r\n                var data = (_b = event.data) === null || _b === void 0 ? void 0 : _b.glue42core;\r\n                if (!data) {\r\n                    return;\r\n                }\r\n                if (data.type === _this.messages.gatewayInternalConnect.name && data.success) {\r\n                    _this.publicWindowId = _this.settings.windowId;\r\n                    if (_this.identity) {\r\n                        _this.identity.windowId = _this.publicWindowId;\r\n                    }\r\n                    resolve();\r\n                }\r\n                if (data.type === _this.messages.gatewayInternalConnect.name && data.error) {\r\n                    reject(data.error);\r\n                }\r\n            };\r\n            _this.port.postMessage({\r\n                glue42core: {\r\n                    type: _this.messages.gatewayInternalConnect.name\r\n                }\r\n            });\r\n        });\r\n    };\r\n    WebPlatformTransport.prototype.initiateRemoteConnection = function (target, parentType) {\r\n        var _this = this;\r\n        return PromisePlus(function (resolve, reject) {\r\n            var _a;\r\n            _this.connectionResolve = resolve;\r\n            _this.connectionReject = reject;\r\n            _this.myClientId = (_a = _this.myClientId) !== null && _a !== void 0 ? _a : shortid();\r\n            var bridgeInstanceId = _this.parentType === \"workspace\" ? window.name.substring(0, window.name.indexOf(\"#wsp\")) : window.name;\r\n            var request = {\r\n                glue42core: {\r\n                    type: _this.messages.connectionRequest.name,\r\n                    clientId: _this.myClientId,\r\n                    clientType: parentType === \"top\" || parentType === \"workspace\" ? \"grandChild\" : \"child\",\r\n                    bridgeInstanceId: bridgeInstanceId\r\n                }\r\n            };\r\n            _this.logger.debug(\"sending connection request to \" + parentType);\r\n            if (_this.extContentConnecting) {\r\n                request.glue42core.clientType = \"child\";\r\n                request.glue42core.bridgeInstanceId = _this.myClientId;\r\n                request.glue42core.parentWindowId = _this.parentWindowId;\r\n                return window.postMessage(request, _this.defaultTargetString);\r\n            }\r\n            target.postMessage(request, _this.defaultTargetString);\r\n        }, this.connectionRequestTimeout, \"The connection to the opener/top window timed out\");\r\n    };\r\n    WebPlatformTransport.prototype.waitParent = function (target, parentType) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var connectionNotPossibleMsg, parentCheck, error_1;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        connectionNotPossibleMsg = \"Cannot initiate glue, because this window was not opened or created by a glue client\";\r\n                        parentCheck = PromisePlus(function (resolve, reject) {\r\n                            var isIframe = window.self !== window.top;\r\n                            if (parentType === \"top\" && !isIframe) {\r\n                                return reject(connectionNotPossibleMsg);\r\n                            }\r\n                            _this.parentPingResolve = resolve;\r\n                            var message = {\r\n                                glue42core: {\r\n                                    type: parentType === \"opener\" ? _this.messages.platformPing.name : _this.messages.parentPing.name\r\n                                }\r\n                            };\r\n                            _this.logger.debug(\"checking for \" + parentType + \" window availability\");\r\n                            _this.parentPingInterval = setInterval(function () {\r\n                                target.postMessage(message, _this.defaultTargetString);\r\n                            }, 1000);\r\n                        }, this.parentPingTimeout, connectionNotPossibleMsg);\r\n                        parentCheck.catch(function () {\r\n                            if (_this.parentPingInterval) {\r\n                                clearInterval(_this.parentPingInterval);\r\n                                delete _this.parentPingInterval;\r\n                            }\r\n                        });\r\n                        if (!this.extContentAvailable) {\r\n                            return [2, parentCheck];\r\n                        }\r\n                        _a.label = 1;\r\n                    case 1:\r\n                        _a.trys.push([1, 3, , 5]);\r\n                        return [4, parentCheck];\r\n                    case 2:\r\n                        _a.sent();\r\n                        return [2];\r\n                    case 3:\r\n                        error_1 = _a.sent();\r\n                        this.logger.debug(\"the parent check failed, but there is an associated extension content script, requesting permission...\");\r\n                        return [4, this.requestConnectionPermissionFromExt()];\r\n                    case 4:\r\n                        _a.sent();\r\n                        return [3, 5];\r\n                    case 5: return [2];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    WebPlatformTransport.prototype.setUpMessageListener = function () {\r\n        var _this = this;\r\n        if (this.settings.port) {\r\n            this.logger.debug(\"skipping generic message listener, because this is an internal client\");\r\n            return;\r\n        }\r\n        window.addEventListener(\"message\", function (event) {\r\n            var _a;\r\n            var data = (_a = event.data) === null || _a === void 0 ? void 0 : _a.glue42core;\r\n            if (!data || _this.rejected) {\r\n                return;\r\n            }\r\n            if (!_this.checkMessageTypeValid(data.type)) {\r\n                _this.logger.error(\"cannot handle the incoming glue42 core message, because the type is invalid: \" + data.type);\r\n                return;\r\n            }\r\n            var messageType = data.type;\r\n            _this.logger.debug(\"received valid glue42core message of type: \" + messageType);\r\n            _this.messages[messageType].handle(event);\r\n        });\r\n    };\r\n    WebPlatformTransport.prototype.setUpUnload = function () {\r\n        var _this = this;\r\n        if (this.settings.port) {\r\n            this.logger.debug(\"skipping unload event listener, because this is an internal client\");\r\n            return;\r\n        }\r\n        window.addEventListener(\"beforeunload\", function () {\r\n            var _a, _b;\r\n            if (_this.extContentConnected) {\r\n                return;\r\n            }\r\n            var message = {\r\n                glue42core: {\r\n                    type: _this.messages.clientUnload.name,\r\n                    data: {\r\n                        clientId: _this.myClientId,\r\n                        ownWindowId: (_a = _this.identity) === null || _a === void 0 ? void 0 : _a.windowId\r\n                    }\r\n                }\r\n            };\r\n            if (_this.parent) {\r\n                _this.parent.postMessage(message, _this.defaultTargetString);\r\n            }\r\n            (_b = _this.port) === null || _b === void 0 ? void 0 : _b.postMessage(message);\r\n        });\r\n    };\r\n    WebPlatformTransport.prototype.handleParentReady = function (event) {\r\n        var _a;\r\n        this.logger.debug(\"handling the ready signal from the parent, by resoling the pending promise.\");\r\n        this.parentReady = true;\r\n        var data = (_a = event.data) === null || _a === void 0 ? void 0 : _a.glue42core;\r\n        if (data && data.extMode) {\r\n            this.logger.debug(\"my parent is connected to its content script, fetching windowId and proceeding with content script connection\");\r\n            this.parentWindowId = data.extMode.windowId;\r\n            this.parentInExtMode = true;\r\n        }\r\n        if (this.parentPingResolve) {\r\n            this.parentPingResolve();\r\n            delete this.parentPingResolve;\r\n        }\r\n        if (this.parentPingInterval) {\r\n            clearInterval(this.parentPingInterval);\r\n            delete this.parentPingInterval;\r\n        }\r\n    };\r\n    WebPlatformTransport.prototype.handlePlatformReady = function () {\r\n        this.logger.debug(\"the web platform gave the ready signal\");\r\n        this.parentReady = true;\r\n        if (this.parentPingResolve) {\r\n            this.parentPingResolve();\r\n            delete this.parentPingResolve;\r\n        }\r\n        if (this.parentPingInterval) {\r\n            clearInterval(this.parentPingInterval);\r\n            delete this.parentPingInterval;\r\n        }\r\n    };\r\n    WebPlatformTransport.prototype.handleConnectionAccepted = function (event) {\r\n        var _a;\r\n        var data = (_a = event.data) === null || _a === void 0 ? void 0 : _a.glue42core;\r\n        if (this.myClientId === data.clientId) {\r\n            return this.handleAcceptanceOfMyRequest(data);\r\n        }\r\n        return this.handleAcceptanceOfGrandChildRequest(data, event);\r\n    };\r\n    WebPlatformTransport.prototype.handleAcceptanceOfMyRequest = function (data) {\r\n        var _this = this;\r\n        this.logger.debug(\"handling a connection accepted signal targeted at me.\");\r\n        this.isPreferredActivated = data.isPreferredActivated;\r\n        if (this.extContentConnecting) {\r\n            return this.processExtContentConnection(data);\r\n        }\r\n        if (!data.port) {\r\n            this.logger.error(\"cannot set up my connection, because I was not provided with a port\");\r\n            return;\r\n        }\r\n        this.publicWindowId = this.parentType === \"opener\" ? window.name :\r\n            this.parentType === \"top\" ? data.parentWindowId :\r\n                window.name.substring(0, window.name.indexOf(\"#wsp\"));\r\n        if (this.identity && this.parentType !== \"top\") {\r\n            this.identity.windowId = this.publicWindowId;\r\n        }\r\n        if (this.identity && data.appName) {\r\n            this.identity.application = data.appName;\r\n            this.identity.applicationName = data.appName;\r\n        }\r\n        this._communicationId = data.communicationId;\r\n        this.port = data.port;\r\n        this.port.onmessage = function (e) { return _this.registry.execute(\"onMessage\", e.data); };\r\n        if (this.connectionResolve) {\r\n            this.logger.debug(\"my connection is set up, calling the connection resolve.\");\r\n            this.connectionResolve();\r\n            delete this.connectionResolve;\r\n            return;\r\n        }\r\n        this.logger.error(\"unable to call the connection resolve, because no connection promise was found\");\r\n    };\r\n    WebPlatformTransport.prototype.processExtContentConnection = function (data) {\r\n        var _this = this;\r\n        this.logger.debug(\"handling a connection accepted signal targeted at me for extension content connection.\");\r\n        this.extContentConnecting = false;\r\n        this.extContentConnected = true;\r\n        this.publicWindowId = this.parentWindowId || this.myClientId;\r\n        if (this.extContentConnecting && this.identity) {\r\n            this.identity.windowId = this.publicWindowId;\r\n        }\r\n        if (this.identity && data.appName) {\r\n            this.identity.application = data.appName;\r\n            this.identity.applicationName = data.appName;\r\n        }\r\n        window.addEventListener(\"message\", function (event) {\r\n            var _a;\r\n            var extData = (_a = event.data) === null || _a === void 0 ? void 0 : _a.glue42ExtInc;\r\n            if (!extData) {\r\n                return;\r\n            }\r\n            _this.registry.execute(\"onMessage\", extData);\r\n        });\r\n        if (this.connectionResolve) {\r\n            this.logger.debug(\"my connection is set up, calling the connection resolve.\");\r\n            this.connectionResolve();\r\n            delete this.connectionResolve;\r\n            return;\r\n        }\r\n    };\r\n    WebPlatformTransport.prototype.handleAcceptanceOfGrandChildRequest = function (data, event) {\r\n        if (this.extContentConnecting || this.extContentConnected) {\r\n            this.logger.debug(\"cannot process acceptance of a grandchild, because I am connected to a content script\");\r\n            return;\r\n        }\r\n        this.logger.debug(\"handling a connection accepted signal targeted at a grandchild: \" + data.clientId);\r\n        var child = this.children.find(function (c) { return c.grandChildId === data.clientId; });\r\n        if (!child) {\r\n            this.logger.error(\"cannot handle connection accepted for grandchild: \" + data.clientId + \", because there is no grandchild with this id\");\r\n            return;\r\n        }\r\n        child.connected = true;\r\n        this.logger.debug(\"the grandchild connection for \" + data.clientId + \" is set up, forwarding the success message and the gateway port\");\r\n        data.parentWindowId = this.publicWindowId;\r\n        child.source.postMessage(event.data, child.origin, [data.port]);\r\n        return;\r\n    };\r\n    WebPlatformTransport.prototype.handleConnectionRejected = function () {\r\n        this.logger.debug(\"handling a connection rejection. Most likely the reason is that this window was not created by a glue API call\");\r\n        if (this.connectionReject) {\r\n            this.connectionReject(\"The platform connection was rejected. Most likely because this window was not created by a glue API call\");\r\n            delete this.connectionReject;\r\n        }\r\n    };\r\n    WebPlatformTransport.prototype.handleConnectionRequest = function (event) {\r\n        if (this.extContentConnecting) {\r\n            this.logger.debug(\"This connection request event is targeted at the extension content\");\r\n            return;\r\n        }\r\n        var source = event.source;\r\n        var data = event.data.glue42core;\r\n        if (!data.clientType || data.clientType !== \"grandChild\") {\r\n            return this.rejectConnectionRequest(source, event.origin, \"rejecting a connection request, because the source was not opened by a glue API call\");\r\n        }\r\n        if (!data.clientId) {\r\n            return this.rejectConnectionRequest(source, event.origin, \"rejecting a connection request, because the source did not provide a valid id\");\r\n        }\r\n        if (this.parentType !== \"opener\" || !this.parent) {\r\n            return this.rejectConnectionRequest(source, event.origin, \"Cannot forward the connection request, because no direct connection to the platform was found\");\r\n        }\r\n        this.logger.debug(\"handling a connection request for a grandchild: \" + data.clientId);\r\n        this.children.push({ grandChildId: data.clientId, source: source, connected: false, origin: event.origin });\r\n        this.logger.debug(\"grandchild: \" + data.clientId + \" is prepared, forwarding connection request to the platform\");\r\n        this.parent.postMessage(event.data, this.defaultTargetString);\r\n    };\r\n    WebPlatformTransport.prototype.handleParentPing = function (event) {\r\n        if (!this.parentReady) {\r\n            this.logger.debug(\"my parent is not ready, I am ignoring the parent ping\");\r\n            return;\r\n        }\r\n        if (!this.iAmConnected) {\r\n            this.logger.debug(\"i am not fully connected yet, I am ignoring the parent ping\");\r\n            return;\r\n        }\r\n        var message = {\r\n            glue42core: {\r\n                type: this.messages.parentReady.name\r\n            }\r\n        };\r\n        if (this.extContentConnected) {\r\n            message.glue42core.extMode = { windowId: this.myClientId };\r\n        }\r\n        var source = event.source;\r\n        this.logger.debug(\"responding to a parent ping with a ready message\");\r\n        source.postMessage(message, event.origin);\r\n    };\r\n    WebPlatformTransport.prototype.setupPlatformUnloadListener = function () {\r\n        var _this = this;\r\n        this.onMessage(function (msg) {\r\n            if (msg.type === \"platformUnload\") {\r\n                _this.logger.debug(\"detected a web platform unload\");\r\n                _this.parentReady = false;\r\n                _this.notifyStatusChanged(false, \"Gateway unloaded\");\r\n            }\r\n        });\r\n    };\r\n    WebPlatformTransport.prototype.handleManualUnload = function () {\r\n        var _a, _b;\r\n        var message = {\r\n            glue42core: {\r\n                type: this.messages.clientUnload.name,\r\n                data: {\r\n                    clientId: this.myClientId,\r\n                    ownWindowId: (_a = this.identity) === null || _a === void 0 ? void 0 : _a.windowId\r\n                }\r\n            }\r\n        };\r\n        if (this.extContentConnected) {\r\n            return window.postMessage({ glue42ExtOut: message }, this.defaultTargetString);\r\n        }\r\n        (_b = this.port) === null || _b === void 0 ? void 0 : _b.postMessage(message);\r\n    };\r\n    WebPlatformTransport.prototype.handleClientUnload = function (event) {\r\n        var data = event.data.glue42core;\r\n        var clientId = data === null || data === void 0 ? void 0 : data.data.clientId;\r\n        if (!clientId) {\r\n            this.logger.warn(\"cannot process grand child unload, because the provided id was not valid\");\r\n            return;\r\n        }\r\n        var foundChild = this.children.find(function (child) { return child.grandChildId === clientId; });\r\n        if (!foundChild) {\r\n            this.logger.warn(\"cannot process grand child unload, because this client is unaware of this grandchild\");\r\n            return;\r\n        }\r\n        this.logger.debug(\"handling grandchild unload for id: \" + clientId);\r\n        this.children = this.children.filter(function (child) { return child.grandChildId !== clientId; });\r\n    };\r\n    WebPlatformTransport.prototype.handlePlatformPing = function () {\r\n        this.logger.error(\"cannot handle platform ping, because this is not a platform calls handling component\");\r\n    };\r\n    WebPlatformTransport.prototype.notifyStatusChanged = function (status, reason) {\r\n        this.iAmConnected = status;\r\n        this.registry.execute(\"onConnectedChanged\", status, reason);\r\n    };\r\n    WebPlatformTransport.prototype.checkMessageTypeValid = function (typeToValidate) {\r\n        return typeof typeToValidate === \"string\" && !!this.messages[typeToValidate];\r\n    };\r\n    WebPlatformTransport.prototype.rejectConnectionRequest = function (source, origin, reason) {\r\n        this.rejected = true;\r\n        this.logger.error(reason);\r\n        var rejection = {\r\n            glue42core: {\r\n                type: this.messages.connectionRejected.name\r\n            }\r\n        };\r\n        source.postMessage(rejection, origin);\r\n    };\r\n    WebPlatformTransport.prototype.requestConnectionPermissionFromExt = function () {\r\n        var _this = this;\r\n        return this.waitForContentScript()\r\n            .then(function () { return PromisePlus(function (resolve, reject) {\r\n            _this.extConnectionResolve = resolve;\r\n            _this.extConnectionReject = reject;\r\n            var message = {\r\n                glue42core: {\r\n                    type: \"extSetupRequest\"\r\n                }\r\n            };\r\n            _this.logger.debug(\"permission request to the extension content script was sent\");\r\n            window.postMessage(message, _this.defaultTargetString);\r\n        }, _this.parentPingTimeout, \"Cannot initialize glue, because this app was not opened or created by a Glue Client and the request for extension connection timed out\"); });\r\n    };\r\n    WebPlatformTransport.prototype.handleExtConnectionResponse = function (event) {\r\n        var _a;\r\n        var data = (_a = event.data) === null || _a === void 0 ? void 0 : _a.glue42core;\r\n        if (!data.approved && this.extConnectionReject) {\r\n            return this.extConnectionReject(\"Cannot initialize glue, because this app was not opened or created by a Glue Client and the request for extension connection was rejected\");\r\n        }\r\n        if (this.extConnectionResolve) {\r\n            this.extContentConnecting = true;\r\n            this.logger.debug(\"The extension connection was approved, proceeding.\");\r\n            this.extConnectionResolve();\r\n            delete this.extConnectionResolve;\r\n        }\r\n    };\r\n    WebPlatformTransport.prototype.handleExtSetupRequest = function () {\r\n        return;\r\n    };\r\n    WebPlatformTransport.prototype.handleGatewayDisconnect = function () {\r\n        return;\r\n    };\r\n    WebPlatformTransport.prototype.handleGatewayInternalConnect = function () {\r\n        return;\r\n    };\r\n    WebPlatformTransport.prototype.waitForContentScript = function () {\r\n        var _a;\r\n        var contentReady = !!((_a = window.glue42ext) === null || _a === void 0 ? void 0 : _a.content);\r\n        if (contentReady) {\r\n            return Promise.resolve();\r\n        }\r\n        return PromisePlus(function (resolve) {\r\n            window.addEventListener(\"Glue42EXTReady\", function () {\r\n                resolve();\r\n            });\r\n        }, this.connectionRequestTimeout, \"The content script was available, but was never heard to be ready\");\r\n    };\r\n    return WebPlatformTransport;\r\n}());\n\nvar waitForInvocations = function (invocations, callback) {\r\n    var left = invocations;\r\n    return function () {\r\n        left--;\r\n        if (left === 0) {\r\n            callback();\r\n        }\r\n    };\r\n};\n\nvar AsyncSequelizer = (function () {\r\n    function AsyncSequelizer(minSequenceInterval) {\r\n        if (minSequenceInterval === void 0) { minSequenceInterval = 0; }\r\n        this.minSequenceInterval = minSequenceInterval;\r\n        this.queue = [];\r\n        this.isExecutingQueue = false;\r\n    }\r\n    AsyncSequelizer.prototype.enqueue = function (action) {\r\n        var _this = this;\r\n        return new Promise(function (resolve, reject) {\r\n            _this.queue.push({ action: action, resolve: resolve, reject: reject });\r\n            _this.executeQueue();\r\n        });\r\n    };\r\n    AsyncSequelizer.prototype.executeQueue = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var operation, actionResult, error_1;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (this.isExecutingQueue) {\r\n                            return [2];\r\n                        }\r\n                        this.isExecutingQueue = true;\r\n                        _a.label = 1;\r\n                    case 1:\r\n                        if (!this.queue.length) return [3, 7];\r\n                        operation = this.queue.shift();\r\n                        if (!operation) {\r\n                            this.isExecutingQueue = false;\r\n                            return [2];\r\n                        }\r\n                        _a.label = 2;\r\n                    case 2:\r\n                        _a.trys.push([2, 4, , 5]);\r\n                        return [4, operation.action()];\r\n                    case 3:\r\n                        actionResult = _a.sent();\r\n                        operation.resolve(actionResult);\r\n                        return [3, 5];\r\n                    case 4:\r\n                        error_1 = _a.sent();\r\n                        operation.reject(error_1);\r\n                        return [3, 5];\r\n                    case 5: return [4, this.intervalBreak()];\r\n                    case 6:\r\n                        _a.sent();\r\n                        return [3, 1];\r\n                    case 7:\r\n                        this.isExecutingQueue = false;\r\n                        return [2];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    AsyncSequelizer.prototype.intervalBreak = function () {\r\n        var _this = this;\r\n        return new Promise(function (res) { return setTimeout(res, _this.minSequenceInterval); });\r\n    };\r\n    return AsyncSequelizer;\r\n}());\n\nvar Connection = (function () {\r\n    function Connection(settings, logger) {\r\n        this.settings = settings;\r\n        this.logger = logger;\r\n        this.messageHandlers = {};\r\n        this.ids = 1;\r\n        this.registry = lib();\r\n        this._connected = false;\r\n        this.isTrace = false;\r\n        this._swapTransport = false;\r\n        this._switchInProgress = false;\r\n        this._transportSubscriptions = [];\r\n        this._sequelizer = new AsyncSequelizer();\r\n        settings = settings || {};\r\n        settings.reconnectAttempts = settings.reconnectAttempts || 10;\r\n        settings.reconnectInterval = settings.reconnectInterval || 1000;\r\n        if (settings.inproc) {\r\n            this.transport = new InProcTransport(settings.inproc, logger.subLogger(\"inMemory\"));\r\n        }\r\n        else if (settings.sharedWorker) {\r\n            this.transport = new SharedWorkerTransport(settings.sharedWorker, logger.subLogger(\"shared-worker\"));\r\n        }\r\n        else if (settings.webPlatform) {\r\n            this.transport = new WebPlatformTransport(settings.webPlatform, logger.subLogger(\"web-platform\"), settings.identity);\r\n        }\r\n        else if (settings.ws !== undefined) {\r\n            this.transport = new WS(settings, logger.subLogger(\"ws\"));\r\n        }\r\n        else {\r\n            throw new Error(\"No connection information specified\");\r\n        }\r\n        this.isTrace = logger.canPublish(\"trace\");\r\n        logger.debug(\"starting with \" + this.transport.name() + \" transport\");\r\n        this.protocol = new GW3ProtocolImpl(this, settings, logger.subLogger(\"protocol\"));\r\n        var unsubConnectionChanged = this.transport.onConnectedChanged(this.handleConnectionChanged.bind(this));\r\n        var unsubOnMessage = this.transport.onMessage(this.handleTransportMessage.bind(this));\r\n        this._transportSubscriptions.push(unsubConnectionChanged);\r\n        this._transportSubscriptions.push(unsubOnMessage);\r\n        this._defaultTransport = this.transport;\r\n    }\r\n    Object.defineProperty(Connection.prototype, \"protocolVersion\", {\r\n        get: function () {\r\n            var _a;\r\n            return (_a = this.protocol) === null || _a === void 0 ? void 0 : _a.protocolVersion;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Connection.prototype.switchTransport = function (settings) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                return [2, this._sequelizer.enqueue(function () { return __awaiter(_this, void 0, void 0, function () {\r\n                        var switchTargetTransport, verifyPromise, isSwitchSuccess, error_1;\r\n                        return __generator(this, function (_a) {\r\n                            switch (_a.label) {\r\n                                case 0:\r\n                                    if (!settings || typeof settings !== \"object\") {\r\n                                        throw new Error(\"Cannot switch transports, because the settings are missing or invalid.\");\r\n                                    }\r\n                                    if (typeof settings.type === \"undefined\") {\r\n                                        throw new Error(\"Cannot switch the transport, because the type is not defined\");\r\n                                    }\r\n                                    this.logger.trace(\"Starting transport switch with settings: \" + JSON.stringify(settings));\r\n                                    switchTargetTransport = settings.type === \"secondary\" ? this.getNewSecondaryTransport(settings) : this._defaultTransport;\r\n                                    this._targetTransport = switchTargetTransport;\r\n                                    this._targetAuth = settings.type === \"secondary\" ? this.getNewSecondaryAuth(settings) : this._defaultAuth;\r\n                                    verifyPromise = this.verifyConnection();\r\n                                    this._swapTransport = true;\r\n                                    this._switchInProgress = true;\r\n                                    this.logger.trace(\"The new transport has been set, closing the current transport\");\r\n                                    return [4, this.transport.close()];\r\n                                case 1:\r\n                                    _a.sent();\r\n                                    _a.label = 2;\r\n                                case 2:\r\n                                    _a.trys.push([2, 4, , 5]);\r\n                                    return [4, verifyPromise];\r\n                                case 3:\r\n                                    _a.sent();\r\n                                    isSwitchSuccess = this.transport === switchTargetTransport;\r\n                                    this.logger.info(\"The reconnection after the switch was completed. Was the switch a success: \" + isSwitchSuccess);\r\n                                    this._switchInProgress = false;\r\n                                    return [2, { success: isSwitchSuccess }];\r\n                                case 4:\r\n                                    error_1 = _a.sent();\r\n                                    this.logger.info(\"The reconnection after the switch timed out, reverting back to the default transport.\");\r\n                                    this.switchTransport({ type: \"default\" });\r\n                                    this._switchInProgress = false;\r\n                                    return [2, { success: false }];\r\n                                case 5: return [2];\r\n                            }\r\n                        });\r\n                    }); })];\r\n            });\r\n        });\r\n    };\r\n    Connection.prototype.onLibReAnnounced = function (callback) {\r\n        return this.registry.add(\"libReAnnounced\", callback);\r\n    };\r\n    Connection.prototype.setLibReAnnounced = function (lib) {\r\n        this.registry.execute(\"libReAnnounced\", lib);\r\n    };\r\n    Connection.prototype.send = function (message, options) {\r\n        if (this.transport.sendObject &&\r\n            this.transport.isObjectBasedTransport) {\r\n            var msg = this.protocol.createObjectMessage(message);\r\n            if (this.isTrace) {\r\n                this.logger.trace(\">> \" + JSON.stringify(msg));\r\n            }\r\n            return this.transport.sendObject(msg, options);\r\n        }\r\n        else {\r\n            var strMessage = this.protocol.createStringMessage(message);\r\n            if (this.isTrace) {\r\n                this.logger.trace(\">> \" + strMessage);\r\n            }\r\n            return this.transport.send(strMessage, options);\r\n        }\r\n    };\r\n    Connection.prototype.on = function (type, messageHandler) {\r\n        type = type.toLowerCase();\r\n        if (this.messageHandlers[type] === undefined) {\r\n            this.messageHandlers[type] = {};\r\n        }\r\n        var id = this.ids++;\r\n        this.messageHandlers[type][id] = messageHandler;\r\n        return {\r\n            type: type,\r\n            id: id,\r\n        };\r\n    };\r\n    Connection.prototype.off = function (info) {\r\n        delete this.messageHandlers[info.type.toLowerCase()][info.id];\r\n    };\r\n    Object.defineProperty(Connection.prototype, \"isConnected\", {\r\n        get: function () {\r\n            return this.protocol.isLoggedIn;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Connection.prototype.connected = function (callback) {\r\n        var _this = this;\r\n        return this.protocol.loggedIn(function () {\r\n            var currentServer = _this.transport.name();\r\n            callback(currentServer);\r\n        });\r\n    };\r\n    Connection.prototype.disconnected = function (callback) {\r\n        return this.registry.add(\"disconnected\", callback);\r\n    };\r\n    Connection.prototype.login = function (authRequest, reconnect) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var newAuth, identity, error_2;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!this._defaultAuth) {\r\n                            this._defaultAuth = authRequest;\r\n                        }\r\n                        if (this._swapTransport) {\r\n                            this.logger.trace(\"Detected a transport swap, swapping transports\");\r\n                            newAuth = this.transportSwap();\r\n                            authRequest = newAuth !== null && newAuth !== void 0 ? newAuth : authRequest;\r\n                        }\r\n                        this.logger.trace(\"Starting login for transport: \" + this.transport.name() + \" and auth \" + JSON.stringify(authRequest));\r\n                        _a.label = 1;\r\n                    case 1:\r\n                        _a.trys.push([1, 4, , 5]);\r\n                        return [4, this.transport.open()];\r\n                    case 2:\r\n                        _a.sent();\r\n                        this.logger.trace(\"Transport: \" + this.transport.name() + \" opened, logging in\");\r\n                        timer(\"connection\").mark(\"transport-opened\");\r\n                        return [4, this.protocol.login(authRequest, reconnect)];\r\n                    case 3:\r\n                        identity = _a.sent();\r\n                        this.logger.trace(\"Logged in with identity: \" + JSON.stringify(identity));\r\n                        timer(\"connection\").mark(\"protocol-logged-in\");\r\n                        return [2, identity];\r\n                    case 4:\r\n                        error_2 = _a.sent();\r\n                        if (this._switchInProgress) {\r\n                            this.logger.trace(\"An error while logging in after a transport swap, preparing a default swap.\");\r\n                            this.prepareDefaultSwap();\r\n                        }\r\n                        throw new Error(error_2);\r\n                    case 5: return [2];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Connection.prototype.logout = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4, this.protocol.logout()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [4, this.transport.close()];\r\n                    case 2:\r\n                        _a.sent();\r\n                        return [2];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Connection.prototype.loggedIn = function (callback) {\r\n        return this.protocol.loggedIn(callback);\r\n    };\r\n    Connection.prototype.domain = function (domain, successMessages, errorMessages) {\r\n        return this.protocol.domain(domain, this.logger.subLogger(\"domain=\" + domain), successMessages, errorMessages);\r\n    };\r\n    Connection.prototype.authToken = function () {\r\n        return this.protocol.authToken();\r\n    };\r\n    Connection.prototype.reconnect = function () {\r\n        return this.transport.reconnect();\r\n    };\r\n    Connection.prototype.distributeMessage = function (message, type) {\r\n        var _this = this;\r\n        var handlers = this.messageHandlers[type.toLowerCase()];\r\n        if (handlers !== undefined) {\r\n            Object.keys(handlers).forEach(function (handlerId) {\r\n                var handler = handlers[handlerId];\r\n                if (handler !== undefined) {\r\n                    try {\r\n                        handler(message);\r\n                    }\r\n                    catch (error) {\r\n                        try {\r\n                            _this.logger.error(\"Message handler failed with \" + error.stack, error);\r\n                        }\r\n                        catch (loggerError) {\r\n                            console.log(\"Message handler failed\", error);\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    };\r\n    Connection.prototype.handleConnectionChanged = function (connected) {\r\n        if (this._connected === connected) {\r\n            return;\r\n        }\r\n        this._connected = connected;\r\n        if (connected) {\r\n            if (this.settings.replaySpecs && this.settings.replaySpecs.length) {\r\n                this.replayer = new MessageReplayerImpl(this.settings.replaySpecs);\r\n                this.replayer.init(this);\r\n            }\r\n            this.registry.execute(\"connected\");\r\n        }\r\n        else {\r\n            this.registry.execute(\"disconnected\");\r\n        }\r\n    };\r\n    Connection.prototype.handleTransportMessage = function (msg) {\r\n        var msgObj;\r\n        if (typeof msg === \"string\") {\r\n            msgObj = this.protocol.processStringMessage(msg);\r\n        }\r\n        else {\r\n            msgObj = this.protocol.processObjectMessage(msg);\r\n        }\r\n        if (this.isTrace) {\r\n            this.logger.trace(\"<< \" + JSON.stringify(msgObj));\r\n        }\r\n        this.distributeMessage(msgObj.msg, msgObj.msgType);\r\n    };\r\n    Connection.prototype.verifyConnection = function () {\r\n        var _this = this;\r\n        return PromisePlus(function (resolve) {\r\n            var unsub;\r\n            var ready = waitForInvocations(2, function () {\r\n                if (unsub) {\r\n                    unsub();\r\n                }\r\n                resolve();\r\n            });\r\n            unsub = _this.onLibReAnnounced(function (lib) {\r\n                if (lib.name === \"interop\") {\r\n                    return ready();\r\n                }\r\n                if (lib.name === \"contexts\") {\r\n                    return ready();\r\n                }\r\n            });\r\n        }, 10000, \"Transport switch timed out waiting for all libraries to be re-announced\");\r\n    };\r\n    Connection.prototype.getNewSecondaryTransport = function (settings) {\r\n        var _a;\r\n        if (!((_a = settings.transportConfig) === null || _a === void 0 ? void 0 : _a.url)) {\r\n            throw new Error(\"Missing secondary transport URL.\");\r\n        }\r\n        return new WS(Object.assign({}, this.settings, { ws: settings.transportConfig.url, reconnectAttempts: 1 }), this.logger.subLogger(\"ws-secondary\"));\r\n    };\r\n    Connection.prototype.getNewSecondaryAuth = function (settings) {\r\n        var _a;\r\n        if (!((_a = settings.transportConfig) === null || _a === void 0 ? void 0 : _a.auth)) {\r\n            throw new Error(\"Missing secondary transport auth information.\");\r\n        }\r\n        return settings.transportConfig.auth;\r\n    };\r\n    Connection.prototype.transportSwap = function () {\r\n        this._swapTransport = false;\r\n        if (!this._targetTransport || !this._targetAuth) {\r\n            this.logger.warn(\"Error while switching transports - either the target transport or auth is not defined: transport defined -> \" + !!this._defaultTransport + \", auth defined -> \" + !!this._targetAuth + \". Staying on the current one.\");\r\n            return;\r\n        }\r\n        this._transportSubscriptions.forEach(function (unsub) { return unsub(); });\r\n        this._transportSubscriptions = [];\r\n        this.transport = this._targetTransport;\r\n        var unsubConnectionChanged = this.transport.onConnectedChanged(this.handleConnectionChanged.bind(this));\r\n        var unsubOnMessage = this.transport.onMessage(this.handleTransportMessage.bind(this));\r\n        this._transportSubscriptions.push(unsubConnectionChanged);\r\n        this._transportSubscriptions.push(unsubOnMessage);\r\n        return this._targetAuth;\r\n    };\r\n    Connection.prototype.prepareDefaultSwap = function () {\r\n        var _this = this;\r\n        this._transportSubscriptions.forEach(function (unsub) { return unsub(); });\r\n        this._transportSubscriptions = [];\r\n        this.transport.close().catch(function (error) { return _this.logger.warn(\"Error closing the \" + _this.transport.name() + \" transport after a failed connection attempt: \" + JSON.stringify(error)); });\r\n        this._targetTransport = this._defaultTransport;\r\n        this._targetAuth = this._defaultAuth;\r\n        this._swapTransport = true;\r\n    };\r\n    return Connection;\r\n}());\n\nvar order = [\"trace\", \"debug\", \"info\", \"warn\", \"error\", \"off\"];\r\nvar Logger = (function () {\r\n    function Logger(name, parent, logFn) {\r\n        this.name = name;\r\n        this.parent = parent;\r\n        this.subLoggers = [];\r\n        this.logFn = console;\r\n        this.customLogFn = false;\r\n        this.name = name;\r\n        if (parent) {\r\n            this.path = parent.path + \".\" + name;\r\n        }\r\n        else {\r\n            this.path = name;\r\n        }\r\n        this.loggerFullName = \"[\" + this.path + \"]\";\r\n        this.includeTimeAndLevel = !logFn;\r\n        if (logFn) {\r\n            this.logFn = logFn;\r\n            this.customLogFn = true;\r\n        }\r\n    }\r\n    Logger.prototype.subLogger = function (name) {\r\n        var existingSub = this.subLoggers.filter(function (subLogger) {\r\n            return subLogger.name === name;\r\n        })[0];\r\n        if (existingSub !== undefined) {\r\n            return existingSub;\r\n        }\r\n        Object.keys(this).forEach(function (key) {\r\n            if (key === name) {\r\n                throw new Error(\"This sub logger name is not allowed.\");\r\n            }\r\n        });\r\n        var sub = new Logger(name, this, this.customLogFn ? this.logFn : undefined);\r\n        this.subLoggers.push(sub);\r\n        return sub;\r\n    };\r\n    Logger.prototype.publishLevel = function (level) {\r\n        var _a;\r\n        if (level) {\r\n            this._publishLevel = level;\r\n        }\r\n        return this._publishLevel || ((_a = this.parent) === null || _a === void 0 ? void 0 : _a.publishLevel());\r\n    };\r\n    Logger.prototype.consoleLevel = function (level) {\r\n        var _a;\r\n        if (level) {\r\n            this._consoleLevel = level;\r\n        }\r\n        return this._consoleLevel || ((_a = this.parent) === null || _a === void 0 ? void 0 : _a.consoleLevel());\r\n    };\r\n    Logger.prototype.log = function (message, level, error) {\r\n        this.publishMessage(level || \"info\", message, error);\r\n    };\r\n    Logger.prototype.trace = function (message) {\r\n        this.log(message, \"trace\");\r\n    };\r\n    Logger.prototype.debug = function (message) {\r\n        this.log(message, \"debug\");\r\n    };\r\n    Logger.prototype.info = function (message) {\r\n        this.log(message, \"info\");\r\n    };\r\n    Logger.prototype.warn = function (message) {\r\n        this.log(message, \"warn\");\r\n    };\r\n    Logger.prototype.error = function (message, err) {\r\n        this.log(message, \"error\");\r\n    };\r\n    Logger.prototype.canPublish = function (level, compareWith) {\r\n        var levelIdx = order.indexOf(level);\r\n        var restrictionIdx = order.indexOf(compareWith || this.consoleLevel() || \"trace\");\r\n        return levelIdx >= restrictionIdx;\r\n    };\r\n    Logger.prototype.publishMessage = function (level, message, error) {\r\n        var loggerName = this.loggerFullName;\r\n        if (level === \"error\" && !error) {\r\n            var e = new Error();\r\n            if (e.stack) {\r\n                message =\r\n                    message +\r\n                        \"\\n\" +\r\n                        e.stack\r\n                            .split(\"\\n\")\r\n                            .slice(3)\r\n                            .join(\"\\n\");\r\n            }\r\n        }\r\n        if (this.canPublish(level, this.publishLevel())) {\r\n            var interop = Logger.Interop;\r\n            if (interop) {\r\n                try {\r\n                    if (interop.methods({ name: Logger.InteropMethodName }).length > 0) {\r\n                        interop.invoke(Logger.InteropMethodName, {\r\n                            msg: \"\" + message,\r\n                            logger: loggerName,\r\n                            level: level\r\n                        });\r\n                    }\r\n                }\r\n                catch (_a) {\r\n                }\r\n            }\r\n        }\r\n        if (this.canPublish(level)) {\r\n            var prefix = \"\";\r\n            if (this.includeTimeAndLevel) {\r\n                var date = new Date();\r\n                var time = date.getHours() + \":\" + date.getMinutes() + \":\" + date.getSeconds() + \":\" + date.getMilliseconds();\r\n                prefix = \"[\" + time + \"] [\" + level + \"] \";\r\n            }\r\n            var toPrint = \"\" + prefix + loggerName + \": \" + message;\r\n            switch (level) {\r\n                case \"trace\":\r\n                    this.logFn.debug(toPrint);\r\n                    break;\r\n                case \"debug\":\r\n                    if (this.logFn.debug) {\r\n                        this.logFn.debug(toPrint);\r\n                    }\r\n                    else {\r\n                        this.logFn.log(toPrint);\r\n                    }\r\n                    break;\r\n                case \"info\":\r\n                    this.logFn.info(toPrint);\r\n                    break;\r\n                case \"warn\":\r\n                    this.logFn.warn(toPrint);\r\n                    break;\r\n                case \"error\":\r\n                    this.logFn.error(toPrint, error);\r\n                    break;\r\n            }\r\n        }\r\n    };\r\n    Logger.InteropMethodName = \"T42.AppLogger.Log\";\r\n    return Logger;\r\n}());\n\nvar GW_MESSAGE_CREATE_CONTEXT = \"create-context\";\r\nvar GW_MESSAGE_ACTIVITY_CREATED = \"created\";\r\nvar GW_MESSAGE_ACTIVITY_DESTROYED = \"destroyed\";\r\nvar GW_MESSAGE_CONTEXT_CREATED = \"context-created\";\r\nvar GW_MESSAGE_CONTEXT_ADDED = \"context-added\";\r\nvar GW_MESSAGE_SUBSCRIBE_CONTEXT = \"subscribe-context\";\r\nvar GW_MESSAGE_SUBSCRIBED_CONTEXT = \"subscribed-context\";\r\nvar GW_MESSAGE_UNSUBSCRIBE_CONTEXT = \"unsubscribe-context\";\r\nvar GW_MESSAGE_DESTROY_CONTEXT = \"destroy-context\";\r\nvar GW_MESSAGE_CONTEXT_DESTROYED = \"context-destroyed\";\r\nvar GW_MESSAGE_UPDATE_CONTEXT = \"update-context\";\r\nvar GW_MESSAGE_CONTEXT_UPDATED = \"context-updated\";\r\nvar GW_MESSAGE_JOINED_ACTIVITY = \"joined\";\n\nvar ContextMessageReplaySpec = {\r\n    get name() {\r\n        return \"context\";\r\n    },\r\n    get types() {\r\n        return [\r\n            GW_MESSAGE_CREATE_CONTEXT,\r\n            GW_MESSAGE_ACTIVITY_CREATED,\r\n            GW_MESSAGE_ACTIVITY_DESTROYED,\r\n            GW_MESSAGE_CONTEXT_CREATED,\r\n            GW_MESSAGE_CONTEXT_ADDED,\r\n            GW_MESSAGE_SUBSCRIBE_CONTEXT,\r\n            GW_MESSAGE_SUBSCRIBED_CONTEXT,\r\n            GW_MESSAGE_UNSUBSCRIBE_CONTEXT,\r\n            GW_MESSAGE_DESTROY_CONTEXT,\r\n            GW_MESSAGE_CONTEXT_DESTROYED,\r\n            GW_MESSAGE_UPDATE_CONTEXT,\r\n            GW_MESSAGE_CONTEXT_UPDATED,\r\n            GW_MESSAGE_JOINED_ACTIVITY\r\n        ];\r\n    }\r\n};\n\nvar version = \"5.7.5\";\n\nfunction prepareConfig (configuration, ext, glue42gd) {\r\n    var _a, _b, _c, _d;\r\n    var nodeStartingContext;\r\n    if (Utils.isNode()) {\r\n        var startingContextString = process.env._GD_STARTING_CONTEXT_;\r\n        if (startingContextString) {\r\n            try {\r\n                nodeStartingContext = JSON.parse(startingContextString);\r\n            }\r\n            catch (_e) {\r\n            }\r\n        }\r\n    }\r\n    function getConnection() {\r\n        var _a, _b, _c, _d, _e, _f;\r\n        var gwConfig = configuration.gateway;\r\n        var protocolVersion = (_a = gwConfig === null || gwConfig === void 0 ? void 0 : gwConfig.protocolVersion) !== null && _a !== void 0 ? _a : 3;\r\n        var reconnectInterval = gwConfig === null || gwConfig === void 0 ? void 0 : gwConfig.reconnectInterval;\r\n        var reconnectAttempts = gwConfig === null || gwConfig === void 0 ? void 0 : gwConfig.reconnectAttempts;\r\n        var defaultWs = \"ws://localhost:8385\";\r\n        var ws = gwConfig === null || gwConfig === void 0 ? void 0 : gwConfig.ws;\r\n        var sharedWorker = gwConfig === null || gwConfig === void 0 ? void 0 : gwConfig.sharedWorker;\r\n        var inproc = gwConfig === null || gwConfig === void 0 ? void 0 : gwConfig.inproc;\r\n        var webPlatform = (_b = gwConfig === null || gwConfig === void 0 ? void 0 : gwConfig.webPlatform) !== null && _b !== void 0 ? _b : undefined;\r\n        if (glue42gd) {\r\n            ws = glue42gd.gwURL;\r\n        }\r\n        if (Utils.isNode() && nodeStartingContext && nodeStartingContext.gwURL) {\r\n            ws = nodeStartingContext.gwURL;\r\n        }\r\n        if (!ws && !sharedWorker && !inproc) {\r\n            ws = defaultWs;\r\n        }\r\n        var instanceId;\r\n        var windowId;\r\n        var pid;\r\n        var environment;\r\n        var region;\r\n        var appName = getApplication();\r\n        var uniqueAppName = appName;\r\n        if (typeof glue42gd !== \"undefined\") {\r\n            windowId = glue42gd.windowId;\r\n            pid = glue42gd.pid;\r\n            if (glue42gd.env) {\r\n                environment = glue42gd.env.env;\r\n                region = glue42gd.env.region;\r\n            }\r\n            uniqueAppName = (_c = glue42gd.application) !== null && _c !== void 0 ? _c : \"glue-app\";\r\n            instanceId = glue42gd.appInstanceId;\r\n        }\r\n        else if (Utils.isNode()) {\r\n            pid = process.pid;\r\n            if (nodeStartingContext) {\r\n                environment = nodeStartingContext.env;\r\n                region = nodeStartingContext.region;\r\n                instanceId = nodeStartingContext.instanceId;\r\n            }\r\n        }\r\n        else if (typeof (window === null || window === void 0 ? void 0 : window.glue42electron) !== \"undefined\") {\r\n            windowId = window === null || window === void 0 ? void 0 : window.glue42electron.instanceId;\r\n            pid = window === null || window === void 0 ? void 0 : window.glue42electron.pid;\r\n            environment = window === null || window === void 0 ? void 0 : window.glue42electron.env;\r\n            region = window === null || window === void 0 ? void 0 : window.glue42electron.region;\r\n            uniqueAppName = (_d = window === null || window === void 0 ? void 0 : window.glue42electron.application) !== null && _d !== void 0 ? _d : \"glue-app\";\r\n            instanceId = window === null || window === void 0 ? void 0 : window.glue42electron.instanceId;\r\n        }\r\n        else ;\r\n        var replaySpecs = (_f = (_e = configuration.gateway) === null || _e === void 0 ? void 0 : _e.replaySpecs) !== null && _f !== void 0 ? _f : [];\r\n        replaySpecs.push(ContextMessageReplaySpec);\r\n        var identity = {\r\n            application: uniqueAppName,\r\n            applicationName: appName,\r\n            windowId: windowId,\r\n            instance: instanceId,\r\n            process: pid,\r\n            region: region,\r\n            environment: environment,\r\n            api: ext.version || version\r\n        };\r\n        if (configuration.identity) {\r\n            identity = Object.assign(identity, configuration.identity);\r\n        }\r\n        return {\r\n            identity: identity,\r\n            reconnectInterval: reconnectInterval,\r\n            ws: ws,\r\n            sharedWorker: sharedWorker,\r\n            webPlatform: webPlatform,\r\n            inproc: inproc,\r\n            protocolVersion: protocolVersion,\r\n            reconnectAttempts: reconnectAttempts,\r\n            replaySpecs: replaySpecs,\r\n        };\r\n    }\r\n    function getContexts() {\r\n        if (typeof configuration.contexts === \"undefined\") {\r\n            return { reAnnounceKnownContexts: true };\r\n        }\r\n        if (typeof configuration.contexts === \"boolean\" && configuration.contexts) {\r\n            return { reAnnounceKnownContexts: true };\r\n        }\r\n        if (typeof configuration.contexts === \"object\") {\r\n            return Object.assign({}, { reAnnounceKnownContexts: true }, configuration.contexts);\r\n        }\r\n        return false;\r\n    }\r\n    function getApplication() {\r\n        if (configuration.application) {\r\n            return configuration.application;\r\n        }\r\n        if (glue42gd) {\r\n            return glue42gd.applicationName;\r\n        }\r\n        if (typeof window !== \"undefined\" && typeof window.glue42electron !== \"undefined\") {\r\n            return window.glue42electron.application;\r\n        }\r\n        var uid = shortid();\r\n        if (Utils.isNode()) {\r\n            if (nodeStartingContext) {\r\n                return nodeStartingContext.applicationConfig.name;\r\n            }\r\n            return \"NodeJS\" + uid;\r\n        }\r\n        if (typeof window !== \"undefined\" && typeof document !== \"undefined\") {\r\n            return document.title + (\" (\" + uid + \")\");\r\n        }\r\n        return uid;\r\n    }\r\n    function getAuth() {\r\n        var _a, _b, _c;\r\n        if (typeof configuration.auth === \"string\") {\r\n            return {\r\n                token: configuration.auth\r\n            };\r\n        }\r\n        if (configuration.auth) {\r\n            return configuration.auth;\r\n        }\r\n        if (Utils.isNode() && nodeStartingContext && nodeStartingContext.gwToken) {\r\n            return {\r\n                gatewayToken: nodeStartingContext.gwToken\r\n            };\r\n        }\r\n        if (((_a = configuration.gateway) === null || _a === void 0 ? void 0 : _a.webPlatform) || ((_b = configuration.gateway) === null || _b === void 0 ? void 0 : _b.inproc) || ((_c = configuration.gateway) === null || _c === void 0 ? void 0 : _c.sharedWorker)) {\r\n            return {\r\n                username: \"glue42\", password: \"glue42\"\r\n            };\r\n        }\r\n    }\r\n    function getLogger() {\r\n        var _a, _b;\r\n        var config = configuration.logger;\r\n        var defaultLevel = \"warn\";\r\n        if (!config) {\r\n            config = defaultLevel;\r\n        }\r\n        var gdConsoleLevel;\r\n        if (glue42gd) {\r\n            gdConsoleLevel = glue42gd.consoleLogLevel;\r\n        }\r\n        if (typeof config === \"string\") {\r\n            return { console: gdConsoleLevel !== null && gdConsoleLevel !== void 0 ? gdConsoleLevel : config, publish: defaultLevel };\r\n        }\r\n        return {\r\n            console: (_a = gdConsoleLevel !== null && gdConsoleLevel !== void 0 ? gdConsoleLevel : config.console) !== null && _a !== void 0 ? _a : defaultLevel,\r\n            publish: (_b = config.publish) !== null && _b !== void 0 ? _b : defaultLevel\r\n        };\r\n    }\r\n    var connection = getConnection();\r\n    var application = getApplication();\r\n    if (typeof window !== \"undefined\") {\r\n        var windowAsAny = window;\r\n        var containerApplication = windowAsAny.htmlContainer ?\r\n            windowAsAny.htmlContainer.containerName + \".\" + windowAsAny.htmlContainer.application : (_a = windowAsAny === null || windowAsAny === void 0 ? void 0 : windowAsAny.glue42gd) === null || _a === void 0 ? void 0 : _a.application;\r\n        if (containerApplication) {\r\n            application = containerApplication;\r\n        }\r\n    }\r\n    return {\r\n        bus: (_b = configuration.bus) !== null && _b !== void 0 ? _b : false,\r\n        application: application,\r\n        auth: getAuth(),\r\n        logger: getLogger(),\r\n        connection: connection,\r\n        metrics: (_c = configuration.metrics) !== null && _c !== void 0 ? _c : true,\r\n        contexts: getContexts(),\r\n        version: ext.version || version,\r\n        libs: (_d = ext.libs) !== null && _d !== void 0 ? _d : [],\r\n        customLogger: configuration.customLogger\r\n    };\r\n}\n\nvar GW3ContextData = (function () {\r\n    function GW3ContextData(contextId, name, isAnnounced, activityId) {\r\n        this.updateCallbacks = {};\r\n        this.contextId = contextId;\r\n        this.name = name;\r\n        this.isAnnounced = isAnnounced;\r\n        this.activityId = activityId;\r\n        this.context = {};\r\n    }\r\n    GW3ContextData.prototype.hasCallbacks = function () {\r\n        return Object.keys(this.updateCallbacks).length > 0;\r\n    };\r\n    GW3ContextData.prototype.getState = function () {\r\n        if (this.isAnnounced && this.hasCallbacks()) {\r\n            return 3;\r\n        }\r\n        if (this.isAnnounced) {\r\n            return 2;\r\n        }\r\n        if (this.hasCallbacks()) {\r\n            return 1;\r\n        }\r\n        return 0;\r\n    };\r\n    return GW3ContextData;\r\n}());\n\nfunction applyContextDelta(context, delta, logger) {\r\n    try {\r\n        if (logger === null || logger === void 0 ? void 0 : logger.canPublish(\"trace\")) {\r\n            logger === null || logger === void 0 ? void 0 : logger.trace(\"applying context delta \" + JSON.stringify(delta) + \" on context \" + JSON.stringify(context));\r\n        }\r\n        if (!delta) {\r\n            return context;\r\n        }\r\n        if (delta.reset) {\r\n            context = __assign({}, delta.reset);\r\n            return context;\r\n        }\r\n        context = deepClone(context, undefined);\r\n        if (delta.commands) {\r\n            for (var _i = 0, _a = delta.commands; _i < _a.length; _i++) {\r\n                var command = _a[_i];\r\n                if (command.type === \"remove\") {\r\n                    deletePath(context, command.path);\r\n                }\r\n                else if (command.type === \"set\") {\r\n                    setValueToPath(context, command.value, command.path);\r\n                }\r\n            }\r\n            return context;\r\n        }\r\n        var added_1 = delta.added;\r\n        var updated_1 = delta.updated;\r\n        var removed = delta.removed;\r\n        if (added_1) {\r\n            Object.keys(added_1).forEach(function (key) {\r\n                context[key] = added_1[key];\r\n            });\r\n        }\r\n        if (updated_1) {\r\n            Object.keys(updated_1).forEach(function (key) {\r\n                mergeObjectsProperties(key, context, updated_1);\r\n            });\r\n        }\r\n        if (removed) {\r\n            removed.forEach(function (key) {\r\n                delete context[key];\r\n            });\r\n        }\r\n        return context;\r\n    }\r\n    catch (e) {\r\n        logger === null || logger === void 0 ? void 0 : logger.error(\"error applying context delta \" + JSON.stringify(delta) + \" on context \" + JSON.stringify(context), e);\r\n        return context;\r\n    }\r\n}\r\nfunction deepClone(obj, hash) {\r\n    hash = hash || new WeakMap();\r\n    if (Object(obj) !== obj) {\r\n        return obj;\r\n    }\r\n    if (obj instanceof Set) {\r\n        return new Set(obj);\r\n    }\r\n    if (hash.has(obj)) {\r\n        return hash.get(obj);\r\n    }\r\n    var result = obj instanceof Date ? new Date(obj)\r\n        : obj instanceof RegExp ? new RegExp(obj.source, obj.flags)\r\n            : obj.constructor ? new obj.constructor()\r\n                : Object.create(null);\r\n    hash.set(obj, result);\r\n    if (obj instanceof Map) {\r\n        Array.from(obj, function (_a) {\r\n            var key = _a[0], val = _a[1];\r\n            return result.set(key, deepClone(val, hash));\r\n        });\r\n    }\r\n    return Object.assign.apply(Object, __spreadArrays([result], Object.keys(obj).map(function (key) {\r\n        var _a;\r\n        return (_a = {}, _a[key] = deepClone(obj[key], hash), _a);\r\n    })));\r\n}\r\nvar mergeObjectsProperties = function (key, what, withWhat) {\r\n    var right = withWhat[key];\r\n    if (right === undefined) {\r\n        return what;\r\n    }\r\n    var left = what[key];\r\n    if (!left || !right) {\r\n        what[key] = right;\r\n        return what;\r\n    }\r\n    if (typeof left === \"string\" ||\r\n        typeof left === \"number\" ||\r\n        typeof left === \"boolean\" ||\r\n        typeof right === \"string\" ||\r\n        typeof right === \"number\" ||\r\n        typeof right === \"boolean\" ||\r\n        Array.isArray(left) ||\r\n        Array.isArray(right)) {\r\n        what[key] = right;\r\n        return what;\r\n    }\r\n    what[key] = Object.assign({}, left, right);\r\n    return what;\r\n};\r\nfunction deepEqual(x, y) {\r\n    if (x === y) {\r\n        return true;\r\n    }\r\n    if (!(x instanceof Object) || !(y instanceof Object)) {\r\n        return false;\r\n    }\r\n    if (x.constructor !== y.constructor) {\r\n        return false;\r\n    }\r\n    for (var p in x) {\r\n        if (!x.hasOwnProperty(p)) {\r\n            continue;\r\n        }\r\n        if (!y.hasOwnProperty(p)) {\r\n            return false;\r\n        }\r\n        if (x[p] === y[p]) {\r\n            continue;\r\n        }\r\n        if (typeof (x[p]) !== \"object\") {\r\n            return false;\r\n        }\r\n        if (!deepEqual(x[p], y[p])) {\r\n            return false;\r\n        }\r\n    }\r\n    for (var p in y) {\r\n        if (y.hasOwnProperty(p) && !x.hasOwnProperty(p)) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\nfunction setValueToPath(obj, value, path) {\r\n    var pathArr = path.split(\".\");\r\n    var i;\r\n    for (i = 0; i < pathArr.length - 1; i++) {\r\n        if (!obj[pathArr[i]]) {\r\n            obj[pathArr[i]] = {};\r\n        }\r\n        if (typeof obj[pathArr[i]] !== \"object\") {\r\n            obj[pathArr[i]] = {};\r\n        }\r\n        obj = obj[pathArr[i]];\r\n    }\r\n    obj[pathArr[i]] = value;\r\n}\r\nfunction isSubset(superObj, subObj) {\r\n    return Object.keys(subObj).every(function (ele) {\r\n        if (typeof subObj[ele] === \"object\") {\r\n            return isSubset((superObj === null || superObj === void 0 ? void 0 : superObj[ele]) || {}, subObj[ele] || {});\r\n        }\r\n        return subObj[ele] === (superObj === null || superObj === void 0 ? void 0 : superObj[ele]);\r\n    });\r\n}\r\nfunction deletePath(obj, path) {\r\n    var pathArr = path.split(\".\");\r\n    var i;\r\n    for (i = 0; i < pathArr.length - 1; i++) {\r\n        if (!obj[pathArr[i]]) {\r\n            return;\r\n        }\r\n        obj = obj[pathArr[i]];\r\n    }\r\n    delete obj[pathArr[i]];\r\n}\n\nvar GW3Bridge = (function () {\r\n    function GW3Bridge(config) {\r\n        var _this = this;\r\n        var _a;\r\n        this._contextNameToData = {};\r\n        this._gw3Subscriptions = [];\r\n        this._nextCallbackSubscriptionNumber = 0;\r\n        this._contextNameToId = {};\r\n        this._contextIdToName = {};\r\n        this._protocolVersion = undefined;\r\n        this._contextsTempCache = {};\r\n        this._contextsSubscriptionsCache = [];\r\n        this._connection = config.connection;\r\n        this._logger = config.logger;\r\n        this._trackAllContexts = config.trackAllContexts;\r\n        this._reAnnounceKnownContexts = config.reAnnounceKnownContexts;\r\n        this._gw3Session = this._connection.domain(\"global\", [\r\n            GW_MESSAGE_CONTEXT_CREATED,\r\n            GW_MESSAGE_SUBSCRIBED_CONTEXT,\r\n            GW_MESSAGE_CONTEXT_DESTROYED,\r\n            GW_MESSAGE_CONTEXT_UPDATED,\r\n        ]);\r\n        this._gw3Session.disconnected(this.resetState.bind(this));\r\n        this._gw3Session.onJoined(function (wasReconnect) {\r\n            if (!wasReconnect) {\r\n                return;\r\n            }\r\n            if (!_this._reAnnounceKnownContexts) {\r\n                return _this._connection.setLibReAnnounced({ name: \"contexts\" });\r\n            }\r\n            _this.reInitiateState().then(function () { return _this._connection.setLibReAnnounced({ name: \"contexts\" }); });\r\n        });\r\n        this.subscribeToContextCreatedMessages();\r\n        this.subscribeToContextUpdatedMessages();\r\n        this.subscribeToContextDestroyedMessages();\r\n        (_a = this._connection.replayer) === null || _a === void 0 ? void 0 : _a.drain(ContextMessageReplaySpec.name, function (message) {\r\n            var type = message.type;\r\n            if (!type) {\r\n                return;\r\n            }\r\n            if (type === GW_MESSAGE_CONTEXT_CREATED ||\r\n                type === GW_MESSAGE_CONTEXT_ADDED ||\r\n                type === GW_MESSAGE_ACTIVITY_CREATED) {\r\n                _this.handleContextCreatedMessage(message);\r\n            }\r\n            else if (type === GW_MESSAGE_SUBSCRIBED_CONTEXT ||\r\n                type === GW_MESSAGE_CONTEXT_UPDATED ||\r\n                type === GW_MESSAGE_JOINED_ACTIVITY) {\r\n                _this.handleContextUpdatedMessage(message);\r\n            }\r\n            else if (type === GW_MESSAGE_CONTEXT_DESTROYED ||\r\n                type === GW_MESSAGE_ACTIVITY_DESTROYED) {\r\n                _this.handleContextDestroyedMessage(message);\r\n            }\r\n        });\r\n    }\r\n    Object.defineProperty(GW3Bridge.prototype, \"protocolVersion\", {\r\n        get: function () {\r\n            var _a;\r\n            if (!this._protocolVersion) {\r\n                var contextsDomainInfo = this._connection.availableDomains.find(function (d) { return d.uri === \"context\"; });\r\n                this._protocolVersion = (_a = contextsDomainInfo === null || contextsDomainInfo === void 0 ? void 0 : contextsDomainInfo.version) !== null && _a !== void 0 ? _a : 1;\r\n            }\r\n            return this._protocolVersion;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(GW3Bridge.prototype, \"setPathSupported\", {\r\n        get: function () {\r\n            return this.protocolVersion >= 2;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    GW3Bridge.prototype.dispose = function () {\r\n        for (var _i = 0, _a = this._gw3Subscriptions; _i < _a.length; _i++) {\r\n            var sub = _a[_i];\r\n            this._connection.off(sub);\r\n        }\r\n        this._gw3Subscriptions.length = 0;\r\n        for (var contextName in this._contextNameToData) {\r\n            if (this._contextNameToId.hasOwnProperty(contextName)) {\r\n                delete this._contextNameToData[contextName];\r\n            }\r\n        }\r\n    };\r\n    GW3Bridge.prototype.createContext = function (name, data) {\r\n        var _this = this;\r\n        return this._gw3Session\r\n            .send({\r\n            type: GW_MESSAGE_CREATE_CONTEXT,\r\n            domain: \"global\",\r\n            name: name,\r\n            data: data,\r\n            lifetime: \"retained\",\r\n        })\r\n            .then(function (createContextMsg) {\r\n            _this._contextNameToId[name] = createContextMsg.context_id;\r\n            _this._contextIdToName[createContextMsg.context_id] = name;\r\n            var contextData = _this._contextNameToData[name] || new GW3ContextData(createContextMsg.context_id, name, true, undefined);\r\n            contextData.isAnnounced = true;\r\n            contextData.name = name;\r\n            contextData.contextId = createContextMsg.context_id;\r\n            contextData.context = createContextMsg.data || data;\r\n            contextData.hasReceivedSnapshot = true;\r\n            _this._contextNameToData[name] = contextData;\r\n            return createContextMsg.context_id;\r\n        });\r\n    };\r\n    GW3Bridge.prototype.all = function () {\r\n        var _this = this;\r\n        return Object.keys(this._contextNameToData)\r\n            .filter(function (name) { return _this._contextNameToData[name].isAnnounced; });\r\n    };\r\n    GW3Bridge.prototype.update = function (name, delta) {\r\n        var _a;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var contextData, currentContext, calculatedDelta;\r\n            var _this = this;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        contextData = this._contextNameToData[name];\r\n                        if (!contextData || !contextData.isAnnounced) {\r\n                            return [2, this.createContext(name, delta)];\r\n                        }\r\n                        currentContext = contextData.context;\r\n                        if (!!contextData.hasCallbacks()) return [3, 2];\r\n                        return [4, this.get(contextData.name)];\r\n                    case 1:\r\n                        currentContext = _b.sent();\r\n                        _b.label = 2;\r\n                    case 2:\r\n                        calculatedDelta = this.protocolVersion === 2 ?\r\n                            this.calculateContextDeltaV2(currentContext, delta) :\r\n                            this.calculateContextDeltaV1(currentContext, delta);\r\n                        if (!Object.keys(calculatedDelta.added).length\r\n                            && !Object.keys(calculatedDelta.updated).length\r\n                            && !calculatedDelta.removed.length\r\n                            && !((_a = calculatedDelta.commands) === null || _a === void 0 ? void 0 : _a.length)) {\r\n                            return [2, Promise.resolve()];\r\n                        }\r\n                        return [2, this._gw3Session\r\n                                .send({\r\n                                type: GW_MESSAGE_UPDATE_CONTEXT,\r\n                                domain: \"global\",\r\n                                context_id: contextData.contextId,\r\n                                delta: calculatedDelta,\r\n                            }, {}, { skipPeerId: false })\r\n                                .then(function (gwResponse) {\r\n                                _this.handleUpdated(contextData, calculatedDelta, {\r\n                                    updaterId: gwResponse.peer_id\r\n                                });\r\n                            })];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    GW3Bridge.prototype.set = function (name, data) {\r\n        var _this = this;\r\n        var contextData = this._contextNameToData[name];\r\n        if (!contextData || !contextData.isAnnounced) {\r\n            return this.createContext(name, data);\r\n        }\r\n        return this._gw3Session\r\n            .send({\r\n            type: GW_MESSAGE_UPDATE_CONTEXT,\r\n            domain: \"global\",\r\n            context_id: contextData.contextId,\r\n            delta: { reset: data },\r\n        }, {}, { skipPeerId: false })\r\n            .then(function (gwResponse) {\r\n            _this.handleUpdated(contextData, { reset: data, added: {}, removed: [], updated: {} }, { updaterId: gwResponse.peer_id });\r\n        });\r\n    };\r\n    GW3Bridge.prototype.setPath = function (name, path, value) {\r\n        if (!this.setPathSupported) {\r\n            return Promise.reject(\"glue.contexts.setPath operation is not supported, use Glue42 3.10 or later\");\r\n        }\r\n        return this.setPaths(name, [{ path: path, value: value }]);\r\n    };\r\n    GW3Bridge.prototype.setPaths = function (name, pathValues) {\r\n        var _this = this;\r\n        if (!this.setPathSupported) {\r\n            return Promise.reject(\"glue.contexts.setPaths operation is not supported, use Glue42 3.10 or later\");\r\n        }\r\n        var contextData = this._contextNameToData[name];\r\n        if (!contextData || !contextData.isAnnounced) {\r\n            var obj = {};\r\n            for (var _i = 0, pathValues_1 = pathValues; _i < pathValues_1.length; _i++) {\r\n                var pathValue = pathValues_1[_i];\r\n                setValueToPath(obj, pathValue.value, pathValue.path);\r\n            }\r\n            return this.createContext(name, obj);\r\n        }\r\n        var commands = [];\r\n        for (var _a = 0, pathValues_2 = pathValues; _a < pathValues_2.length; _a++) {\r\n            var pathValue = pathValues_2[_a];\r\n            if (pathValue.value === null) {\r\n                commands.push({ type: \"remove\", path: pathValue.path });\r\n            }\r\n            else {\r\n                commands.push({ type: \"set\", path: pathValue.path, value: pathValue.value });\r\n            }\r\n        }\r\n        return this._gw3Session\r\n            .send({\r\n            type: GW_MESSAGE_UPDATE_CONTEXT,\r\n            domain: \"global\",\r\n            context_id: contextData.contextId,\r\n            delta: { commands: commands }\r\n        }, {}, { skipPeerId: false })\r\n            .then(function (gwResponse) {\r\n            _this.handleUpdated(contextData, { added: {}, removed: [], updated: {}, commands: commands }, { updaterId: gwResponse.peer_id });\r\n        });\r\n    };\r\n    GW3Bridge.prototype.get = function (name) {\r\n        var _this = this;\r\n        var _a;\r\n        var contextData = this._contextNameToData[name];\r\n        if (!contextData || !contextData.isAnnounced) {\r\n            return Promise.resolve({});\r\n        }\r\n        if (contextData && (!contextData.hasCallbacks() || !contextData.hasReceivedSnapshot)) {\r\n            return new Promise(function (resolve) {\r\n                _this.subscribe(name, function (data, _d, _r, un) {\r\n                    _this.unsubscribe(un);\r\n                    resolve(data);\r\n                });\r\n            });\r\n        }\r\n        var context = (_a = contextData === null || contextData === void 0 ? void 0 : contextData.context) !== null && _a !== void 0 ? _a : {};\r\n        return Promise.resolve(context);\r\n    };\r\n    GW3Bridge.prototype.subscribe = function (name, callback, subscriptionKey) {\r\n        var _this = this;\r\n        var thisCallbackSubscriptionNumber = typeof subscriptionKey === \"undefined\" ? this._nextCallbackSubscriptionNumber : subscriptionKey;\r\n        if (typeof subscriptionKey === \"undefined\") {\r\n            this._nextCallbackSubscriptionNumber += 1;\r\n        }\r\n        if (this._contextsSubscriptionsCache.every(function (subscription) { return subscription.subKey !== _this._nextCallbackSubscriptionNumber; })) {\r\n            this._contextsSubscriptionsCache.push({ contextName: name, subKey: thisCallbackSubscriptionNumber, callback: callback });\r\n        }\r\n        var contextData = this._contextNameToData[name];\r\n        if (!contextData ||\r\n            !contextData.isAnnounced) {\r\n            contextData = contextData || new GW3ContextData(undefined, name, false, undefined);\r\n            this._contextNameToData[name] = contextData;\r\n            contextData.updateCallbacks[thisCallbackSubscriptionNumber] = callback;\r\n            return Promise.resolve(thisCallbackSubscriptionNumber);\r\n        }\r\n        var hadCallbacks = contextData.hasCallbacks();\r\n        contextData.updateCallbacks[thisCallbackSubscriptionNumber] = callback;\r\n        if (!hadCallbacks) {\r\n            if (!contextData.joinedActivity) {\r\n                if (contextData.context && contextData.sentExplicitSubscription) {\r\n                    if (contextData.hasReceivedSnapshot) {\r\n                        var clone = deepClone(contextData.context);\r\n                        callback(clone, clone, [], thisCallbackSubscriptionNumber);\r\n                    }\r\n                    return Promise.resolve(thisCallbackSubscriptionNumber);\r\n                }\r\n                return this.sendSubscribe(contextData)\r\n                    .then(function () { return thisCallbackSubscriptionNumber; });\r\n            }\r\n            else {\r\n                if (contextData.hasReceivedSnapshot) {\r\n                    var clone = deepClone(contextData.context);\r\n                    callback(clone, clone, [], thisCallbackSubscriptionNumber);\r\n                }\r\n                return Promise.resolve(thisCallbackSubscriptionNumber);\r\n            }\r\n        }\r\n        else {\r\n            if (contextData.hasReceivedSnapshot) {\r\n                var clone = deepClone(contextData.context);\r\n                callback(clone, clone, [], thisCallbackSubscriptionNumber);\r\n            }\r\n            return Promise.resolve(thisCallbackSubscriptionNumber);\r\n        }\r\n    };\r\n    GW3Bridge.prototype.unsubscribe = function (subscriptionKey) {\r\n        this._contextsSubscriptionsCache = this._contextsSubscriptionsCache.filter(function (subscription) { return subscription.subKey !== subscriptionKey; });\r\n        for (var _i = 0, _a = Object.keys(this._contextNameToData); _i < _a.length; _i++) {\r\n            var name_1 = _a[_i];\r\n            var contextData = this._contextNameToData[name_1];\r\n            if (!contextData) {\r\n                return;\r\n            }\r\n            var hadCallbacks = contextData.hasCallbacks();\r\n            delete contextData.updateCallbacks[subscriptionKey];\r\n            if (contextData.isAnnounced &&\r\n                hadCallbacks &&\r\n                !contextData.hasCallbacks() &&\r\n                contextData.sentExplicitSubscription) {\r\n                this.sendUnsubscribe(contextData);\r\n            }\r\n            if (!contextData.isAnnounced &&\r\n                !contextData.hasCallbacks()) {\r\n                delete this._contextNameToData[name_1];\r\n            }\r\n        }\r\n    };\r\n    GW3Bridge.prototype.destroy = function (name) {\r\n        var contextData = this._contextNameToData[name];\r\n        if (!contextData) {\r\n            return Promise.reject(\"context with \" + name + \" does not exist\");\r\n        }\r\n        return this._gw3Session\r\n            .send({\r\n            type: GW_MESSAGE_DESTROY_CONTEXT,\r\n            domain: \"global\",\r\n            context_id: contextData.contextId,\r\n        }).then(function (_) { return undefined; });\r\n    };\r\n    GW3Bridge.prototype.handleUpdated = function (contextData, delta, extraData) {\r\n        var oldContext = contextData.context;\r\n        contextData.context = applyContextDelta(contextData.context, delta, this._logger);\r\n        contextData.hasReceivedSnapshot = true;\r\n        if (this._contextNameToData[contextData.name] === contextData &&\r\n            !deepEqual(oldContext, contextData.context)) {\r\n            this.invokeUpdateCallbacks(contextData, delta, extraData);\r\n        }\r\n    };\r\n    GW3Bridge.prototype.subscribeToContextCreatedMessages = function () {\r\n        var createdMessageTypes = [\r\n            GW_MESSAGE_CONTEXT_ADDED,\r\n            GW_MESSAGE_CONTEXT_CREATED,\r\n            GW_MESSAGE_ACTIVITY_CREATED,\r\n        ];\r\n        for (var _i = 0, createdMessageTypes_1 = createdMessageTypes; _i < createdMessageTypes_1.length; _i++) {\r\n            var createdMessageType = createdMessageTypes_1[_i];\r\n            var sub = this._connection.on(createdMessageType, this.handleContextCreatedMessage.bind(this));\r\n            this._gw3Subscriptions.push(sub);\r\n        }\r\n    };\r\n    GW3Bridge.prototype.handleContextCreatedMessage = function (contextCreatedMsg) {\r\n        var _this = this;\r\n        var createdMessageType = contextCreatedMsg.type;\r\n        if (createdMessageType === GW_MESSAGE_ACTIVITY_CREATED) {\r\n            this._contextNameToId[contextCreatedMsg.activity_id] = contextCreatedMsg.context_id;\r\n            this._contextIdToName[contextCreatedMsg.context_id] = contextCreatedMsg.activity_id;\r\n        }\r\n        else if (createdMessageType === GW_MESSAGE_CONTEXT_ADDED) {\r\n            this._contextNameToId[contextCreatedMsg.name] = contextCreatedMsg.context_id;\r\n            this._contextIdToName[contextCreatedMsg.context_id] = contextCreatedMsg.name;\r\n        }\r\n        else ;\r\n        var name = this._contextIdToName[contextCreatedMsg.context_id];\r\n        if (!name) {\r\n            throw new Error(\"Received created event for context with unknown name: \" + contextCreatedMsg.context_id);\r\n        }\r\n        if (!this._contextNameToId[name]) {\r\n            throw new Error(\"Received created event for context with unknown id: \" + contextCreatedMsg.context_id);\r\n        }\r\n        var contextData = this._contextNameToData[name];\r\n        if (contextData) {\r\n            if (contextData.isAnnounced) {\r\n                return;\r\n            }\r\n            else {\r\n                if (!contextData.hasCallbacks()) {\r\n                    throw new Error(\"Assertion failure: contextData.hasCallbacks()\");\r\n                }\r\n                contextData.isAnnounced = true;\r\n                contextData.contextId = contextCreatedMsg.context_id;\r\n                contextData.activityId = contextCreatedMsg.activity_id;\r\n                if (!contextData.sentExplicitSubscription) {\r\n                    this.sendSubscribe(contextData);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            this._contextNameToData[name] = contextData =\r\n                new GW3ContextData(contextCreatedMsg.context_id, name, true, contextCreatedMsg.activity_id);\r\n            if (this._trackAllContexts) {\r\n                this.subscribe(name, function () { }).then(function (subKey) { return _this._systemContextsSubKey = subKey; });\r\n            }\r\n        }\r\n    };\r\n    GW3Bridge.prototype.subscribeToContextUpdatedMessages = function () {\r\n        var updatedMessageTypes = [\r\n            GW_MESSAGE_CONTEXT_UPDATED,\r\n            GW_MESSAGE_SUBSCRIBED_CONTEXT,\r\n            GW_MESSAGE_JOINED_ACTIVITY,\r\n        ];\r\n        for (var _i = 0, updatedMessageTypes_1 = updatedMessageTypes; _i < updatedMessageTypes_1.length; _i++) {\r\n            var updatedMessageType = updatedMessageTypes_1[_i];\r\n            var sub = this._connection.on(updatedMessageType, this.handleContextUpdatedMessage.bind(this));\r\n            this._gw3Subscriptions.push(sub);\r\n        }\r\n    };\r\n    GW3Bridge.prototype.handleContextUpdatedMessage = function (contextUpdatedMsg) {\r\n        var updatedMessageType = contextUpdatedMsg.type;\r\n        var contextId = contextUpdatedMsg.context_id;\r\n        var contextData = this._contextNameToData[this._contextIdToName[contextId]];\r\n        var justSeen = !contextData || !contextData.isAnnounced;\r\n        if (updatedMessageType === GW_MESSAGE_JOINED_ACTIVITY) {\r\n            if (!contextData) {\r\n                contextData = new GW3ContextData(contextId, contextUpdatedMsg.activity_id, true, contextUpdatedMsg.activity_id);\r\n                this._contextNameToData[contextUpdatedMsg.activity_id] = contextData;\r\n                this._contextIdToName[contextId] = contextUpdatedMsg.activity_id;\r\n                this._contextNameToId[contextUpdatedMsg.activity_id] = contextId;\r\n            }\r\n            else {\r\n                contextData.contextId = contextId;\r\n                contextData.isAnnounced = true;\r\n                contextData.activityId = contextUpdatedMsg.activity_id;\r\n            }\r\n            contextData.joinedActivity = true;\r\n        }\r\n        else {\r\n            if (!contextData || !contextData.isAnnounced) {\r\n                if (updatedMessageType === GW_MESSAGE_SUBSCRIBED_CONTEXT) {\r\n                    contextData = contextData || new GW3ContextData(contextId, contextUpdatedMsg.name, true, undefined);\r\n                    contextData.sentExplicitSubscription = true;\r\n                    this._contextNameToData[contextUpdatedMsg.name] = contextData;\r\n                    this._contextIdToName[contextId] = contextUpdatedMsg.name;\r\n                    this._contextNameToId[contextUpdatedMsg.name] = contextId;\r\n                }\r\n                else {\r\n                    this._logger.error(\"Received 'update' for unknown context: \" + contextId);\r\n                }\r\n                return;\r\n            }\r\n        }\r\n        var oldContext = contextData.context;\r\n        contextData.hasReceivedSnapshot = true;\r\n        if (updatedMessageType === GW_MESSAGE_SUBSCRIBED_CONTEXT) {\r\n            contextData.context = contextUpdatedMsg.data || {};\r\n        }\r\n        else if (updatedMessageType === GW_MESSAGE_JOINED_ACTIVITY) {\r\n            contextData.context = contextUpdatedMsg.context_snapshot || {};\r\n        }\r\n        else if (updatedMessageType === GW_MESSAGE_CONTEXT_UPDATED) {\r\n            contextData.context = applyContextDelta(contextData.context, contextUpdatedMsg.delta, this._logger);\r\n        }\r\n        else {\r\n            throw new Error(\"Unrecognized context update message \" + updatedMessageType);\r\n        }\r\n        if (justSeen ||\r\n            !deepEqual(contextData.context, oldContext) ||\r\n            updatedMessageType === GW_MESSAGE_SUBSCRIBED_CONTEXT) {\r\n            this.invokeUpdateCallbacks(contextData, contextUpdatedMsg.delta, { updaterId: contextUpdatedMsg.updater_id });\r\n        }\r\n    };\r\n    GW3Bridge.prototype.invokeUpdateCallbacks = function (contextData, delta, extraData) {\r\n        delta = delta || { added: {}, updated: {}, reset: {}, removed: [] };\r\n        if (delta.commands) {\r\n            delta.added = delta.updated = delta.reset = {};\r\n            delta.removed = [];\r\n            for (var _i = 0, _a = delta.commands; _i < _a.length; _i++) {\r\n                var command = _a[_i];\r\n                if (command.type === \"remove\") {\r\n                    if (command.path.indexOf(\".\") === -1) {\r\n                        delta.removed.push(command.path);\r\n                    }\r\n                    setValueToPath(delta.updated, null, command.path);\r\n                }\r\n                else if (command.type === \"set\") {\r\n                    setValueToPath(delta.updated, command.value, command.path);\r\n                }\r\n            }\r\n        }\r\n        for (var updateCallbackIndex in contextData.updateCallbacks) {\r\n            if (contextData.updateCallbacks.hasOwnProperty(updateCallbackIndex)) {\r\n                try {\r\n                    var updateCallback = contextData.updateCallbacks[updateCallbackIndex];\r\n                    updateCallback(deepClone(contextData.context), Object.assign({}, delta.added || {}, delta.updated || {}, delta.reset || {}), delta.removed, parseInt(updateCallbackIndex, 10), extraData);\r\n                }\r\n                catch (err) {\r\n                    this._logger.debug(\"callback error: \" + JSON.stringify(err));\r\n                }\r\n            }\r\n        }\r\n    };\r\n    GW3Bridge.prototype.subscribeToContextDestroyedMessages = function () {\r\n        var destroyedMessageTypes = [\r\n            GW_MESSAGE_CONTEXT_DESTROYED,\r\n            GW_MESSAGE_ACTIVITY_DESTROYED,\r\n        ];\r\n        for (var _i = 0, destroyedMessageTypes_1 = destroyedMessageTypes; _i < destroyedMessageTypes_1.length; _i++) {\r\n            var destroyedMessageType = destroyedMessageTypes_1[_i];\r\n            var sub = this._connection.on(destroyedMessageType, this.handleContextDestroyedMessage.bind(this));\r\n            this._gw3Subscriptions.push(sub);\r\n        }\r\n    };\r\n    GW3Bridge.prototype.handleContextDestroyedMessage = function (destroyedMsg) {\r\n        var destroyedMessageType = destroyedMsg.type;\r\n        var contextId;\r\n        var name;\r\n        if (destroyedMessageType === GW_MESSAGE_ACTIVITY_DESTROYED) {\r\n            name = destroyedMsg.activity_id;\r\n            contextId = this._contextNameToId[name];\r\n            if (!contextId) {\r\n                this._logger.error(\"Received 'destroyed' for unknown activity: \" + destroyedMsg.activity_id);\r\n                return;\r\n            }\r\n        }\r\n        else {\r\n            contextId = destroyedMsg.context_id;\r\n            name = this._contextIdToName[contextId];\r\n            if (!name) {\r\n                this._logger.error(\"Received 'destroyed' for unknown context: \" + destroyedMsg.context_id);\r\n                return;\r\n            }\r\n        }\r\n        delete this._contextIdToName[contextId];\r\n        delete this._contextNameToId[name];\r\n        var contextData = this._contextNameToData[name];\r\n        delete this._contextNameToData[name];\r\n        if (!contextData || !contextData.isAnnounced) {\r\n            this._logger.error(\"Received 'destroyed' for unknown context: \" + contextId);\r\n            return;\r\n        }\r\n    };\r\n    GW3Bridge.prototype.sendSubscribe = function (contextData) {\r\n        contextData.sentExplicitSubscription = true;\r\n        return this._gw3Session\r\n            .send({\r\n            type: GW_MESSAGE_SUBSCRIBE_CONTEXT,\r\n            domain: \"global\",\r\n            context_id: contextData.contextId,\r\n        }).then(function (_) { return undefined; });\r\n    };\r\n    GW3Bridge.prototype.sendUnsubscribe = function (contextData) {\r\n        contextData.sentExplicitSubscription = false;\r\n        return this._gw3Session\r\n            .send({\r\n            type: GW_MESSAGE_UNSUBSCRIBE_CONTEXT,\r\n            domain: \"global\",\r\n            context_id: contextData.contextId,\r\n        }).then(function (_) { return undefined; });\r\n    };\r\n    GW3Bridge.prototype.calculateContextDeltaV1 = function (from, to) {\r\n        var delta = { added: {}, updated: {}, removed: [], reset: undefined };\r\n        if (from) {\r\n            for (var _i = 0, _a = Object.keys(from); _i < _a.length; _i++) {\r\n                var x = _a[_i];\r\n                if (Object.keys(to).indexOf(x) !== -1\r\n                    && to[x] !== null\r\n                    && !deepEqual(from[x], to[x])) {\r\n                    delta.updated[x] = to[x];\r\n                }\r\n            }\r\n        }\r\n        for (var _b = 0, _c = Object.keys(to); _b < _c.length; _b++) {\r\n            var x = _c[_b];\r\n            if (!from || (Object.keys(from).indexOf(x) === -1)) {\r\n                if (to[x] !== null) {\r\n                    delta.added[x] = to[x];\r\n                }\r\n            }\r\n            else if (to[x] === null) {\r\n                delta.removed.push(x);\r\n            }\r\n        }\r\n        return delta;\r\n    };\r\n    GW3Bridge.prototype.calculateContextDeltaV2 = function (from, to) {\r\n        var _a, _b;\r\n        var delta = { added: {}, updated: {}, removed: [], reset: undefined, commands: [] };\r\n        for (var _i = 0, _c = Object.keys(to); _i < _c.length; _i++) {\r\n            var x = _c[_i];\r\n            if (to[x] !== null) {\r\n                var fromX = from ? from[x] : null;\r\n                if (!deepEqual(fromX, to[x])) {\r\n                    (_a = delta.commands) === null || _a === void 0 ? void 0 : _a.push({ type: \"set\", path: x, value: to[x] });\r\n                }\r\n            }\r\n            else {\r\n                (_b = delta.commands) === null || _b === void 0 ? void 0 : _b.push({ type: \"remove\", path: x });\r\n            }\r\n        }\r\n        return delta;\r\n    };\r\n    GW3Bridge.prototype.resetState = function () {\r\n        var _this = this;\r\n        for (var _i = 0, _a = this._gw3Subscriptions; _i < _a.length; _i++) {\r\n            var sub = _a[_i];\r\n            this._connection.off(sub);\r\n        }\r\n        if (this._systemContextsSubKey) {\r\n            this.unsubscribe(this._systemContextsSubKey);\r\n            delete this._systemContextsSubKey;\r\n        }\r\n        this._gw3Subscriptions = [];\r\n        this._contextNameToId = {};\r\n        this._contextIdToName = {};\r\n        delete this._protocolVersion;\r\n        this._contextsTempCache = Object.keys(this._contextNameToData).reduce(function (cacheSoFar, ctxName) {\r\n            cacheSoFar[ctxName] = _this._contextNameToData[ctxName].context;\r\n            return cacheSoFar;\r\n        }, {});\r\n        this._contextNameToData = {};\r\n    };\r\n    GW3Bridge.prototype.reInitiateState = function () {\r\n        var _a;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _b, _c, _i, ctxName, lastKnownData;\r\n            var _this = this;\r\n            return __generator(this, function (_e) {\r\n                switch (_e.label) {\r\n                    case 0:\r\n                        this.subscribeToContextCreatedMessages();\r\n                        this.subscribeToContextUpdatedMessages();\r\n                        this.subscribeToContextDestroyedMessages();\r\n                        (_a = this._connection.replayer) === null || _a === void 0 ? void 0 : _a.drain(ContextMessageReplaySpec.name, function (message) {\r\n                            var type = message.type;\r\n                            if (!type) {\r\n                                return;\r\n                            }\r\n                            if (type === GW_MESSAGE_CONTEXT_CREATED ||\r\n                                type === GW_MESSAGE_CONTEXT_ADDED ||\r\n                                type === GW_MESSAGE_ACTIVITY_CREATED) {\r\n                                _this.handleContextCreatedMessage(message);\r\n                            }\r\n                            else if (type === GW_MESSAGE_SUBSCRIBED_CONTEXT ||\r\n                                type === GW_MESSAGE_CONTEXT_UPDATED ||\r\n                                type === GW_MESSAGE_JOINED_ACTIVITY) {\r\n                                _this.handleContextUpdatedMessage(message);\r\n                            }\r\n                            else if (type === GW_MESSAGE_CONTEXT_DESTROYED ||\r\n                                type === GW_MESSAGE_ACTIVITY_DESTROYED) {\r\n                                _this.handleContextDestroyedMessage(message);\r\n                            }\r\n                        });\r\n                        return [4, Promise.all(this._contextsSubscriptionsCache.map(function (subscription) { return _this.subscribe(subscription.contextName, subscription.callback, subscription.subKey); }))];\r\n                    case 1:\r\n                        _e.sent();\r\n                        return [4, this.flushQueue()];\r\n                    case 2:\r\n                        _e.sent();\r\n                        _b = [];\r\n                        for (_c in this._contextsTempCache)\r\n                            _b.push(_c);\r\n                        _i = 0;\r\n                        _e.label = 3;\r\n                    case 3:\r\n                        if (!(_i < _b.length)) return [3, 6];\r\n                        ctxName = _b[_i];\r\n                        if (typeof this._contextsTempCache[ctxName] !== \"object\" || Object.keys(this._contextsTempCache[ctxName]).length === 0) {\r\n                            return [3, 5];\r\n                        }\r\n                        lastKnownData = this._contextsTempCache[ctxName];\r\n                        this._logger.info(\"Re-announcing known context: \" + ctxName);\r\n                        return [4, this.update(ctxName, lastKnownData)];\r\n                    case 4:\r\n                        _e.sent();\r\n                        _e.label = 5;\r\n                    case 5:\r\n                        _i++;\r\n                        return [3, 3];\r\n                    case 6:\r\n                        this._contextsTempCache = {};\r\n                        this._logger.info(\"Contexts are re-announced\");\r\n                        return [2];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    GW3Bridge.prototype.flushQueue = function () {\r\n        return new Promise(function (resolve) { return setTimeout(function () { return resolve(); }, 0); });\r\n    };\r\n    return GW3Bridge;\r\n}());\n\nvar ContextsModule = (function () {\r\n    function ContextsModule(config) {\r\n        this._bridge = new GW3Bridge(config);\r\n    }\r\n    ContextsModule.prototype.all = function () {\r\n        return this._bridge.all();\r\n    };\r\n    ContextsModule.prototype.update = function (name, data) {\r\n        this.checkName(name);\r\n        this.checkData(data);\r\n        return this._bridge.update(name, data);\r\n    };\r\n    ContextsModule.prototype.set = function (name, data) {\r\n        this.checkName(name);\r\n        this.checkData(data);\r\n        return this._bridge.set(name, data);\r\n    };\r\n    ContextsModule.prototype.setPath = function (name, path, data) {\r\n        this.checkName(name);\r\n        this.checkPath(path);\r\n        var isTopLevelPath = path === \"\";\r\n        if (isTopLevelPath) {\r\n            this.checkData(data);\r\n            return this.set(name, data);\r\n        }\r\n        return this._bridge.setPath(name, path, data);\r\n    };\r\n    ContextsModule.prototype.setPaths = function (name, paths) {\r\n        this.checkName(name);\r\n        if (!Array.isArray(paths)) {\r\n            throw new Error(\"Please provide the paths as an array of PathValues!\");\r\n        }\r\n        for (var _i = 0, paths_1 = paths; _i < paths_1.length; _i++) {\r\n            var _a = paths_1[_i], path = _a.path, value = _a.value;\r\n            this.checkPath(path);\r\n            var isTopLevelPath = path === \"\";\r\n            if (isTopLevelPath) {\r\n                this.checkData(value);\r\n            }\r\n        }\r\n        return this._bridge.setPaths(name, paths);\r\n    };\r\n    ContextsModule.prototype.subscribe = function (name, callback) {\r\n        var _this = this;\r\n        this.checkName(name);\r\n        if (typeof callback !== \"function\") {\r\n            throw new Error(\"Please provide the callback as a function!\");\r\n        }\r\n        return this._bridge\r\n            .subscribe(name, function (data, delta, removed, key, extraData) { return callback(data, delta, removed, function () { return _this._bridge.unsubscribe(key); }, extraData); })\r\n            .then(function (key) {\r\n            return function () {\r\n                _this._bridge.unsubscribe(key);\r\n            };\r\n        });\r\n    };\r\n    ContextsModule.prototype.get = function (name) {\r\n        this.checkName(name);\r\n        return this._bridge.get(name);\r\n    };\r\n    ContextsModule.prototype.ready = function () {\r\n        return Promise.resolve(this);\r\n    };\r\n    ContextsModule.prototype.destroy = function (name) {\r\n        this.checkName(name);\r\n        return this._bridge.destroy(name);\r\n    };\r\n    Object.defineProperty(ContextsModule.prototype, \"setPathSupported\", {\r\n        get: function () {\r\n            return this._bridge.setPathSupported;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ContextsModule.prototype.checkName = function (name) {\r\n        if (typeof name !== \"string\" || name === \"\") {\r\n            throw new Error(\"Please provide the name as a non-empty string!\");\r\n        }\r\n    };\r\n    ContextsModule.prototype.checkPath = function (path) {\r\n        if (typeof path !== \"string\") {\r\n            throw new Error(\"Please provide the path as a dot delimited string!\");\r\n        }\r\n    };\r\n    ContextsModule.prototype.checkData = function (data) {\r\n        if (typeof data !== \"object\") {\r\n            throw new Error(\"Please provide the data as an object!\");\r\n        }\r\n    };\r\n    return ContextsModule;\r\n}());\n\nfunction promisify (promise, successCallback, errorCallback) {\r\n    if (typeof successCallback !== \"function\" && typeof errorCallback !== \"function\") {\r\n        return promise;\r\n    }\r\n    if (typeof successCallback !== \"function\") {\r\n        successCallback = function () { };\r\n    }\r\n    else if (typeof errorCallback !== \"function\") {\r\n        errorCallback = function () { };\r\n    }\r\n    return promise.then(successCallback, errorCallback);\r\n}\n\nfunction rejectAfter(ms, promise, error) {\r\n    if (ms === void 0) { ms = 0; }\r\n    var timeout;\r\n    var clearTimeoutIfThere = function () {\r\n        if (timeout) {\r\n            clearTimeout(timeout);\r\n        }\r\n    };\r\n    promise\r\n        .then(function () {\r\n        clearTimeoutIfThere();\r\n    })\r\n        .catch(function () {\r\n        clearTimeoutIfThere();\r\n    });\r\n    return new Promise(function (resolve, reject) {\r\n        timeout = setTimeout(function () { return reject(error); }, ms);\r\n    });\r\n}\n\nvar InvokeStatus;\r\n(function (InvokeStatus) {\r\n    InvokeStatus[InvokeStatus[\"Success\"] = 0] = \"Success\";\r\n    InvokeStatus[InvokeStatus[\"Error\"] = 1] = \"Error\";\r\n})(InvokeStatus || (InvokeStatus = {}));\r\nvar Client = (function () {\r\n    function Client(protocol, repo, instance, configuration) {\r\n        this.protocol = protocol;\r\n        this.repo = repo;\r\n        this.instance = instance;\r\n        this.configuration = configuration;\r\n    }\r\n    Client.prototype.subscribe = function (method, options, successCallback, errorCallback, existingSub) {\r\n        var _this = this;\r\n        var callProtocolSubscribe = function (targetServers, stream, successProxy, errorProxy) {\r\n            var _a;\r\n            options.methodResponseTimeout = (_a = options.methodResponseTimeout) !== null && _a !== void 0 ? _a : options.waitTimeoutMs;\r\n            _this.protocol.client.subscribe(stream, options, targetServers, successProxy, errorProxy, existingSub);\r\n        };\r\n        var promise = new Promise(function (resolve, reject) {\r\n            var successProxy = function (sub) {\r\n                resolve(sub);\r\n            };\r\n            var errorProxy = function (err) {\r\n                reject(err);\r\n            };\r\n            if (!method) {\r\n                reject(\"Method definition is required. Please, provide either a unique string for a method name or a \\u201CmethodDefinition\\u201D object with a required \\u201Cname\\u201D property.\");\r\n                return;\r\n            }\r\n            var methodDef;\r\n            if (typeof method === \"string\") {\r\n                methodDef = { name: method };\r\n            }\r\n            else {\r\n                methodDef = method;\r\n            }\r\n            if (!methodDef.name) {\r\n                reject(\"Method definition is required. Please, provide either a unique string for a method name or a \\u201CmethodDefinition\\u201D object with a required \\u201Cname\\u201D property.\");\r\n                return;\r\n            }\r\n            if (options === undefined) {\r\n                options = {};\r\n            }\r\n            var target = options.target;\r\n            if (target === undefined) {\r\n                target = \"best\";\r\n            }\r\n            if (typeof target === \"string\" && target !== \"all\" && target !== \"best\") {\r\n                reject(new Error(\"\\\"\" + target + \"\\\" is not a valid target. Valid targets are \\\"all\\\", \\\"best\\\", or an instance.\"));\r\n                return;\r\n            }\r\n            if (options.methodResponseTimeout === undefined) {\r\n                options.methodResponseTimeout = options.method_response_timeout;\r\n                if (options.methodResponseTimeout === undefined) {\r\n                    options.methodResponseTimeout = _this.configuration.methodResponseTimeout;\r\n                }\r\n            }\r\n            if (options.waitTimeoutMs === undefined) {\r\n                options.waitTimeoutMs = options.wait_for_method_timeout;\r\n                if (options.waitTimeoutMs === undefined) {\r\n                    options.waitTimeoutMs = _this.configuration.waitTimeoutMs;\r\n                }\r\n            }\r\n            var delayStep = 500;\r\n            var delayTillNow = 0;\r\n            var currentServers = _this.getServerMethodsByFilterAndTarget(methodDef, target);\r\n            if (currentServers.length > 0) {\r\n                callProtocolSubscribe(currentServers, currentServers[0].methods[0], successProxy, errorProxy);\r\n            }\r\n            else {\r\n                var retry_1 = function () {\r\n                    if (!target || !(options.waitTimeoutMs)) {\r\n                        return;\r\n                    }\r\n                    delayTillNow += delayStep;\r\n                    currentServers = _this.getServerMethodsByFilterAndTarget(methodDef, target);\r\n                    if (currentServers.length > 0) {\r\n                        var streamInfo = currentServers[0].methods[0];\r\n                        callProtocolSubscribe(currentServers, streamInfo, successProxy, errorProxy);\r\n                    }\r\n                    else if (delayTillNow >= options.waitTimeoutMs) {\r\n                        var def = typeof method === \"string\" ? { name: method } : method;\r\n                        callProtocolSubscribe(currentServers, def, successProxy, errorProxy);\r\n                    }\r\n                    else {\r\n                        setTimeout(retry_1, delayStep);\r\n                    }\r\n                };\r\n                setTimeout(retry_1, delayStep);\r\n            }\r\n        });\r\n        return promisify(promise, successCallback, errorCallback);\r\n    };\r\n    Client.prototype.servers = function (methodFilter) {\r\n        var filterCopy = methodFilter === undefined\r\n            ? undefined\r\n            : __assign({}, methodFilter);\r\n        return this.getServers(filterCopy).map(function (serverMethodMap) {\r\n            return serverMethodMap.server.instance;\r\n        });\r\n    };\r\n    Client.prototype.methods = function (methodFilter) {\r\n        if (typeof methodFilter === \"string\") {\r\n            methodFilter = { name: methodFilter };\r\n        }\r\n        else {\r\n            methodFilter = __assign({}, methodFilter);\r\n        }\r\n        return this.getMethods(methodFilter);\r\n    };\r\n    Client.prototype.methodsForInstance = function (instance) {\r\n        return this.getMethodsForInstance(instance);\r\n    };\r\n    Client.prototype.methodAdded = function (callback) {\r\n        return this.repo.onMethodAdded(callback);\r\n    };\r\n    Client.prototype.methodRemoved = function (callback) {\r\n        return this.repo.onMethodRemoved(callback);\r\n    };\r\n    Client.prototype.serverAdded = function (callback) {\r\n        return this.repo.onServerAdded(callback);\r\n    };\r\n    Client.prototype.serverRemoved = function (callback) {\r\n        return this.repo.onServerRemoved(function (server, reason) {\r\n            callback(server, reason);\r\n        });\r\n    };\r\n    Client.prototype.serverMethodAdded = function (callback) {\r\n        return this.repo.onServerMethodAdded(function (server, method) {\r\n            callback({ server: server, method: method });\r\n        });\r\n    };\r\n    Client.prototype.serverMethodRemoved = function (callback) {\r\n        return this.repo.onServerMethodRemoved(function (server, method) {\r\n            callback({ server: server, method: method });\r\n        });\r\n    };\r\n    Client.prototype.invoke = function (methodFilter, argumentObj, target, additionalOptions, success, error) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var getInvokePromise;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                getInvokePromise = function () { return __awaiter(_this, void 0, void 0, function () {\r\n                    var methodDefinition, serversMethodMap, err_1, method, errorObj, timeout, additionalOptionsCopy, invokePromises, invocationMessages, results, allRejected;\r\n                    var _this = this;\r\n                    var _a, _b, _c;\r\n                    return __generator(this, function (_d) {\r\n                        switch (_d.label) {\r\n                            case 0:\r\n                                if (typeof methodFilter === \"string\") {\r\n                                    methodDefinition = { name: methodFilter };\r\n                                }\r\n                                else {\r\n                                    methodDefinition = __assign({}, methodFilter);\r\n                                }\r\n                                if (!methodDefinition.name) {\r\n                                    return [2, Promise.reject(\"Method definition is required. Please, provide either a unique string for a method name or a \\u201CmethodDefinition\\u201D object with a required \\u201Cname\\u201D property.\")];\r\n                                }\r\n                                if (!argumentObj) {\r\n                                    argumentObj = {};\r\n                                }\r\n                                if (!target) {\r\n                                    target = \"best\";\r\n                                }\r\n                                if (typeof target === \"string\" && target !== \"all\" && target !== \"best\" && target !== \"skipMine\") {\r\n                                    return [2, Promise.reject(new Error(\"\\\"\" + target + \"\\\" is not a valid target. Valid targets are \\\"all\\\" and \\\"best\\\".\"))];\r\n                                }\r\n                                if (!additionalOptions) {\r\n                                    additionalOptions = {};\r\n                                }\r\n                                if (additionalOptions.methodResponseTimeoutMs === undefined) {\r\n                                    additionalOptions.methodResponseTimeoutMs = additionalOptions.method_response_timeout;\r\n                                    if (additionalOptions.methodResponseTimeoutMs === undefined) {\r\n                                        additionalOptions.methodResponseTimeoutMs = this.configuration.methodResponseTimeout;\r\n                                    }\r\n                                }\r\n                                if (additionalOptions.waitTimeoutMs === undefined) {\r\n                                    additionalOptions.waitTimeoutMs = additionalOptions.wait_for_method_timeout;\r\n                                    if (additionalOptions.waitTimeoutMs === undefined) {\r\n                                        additionalOptions.waitTimeoutMs = this.configuration.waitTimeoutMs;\r\n                                    }\r\n                                }\r\n                                if (additionalOptions.waitTimeoutMs !== undefined && typeof additionalOptions.waitTimeoutMs !== \"number\") {\r\n                                    return [2, Promise.reject(new Error(\"\\\"\" + additionalOptions.waitTimeoutMs + \"\\\" is not a valid number for \\\"waitTimeoutMs\\\" \"))];\r\n                                }\r\n                                if (typeof argumentObj !== \"object\") {\r\n                                    return [2, Promise.reject(new Error(\"The method arguments must be an object. method: \" + methodDefinition.name))];\r\n                                }\r\n                                serversMethodMap = this.getServerMethodsByFilterAndTarget(methodDefinition, target);\r\n                                if (!(serversMethodMap.length === 0)) return [3, 4];\r\n                                _d.label = 1;\r\n                            case 1:\r\n                                _d.trys.push([1, 3, , 4]);\r\n                                return [4, this.tryToAwaitForMethods(methodDefinition, target, additionalOptions)];\r\n                            case 2:\r\n                                serversMethodMap = _d.sent();\r\n                                return [3, 4];\r\n                            case 3:\r\n                                err_1 = _d.sent();\r\n                                method = __assign(__assign({}, methodDefinition), { getServers: function () { return []; }, supportsStreaming: false, objectTypes: (_a = methodDefinition.objectTypes) !== null && _a !== void 0 ? _a : [], flags: (_c = (_b = methodDefinition.flags) === null || _b === void 0 ? void 0 : _b.metadata) !== null && _c !== void 0 ? _c : {} });\r\n                                errorObj = {\r\n                                    method: method,\r\n                                    called_with: argumentObj,\r\n                                    message: \"Can not find a method matching \" + JSON.stringify(methodFilter) + \" with server filter \" + JSON.stringify(target),\r\n                                    executed_by: undefined,\r\n                                    returned: undefined,\r\n                                    status: undefined,\r\n                                };\r\n                                return [2, Promise.reject(errorObj)];\r\n                            case 4:\r\n                                timeout = additionalOptions.methodResponseTimeoutMs;\r\n                                additionalOptionsCopy = additionalOptions;\r\n                                invokePromises = serversMethodMap.map(function (serversMethodPair) {\r\n                                    var invId = shortid();\r\n                                    var method = serversMethodPair.methods[0];\r\n                                    var server = serversMethodPair.server;\r\n                                    var invokePromise = _this.protocol.client.invoke(invId, method, argumentObj, server, additionalOptionsCopy);\r\n                                    return Promise.race([\r\n                                        invokePromise,\r\n                                        rejectAfter(timeout, invokePromise, {\r\n                                            invocationId: invId,\r\n                                            message: \"Invocation timeout (\" + timeout + \" ms) reached for method name: \" + (method === null || method === void 0 ? void 0 : method.name) + \", target instance: \" + JSON.stringify(server.instance) + \", options: \" + JSON.stringify(additionalOptionsCopy),\r\n                                            status: InvokeStatus.Error,\r\n                                        })\r\n                                    ]);\r\n                                });\r\n                                return [4, Promise.all(invokePromises)];\r\n                            case 5:\r\n                                invocationMessages = _d.sent();\r\n                                results = this.getInvocationResultObj(invocationMessages, methodDefinition, argumentObj);\r\n                                allRejected = invocationMessages.every(function (result) { return result.status === InvokeStatus.Error; });\r\n                                if (allRejected) {\r\n                                    return [2, Promise.reject(results)];\r\n                                }\r\n                                return [2, results];\r\n                        }\r\n                    });\r\n                }); };\r\n                return [2, promisify(getInvokePromise(), success, error)];\r\n            });\r\n        });\r\n    };\r\n    Client.prototype.getInvocationResultObj = function (invocationResults, method, calledWith) {\r\n        var all_return_values = invocationResults\r\n            .filter(function (invokeMessage) { return invokeMessage.status === InvokeStatus.Success; })\r\n            .reduce(function (allValues, currentValue) {\r\n            allValues = __spreadArrays(allValues, [\r\n                {\r\n                    executed_by: currentValue.instance,\r\n                    returned: currentValue.result,\r\n                    called_with: calledWith,\r\n                    method: method,\r\n                    message: currentValue.message,\r\n                    status: currentValue.status,\r\n                }\r\n            ]);\r\n            return allValues;\r\n        }, []);\r\n        var all_errors = invocationResults\r\n            .filter(function (invokeMessage) { return invokeMessage.status === InvokeStatus.Error; })\r\n            .reduce(function (allErrors, currError) {\r\n            allErrors = __spreadArrays(allErrors, [\r\n                {\r\n                    executed_by: currError.instance,\r\n                    called_with: calledWith,\r\n                    name: method.name,\r\n                    message: currError.message,\r\n                }\r\n            ]);\r\n            return allErrors;\r\n        }, []);\r\n        var invResult = invocationResults[0];\r\n        var result = {\r\n            method: method,\r\n            called_with: calledWith,\r\n            returned: invResult.result,\r\n            executed_by: invResult.instance,\r\n            all_return_values: all_return_values,\r\n            all_errors: all_errors,\r\n            message: invResult.message,\r\n            status: invResult.status\r\n        };\r\n        return result;\r\n    };\r\n    Client.prototype.tryToAwaitForMethods = function (methodDefinition, target, additionalOptions) {\r\n        var _this = this;\r\n        return new Promise(function (resolve, reject) {\r\n            if (additionalOptions.waitTimeoutMs === 0) {\r\n                reject();\r\n                return;\r\n            }\r\n            var delayStep = 500;\r\n            var delayTillNow = 0;\r\n            var retry = function () {\r\n                delayTillNow += delayStep;\r\n                var serversMethodMap = _this.getServerMethodsByFilterAndTarget(methodDefinition, target);\r\n                if (serversMethodMap.length > 0) {\r\n                    clearInterval(interval);\r\n                    resolve(serversMethodMap);\r\n                }\r\n                else if (delayTillNow >= (additionalOptions.waitTimeoutMs || 10000)) {\r\n                    clearInterval(interval);\r\n                    reject();\r\n                    return;\r\n                }\r\n            };\r\n            var interval = setInterval(retry, delayStep);\r\n        });\r\n    };\r\n    Client.prototype.filterByTarget = function (target, serverMethodMap) {\r\n        var _this = this;\r\n        if (typeof target === \"string\") {\r\n            if (target === \"all\") {\r\n                return __spreadArrays(serverMethodMap);\r\n            }\r\n            else if (target === \"best\") {\r\n                var localMachine = serverMethodMap\r\n                    .find(function (s) { return s.server.instance.isLocal; });\r\n                if (localMachine) {\r\n                    return [localMachine];\r\n                }\r\n                if (serverMethodMap[0] !== undefined) {\r\n                    return [serverMethodMap[0]];\r\n                }\r\n            }\r\n            else if (target === \"skipMine\") {\r\n                return serverMethodMap.filter(function (_a) {\r\n                    var server = _a.server;\r\n                    return server.instance.peerId !== _this.instance.peerId;\r\n                });\r\n            }\r\n        }\r\n        else {\r\n            var targetArray = void 0;\r\n            if (!Array.isArray(target)) {\r\n                targetArray = [target];\r\n            }\r\n            else {\r\n                targetArray = target;\r\n            }\r\n            var allServersMatching = targetArray.reduce(function (matches, filter) {\r\n                var myMatches = serverMethodMap.filter(function (serverMethodPair) {\r\n                    return _this.instanceMatch(filter, serverMethodPair.server.instance);\r\n                });\r\n                return matches.concat(myMatches);\r\n            }, []);\r\n            return allServersMatching;\r\n        }\r\n        return [];\r\n    };\r\n    Client.prototype.instanceMatch = function (instanceFilter, instanceDefinition) {\r\n        return this.containsProps(instanceFilter, instanceDefinition);\r\n    };\r\n    Client.prototype.methodMatch = function (methodFilter, methodDefinition) {\r\n        return this.containsProps(methodFilter, methodDefinition);\r\n    };\r\n    Client.prototype.containsProps = function (filter, repoMethod) {\r\n        var filterProps = Object.keys(filter)\r\n            .filter(function (prop) {\r\n            return filter[prop] !== undefined\r\n                && filter[prop] !== null\r\n                && typeof filter[prop] !== \"function\"\r\n                && prop !== \"object_types\"\r\n                && prop !== \"display_name\"\r\n                && prop !== \"id\"\r\n                && prop !== \"gatewayId\"\r\n                && prop !== \"identifier\"\r\n                && prop[0] !== \"_\";\r\n        });\r\n        return filterProps.every(function (prop) {\r\n            var isMatch;\r\n            var filterValue = filter[prop];\r\n            var repoMethodValue = repoMethod[prop];\r\n            switch (prop) {\r\n                case \"objectTypes\":\r\n                    isMatch = (filterValue || []).every(function (filterValueEl) {\r\n                        return (repoMethodValue || []).includes(filterValueEl);\r\n                    });\r\n                    break;\r\n                case \"flags\":\r\n                    isMatch = isSubset(repoMethodValue || {}, filterValue || {});\r\n                    break;\r\n                default:\r\n                    isMatch = String(filterValue).toLowerCase() === String(repoMethodValue).toLowerCase();\r\n            }\r\n            return isMatch;\r\n        });\r\n    };\r\n    Client.prototype.getMethods = function (methodFilter) {\r\n        var _this = this;\r\n        if (methodFilter === undefined) {\r\n            return this.repo.getMethods();\r\n        }\r\n        var methods = this.repo.getMethods().filter(function (method) {\r\n            return _this.methodMatch(methodFilter, method);\r\n        });\r\n        return methods;\r\n    };\r\n    Client.prototype.getMethodsForInstance = function (instanceFilter) {\r\n        var _this = this;\r\n        var allServers = this.repo.getServers();\r\n        var matchingServers = allServers.filter(function (server) {\r\n            return _this.instanceMatch(instanceFilter, server.instance);\r\n        });\r\n        if (matchingServers.length === 0) {\r\n            return [];\r\n        }\r\n        var resultMethodsObject = {};\r\n        if (matchingServers.length === 1) {\r\n            resultMethodsObject = matchingServers[0].methods;\r\n        }\r\n        else {\r\n            matchingServers.forEach(function (server) {\r\n                Object.keys(server.methods).forEach(function (methodKey) {\r\n                    var method = server.methods[methodKey];\r\n                    resultMethodsObject[method.identifier] = method;\r\n                });\r\n            });\r\n        }\r\n        return Object.keys(resultMethodsObject)\r\n            .map(function (key) {\r\n            return resultMethodsObject[key];\r\n        });\r\n    };\r\n    Client.prototype.getServers = function (methodFilter) {\r\n        var _this = this;\r\n        var servers = this.repo.getServers();\r\n        if (methodFilter === undefined) {\r\n            return servers.map(function (server) {\r\n                return { server: server, methods: [] };\r\n            });\r\n        }\r\n        return servers.reduce(function (prev, current) {\r\n            var methodsForServer = Object.values(current.methods);\r\n            var matchingMethods = methodsForServer.filter(function (method) {\r\n                return _this.methodMatch(methodFilter, method);\r\n            });\r\n            if (matchingMethods.length > 0) {\r\n                prev.push({ server: current, methods: matchingMethods });\r\n            }\r\n            return prev;\r\n        }, []);\r\n    };\r\n    Client.prototype.getServerMethodsByFilterAndTarget = function (methodFilter, target) {\r\n        var serversMethodMap = this.getServers(methodFilter);\r\n        return this.filterByTarget(target, serversMethodMap);\r\n    };\r\n    return Client;\r\n}());\n\nvar ServerSubscription = (function () {\r\n    function ServerSubscription(protocol, repoMethod, subscription) {\r\n        this.protocol = protocol;\r\n        this.repoMethod = repoMethod;\r\n        this.subscription = subscription;\r\n    }\r\n    Object.defineProperty(ServerSubscription.prototype, \"stream\", {\r\n        get: function () {\r\n            if (!this.repoMethod.stream) {\r\n                throw new Error(\"no stream\");\r\n            }\r\n            return this.repoMethod.stream;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ServerSubscription.prototype, \"arguments\", {\r\n        get: function () { return this.subscription.arguments || {}; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ServerSubscription.prototype, \"branchKey\", {\r\n        get: function () { return this.subscription.branchKey; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ServerSubscription.prototype, \"instance\", {\r\n        get: function () {\r\n            if (!this.subscription.instance) {\r\n                throw new Error(\"no instance\");\r\n            }\r\n            return this.subscription.instance;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ServerSubscription.prototype.close = function () {\r\n        this.protocol.server.closeSingleSubscription(this.repoMethod, this.subscription);\r\n    };\r\n    ServerSubscription.prototype.push = function (data) {\r\n        this.protocol.server.pushDataToSingle(this.repoMethod, this.subscription, data);\r\n    };\r\n    return ServerSubscription;\r\n}());\n\nvar Request = (function () {\r\n    function Request(protocol, repoMethod, requestContext) {\r\n        this.protocol = protocol;\r\n        this.repoMethod = repoMethod;\r\n        this.requestContext = requestContext;\r\n        this.arguments = requestContext.arguments;\r\n        this.instance = requestContext.instance;\r\n    }\r\n    Request.prototype.accept = function () {\r\n        this.protocol.server.acceptRequestOnBranch(this.requestContext, this.repoMethod, \"\");\r\n    };\r\n    Request.prototype.acceptOnBranch = function (branch) {\r\n        this.protocol.server.acceptRequestOnBranch(this.requestContext, this.repoMethod, branch);\r\n    };\r\n    Request.prototype.reject = function (reason) {\r\n        this.protocol.server.rejectRequest(this.requestContext, this.repoMethod, reason);\r\n    };\r\n    return Request;\r\n}());\n\nvar ServerStreaming = (function () {\r\n    function ServerStreaming(protocol, server) {\r\n        var _this = this;\r\n        this.protocol = protocol;\r\n        this.server = server;\r\n        protocol.server.onSubRequest(function (rc, rm) { return _this.handleSubRequest(rc, rm); });\r\n        protocol.server.onSubAdded(function (sub, rm) { return _this.handleSubAdded(sub, rm); });\r\n        protocol.server.onSubRemoved(function (sub, rm) { return _this.handleSubRemoved(sub, rm); });\r\n    }\r\n    ServerStreaming.prototype.handleSubRequest = function (requestContext, repoMethod) {\r\n        if (!(repoMethod &&\r\n            repoMethod.streamCallbacks &&\r\n            typeof repoMethod.streamCallbacks.subscriptionRequestHandler === \"function\")) {\r\n            return;\r\n        }\r\n        var request = new Request(this.protocol, repoMethod, requestContext);\r\n        repoMethod.streamCallbacks.subscriptionRequestHandler(request);\r\n    };\r\n    ServerStreaming.prototype.handleSubAdded = function (subscription, repoMethod) {\r\n        if (!(repoMethod &&\r\n            repoMethod.streamCallbacks &&\r\n            typeof repoMethod.streamCallbacks.subscriptionAddedHandler === \"function\")) {\r\n            return;\r\n        }\r\n        var sub = new ServerSubscription(this.protocol, repoMethod, subscription);\r\n        repoMethod.streamCallbacks.subscriptionAddedHandler(sub);\r\n    };\r\n    ServerStreaming.prototype.handleSubRemoved = function (subscription, repoMethod) {\r\n        if (!(repoMethod &&\r\n            repoMethod.streamCallbacks &&\r\n            typeof repoMethod.streamCallbacks.subscriptionRemovedHandler === \"function\")) {\r\n            return;\r\n        }\r\n        var sub = new ServerSubscription(this.protocol, repoMethod, subscription);\r\n        repoMethod.streamCallbacks.subscriptionRemovedHandler(sub);\r\n    };\r\n    return ServerStreaming;\r\n}());\n\nvar ServerBranch = (function () {\r\n    function ServerBranch(key, protocol, repoMethod) {\r\n        this.key = key;\r\n        this.protocol = protocol;\r\n        this.repoMethod = repoMethod;\r\n    }\r\n    ServerBranch.prototype.subscriptions = function () {\r\n        var _this = this;\r\n        var subList = this.protocol.server.getSubscriptionList(this.repoMethod, this.key);\r\n        return subList.map(function (sub) {\r\n            return new ServerSubscription(_this.protocol, _this.repoMethod, sub);\r\n        });\r\n    };\r\n    ServerBranch.prototype.close = function () {\r\n        this.protocol.server.closeAllSubscriptions(this.repoMethod, this.key);\r\n    };\r\n    ServerBranch.prototype.push = function (data) {\r\n        this.protocol.server.pushData(this.repoMethod, data, [this.key]);\r\n    };\r\n    return ServerBranch;\r\n}());\n\nvar ServerStream = (function () {\r\n    function ServerStream(_protocol, _repoMethod, _server) {\r\n        this._protocol = _protocol;\r\n        this._repoMethod = _repoMethod;\r\n        this._server = _server;\r\n        this.name = this._repoMethod.definition.name;\r\n    }\r\n    ServerStream.prototype.branches = function (key) {\r\n        var _this = this;\r\n        var bList = this._protocol.server.getBranchList(this._repoMethod);\r\n        if (key) {\r\n            if (bList.indexOf(key) > -1) {\r\n                return new ServerBranch(key, this._protocol, this._repoMethod);\r\n            }\r\n            return undefined;\r\n        }\r\n        else {\r\n            return bList.map(function (branchKey) {\r\n                return new ServerBranch(branchKey, _this._protocol, _this._repoMethod);\r\n            });\r\n        }\r\n    };\r\n    ServerStream.prototype.branch = function (key) {\r\n        return this.branches(key);\r\n    };\r\n    ServerStream.prototype.subscriptions = function () {\r\n        var _this = this;\r\n        var subList = this._protocol.server.getSubscriptionList(this._repoMethod);\r\n        return subList.map(function (sub) {\r\n            return new ServerSubscription(_this._protocol, _this._repoMethod, sub);\r\n        });\r\n    };\r\n    Object.defineProperty(ServerStream.prototype, \"definition\", {\r\n        get: function () {\r\n            var _a;\r\n            var def2 = this._repoMethod.definition;\r\n            return {\r\n                accepts: def2.accepts,\r\n                description: def2.description,\r\n                displayName: def2.displayName,\r\n                name: def2.name,\r\n                objectTypes: def2.objectTypes,\r\n                returns: def2.returns,\r\n                supportsStreaming: def2.supportsStreaming,\r\n                flags: (_a = def2.flags) === null || _a === void 0 ? void 0 : _a.metadata,\r\n            };\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ServerStream.prototype.close = function () {\r\n        this._protocol.server.closeAllSubscriptions(this._repoMethod);\r\n        this._server.unregister(this._repoMethod.definition, true);\r\n    };\r\n    ServerStream.prototype.push = function (data, branches) {\r\n        if (typeof branches !== \"string\" && !Array.isArray(branches) && branches !== undefined) {\r\n            throw new Error(\"invalid branches should be string or string array\");\r\n        }\r\n        if (typeof data !== \"object\") {\r\n            throw new Error(\"Invalid arguments. Data must be an object.\");\r\n        }\r\n        this._protocol.server.pushData(this._repoMethod, data, branches);\r\n    };\r\n    ServerStream.prototype.updateRepoMethod = function (repoMethod) {\r\n        this._repoMethod = repoMethod;\r\n    };\r\n    return ServerStream;\r\n}());\n\nvar Server = (function () {\r\n    function Server(protocol, serverRepository) {\r\n        this.protocol = protocol;\r\n        this.serverRepository = serverRepository;\r\n        this.invocations = 0;\r\n        this.currentlyUnregistering = {};\r\n        this.streaming = new ServerStreaming(protocol, this);\r\n        this.protocol.server.onInvoked(this.onMethodInvoked.bind(this));\r\n    }\r\n    Server.prototype.createStream = function (streamDef, callbacks, successCallback, errorCallback, existingStream) {\r\n        var _this = this;\r\n        var promise = new Promise(function (resolve, reject) {\r\n            if (!streamDef) {\r\n                reject(\"The stream name must be unique! Please, provide either a unique string for a stream name to \\u201Cglue.interop.createStream()\\u201D or a \\u201CmethodDefinition\\u201D object with a unique \\u201Cname\\u201D property for the stream.\");\r\n                return;\r\n            }\r\n            var streamMethodDefinition;\r\n            if (typeof streamDef === \"string\") {\r\n                streamMethodDefinition = { name: \"\" + streamDef };\r\n            }\r\n            else {\r\n                streamMethodDefinition = __assign({}, streamDef);\r\n            }\r\n            if (!streamMethodDefinition.name) {\r\n                return reject(\"The \\u201Cname\\u201D property is required for the \\u201CstreamDefinition\\u201D object and must be unique. Stream definition: \" + JSON.stringify(streamMethodDefinition));\r\n            }\r\n            var nameAlreadyExists = _this.serverRepository.getList()\r\n                .some(function (serverMethod) { return serverMethod.definition.name === streamMethodDefinition.name; });\r\n            if (nameAlreadyExists) {\r\n                return reject(\"A stream with the name \\\"\" + streamMethodDefinition.name + \"\\\" already exists! Please, provide a unique name for the stream.\");\r\n            }\r\n            streamMethodDefinition.supportsStreaming = true;\r\n            if (!callbacks) {\r\n                callbacks = {};\r\n            }\r\n            if (typeof callbacks.subscriptionRequestHandler !== \"function\") {\r\n                callbacks.subscriptionRequestHandler = function (request) {\r\n                    request.accept();\r\n                };\r\n            }\r\n            var repoMethod = _this.serverRepository.add({\r\n                definition: streamMethodDefinition,\r\n                streamCallbacks: callbacks,\r\n                protocolState: {},\r\n            });\r\n            _this.protocol.server.createStream(repoMethod)\r\n                .then(function () {\r\n                var streamUserObject;\r\n                if (existingStream) {\r\n                    streamUserObject = existingStream;\r\n                    existingStream.updateRepoMethod(repoMethod);\r\n                }\r\n                else {\r\n                    streamUserObject = new ServerStream(_this.protocol, repoMethod, _this);\r\n                }\r\n                repoMethod.stream = streamUserObject;\r\n                resolve(streamUserObject);\r\n            })\r\n                .catch(function (err) {\r\n                if (repoMethod.repoId) {\r\n                    _this.serverRepository.remove(repoMethod.repoId);\r\n                }\r\n                reject(err);\r\n            });\r\n        });\r\n        return promisify(promise, successCallback, errorCallback);\r\n    };\r\n    Server.prototype.register = function (methodDefinition, callback) {\r\n        var _this = this;\r\n        if (!methodDefinition) {\r\n            return Promise.reject(\"Method definition is required. Please, provide either a unique string for a method name or a \\u201CmethodDefinition\\u201D object with a required \\u201Cname\\u201D property.\");\r\n        }\r\n        if (typeof callback !== \"function\") {\r\n            return Promise.reject(\"The second parameter must be a callback function. Method: \" + (typeof methodDefinition === \"string\" ? methodDefinition : methodDefinition.name));\r\n        }\r\n        var wrappedCallbackFunction = function (context, resultCallback) { return __awaiter(_this, void 0, void 0, function () {\r\n            var result, resultValue, e_1;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        _a.trys.push([0, 4, , 5]);\r\n                        result = callback(context.args, context.instance);\r\n                        if (!(result && typeof result.then === \"function\")) return [3, 2];\r\n                        return [4, result];\r\n                    case 1:\r\n                        resultValue = _a.sent();\r\n                        resultCallback(undefined, resultValue);\r\n                        return [3, 3];\r\n                    case 2:\r\n                        resultCallback(undefined, result);\r\n                        _a.label = 3;\r\n                    case 3: return [3, 5];\r\n                    case 4:\r\n                        e_1 = _a.sent();\r\n                        if (!e_1) {\r\n                            e_1 = \"\";\r\n                        }\r\n                        resultCallback(e_1, e_1);\r\n                        return [3, 5];\r\n                    case 5: return [2];\r\n                }\r\n            });\r\n        }); };\r\n        wrappedCallbackFunction.userCallback = callback;\r\n        return this.registerCore(methodDefinition, wrappedCallbackFunction);\r\n    };\r\n    Server.prototype.registerAsync = function (methodDefinition, callback) {\r\n        if (!methodDefinition) {\r\n            return Promise.reject(\"Method definition is required. Please, provide either a unique string for a method name or a \\u201CmethodDefinition\\u201D object with a required \\u201Cname\\u201D property.\");\r\n        }\r\n        if (typeof callback !== \"function\") {\r\n            return Promise.reject(\"The second parameter must be a callback function. Method: \" + (typeof methodDefinition === \"string\" ? methodDefinition : methodDefinition.name));\r\n        }\r\n        var wrappedCallback = function (context, resultCallback) {\r\n            try {\r\n                var resultCalled_1 = false;\r\n                var success = function (result) {\r\n                    if (!resultCalled_1) {\r\n                        resultCallback(undefined, result);\r\n                    }\r\n                    resultCalled_1 = true;\r\n                };\r\n                var error = function (e) {\r\n                    if (!resultCalled_1) {\r\n                        if (!e) {\r\n                            e = \"\";\r\n                        }\r\n                        resultCallback(e, e);\r\n                    }\r\n                    resultCalled_1 = true;\r\n                };\r\n                var methodResult = callback(context.args, context.instance, success, error);\r\n                if (methodResult && typeof methodResult.then === \"function\") {\r\n                    methodResult\r\n                        .then(success)\r\n                        .catch(error);\r\n                }\r\n            }\r\n            catch (e) {\r\n                resultCallback(e, undefined);\r\n            }\r\n        };\r\n        wrappedCallback.userCallbackAsync = callback;\r\n        return this.registerCore(methodDefinition, wrappedCallback);\r\n    };\r\n    Server.prototype.unregister = function (methodFilter, forStream) {\r\n        if (forStream === void 0) { forStream = false; }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var methodDefinition, methodToBeRemoved;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (methodFilter === undefined) {\r\n                            return [2, Promise.reject(\"Please, provide either a unique string for a name or an object containing a \\u201Cname\\u201D property.\")];\r\n                        }\r\n                        if (!(typeof methodFilter === \"function\")) return [3, 2];\r\n                        return [4, this.unregisterWithPredicate(methodFilter, forStream)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [2];\r\n                    case 2:\r\n                        if (typeof methodFilter === \"string\") {\r\n                            methodDefinition = { name: methodFilter };\r\n                        }\r\n                        else {\r\n                            methodDefinition = methodFilter;\r\n                        }\r\n                        if (methodDefinition.name === undefined) {\r\n                            return [2, Promise.reject(\"Method name is required. Cannot find a method if the method name is undefined!\")];\r\n                        }\r\n                        methodToBeRemoved = this.serverRepository.getList().find(function (serverMethod) {\r\n                            return serverMethod.definition.name === methodDefinition.name\r\n                                && (serverMethod.definition.supportsStreaming || false) === forStream;\r\n                        });\r\n                        if (!methodToBeRemoved) {\r\n                            return [2, Promise.reject(\"Method with a name \\\"\" + methodDefinition.name + \"\\\" does not exist or is not registered by your application!\")];\r\n                        }\r\n                        return [4, this.removeMethodsOrStreams([methodToBeRemoved])];\r\n                    case 3:\r\n                        _a.sent();\r\n                        return [2];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Server.prototype.unregisterWithPredicate = function (filterPredicate, forStream) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var methodsOrStreamsToRemove;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        methodsOrStreamsToRemove = this.serverRepository.getList()\r\n                            .filter(function (sm) { return filterPredicate(sm.definition); })\r\n                            .filter(function (serverMethod) {\r\n                            return (serverMethod.definition.supportsStreaming || false) === forStream;\r\n                        });\r\n                        if (!methodsOrStreamsToRemove || methodsOrStreamsToRemove.length === 0) {\r\n                            return [2, Promise.reject(\"Could not find a \" + (forStream ? \"stream\" : \"method\") + \" matching the specified condition!\")];\r\n                        }\r\n                        return [4, this.removeMethodsOrStreams(methodsOrStreamsToRemove)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [2];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Server.prototype.removeMethodsOrStreams = function (methodsToRemove) {\r\n        var _this = this;\r\n        var methodUnregPromises = [];\r\n        methodsToRemove.forEach(function (method) {\r\n            var promise = _this.protocol.server.unregister(method)\r\n                .then(function () {\r\n                if (method.repoId) {\r\n                    _this.serverRepository.remove(method.repoId);\r\n                }\r\n            });\r\n            methodUnregPromises.push(promise);\r\n            _this.addAsCurrentlyUnregistering(method.definition.name, promise);\r\n        });\r\n        return Promise.all(methodUnregPromises);\r\n    };\r\n    Server.prototype.addAsCurrentlyUnregistering = function (methodName, promise) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var timeout;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                timeout = new Promise(function (resolve) { return setTimeout(resolve, 5000); });\r\n                this.currentlyUnregistering[methodName] = Promise.race([promise, timeout]).then(function () {\r\n                    delete _this.currentlyUnregistering[methodName];\r\n                });\r\n                return [2];\r\n            });\r\n        });\r\n    };\r\n    Server.prototype.registerCore = function (method, theFunction) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var methodDefinition, unregisterInProgress, nameAlreadyExists, repoMethod;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (typeof method === \"string\") {\r\n                            methodDefinition = { name: \"\" + method };\r\n                        }\r\n                        else {\r\n                            methodDefinition = __assign({}, method);\r\n                        }\r\n                        if (!methodDefinition.name) {\r\n                            return [2, Promise.reject(\"Please, provide a (unique) string value for the \\u201Cname\\u201D property in the \\u201CmethodDefinition\\u201D object: \" + JSON.stringify(method))];\r\n                        }\r\n                        unregisterInProgress = this.currentlyUnregistering[methodDefinition.name];\r\n                        if (!unregisterInProgress) return [3, 2];\r\n                        return [4, unregisterInProgress];\r\n                    case 1:\r\n                        _a.sent();\r\n                        _a.label = 2;\r\n                    case 2:\r\n                        nameAlreadyExists = this.serverRepository.getList()\r\n                            .some(function (serverMethod) { return serverMethod.definition.name === methodDefinition.name; });\r\n                        if (nameAlreadyExists) {\r\n                            return [2, Promise.reject(\"A method with the name \\\"\" + methodDefinition.name + \"\\\" already exists! Please, provide a unique name for the method.\")];\r\n                        }\r\n                        if (methodDefinition.supportsStreaming) {\r\n                            return [2, Promise.reject(\"When you create methods with \\u201Cglue.interop.register()\\u201D or \\u201Cglue.interop.registerAsync()\\u201D the property \\u201CsupportsStreaming\\u201D cannot be \\u201Ctrue\\u201D. If you want \\u201C\" + methodDefinition.name + \"\\u201D to be a stream, please use the \\u201Cglue.interop.createStream()\\u201D method.\")];\r\n                        }\r\n                        repoMethod = this.serverRepository.add({\r\n                            definition: methodDefinition,\r\n                            theFunction: theFunction,\r\n                            protocolState: {},\r\n                        });\r\n                        return [2, this.protocol.server.register(repoMethod)\r\n                                .catch(function (err) {\r\n                                if (repoMethod === null || repoMethod === void 0 ? void 0 : repoMethod.repoId) {\r\n                                    _this.serverRepository.remove(repoMethod.repoId);\r\n                                }\r\n                                throw err;\r\n                            })];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Server.prototype.onMethodInvoked = function (methodToExecute, invocationId, invocationArgs) {\r\n        var _this = this;\r\n        if (!methodToExecute || !methodToExecute.theFunction) {\r\n            return;\r\n        }\r\n        methodToExecute.theFunction(invocationArgs, function (err, result) {\r\n            if (err !== undefined && err !== null) {\r\n                if (err.message && typeof err.message === \"string\") {\r\n                    err = err.message;\r\n                }\r\n                else if (typeof err !== \"string\") {\r\n                    try {\r\n                        err = JSON.stringify(err);\r\n                    }\r\n                    catch (unStrException) {\r\n                        err = \"un-stringifyable error in onMethodInvoked! Top level prop names: \" + Object.keys(err);\r\n                    }\r\n                }\r\n            }\r\n            if (!result) {\r\n                result = {};\r\n            }\r\n            else if (typeof result !== \"object\" || Array.isArray(result)) {\r\n                result = { _value: result };\r\n            }\r\n            _this.protocol.server.methodInvocationResult(methodToExecute, invocationId, err, result);\r\n        });\r\n    };\r\n    return Server;\r\n}());\n\nvar InstanceWrapper = (function () {\r\n    function InstanceWrapper(API, instance, connection) {\r\n        var _this = this;\r\n        this.wrapped = {};\r\n        this.wrapped.getMethods = function () {\r\n            return API.methodsForInstance(this);\r\n        };\r\n        this.wrapped.getStreams = function () {\r\n            return API.methodsForInstance(this).filter(function (m) { return m.supportsStreaming; });\r\n        };\r\n        if (instance) {\r\n            this.refreshWrappedObject(instance);\r\n        }\r\n        if (connection) {\r\n            connection.loggedIn(function () {\r\n                _this.refresh(connection);\r\n            });\r\n            this.refresh(connection);\r\n        }\r\n    }\r\n    InstanceWrapper.prototype.unwrap = function () {\r\n        return this.wrapped;\r\n    };\r\n    InstanceWrapper.prototype.refresh = function (connection) {\r\n        if (!connection) {\r\n            return;\r\n        }\r\n        var resolvedIdentity = connection === null || connection === void 0 ? void 0 : connection.resolvedIdentity;\r\n        var instance = Object.assign({}, resolvedIdentity !== null && resolvedIdentity !== void 0 ? resolvedIdentity : {}, { peerId: connection === null || connection === void 0 ? void 0 : connection.peerId });\r\n        this.refreshWrappedObject(instance);\r\n    };\r\n    InstanceWrapper.prototype.refreshWrappedObject = function (resolvedIdentity) {\r\n        var _this = this;\r\n        var _a, _b, _c, _d;\r\n        Object.keys(resolvedIdentity).forEach(function (key) {\r\n            _this.wrapped[key] = resolvedIdentity[key];\r\n        });\r\n        this.wrapped.user = resolvedIdentity.user;\r\n        this.wrapped.instance = resolvedIdentity.instance;\r\n        this.wrapped.application = (_a = resolvedIdentity.application) !== null && _a !== void 0 ? _a : shortid();\r\n        this.wrapped.applicationName = resolvedIdentity.applicationName;\r\n        this.wrapped.pid = (_c = (_b = resolvedIdentity.pid) !== null && _b !== void 0 ? _b : resolvedIdentity.process) !== null && _c !== void 0 ? _c : Math.floor(Math.random() * 10000000000);\r\n        this.wrapped.machine = resolvedIdentity.machine;\r\n        this.wrapped.environment = resolvedIdentity.environment;\r\n        this.wrapped.region = resolvedIdentity.region;\r\n        this.wrapped.windowId = resolvedIdentity.windowId;\r\n        this.wrapped.isLocal = (_d = resolvedIdentity.isLocal) !== null && _d !== void 0 ? _d : true;\r\n        this.wrapped.api = resolvedIdentity.api;\r\n        this.wrapped.service = resolvedIdentity.service;\r\n        this.wrapped.peerId = resolvedIdentity.peerId;\r\n    };\r\n    return InstanceWrapper;\r\n}());\n\nvar hideMethodSystemFlags = function (method) {\r\n    return __assign(__assign({}, method), { flags: method.flags.metadata || {} });\r\n};\r\nvar ClientRepository = (function () {\r\n    function ClientRepository(logger, API) {\r\n        this.logger = logger;\r\n        this.API = API;\r\n        this.servers = {};\r\n        this.methodsCount = {};\r\n        this.callbacks = lib();\r\n        var peerId = this.API.instance.peerId;\r\n        this.myServer = {\r\n            id: peerId,\r\n            methods: {},\r\n            instance: this.API.instance,\r\n            wrapper: this.API.unwrappedInstance,\r\n        };\r\n        this.servers[peerId] = this.myServer;\r\n    }\r\n    ClientRepository.prototype.addServer = function (info, serverId) {\r\n        this.logger.debug(\"adding server \" + serverId);\r\n        var current = this.servers[serverId];\r\n        if (current) {\r\n            return current.id;\r\n        }\r\n        var wrapper = new InstanceWrapper(this.API, info);\r\n        var serverEntry = {\r\n            id: serverId,\r\n            methods: {},\r\n            instance: wrapper.unwrap(),\r\n            wrapper: wrapper,\r\n        };\r\n        this.servers[serverId] = serverEntry;\r\n        this.callbacks.execute(\"onServerAdded\", serverEntry.instance);\r\n        return serverId;\r\n    };\r\n    ClientRepository.prototype.removeServerById = function (id, reason) {\r\n        var _this = this;\r\n        var server = this.servers[id];\r\n        if (!server) {\r\n            this.logger.warn(\"not aware of server \" + id + \", my state \" + JSON.stringify(Object.keys(this.servers)));\r\n            return;\r\n        }\r\n        else {\r\n            this.logger.debug(\"removing server \" + id);\r\n        }\r\n        Object.keys(server.methods).forEach(function (methodId) {\r\n            _this.removeServerMethod(id, methodId);\r\n        });\r\n        delete this.servers[id];\r\n        this.callbacks.execute(\"onServerRemoved\", server.instance, reason);\r\n    };\r\n    ClientRepository.prototype.addServerMethod = function (serverId, method) {\r\n        var _a;\r\n        var server = this.servers[serverId];\r\n        if (!server) {\r\n            throw new Error(\"server does not exists\");\r\n        }\r\n        if (server.methods[method.id]) {\r\n            return;\r\n        }\r\n        var identifier = this.createMethodIdentifier(method);\r\n        var that = this;\r\n        var methodDefinition = {\r\n            identifier: identifier,\r\n            gatewayId: method.id,\r\n            name: method.name,\r\n            displayName: method.display_name,\r\n            description: method.description,\r\n            version: method.version,\r\n            objectTypes: method.object_types || [],\r\n            accepts: method.input_signature,\r\n            returns: method.result_signature,\r\n            supportsStreaming: typeof method.flags !== \"undefined\" ? method.flags.streaming : false,\r\n            flags: (_a = method.flags) !== null && _a !== void 0 ? _a : {},\r\n            getServers: function () {\r\n                return that.getServersByMethod(identifier);\r\n            }\r\n        };\r\n        methodDefinition.object_types = methodDefinition.objectTypes;\r\n        methodDefinition.display_name = methodDefinition.displayName;\r\n        methodDefinition.version = methodDefinition.version;\r\n        server.methods[method.id] = methodDefinition;\r\n        var clientMethodDefinition = hideMethodSystemFlags(methodDefinition);\r\n        if (!this.methodsCount[identifier]) {\r\n            this.methodsCount[identifier] = 0;\r\n            this.callbacks.execute(\"onMethodAdded\", clientMethodDefinition);\r\n        }\r\n        this.methodsCount[identifier] = this.methodsCount[identifier] + 1;\r\n        this.callbacks.execute(\"onServerMethodAdded\", server.instance, clientMethodDefinition);\r\n        return methodDefinition;\r\n    };\r\n    ClientRepository.prototype.removeServerMethod = function (serverId, methodId) {\r\n        var server = this.servers[serverId];\r\n        if (!server) {\r\n            throw new Error(\"server does not exists\");\r\n        }\r\n        var method = server.methods[methodId];\r\n        delete server.methods[methodId];\r\n        var clientMethodDefinition = hideMethodSystemFlags(method);\r\n        this.methodsCount[method.identifier] = this.methodsCount[method.identifier] - 1;\r\n        if (this.methodsCount[method.identifier] === 0) {\r\n            this.callbacks.execute(\"onMethodRemoved\", clientMethodDefinition);\r\n        }\r\n        this.callbacks.execute(\"onServerMethodRemoved\", server.instance, clientMethodDefinition);\r\n    };\r\n    ClientRepository.prototype.getMethods = function () {\r\n        return this.extractMethodsFromServers(Object.values(this.servers)).map(hideMethodSystemFlags);\r\n    };\r\n    ClientRepository.prototype.getServers = function () {\r\n        return Object.values(this.servers).map(this.hideServerMethodSystemFlags);\r\n    };\r\n    ClientRepository.prototype.onServerAdded = function (callback) {\r\n        var unsubscribeFunc = this.callbacks.add(\"onServerAdded\", callback);\r\n        var serversWithMethodsToReplay = this.getServers().map(function (s) { return s.instance; });\r\n        return this.returnUnsubWithDelayedReplay(unsubscribeFunc, serversWithMethodsToReplay, callback);\r\n    };\r\n    ClientRepository.prototype.onMethodAdded = function (callback) {\r\n        var unsubscribeFunc = this.callbacks.add(\"onMethodAdded\", callback);\r\n        var methodsToReplay = this.getMethods();\r\n        return this.returnUnsubWithDelayedReplay(unsubscribeFunc, methodsToReplay, callback);\r\n    };\r\n    ClientRepository.prototype.onServerMethodAdded = function (callback) {\r\n        var unsubscribeFunc = this.callbacks.add(\"onServerMethodAdded\", callback);\r\n        var unsubCalled = false;\r\n        var servers = this.getServers();\r\n        setTimeout(function () {\r\n            servers.forEach(function (server) {\r\n                var methods = server.methods;\r\n                Object.keys(methods).forEach(function (methodId) {\r\n                    if (!unsubCalled) {\r\n                        callback(server.instance, methods[methodId]);\r\n                    }\r\n                });\r\n            });\r\n        }, 0);\r\n        return function () {\r\n            unsubCalled = true;\r\n            unsubscribeFunc();\r\n        };\r\n    };\r\n    ClientRepository.prototype.onMethodRemoved = function (callback) {\r\n        var unsubscribeFunc = this.callbacks.add(\"onMethodRemoved\", callback);\r\n        return unsubscribeFunc;\r\n    };\r\n    ClientRepository.prototype.onServerRemoved = function (callback) {\r\n        var unsubscribeFunc = this.callbacks.add(\"onServerRemoved\", callback);\r\n        return unsubscribeFunc;\r\n    };\r\n    ClientRepository.prototype.onServerMethodRemoved = function (callback) {\r\n        var unsubscribeFunc = this.callbacks.add(\"onServerMethodRemoved\", callback);\r\n        return unsubscribeFunc;\r\n    };\r\n    ClientRepository.prototype.getServerById = function (id) {\r\n        return this.hideServerMethodSystemFlags(this.servers[id]);\r\n    };\r\n    ClientRepository.prototype.reset = function () {\r\n        var _a;\r\n        var _this = this;\r\n        Object.keys(this.servers).forEach(function (key) {\r\n            _this.removeServerById(key, \"reset\");\r\n        });\r\n        this.servers = (_a = {},\r\n            _a[this.myServer.id] = this.myServer,\r\n            _a);\r\n        this.methodsCount = {};\r\n    };\r\n    ClientRepository.prototype.createMethodIdentifier = function (methodInfo) {\r\n        var _a, _b;\r\n        var accepts = (_a = methodInfo.input_signature) !== null && _a !== void 0 ? _a : \"\";\r\n        var returns = (_b = methodInfo.result_signature) !== null && _b !== void 0 ? _b : \"\";\r\n        return (methodInfo.name + accepts + returns).toLowerCase();\r\n    };\r\n    ClientRepository.prototype.getServersByMethod = function (identifier) {\r\n        var allServers = [];\r\n        Object.values(this.servers).forEach(function (server) {\r\n            Object.values(server.methods).forEach(function (method) {\r\n                if (method.identifier === identifier) {\r\n                    allServers.push(server.instance);\r\n                }\r\n            });\r\n        });\r\n        return allServers;\r\n    };\r\n    ClientRepository.prototype.returnUnsubWithDelayedReplay = function (unsubscribeFunc, collectionToReplay, callback) {\r\n        var unsubCalled = false;\r\n        setTimeout(function () {\r\n            collectionToReplay.forEach(function (item) {\r\n                if (!unsubCalled) {\r\n                    callback(item);\r\n                }\r\n            });\r\n        }, 0);\r\n        return function () {\r\n            unsubCalled = true;\r\n            unsubscribeFunc();\r\n        };\r\n    };\r\n    ClientRepository.prototype.hideServerMethodSystemFlags = function (server) {\r\n        var clientMethods = {};\r\n        Object.entries(server.methods).forEach(function (_a) {\r\n            var name = _a[0], method = _a[1];\r\n            clientMethods[name] = hideMethodSystemFlags(method);\r\n        });\r\n        return __assign(__assign({}, server), { methods: clientMethods });\r\n    };\r\n    ClientRepository.prototype.extractMethodsFromServers = function (servers) {\r\n        var methods = Object.values(servers).reduce(function (clientMethods, server) {\r\n            return __spreadArrays(clientMethods, Object.values(server.methods));\r\n        }, []);\r\n        return methods;\r\n    };\r\n    return ClientRepository;\r\n}());\n\nvar ServerRepository = (function () {\r\n    function ServerRepository() {\r\n        this.nextId = 0;\r\n        this.methods = [];\r\n    }\r\n    ServerRepository.prototype.add = function (method) {\r\n        method.repoId = String(this.nextId);\r\n        this.nextId += 1;\r\n        this.methods.push(method);\r\n        return method;\r\n    };\r\n    ServerRepository.prototype.remove = function (repoId) {\r\n        if (typeof repoId !== \"string\") {\r\n            return new TypeError(\"Expecting a string\");\r\n        }\r\n        this.methods = this.methods.filter(function (m) {\r\n            return m.repoId !== repoId;\r\n        });\r\n    };\r\n    ServerRepository.prototype.getById = function (id) {\r\n        if (typeof id !== \"string\") {\r\n            return undefined;\r\n        }\r\n        return this.methods.find(function (m) {\r\n            return m.repoId === id;\r\n        });\r\n    };\r\n    ServerRepository.prototype.getList = function () {\r\n        return this.methods.map(function (m) { return m; });\r\n    };\r\n    ServerRepository.prototype.length = function () {\r\n        return this.methods.length;\r\n    };\r\n    ServerRepository.prototype.reset = function () {\r\n        this.methods = [];\r\n    };\r\n    return ServerRepository;\r\n}());\n\nvar SUBSCRIPTION_REQUEST = \"onSubscriptionRequest\";\r\nvar SUBSCRIPTION_ADDED = \"onSubscriptionAdded\";\r\nvar SUBSCRIPTION_REMOVED = \"onSubscriptionRemoved\";\r\nvar ServerStreaming$1 = (function () {\r\n    function ServerStreaming(session, repository, serverRepository) {\r\n        var _this = this;\r\n        this.session = session;\r\n        this.repository = repository;\r\n        this.serverRepository = serverRepository;\r\n        this.ERR_URI_SUBSCRIPTION_FAILED = \"com.tick42.agm.errors.subscription.failure\";\r\n        this.callbacks = lib();\r\n        this.nextStreamId = 0;\r\n        session.on(\"add-interest\", function (msg) {\r\n            _this.handleAddInterest(msg);\r\n        });\r\n        session.on(\"remove-interest\", function (msg) {\r\n            _this.handleRemoveInterest(msg);\r\n        });\r\n    }\r\n    ServerStreaming.prototype.acceptRequestOnBranch = function (requestContext, streamingMethod, branch) {\r\n        if (typeof branch !== \"string\") {\r\n            branch = \"\";\r\n        }\r\n        if (typeof streamingMethod.protocolState.subscriptionsMap !== \"object\") {\r\n            throw new TypeError(\"The streaming method is missing its subscriptions.\");\r\n        }\r\n        if (!Array.isArray(streamingMethod.protocolState.branchKeyToStreamIdMap)) {\r\n            throw new TypeError(\"The streaming method is missing its branches.\");\r\n        }\r\n        var streamId = this.getStreamId(streamingMethod, branch);\r\n        var key = requestContext.msg.subscription_id;\r\n        var subscription = {\r\n            id: key,\r\n            arguments: requestContext.arguments,\r\n            instance: requestContext.instance,\r\n            branchKey: branch,\r\n            streamId: streamId,\r\n            subscribeMsg: requestContext.msg,\r\n        };\r\n        streamingMethod.protocolState.subscriptionsMap[key] = subscription;\r\n        this.session.sendFireAndForget({\r\n            type: \"accepted\",\r\n            subscription_id: key,\r\n            stream_id: streamId,\r\n        });\r\n        this.callbacks.execute(SUBSCRIPTION_ADDED, subscription, streamingMethod);\r\n    };\r\n    ServerStreaming.prototype.rejectRequest = function (requestContext, streamingMethod, reason) {\r\n        if (typeof reason !== \"string\") {\r\n            reason = \"\";\r\n        }\r\n        this.sendSubscriptionFailed(\"Subscription rejected by user. \" + reason, requestContext.msg.subscription_id);\r\n    };\r\n    ServerStreaming.prototype.pushData = function (streamingMethod, data, branches) {\r\n        var _this = this;\r\n        if (typeof streamingMethod !== \"object\" || !Array.isArray(streamingMethod.protocolState.branchKeyToStreamIdMap)) {\r\n            return;\r\n        }\r\n        if (typeof data !== \"object\") {\r\n            throw new Error(\"Invalid arguments. Data must be an object.\");\r\n        }\r\n        if (typeof branches === \"string\") {\r\n            branches = [branches];\r\n        }\r\n        else if (!Array.isArray(branches) || branches.length <= 0) {\r\n            branches = [];\r\n        }\r\n        var streamIdList = streamingMethod.protocolState.branchKeyToStreamIdMap\r\n            .filter(function (br) {\r\n            if (!branches || branches.length === 0) {\r\n                return true;\r\n            }\r\n            return branches.indexOf(br.key) >= 0;\r\n        }).map(function (br) {\r\n            return br.streamId;\r\n        });\r\n        streamIdList.forEach(function (streamId) {\r\n            var publishMessage = {\r\n                type: \"publish\",\r\n                stream_id: streamId,\r\n                data: data,\r\n            };\r\n            _this.session.sendFireAndForget(publishMessage);\r\n        });\r\n    };\r\n    ServerStreaming.prototype.pushDataToSingle = function (method, subscription, data) {\r\n        if (typeof data !== \"object\") {\r\n            throw new Error(\"Invalid arguments. Data must be an object.\");\r\n        }\r\n        var postMessage = {\r\n            type: \"post\",\r\n            subscription_id: subscription.id,\r\n            data: data,\r\n        };\r\n        this.session.sendFireAndForget(postMessage);\r\n    };\r\n    ServerStreaming.prototype.closeSingleSubscription = function (streamingMethod, subscription) {\r\n        if (streamingMethod.protocolState.subscriptionsMap) {\r\n            delete streamingMethod.protocolState.subscriptionsMap[subscription.id];\r\n        }\r\n        var dropSubscriptionMessage = {\r\n            type: \"drop-subscription\",\r\n            subscription_id: subscription.id,\r\n            reason: \"Server dropping a single subscription\",\r\n        };\r\n        this.session.sendFireAndForget(dropSubscriptionMessage);\r\n        var subscriber = subscription.instance;\r\n        this.callbacks.execute(SUBSCRIPTION_REMOVED, subscription, streamingMethod);\r\n    };\r\n    ServerStreaming.prototype.closeMultipleSubscriptions = function (streamingMethod, branchKey) {\r\n        var _this = this;\r\n        if (typeof streamingMethod !== \"object\" || typeof streamingMethod.protocolState.subscriptionsMap !== \"object\") {\r\n            return;\r\n        }\r\n        if (!streamingMethod.protocolState.subscriptionsMap) {\r\n            return;\r\n        }\r\n        var subscriptionsMap = streamingMethod.protocolState.subscriptionsMap;\r\n        var subscriptionsToClose = Object.keys(subscriptionsMap)\r\n            .map(function (key) {\r\n            return subscriptionsMap[key];\r\n        });\r\n        if (typeof branchKey === \"string\") {\r\n            subscriptionsToClose = subscriptionsToClose.filter(function (sub) {\r\n                return sub.branchKey === branchKey;\r\n            });\r\n        }\r\n        subscriptionsToClose.forEach(function (subscription) {\r\n            delete subscriptionsMap[subscription.id];\r\n            var drop = {\r\n                type: \"drop-subscription\",\r\n                subscription_id: subscription.id,\r\n                reason: \"Server dropping all subscriptions on stream_id: \" + subscription.streamId,\r\n            };\r\n            _this.session.sendFireAndForget(drop);\r\n        });\r\n    };\r\n    ServerStreaming.prototype.getSubscriptionList = function (streamingMethod, branchKey) {\r\n        if (typeof streamingMethod !== \"object\") {\r\n            return [];\r\n        }\r\n        var subscriptions = [];\r\n        if (!streamingMethod.protocolState.subscriptionsMap) {\r\n            return [];\r\n        }\r\n        var subscriptionsMap = streamingMethod.protocolState.subscriptionsMap;\r\n        var allSubscriptions = Object.keys(subscriptionsMap)\r\n            .map(function (key) {\r\n            return subscriptionsMap[key];\r\n        });\r\n        if (typeof branchKey !== \"string\") {\r\n            subscriptions = allSubscriptions;\r\n        }\r\n        else {\r\n            subscriptions = allSubscriptions.filter(function (sub) {\r\n                return sub.branchKey === branchKey;\r\n            });\r\n        }\r\n        return subscriptions;\r\n    };\r\n    ServerStreaming.prototype.getBranchList = function (streamingMethod) {\r\n        if (typeof streamingMethod !== \"object\") {\r\n            return [];\r\n        }\r\n        if (!streamingMethod.protocolState.subscriptionsMap) {\r\n            return [];\r\n        }\r\n        var subscriptionsMap = streamingMethod.protocolState.subscriptionsMap;\r\n        var allSubscriptions = Object.keys(subscriptionsMap)\r\n            .map(function (key) {\r\n            return subscriptionsMap[key];\r\n        });\r\n        var result = [];\r\n        allSubscriptions.forEach(function (sub) {\r\n            var branch = \"\";\r\n            if (typeof sub === \"object\" && typeof sub.branchKey === \"string\") {\r\n                branch = sub.branchKey;\r\n            }\r\n            if (result.indexOf(branch) === -1) {\r\n                result.push(branch);\r\n            }\r\n        });\r\n        return result;\r\n    };\r\n    ServerStreaming.prototype.onSubAdded = function (callback) {\r\n        this.onSubscriptionLifetimeEvent(SUBSCRIPTION_ADDED, callback);\r\n    };\r\n    ServerStreaming.prototype.onSubRequest = function (callback) {\r\n        this.onSubscriptionLifetimeEvent(SUBSCRIPTION_REQUEST, callback);\r\n    };\r\n    ServerStreaming.prototype.onSubRemoved = function (callback) {\r\n        this.onSubscriptionLifetimeEvent(SUBSCRIPTION_REMOVED, callback);\r\n    };\r\n    ServerStreaming.prototype.handleRemoveInterest = function (msg) {\r\n        var streamingMethod = this.serverRepository.getById(msg.method_id);\r\n        if (typeof msg.subscription_id !== \"string\" ||\r\n            typeof streamingMethod !== \"object\") {\r\n            return;\r\n        }\r\n        if (!streamingMethod.protocolState.subscriptionsMap) {\r\n            return;\r\n        }\r\n        if (typeof streamingMethod.protocolState.subscriptionsMap[msg.subscription_id] !== \"object\") {\r\n            return;\r\n        }\r\n        var subscription = streamingMethod.protocolState.subscriptionsMap[msg.subscription_id];\r\n        delete streamingMethod.protocolState.subscriptionsMap[msg.subscription_id];\r\n        this.callbacks.execute(SUBSCRIPTION_REMOVED, subscription, streamingMethod);\r\n    };\r\n    ServerStreaming.prototype.onSubscriptionLifetimeEvent = function (eventName, handlerFunc) {\r\n        this.callbacks.add(eventName, handlerFunc);\r\n    };\r\n    ServerStreaming.prototype.getNextStreamId = function () {\r\n        return this.nextStreamId++ + \"\";\r\n    };\r\n    ServerStreaming.prototype.handleAddInterest = function (msg) {\r\n        var caller = this.repository.getServerById(msg.caller_id);\r\n        var instance = caller.instance;\r\n        var requestContext = {\r\n            msg: msg,\r\n            arguments: msg.arguments_kv || {},\r\n            instance: instance,\r\n        };\r\n        var streamingMethod = this.serverRepository.getById(msg.method_id);\r\n        if (streamingMethod === undefined) {\r\n            var errorMsg = \"No method with id \" + msg.method_id + \" on this server.\";\r\n            this.sendSubscriptionFailed(errorMsg, msg.subscription_id);\r\n            return;\r\n        }\r\n        if (streamingMethod.protocolState.subscriptionsMap &&\r\n            streamingMethod.protocolState.subscriptionsMap[msg.subscription_id]) {\r\n            this.sendSubscriptionFailed(\"A subscription with id \" + msg.subscription_id + \" already exists.\", msg.subscription_id);\r\n            return;\r\n        }\r\n        this.callbacks.execute(SUBSCRIPTION_REQUEST, requestContext, streamingMethod);\r\n    };\r\n    ServerStreaming.prototype.sendSubscriptionFailed = function (reason, subscriptionId) {\r\n        var errorMessage = {\r\n            type: \"error\",\r\n            reason_uri: this.ERR_URI_SUBSCRIPTION_FAILED,\r\n            reason: reason,\r\n            request_id: subscriptionId,\r\n        };\r\n        this.session.sendFireAndForget(errorMessage);\r\n    };\r\n    ServerStreaming.prototype.getStreamId = function (streamingMethod, branchKey) {\r\n        if (typeof branchKey !== \"string\") {\r\n            branchKey = \"\";\r\n        }\r\n        if (!streamingMethod.protocolState.branchKeyToStreamIdMap) {\r\n            throw new Error(\"streaming \" + streamingMethod.definition.name + \" method without protocol state\");\r\n        }\r\n        var needleBranch = streamingMethod.protocolState.branchKeyToStreamIdMap.filter(function (branch) {\r\n            return branch.key === branchKey;\r\n        })[0];\r\n        var streamId = (needleBranch ? needleBranch.streamId : undefined);\r\n        if (typeof streamId !== \"string\" || streamId === \"\") {\r\n            streamId = this.getNextStreamId();\r\n            streamingMethod.protocolState.branchKeyToStreamIdMap.push({ key: branchKey, streamId: streamId });\r\n        }\r\n        return streamId;\r\n    };\r\n    return ServerStreaming;\r\n}());\n\nvar ServerProtocol = (function () {\r\n    function ServerProtocol(session, clientRepository, serverRepository, logger) {\r\n        var _this = this;\r\n        this.session = session;\r\n        this.clientRepository = clientRepository;\r\n        this.serverRepository = serverRepository;\r\n        this.logger = logger;\r\n        this.callbacks = lib();\r\n        this.streaming = new ServerStreaming$1(session, clientRepository, serverRepository);\r\n        this.session.on(\"invoke\", function (msg) { return _this.handleInvokeMessage(msg); });\r\n    }\r\n    ServerProtocol.prototype.createStream = function (repoMethod) {\r\n        repoMethod.protocolState.subscriptionsMap = {};\r\n        repoMethod.protocolState.branchKeyToStreamIdMap = [];\r\n        return this.register(repoMethod, true);\r\n    };\r\n    ServerProtocol.prototype.register = function (repoMethod, isStreaming) {\r\n        var _this = this;\r\n        var _a;\r\n        var methodDef = repoMethod.definition;\r\n        var flags = Object.assign({}, { metadata: (_a = methodDef.flags) !== null && _a !== void 0 ? _a : {} }, { streaming: isStreaming || false });\r\n        var registerMsg = {\r\n            type: \"register\",\r\n            methods: [{\r\n                    id: repoMethod.repoId,\r\n                    name: methodDef.name,\r\n                    display_name: methodDef.displayName,\r\n                    description: methodDef.description,\r\n                    version: methodDef.version,\r\n                    flags: flags,\r\n                    object_types: methodDef.objectTypes || methodDef.object_types,\r\n                    input_signature: methodDef.accepts,\r\n                    result_signature: methodDef.returns,\r\n                    restrictions: undefined,\r\n                }],\r\n        };\r\n        return this.session.send(registerMsg, { methodId: repoMethod.repoId })\r\n            .then(function () {\r\n            _this.logger.debug(\"registered method \" + repoMethod.definition.name + \" with id \" + repoMethod.repoId);\r\n        })\r\n            .catch(function (msg) {\r\n            _this.logger.warn(\"failed to register method \" + repoMethod.definition.name + \" with id \" + repoMethod.repoId + \" - \" + JSON.stringify(msg));\r\n            throw msg;\r\n        });\r\n    };\r\n    ServerProtocol.prototype.onInvoked = function (callback) {\r\n        this.callbacks.add(\"onInvoked\", callback);\r\n    };\r\n    ServerProtocol.prototype.methodInvocationResult = function (method, invocationId, err, result) {\r\n        var msg;\r\n        if (err || err === \"\") {\r\n            msg = {\r\n                type: \"error\",\r\n                request_id: invocationId,\r\n                reason_uri: \"agm.errors.client_error\",\r\n                reason: err,\r\n                context: result,\r\n                peer_id: undefined,\r\n            };\r\n        }\r\n        else {\r\n            msg = {\r\n                type: \"yield\",\r\n                invocation_id: invocationId,\r\n                peer_id: this.session.peerId,\r\n                result: result,\r\n                request_id: undefined,\r\n            };\r\n        }\r\n        this.session.sendFireAndForget(msg);\r\n    };\r\n    ServerProtocol.prototype.unregister = function (method) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var msg;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        msg = {\r\n                            type: \"unregister\",\r\n                            methods: [method.repoId],\r\n                        };\r\n                        return [4, this.session.send(msg)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [2];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ServerProtocol.prototype.getBranchList = function (method) {\r\n        return this.streaming.getBranchList(method);\r\n    };\r\n    ServerProtocol.prototype.getSubscriptionList = function (method, branchKey) {\r\n        return this.streaming.getSubscriptionList(method, branchKey);\r\n    };\r\n    ServerProtocol.prototype.closeAllSubscriptions = function (method, branchKey) {\r\n        this.streaming.closeMultipleSubscriptions(method, branchKey);\r\n    };\r\n    ServerProtocol.prototype.pushData = function (method, data, branches) {\r\n        this.streaming.pushData(method, data, branches);\r\n    };\r\n    ServerProtocol.prototype.pushDataToSingle = function (method, subscription, data) {\r\n        this.streaming.pushDataToSingle(method, subscription, data);\r\n    };\r\n    ServerProtocol.prototype.closeSingleSubscription = function (method, subscription) {\r\n        this.streaming.closeSingleSubscription(method, subscription);\r\n    };\r\n    ServerProtocol.prototype.acceptRequestOnBranch = function (requestContext, method, branch) {\r\n        this.streaming.acceptRequestOnBranch(requestContext, method, branch);\r\n    };\r\n    ServerProtocol.prototype.rejectRequest = function (requestContext, method, reason) {\r\n        this.streaming.rejectRequest(requestContext, method, reason);\r\n    };\r\n    ServerProtocol.prototype.onSubRequest = function (callback) {\r\n        this.streaming.onSubRequest(callback);\r\n    };\r\n    ServerProtocol.prototype.onSubAdded = function (callback) {\r\n        this.streaming.onSubAdded(callback);\r\n    };\r\n    ServerProtocol.prototype.onSubRemoved = function (callback) {\r\n        this.streaming.onSubRemoved(callback);\r\n    };\r\n    ServerProtocol.prototype.handleInvokeMessage = function (msg) {\r\n        var invocationId = msg.invocation_id;\r\n        var callerId = msg.caller_id;\r\n        var methodId = msg.method_id;\r\n        var args = msg.arguments_kv;\r\n        var methodList = this.serverRepository.getList();\r\n        var method = methodList.filter(function (m) {\r\n            return m.repoId === methodId;\r\n        })[0];\r\n        if (method === undefined) {\r\n            return;\r\n        }\r\n        var client = this.clientRepository.getServerById(callerId).instance;\r\n        var invocationArgs = { args: args, instance: client };\r\n        this.callbacks.execute(\"onInvoked\", method, invocationId, invocationArgs);\r\n    };\r\n    return ServerProtocol;\r\n}());\n\nvar UserSubscription = (function () {\r\n    function UserSubscription(repository, subscriptionData) {\r\n        this.repository = repository;\r\n        this.subscriptionData = subscriptionData;\r\n    }\r\n    Object.defineProperty(UserSubscription.prototype, \"requestArguments\", {\r\n        get: function () {\r\n            return this.subscriptionData.params.arguments || {};\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(UserSubscription.prototype, \"servers\", {\r\n        get: function () {\r\n            var _this = this;\r\n            return this.subscriptionData.trackedServers\r\n                .filter(function (pair) { return pair.subscriptionId; })\r\n                .map(function (pair) { return _this.repository.getServerById(pair.serverId).instance; });\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(UserSubscription.prototype, \"serverInstance\", {\r\n        get: function () {\r\n            return this.servers[0];\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(UserSubscription.prototype, \"stream\", {\r\n        get: function () {\r\n            return this.subscriptionData.method;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    UserSubscription.prototype.onData = function (dataCallback) {\r\n        if (typeof dataCallback !== \"function\") {\r\n            throw new TypeError(\"The data callback must be a function.\");\r\n        }\r\n        this.subscriptionData.handlers.onData.push(dataCallback);\r\n        if (this.subscriptionData.handlers.onData.length === 1 && this.subscriptionData.queued.data.length > 0) {\r\n            this.subscriptionData.queued.data.forEach(function (dataItem) {\r\n                dataCallback(dataItem);\r\n            });\r\n        }\r\n    };\r\n    UserSubscription.prototype.onClosed = function (closedCallback) {\r\n        if (typeof closedCallback !== \"function\") {\r\n            throw new TypeError(\"The callback must be a function.\");\r\n        }\r\n        this.subscriptionData.handlers.onClosed.push(closedCallback);\r\n    };\r\n    UserSubscription.prototype.onFailed = function (callback) {\r\n    };\r\n    UserSubscription.prototype.onConnected = function (callback) {\r\n        if (typeof callback !== \"function\") {\r\n            throw new TypeError(\"The callback must be a function.\");\r\n        }\r\n        this.subscriptionData.handlers.onConnected.push(callback);\r\n    };\r\n    UserSubscription.prototype.close = function () {\r\n        this.subscriptionData.close();\r\n    };\r\n    UserSubscription.prototype.setNewSubscription = function (newSub) {\r\n        this.subscriptionData = newSub;\r\n    };\r\n    return UserSubscription;\r\n}());\n\nvar TimedCache = (function () {\r\n    function TimedCache(config) {\r\n        this.config = config;\r\n        this.cache = [];\r\n        this.timeoutIds = [];\r\n    }\r\n    TimedCache.prototype.add = function (element) {\r\n        var _this = this;\r\n        var id = shortid();\r\n        this.cache.push({ id: id, element: element });\r\n        var timeoutId = setTimeout(function () {\r\n            var elementIdx = _this.cache.findIndex(function (entry) { return entry.id === id; });\r\n            if (elementIdx < 0) {\r\n                return;\r\n            }\r\n            _this.cache.splice(elementIdx, 1);\r\n        }, this.config.ELEMENT_TTL_MS);\r\n        this.timeoutIds.push(timeoutId);\r\n    };\r\n    TimedCache.prototype.flush = function () {\r\n        var elements = this.cache.map(function (entry) { return entry.element; });\r\n        this.timeoutIds.forEach(function (id) { return clearInterval(id); });\r\n        this.cache = [];\r\n        this.timeoutIds = [];\r\n        return elements;\r\n    };\r\n    return TimedCache;\r\n}());\n\nvar STATUS_AWAITING_ACCEPT = \"awaitingAccept\";\r\nvar STATUS_SUBSCRIBED = \"subscribed\";\r\nvar ERR_MSG_SUB_FAILED = \"Subscription failed.\";\r\nvar ERR_MSG_SUB_REJECTED = \"Subscription rejected.\";\r\nvar ON_CLOSE_MSG_SERVER_INIT = \"ServerInitiated\";\r\nvar ON_CLOSE_MSG_CLIENT_INIT = \"ClientInitiated\";\r\nvar ClientStreaming = (function () {\r\n    function ClientStreaming(session, repository, logger) {\r\n        var _this = this;\r\n        this.session = session;\r\n        this.repository = repository;\r\n        this.logger = logger;\r\n        this.subscriptionsList = {};\r\n        this.timedCache = new TimedCache({ ELEMENT_TTL_MS: 10000 });\r\n        this.subscriptionIdToLocalKeyMap = {};\r\n        this.nextSubLocalKey = 0;\r\n        this.handleErrorSubscribing = function (errorResponse) {\r\n            var tag = errorResponse._tag;\r\n            var subLocalKey = tag.subLocalKey;\r\n            var pendingSub = _this.subscriptionsList[subLocalKey];\r\n            if (typeof pendingSub !== \"object\") {\r\n                return;\r\n            }\r\n            pendingSub.trackedServers = pendingSub.trackedServers.filter(function (server) {\r\n                return server.serverId !== tag.serverId;\r\n            });\r\n            if (pendingSub.trackedServers.length <= 0) {\r\n                clearTimeout(pendingSub.timeoutId);\r\n                if (pendingSub.status === STATUS_AWAITING_ACCEPT) {\r\n                    var reason = (typeof errorResponse.reason === \"string\" && errorResponse.reason !== \"\") ?\r\n                        ' Publisher said \"' + errorResponse.reason + '\".' :\r\n                        \" No reason given.\";\r\n                    var callArgs = typeof pendingSub.params.arguments === \"object\" ?\r\n                        JSON.stringify(pendingSub.params.arguments) :\r\n                        \"{}\";\r\n                    pendingSub.error({\r\n                        message: ERR_MSG_SUB_REJECTED + reason + \" Called with:\" + callArgs,\r\n                        called_with: pendingSub.params.arguments,\r\n                        method: pendingSub.method,\r\n                    });\r\n                }\r\n                else if (pendingSub.status === STATUS_SUBSCRIBED) {\r\n                    _this.callOnClosedHandlers(pendingSub);\r\n                }\r\n                delete _this.subscriptionsList[subLocalKey];\r\n            }\r\n        };\r\n        this.handleSubscribed = function (msg) {\r\n            var subLocalKey = msg._tag.subLocalKey;\r\n            var pendingSub = _this.subscriptionsList[subLocalKey];\r\n            if (typeof pendingSub !== \"object\") {\r\n                return;\r\n            }\r\n            var serverId = msg._tag.serverId;\r\n            var acceptingServer = pendingSub.trackedServers\r\n                .filter(function (server) {\r\n                return server.serverId === serverId;\r\n            })[0];\r\n            if (typeof acceptingServer !== \"object\") {\r\n                return;\r\n            }\r\n            acceptingServer.subscriptionId = msg.subscription_id;\r\n            _this.subscriptionIdToLocalKeyMap[msg.subscription_id] = subLocalKey;\r\n            var isFirstResponse = (pendingSub.status === STATUS_AWAITING_ACCEPT);\r\n            pendingSub.status = STATUS_SUBSCRIBED;\r\n            if (isFirstResponse) {\r\n                var reconnect = false;\r\n                var sub = pendingSub.subscription;\r\n                if (sub) {\r\n                    sub.setNewSubscription(pendingSub);\r\n                    pendingSub.success(sub);\r\n                    reconnect = true;\r\n                }\r\n                else {\r\n                    sub = new UserSubscription(_this.repository, pendingSub);\r\n                    pendingSub.subscription = sub;\r\n                    pendingSub.success(sub);\r\n                }\r\n                for (var _i = 0, _a = pendingSub.handlers.onConnected; _i < _a.length; _i++) {\r\n                    var handler = _a[_i];\r\n                    try {\r\n                        handler(sub.serverInstance, reconnect);\r\n                    }\r\n                    catch (e) {\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        this.handleEventData = function (msg) {\r\n            var subLocalKey = _this.subscriptionIdToLocalKeyMap[msg.subscription_id];\r\n            if (typeof subLocalKey === \"undefined\") {\r\n                return;\r\n            }\r\n            var subscription = _this.subscriptionsList[subLocalKey];\r\n            if (typeof subscription !== \"object\") {\r\n                return;\r\n            }\r\n            var trackedServersFound = subscription.trackedServers.filter(function (server) {\r\n                return server.subscriptionId === msg.subscription_id;\r\n            });\r\n            if (trackedServersFound.length !== 1) {\r\n                return;\r\n            }\r\n            var isPrivateData = msg.oob;\r\n            var sendingServerId = trackedServersFound[0].serverId;\r\n            var receivedStreamData = function () {\r\n                return {\r\n                    data: msg.data,\r\n                    server: _this.repository.getServerById(sendingServerId).instance,\r\n                    requestArguments: subscription.params.arguments,\r\n                    message: undefined,\r\n                    private: isPrivateData,\r\n                };\r\n            };\r\n            var onDataHandlers = subscription.handlers.onData;\r\n            var queuedData = subscription.queued.data;\r\n            if (onDataHandlers.length > 0) {\r\n                onDataHandlers.forEach(function (callback) {\r\n                    if (typeof callback === \"function\") {\r\n                        callback(receivedStreamData());\r\n                    }\r\n                });\r\n            }\r\n            else {\r\n                queuedData.push(receivedStreamData());\r\n            }\r\n        };\r\n        this.handleSubscriptionCancelled = function (msg) {\r\n            var subLocalKey = _this.subscriptionIdToLocalKeyMap[msg.subscription_id];\r\n            if (typeof subLocalKey === \"undefined\") {\r\n                return;\r\n            }\r\n            var subscription = _this.subscriptionsList[subLocalKey];\r\n            if (typeof subscription !== \"object\") {\r\n                return;\r\n            }\r\n            var expectedNewLength = subscription.trackedServers.length - 1;\r\n            subscription.trackedServers = subscription.trackedServers.filter(function (server) {\r\n                if (server.subscriptionId === msg.subscription_id) {\r\n                    subscription.queued.closers.push(server.serverId);\r\n                    return false;\r\n                }\r\n                else {\r\n                    return true;\r\n                }\r\n            });\r\n            if (subscription.trackedServers.length !== expectedNewLength) {\r\n                return;\r\n            }\r\n            if (subscription.trackedServers.length <= 0) {\r\n                _this.timedCache.add(subscription);\r\n                clearTimeout(subscription.timeoutId);\r\n                _this.callOnClosedHandlers(subscription);\r\n                delete _this.subscriptionsList[subLocalKey];\r\n            }\r\n            delete _this.subscriptionIdToLocalKeyMap[msg.subscription_id];\r\n        };\r\n        session.on(\"subscribed\", this.handleSubscribed);\r\n        session.on(\"event\", this.handleEventData);\r\n        session.on(\"subscription-cancelled\", this.handleSubscriptionCancelled);\r\n    }\r\n    ClientStreaming.prototype.subscribe = function (streamingMethod, params, targetServers, success, error, existingSub) {\r\n        var _this = this;\r\n        if (targetServers.length === 0) {\r\n            error({\r\n                method: streamingMethod,\r\n                called_with: params.arguments,\r\n                message: ERR_MSG_SUB_FAILED + \" No available servers matched the target params.\",\r\n            });\r\n            return;\r\n        }\r\n        var subLocalKey = this.getNextSubscriptionLocalKey();\r\n        var pendingSub = this.registerSubscription(subLocalKey, streamingMethod, params, success, error, params.methodResponseTimeout || 10000, existingSub);\r\n        if (typeof pendingSub !== \"object\") {\r\n            error({\r\n                method: streamingMethod,\r\n                called_with: params.arguments,\r\n                message: ERR_MSG_SUB_FAILED + \" Unable to register the user callbacks.\",\r\n            });\r\n            return;\r\n        }\r\n        targetServers.forEach(function (target) {\r\n            var serverId = target.server.id;\r\n            var method = target.methods.find(function (m) { return m.name === streamingMethod.name; });\r\n            if (!method) {\r\n                _this.logger.error(\"can not find method \" + streamingMethod.name + \" for target \" + target.server.id);\r\n                return;\r\n            }\r\n            pendingSub.trackedServers.push({\r\n                serverId: serverId,\r\n                subscriptionId: undefined,\r\n            });\r\n            var msg = {\r\n                type: \"subscribe\",\r\n                server_id: serverId,\r\n                method_id: method.gatewayId,\r\n                arguments_kv: params.arguments,\r\n            };\r\n            _this.session.send(msg, { serverId: serverId, subLocalKey: subLocalKey })\r\n                .then(function (m) { return _this.handleSubscribed(m); })\r\n                .catch(function (err) { return _this.handleErrorSubscribing(err); });\r\n        });\r\n    };\r\n    ClientStreaming.prototype.drainSubscriptions = function () {\r\n        var existing = Object.values(this.subscriptionsList);\r\n        this.subscriptionsList = {};\r\n        this.subscriptionIdToLocalKeyMap = {};\r\n        return existing;\r\n    };\r\n    ClientStreaming.prototype.drainSubscriptionsCache = function () {\r\n        return this.timedCache.flush();\r\n    };\r\n    ClientStreaming.prototype.getNextSubscriptionLocalKey = function () {\r\n        var current = this.nextSubLocalKey;\r\n        this.nextSubLocalKey += 1;\r\n        return current;\r\n    };\r\n    ClientStreaming.prototype.registerSubscription = function (subLocalKey, method, params, success, error, timeout, existingSub) {\r\n        var _this = this;\r\n        var subsInfo = {\r\n            localKey: subLocalKey,\r\n            status: STATUS_AWAITING_ACCEPT,\r\n            method: method,\r\n            params: params,\r\n            success: success,\r\n            error: error,\r\n            trackedServers: [],\r\n            handlers: {\r\n                onData: (existingSub === null || existingSub === void 0 ? void 0 : existingSub.handlers.onData) || [],\r\n                onClosed: (existingSub === null || existingSub === void 0 ? void 0 : existingSub.handlers.onClosed) || [],\r\n                onConnected: (existingSub === null || existingSub === void 0 ? void 0 : existingSub.handlers.onConnected) || [],\r\n            },\r\n            queued: {\r\n                data: [],\r\n                closers: [],\r\n            },\r\n            timeoutId: undefined,\r\n            close: function () { return _this.closeSubscription(subLocalKey); },\r\n            subscription: existingSub === null || existingSub === void 0 ? void 0 : existingSub.subscription\r\n        };\r\n        if (!existingSub) {\r\n            if (params.onData) {\r\n                subsInfo.handlers.onData.push(params.onData);\r\n            }\r\n            if (params.onClosed) {\r\n                subsInfo.handlers.onClosed.push(params.onClosed);\r\n            }\r\n            if (params.onConnected) {\r\n                subsInfo.handlers.onConnected.push(params.onConnected);\r\n            }\r\n        }\r\n        this.subscriptionsList[subLocalKey] = subsInfo;\r\n        subsInfo.timeoutId = setTimeout(function () {\r\n            if (_this.subscriptionsList[subLocalKey] === undefined) {\r\n                return;\r\n            }\r\n            var pendingSub = _this.subscriptionsList[subLocalKey];\r\n            if (pendingSub.status === STATUS_AWAITING_ACCEPT) {\r\n                error({\r\n                    method: method,\r\n                    called_with: params.arguments,\r\n                    message: ERR_MSG_SUB_FAILED + \" Subscription attempt timed out after \" + timeout + \" ms.\",\r\n                });\r\n                delete _this.subscriptionsList[subLocalKey];\r\n            }\r\n            else if (pendingSub.status === STATUS_SUBSCRIBED && pendingSub.trackedServers.length > 0) {\r\n                pendingSub.trackedServers = pendingSub.trackedServers.filter(function (server) {\r\n                    return (typeof server.subscriptionId !== \"undefined\");\r\n                });\r\n                delete pendingSub.timeoutId;\r\n                if (pendingSub.trackedServers.length <= 0) {\r\n                    _this.callOnClosedHandlers(pendingSub);\r\n                    delete _this.subscriptionsList[subLocalKey];\r\n                }\r\n            }\r\n        }, timeout);\r\n        return subsInfo;\r\n    };\r\n    ClientStreaming.prototype.callOnClosedHandlers = function (subscription, reason) {\r\n        var closersCount = subscription.queued.closers.length;\r\n        var closingServerId = (closersCount > 0) ? subscription.queued.closers[closersCount - 1] : null;\r\n        var closingServer;\r\n        if (closingServerId !== undefined && typeof closingServerId === \"string\") {\r\n            closingServer = this.repository.getServerById(closingServerId).instance;\r\n        }\r\n        subscription.handlers.onClosed.forEach(function (callback) {\r\n            if (typeof callback !== \"function\") {\r\n                return;\r\n            }\r\n            callback({\r\n                message: reason || ON_CLOSE_MSG_SERVER_INIT,\r\n                requestArguments: subscription.params.arguments || {},\r\n                server: closingServer,\r\n                stream: subscription.method,\r\n            });\r\n        });\r\n    };\r\n    ClientStreaming.prototype.closeSubscription = function (subLocalKey) {\r\n        var _this = this;\r\n        var subscription = this.subscriptionsList[subLocalKey];\r\n        if (typeof subscription !== \"object\") {\r\n            return;\r\n        }\r\n        subscription.trackedServers.forEach(function (server) {\r\n            if (typeof server.subscriptionId === \"undefined\") {\r\n                return;\r\n            }\r\n            subscription.queued.closers.push(server.serverId);\r\n            _this.session.sendFireAndForget({\r\n                type: \"unsubscribe\",\r\n                subscription_id: server.subscriptionId,\r\n                reason_uri: \"\",\r\n                reason: ON_CLOSE_MSG_CLIENT_INIT,\r\n            });\r\n            delete _this.subscriptionIdToLocalKeyMap[server.subscriptionId];\r\n        });\r\n        subscription.trackedServers = [];\r\n        this.callOnClosedHandlers(subscription, ON_CLOSE_MSG_CLIENT_INIT);\r\n        delete this.subscriptionsList[subLocalKey];\r\n    };\r\n    return ClientStreaming;\r\n}());\n\nvar ClientProtocol = (function () {\r\n    function ClientProtocol(session, repository, logger) {\r\n        var _this = this;\r\n        this.session = session;\r\n        this.repository = repository;\r\n        this.logger = logger;\r\n        session.on(\"peer-added\", function (msg) { return _this.handlePeerAdded(msg); });\r\n        session.on(\"peer-removed\", function (msg) { return _this.handlePeerRemoved(msg); });\r\n        session.on(\"methods-added\", function (msg) { return _this.handleMethodsAddedMessage(msg); });\r\n        session.on(\"methods-removed\", function (msg) { return _this.handleMethodsRemovedMessage(msg); });\r\n        this.streaming = new ClientStreaming(session, repository, logger);\r\n    }\r\n    ClientProtocol.prototype.subscribe = function (stream, options, targetServers, success, error, existingSub) {\r\n        this.streaming.subscribe(stream, options, targetServers, success, error, existingSub);\r\n    };\r\n    ClientProtocol.prototype.invoke = function (id, method, args, target) {\r\n        var _this = this;\r\n        var serverId = target.id;\r\n        var methodId = method.gatewayId;\r\n        var msg = {\r\n            type: \"call\",\r\n            server_id: serverId,\r\n            method_id: methodId,\r\n            arguments_kv: args,\r\n        };\r\n        return this.session.send(msg, { invocationId: id, serverId: serverId })\r\n            .then(function (m) { return _this.handleResultMessage(m); })\r\n            .catch(function (err) { return _this.handleInvocationError(err); });\r\n    };\r\n    ClientProtocol.prototype.drainSubscriptions = function () {\r\n        return this.streaming.drainSubscriptions();\r\n    };\r\n    ClientProtocol.prototype.drainSubscriptionsCache = function () {\r\n        return this.streaming.drainSubscriptionsCache();\r\n    };\r\n    ClientProtocol.prototype.handlePeerAdded = function (msg) {\r\n        var newPeerId = msg.new_peer_id;\r\n        var remoteId = msg.identity;\r\n        var isLocal = msg.meta ? msg.meta.local : true;\r\n        var pid = Number(remoteId.process);\r\n        var serverInfo = {\r\n            machine: remoteId.machine,\r\n            pid: isNaN(pid) ? remoteId.process : pid,\r\n            instance: remoteId.instance,\r\n            application: remoteId.application,\r\n            applicationName: remoteId.applicationName,\r\n            environment: remoteId.environment,\r\n            region: remoteId.region,\r\n            user: remoteId.user,\r\n            windowId: remoteId.windowId,\r\n            peerId: newPeerId,\r\n            api: remoteId.api,\r\n            isLocal: isLocal\r\n        };\r\n        this.repository.addServer(serverInfo, newPeerId);\r\n    };\r\n    ClientProtocol.prototype.handlePeerRemoved = function (msg) {\r\n        var removedPeerId = msg.removed_id;\r\n        var reason = msg.reason;\r\n        this.repository.removeServerById(removedPeerId, reason);\r\n    };\r\n    ClientProtocol.prototype.handleMethodsAddedMessage = function (msg) {\r\n        var _this = this;\r\n        var serverId = msg.server_id;\r\n        var methods = msg.methods;\r\n        methods.forEach(function (method) {\r\n            _this.repository.addServerMethod(serverId, method);\r\n        });\r\n    };\r\n    ClientProtocol.prototype.handleMethodsRemovedMessage = function (msg) {\r\n        var _this = this;\r\n        var serverId = msg.server_id;\r\n        var methodIdList = msg.methods;\r\n        var server = this.repository.getServerById(serverId);\r\n        var serverMethodKeys = Object.keys(server.methods);\r\n        serverMethodKeys.forEach(function (methodKey) {\r\n            var method = server.methods[methodKey];\r\n            if (methodIdList.indexOf(method.gatewayId) > -1) {\r\n                _this.repository.removeServerMethod(serverId, methodKey);\r\n            }\r\n        });\r\n    };\r\n    ClientProtocol.prototype.handleResultMessage = function (msg) {\r\n        var invocationId = msg._tag.invocationId;\r\n        var result = msg.result;\r\n        var serverId = msg._tag.serverId;\r\n        var server = this.repository.getServerById(serverId);\r\n        return {\r\n            invocationId: invocationId,\r\n            result: result,\r\n            instance: server.instance,\r\n            status: InvokeStatus.Success,\r\n            message: \"\"\r\n        };\r\n    };\r\n    ClientProtocol.prototype.handleInvocationError = function (msg) {\r\n        this.logger.debug(\"handle invocation error \" + JSON.stringify(msg));\r\n        if (\"_tag\" in msg) {\r\n            var invocationId = msg._tag.invocationId;\r\n            var serverId = msg._tag.serverId;\r\n            var server = this.repository.getServerById(serverId);\r\n            var message = msg.reason;\r\n            var context_1 = msg.context;\r\n            return {\r\n                invocationId: invocationId,\r\n                result: context_1,\r\n                instance: server.instance,\r\n                status: InvokeStatus.Error,\r\n                message: message\r\n            };\r\n        }\r\n        else {\r\n            return {\r\n                invocationId: \"\",\r\n                message: msg.message,\r\n                status: InvokeStatus.Error,\r\n                error: msg\r\n            };\r\n        }\r\n    };\r\n    return ClientProtocol;\r\n}());\n\nfunction gW3ProtocolFactory (instance, connection, clientRepository, serverRepository, libConfig, interop) {\r\n    var logger = libConfig.logger.subLogger(\"gw3-protocol\");\r\n    var resolveReadyPromise;\r\n    var readyPromise = new Promise(function (resolve) {\r\n        resolveReadyPromise = resolve;\r\n    });\r\n    var session = connection.domain(\"agm\", [\"subscribed\"]);\r\n    var server = new ServerProtocol(session, clientRepository, serverRepository, logger.subLogger(\"server\"));\r\n    var client = new ClientProtocol(session, clientRepository, logger.subLogger(\"client\"));\r\n    function handleReconnect() {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var reconnectionPromises, existingSubscriptions, _loop_1, _i, existingSubscriptions_1, sub, registeredMethods, _loop_2, _a, registeredMethods_1, method;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        logger.info(\"reconnected - will replay registered methods and subscriptions\");\r\n                        client.drainSubscriptionsCache().forEach(function (sub) {\r\n                            var methodInfo = sub.method;\r\n                            var params = Object.assign({}, sub.params);\r\n                            logger.info(\"trying to soft-re-subscribe to method \" + methodInfo.name + \", with params: \" + JSON.stringify(params));\r\n                            interop.client.subscribe(methodInfo, params, undefined, undefined, sub).then(function () { return logger.info(\"soft-subscribing to method \" + methodInfo.name + \" DONE\"); }).catch(function (error) { return logger.warn(\"subscribing to method \" + methodInfo.name + \" failed: \" + JSON.stringify(error) + \"}\"); });\r\n                        });\r\n                        reconnectionPromises = [];\r\n                        existingSubscriptions = client.drainSubscriptions();\r\n                        _loop_1 = function (sub) {\r\n                            var methodInfo = sub.method;\r\n                            var params = Object.assign({}, sub.params);\r\n                            logger.info(\"trying to re-subscribe to method \" + methodInfo.name + \", with params: \" + JSON.stringify(params));\r\n                            reconnectionPromises.push(interop.client.subscribe(methodInfo, params, undefined, undefined, sub).then(function () { return logger.info(\"subscribing to method \" + methodInfo.name + \" DONE\"); }));\r\n                        };\r\n                        for (_i = 0, existingSubscriptions_1 = existingSubscriptions; _i < existingSubscriptions_1.length; _i++) {\r\n                            sub = existingSubscriptions_1[_i];\r\n                            _loop_1(sub);\r\n                        }\r\n                        registeredMethods = serverRepository.getList();\r\n                        serverRepository.reset();\r\n                        _loop_2 = function (method) {\r\n                            var def = method.definition;\r\n                            logger.info(\"re-publishing method \" + def.name);\r\n                            if (method.stream) {\r\n                                reconnectionPromises.push(interop.server.createStream(def, method.streamCallbacks, undefined, undefined, method.stream).then(function () { return logger.info(\"subscribing to method \" + def.name + \" DONE\"); }));\r\n                            }\r\n                            else if (method.theFunction && method.theFunction.userCallback) {\r\n                                reconnectionPromises.push(interop.register(def, method.theFunction.userCallback).then(function () { return logger.info(\"subscribing to method \" + def.name + \" DONE\"); }));\r\n                            }\r\n                            else if (method.theFunction && method.theFunction.userCallbackAsync) {\r\n                                reconnectionPromises.push(interop.registerAsync(def, method.theFunction.userCallbackAsync).then(function () { return logger.info(\"subscribing to method \" + def.name + \" DONE\"); }));\r\n                            }\r\n                            logger.info(\"re-publishing method \" + def.name + \" DONE\");\r\n                        };\r\n                        for (_a = 0, registeredMethods_1 = registeredMethods; _a < registeredMethods_1.length; _a++) {\r\n                            method = registeredMethods_1[_a];\r\n                            _loop_2(method);\r\n                        }\r\n                        return [4, Promise.all(reconnectionPromises)];\r\n                    case 1:\r\n                        _b.sent();\r\n                        logger.info(\"Interop is re-announced\");\r\n                        return [2];\r\n                }\r\n            });\r\n        });\r\n    }\r\n    function handleInitialJoin() {\r\n        if (resolveReadyPromise) {\r\n            resolveReadyPromise({\r\n                client: client,\r\n                server: server,\r\n            });\r\n            resolveReadyPromise = undefined;\r\n        }\r\n    }\r\n    session.onJoined(function (reconnect) {\r\n        clientRepository.addServer(instance, connection.peerId);\r\n        if (reconnect) {\r\n            handleReconnect().then(function () { return connection.setLibReAnnounced({ name: \"interop\" }); }).catch(function (error) { return logger.warn(\"Error while re-announcing interop: \" + JSON.stringify(error)); });\r\n        }\r\n        else {\r\n            handleInitialJoin();\r\n        }\r\n    });\r\n    session.onLeft(function () {\r\n        clientRepository.reset();\r\n    });\r\n    session.join();\r\n    return readyPromise;\r\n}\n\nvar Interop = (function () {\r\n    function Interop(configuration) {\r\n        var _this = this;\r\n        if (typeof configuration === \"undefined\") {\r\n            throw new Error(\"configuration is required\");\r\n        }\r\n        if (typeof configuration.connection === \"undefined\") {\r\n            throw new Error(\"configuration.connections is required\");\r\n        }\r\n        var connection = configuration.connection;\r\n        if (typeof configuration.methodResponseTimeout !== \"number\") {\r\n            configuration.methodResponseTimeout = 30 * 1000;\r\n        }\r\n        if (typeof configuration.waitTimeoutMs !== \"number\") {\r\n            configuration.waitTimeoutMs = 30 * 1000;\r\n        }\r\n        this.unwrappedInstance = new InstanceWrapper(this, undefined, connection);\r\n        this.instance = this.unwrappedInstance.unwrap();\r\n        this.clientRepository = new ClientRepository(configuration.logger.subLogger(\"cRep\"), this);\r\n        this.serverRepository = new ServerRepository();\r\n        var protocolPromise;\r\n        if (connection.protocolVersion === 3) {\r\n            protocolPromise = gW3ProtocolFactory(this.instance, connection, this.clientRepository, this.serverRepository, configuration, this);\r\n        }\r\n        else {\r\n            throw new Error(\"protocol \" + connection.protocolVersion + \" not supported\");\r\n        }\r\n        this.readyPromise = protocolPromise.then(function (protocol) {\r\n            _this.protocol = protocol;\r\n            _this.client = new Client(_this.protocol, _this.clientRepository, _this.instance, configuration);\r\n            _this.server = new Server(_this.protocol, _this.serverRepository);\r\n            return _this;\r\n        });\r\n    }\r\n    Interop.prototype.ready = function () {\r\n        return this.readyPromise;\r\n    };\r\n    Interop.prototype.serverRemoved = function (callback) {\r\n        return this.client.serverRemoved(callback);\r\n    };\r\n    Interop.prototype.serverAdded = function (callback) {\r\n        return this.client.serverAdded(callback);\r\n    };\r\n    Interop.prototype.serverMethodRemoved = function (callback) {\r\n        return this.client.serverMethodRemoved(callback);\r\n    };\r\n    Interop.prototype.serverMethodAdded = function (callback) {\r\n        return this.client.serverMethodAdded(callback);\r\n    };\r\n    Interop.prototype.methodRemoved = function (callback) {\r\n        return this.client.methodRemoved(callback);\r\n    };\r\n    Interop.prototype.methodAdded = function (callback) {\r\n        return this.client.methodAdded(callback);\r\n    };\r\n    Interop.prototype.methodsForInstance = function (instance) {\r\n        return this.client.methodsForInstance(instance);\r\n    };\r\n    Interop.prototype.methods = function (methodFilter) {\r\n        return this.client.methods(methodFilter);\r\n    };\r\n    Interop.prototype.servers = function (methodFilter) {\r\n        return this.client.servers(methodFilter);\r\n    };\r\n    Interop.prototype.subscribe = function (method, options, successCallback, errorCallback) {\r\n        return this.client.subscribe(method, options, successCallback, errorCallback);\r\n    };\r\n    Interop.prototype.createStream = function (streamDef, callbacks, successCallback, errorCallback) {\r\n        return this.server.createStream(streamDef, callbacks, successCallback, errorCallback);\r\n    };\r\n    Interop.prototype.unregister = function (methodFilter) {\r\n        return this.server.unregister(methodFilter);\r\n    };\r\n    Interop.prototype.registerAsync = function (methodDefinition, callback) {\r\n        return this.server.registerAsync(methodDefinition, callback);\r\n    };\r\n    Interop.prototype.register = function (methodDefinition, callback) {\r\n        return this.server.register(methodDefinition, callback);\r\n    };\r\n    Interop.prototype.invoke = function (methodFilter, argumentObj, target, additionalOptions, success, error) {\r\n        return this.client.invoke(methodFilter, argumentObj, target, additionalOptions, success, error);\r\n    };\r\n    Interop.prototype.waitForMethod = function (name) {\r\n        var pw = new PromiseWrapper();\r\n        var unsubscribe = this.client.methodAdded(function (m) {\r\n            if (m.name === name) {\r\n                unsubscribe();\r\n                pw.resolve(m);\r\n            }\r\n        });\r\n        return pw.promise;\r\n    };\r\n    return Interop;\r\n}());\n\nvar successMessages = [\"subscribed\", \"success\"];\r\nvar MessageBus = (function () {\r\n    function MessageBus(connection, logger) {\r\n        var _this = this;\r\n        this.publish = function (topic, data, options) {\r\n            var _a = options || {}, routingKey = _a.routingKey, target = _a.target;\r\n            var args = _this.removeEmptyValues({\r\n                type: \"publish\",\r\n                topic: topic,\r\n                data: data,\r\n                peer_id: _this.peerId,\r\n                routing_key: routingKey,\r\n                target_identity: target\r\n            });\r\n            _this.session.send(args);\r\n        };\r\n        this.subscribe = function (topic, callback, options) {\r\n            return new Promise(function (resolve, reject) {\r\n                var _a = options || {}, routingKey = _a.routingKey, target = _a.target;\r\n                var args = _this.removeEmptyValues({\r\n                    type: \"subscribe\",\r\n                    topic: topic,\r\n                    peer_id: _this.peerId,\r\n                    routing_key: routingKey,\r\n                    source: target\r\n                });\r\n                _this.session.send(args)\r\n                    .then(function (response) {\r\n                    var subscription_id = response.subscription_id;\r\n                    _this.subscriptions.push({ subscription_id: subscription_id, topic: topic, callback: callback, source: target });\r\n                    resolve({\r\n                        unsubscribe: function () {\r\n                            _this.session.send({ type: \"unsubscribe\", subscription_id: subscription_id, peer_id: _this.peerId });\r\n                            _this.subscriptions = _this.subscriptions.filter(function (s) { return s.subscription_id !== subscription_id; });\r\n                            return Promise.resolve();\r\n                        }\r\n                    });\r\n                })\r\n                    .catch(function (error) { return reject(error); });\r\n            });\r\n        };\r\n        this.watchOnEvent = function () {\r\n            _this.session.on(\"event\", function (args) {\r\n                var data = args.data, subscription_id = args.subscription_id;\r\n                var source = args[\"publisher-identity\"];\r\n                var subscription = _this.subscriptions.find(function (s) { return s.subscription_id === subscription_id; });\r\n                if (subscription) {\r\n                    if (!subscription.source) {\r\n                        subscription.callback(data, subscription.topic, source);\r\n                    }\r\n                    else {\r\n                        if (_this.keysMatch(subscription.source, source)) {\r\n                            subscription.callback(data, subscription.topic, source);\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        };\r\n        this.connection = connection;\r\n        this.logger = logger;\r\n        this.peerId = connection.peerId;\r\n        this.subscriptions = [];\r\n        this.session = connection.domain(\"bus\", successMessages);\r\n        this.readyPromise = this.session.join();\r\n        this.readyPromise.then(function () {\r\n            _this.watchOnEvent();\r\n        });\r\n    }\r\n    MessageBus.prototype.ready = function () {\r\n        return this.readyPromise;\r\n    };\r\n    MessageBus.prototype.removeEmptyValues = function (obj) {\r\n        var cleaned = {};\r\n        Object.keys(obj).forEach(function (key) {\r\n            if (obj[key] !== undefined && obj[key] !== null) {\r\n                cleaned[key] = obj[key];\r\n            }\r\n        });\r\n        return cleaned;\r\n    };\r\n    MessageBus.prototype.keysMatch = function (obj1, obj2) {\r\n        var keysObj1 = Object.keys(obj1);\r\n        var allMatch = true;\r\n        keysObj1.forEach(function (key) {\r\n            if (obj1[key] !== obj2[key]) {\r\n                allMatch = false;\r\n            }\r\n        });\r\n        return allMatch;\r\n    };\r\n    return MessageBus;\r\n}());\n\nvar GlueCore = function (userConfig, ext) {\r\n    var gdVersion = Utils.getGDMajorVersion();\r\n    var glue42gd;\r\n    var preloadPromise = Promise.resolve();\r\n    if (gdVersion) {\r\n        if (gdVersion < 3) {\r\n            throw new Error(\"GD v2 is not supported. Use v4 of the API to run in that context.\");\r\n        }\r\n        else if (gdVersion >= 3) {\r\n            glue42gd = window.glue42gd;\r\n            preloadPromise = window.gdPreloadPromise || preloadPromise;\r\n        }\r\n    }\r\n    var glueInitTimer = timer(\"glue\");\r\n    userConfig = userConfig || {};\r\n    ext = ext || {};\r\n    var internalConfig = prepareConfig(userConfig, ext, glue42gd);\r\n    var _connection;\r\n    var _interop;\r\n    var _logger;\r\n    var _metrics;\r\n    var _contexts;\r\n    var _bus;\r\n    var _allowTrace;\r\n    var libs = {};\r\n    function registerLib(name, inner, t) {\r\n        _allowTrace = _logger.canPublish(\"trace\");\r\n        if (_allowTrace) {\r\n            _logger.trace(\"registering \" + name + \" module\");\r\n        }\r\n        var done = function () {\r\n            inner.initTime = t.stop();\r\n            inner.initEndTime = t.endTime;\r\n            inner.marks = t.marks;\r\n            if (_allowTrace) {\r\n                _logger.trace(name + \" is ready - \" + (t.endTime - t.startTime));\r\n            }\r\n        };\r\n        inner.initStartTime = t.startTime;\r\n        if (inner.ready) {\r\n            inner.ready().then(function () {\r\n                done();\r\n            });\r\n        }\r\n        else {\r\n            done();\r\n        }\r\n        if (!Array.isArray(name)) {\r\n            name = [name];\r\n        }\r\n        name.forEach(function (n) {\r\n            libs[n] = inner;\r\n            GlueCore[n] = inner;\r\n        });\r\n    }\r\n    function setupConnection() {\r\n        var initTimer = timer(\"connection\");\r\n        _connection = new Connection(internalConfig.connection, _logger.subLogger(\"connection\"));\r\n        var authPromise = Promise.resolve(internalConfig.auth);\r\n        if (internalConfig.connection && !internalConfig.auth) {\r\n            if (glue42gd) {\r\n                authPromise = glue42gd.getGWToken()\r\n                    .then(function (token) {\r\n                    return {\r\n                        gatewayToken: token\r\n                    };\r\n                });\r\n            }\r\n            else if (typeof window !== \"undefined\" && (window === null || window === void 0 ? void 0 : window.glue42electron)) {\r\n                if (typeof window.glue42electron.gwToken === \"string\") {\r\n                    authPromise = Promise.resolve({\r\n                        gatewayToken: window.glue42electron.gwToken\r\n                    });\r\n                }\r\n            }\r\n            else {\r\n                authPromise = Promise.reject(\"You need to provide auth information\");\r\n            }\r\n        }\r\n        return authPromise\r\n            .then(function (authConfig) {\r\n            initTimer.mark(\"auth-promise-resolved\");\r\n            var authRequest;\r\n            if (Object.prototype.toString.call(authConfig) === \"[object Object]\") {\r\n                authRequest = authConfig;\r\n            }\r\n            else {\r\n                throw new Error(\"Invalid auth object - \" + JSON.stringify(authConfig));\r\n            }\r\n            return _connection.login(authRequest);\r\n        })\r\n            .then(function () {\r\n            registerLib(\"connection\", _connection, initTimer);\r\n            return internalConfig;\r\n        })\r\n            .catch(function (e) {\r\n            if (_connection) {\r\n                _connection.logout();\r\n            }\r\n            throw e;\r\n        });\r\n    }\r\n    function setupLogger() {\r\n        var _a;\r\n        var initTimer = timer(\"logger\");\r\n        _logger = new Logger(\"\" + ((_a = internalConfig.connection.identity) === null || _a === void 0 ? void 0 : _a.application), undefined, internalConfig.customLogger);\r\n        _logger.consoleLevel(internalConfig.logger.console);\r\n        _logger.publishLevel(internalConfig.logger.publish);\r\n        if (_logger.canPublish(\"debug\")) {\r\n            _logger.debug(\"initializing glue...\");\r\n        }\r\n        registerLib(\"logger\", _logger, initTimer);\r\n        return Promise.resolve(undefined);\r\n    }\r\n    function setupMetrics() {\r\n        var _a, _b, _c, _d, _e;\r\n        var initTimer = timer(\"metrics\");\r\n        var config = internalConfig.metrics;\r\n        var metricsPublishingEnabledFunc = glue42gd === null || glue42gd === void 0 ? void 0 : glue42gd.getMetricsPublishingEnabled;\r\n        var identity = internalConfig.connection.identity;\r\n        var canUpdateMetric = metricsPublishingEnabledFunc ? metricsPublishingEnabledFunc : function () { return true; };\r\n        var disableAutoAppSystem = (_a = (typeof config !== \"boolean\" && config.disableAutoAppSystem)) !== null && _a !== void 0 ? _a : false;\r\n        _metrics = metrics({\r\n            connection: config ? _connection : undefined,\r\n            logger: _logger.subLogger(\"metrics\"),\r\n            canUpdateMetric: canUpdateMetric,\r\n            system: \"Glue42\",\r\n            service: (_c = (_b = identity === null || identity === void 0 ? void 0 : identity.service) !== null && _b !== void 0 ? _b : glue42gd === null || glue42gd === void 0 ? void 0 : glue42gd.applicationName) !== null && _c !== void 0 ? _c : internalConfig.application,\r\n            instance: (_e = (_d = identity === null || identity === void 0 ? void 0 : identity.instance) !== null && _d !== void 0 ? _d : identity === null || identity === void 0 ? void 0 : identity.windowId) !== null && _e !== void 0 ? _e : shortid(),\r\n            disableAutoAppSystem: disableAutoAppSystem,\r\n            pagePerformanceMetrics: typeof config !== \"boolean\" ? config === null || config === void 0 ? void 0 : config.pagePerformanceMetrics : undefined\r\n        });\r\n        registerLib(\"metrics\", _metrics, initTimer);\r\n        return Promise.resolve();\r\n    }\r\n    function setupInterop() {\r\n        var initTimer = timer(\"interop\");\r\n        var agmConfig = {\r\n            connection: _connection,\r\n            logger: _logger.subLogger(\"interop\"),\r\n        };\r\n        _interop = new Interop(agmConfig);\r\n        Logger.Interop = _interop;\r\n        registerLib([\"interop\", \"agm\"], _interop, initTimer);\r\n        return Promise.resolve();\r\n    }\r\n    function setupContexts() {\r\n        var hasActivities = (internalConfig.activities && _connection.protocolVersion === 3);\r\n        var needsContexts = internalConfig.contexts || hasActivities;\r\n        if (needsContexts) {\r\n            var initTimer = timer(\"contexts\");\r\n            _contexts = new ContextsModule({\r\n                connection: _connection,\r\n                logger: _logger.subLogger(\"contexts\"),\r\n                trackAllContexts: typeof internalConfig.contexts === \"object\" ? internalConfig.contexts.trackAllContexts : false,\r\n                reAnnounceKnownContexts: typeof internalConfig.contexts === \"object\" ? internalConfig.contexts.reAnnounceKnownContexts : false\r\n            });\r\n            registerLib(\"contexts\", _contexts, initTimer);\r\n            return _contexts;\r\n        }\r\n        else {\r\n            var replayer = _connection.replayer;\r\n            if (replayer) {\r\n                replayer.drain(ContextMessageReplaySpec.name);\r\n            }\r\n        }\r\n    }\r\n    function setupBus() {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var initTimer;\r\n            return __generator(this, function (_a) {\r\n                if (!internalConfig.bus) {\r\n                    return [2, Promise.resolve()];\r\n                }\r\n                initTimer = timer(\"bus\");\r\n                _bus = new MessageBus(_connection, _logger.subLogger(\"bus\"));\r\n                registerLib(\"bus\", _bus, initTimer);\r\n                return [2, Promise.resolve()];\r\n            });\r\n        });\r\n    }\r\n    function setupExternalLibs(externalLibs) {\r\n        try {\r\n            externalLibs.forEach(function (lib) {\r\n                setupExternalLib(lib.name, lib.create);\r\n            });\r\n            return Promise.resolve();\r\n        }\r\n        catch (e) {\r\n            return Promise.reject(e);\r\n        }\r\n    }\r\n    function setupExternalLib(name, createCallback) {\r\n        var initTimer = timer(name);\r\n        var lib = createCallback(libs);\r\n        if (lib) {\r\n            registerLib(name, lib, initTimer);\r\n        }\r\n    }\r\n    function waitForLibs() {\r\n        var libsReadyPromises = Object.keys(libs).map(function (key) {\r\n            var lib = libs[key];\r\n            return lib.ready ?\r\n                lib.ready() : Promise.resolve();\r\n        });\r\n        return Promise.all(libsReadyPromises);\r\n    }\r\n    function constructGlueObject() {\r\n        var feedbackFunc = function (feedbackInfo) {\r\n            if (!_interop) {\r\n                return;\r\n            }\r\n            _interop.invoke(\"T42.ACS.Feedback\", feedbackInfo, \"best\");\r\n        };\r\n        var info = {\r\n            coreVersion: version,\r\n            version: internalConfig.version\r\n        };\r\n        glueInitTimer.stop();\r\n        var glue = {\r\n            feedback: feedbackFunc,\r\n            info: info,\r\n            logger: _logger,\r\n            interop: _interop,\r\n            agm: _interop,\r\n            connection: _connection,\r\n            metrics: _metrics,\r\n            contexts: _contexts,\r\n            bus: _bus,\r\n            version: internalConfig.version,\r\n            userConfig: userConfig,\r\n            done: function () {\r\n                _logger === null || _logger === void 0 ? void 0 : _logger.info(\"done called by user...\");\r\n                return _connection.logout();\r\n            }\r\n        };\r\n        glue.performance = {\r\n            get glueVer() {\r\n                return internalConfig.version;\r\n            },\r\n            get glueConfig() {\r\n                return JSON.stringify(userConfig);\r\n            },\r\n            get browser() {\r\n                return window.performance.timing.toJSON();\r\n            },\r\n            get memory() {\r\n                return window.performance.memory;\r\n            },\r\n            get initTimes() {\r\n                var all = getAllTimers();\r\n                return Object.keys(all).map(function (key) {\r\n                    var t = all[key];\r\n                    return {\r\n                        name: key,\r\n                        duration: t.endTime - t.startTime,\r\n                        marks: t.marks,\r\n                        startTime: t.startTime,\r\n                        endTime: t.endTime\r\n                    };\r\n                });\r\n            }\r\n        };\r\n        Object.keys(libs).forEach(function (key) {\r\n            var lib = libs[key];\r\n            glue[key] = lib;\r\n        });\r\n        glue.config = {};\r\n        Object.keys(internalConfig).forEach(function (k) {\r\n            glue.config[k] = internalConfig[k];\r\n        });\r\n        if (ext && ext.extOptions) {\r\n            Object.keys(ext.extOptions).forEach(function (k) {\r\n                glue.config[k] = ext === null || ext === void 0 ? void 0 : ext.extOptions[k];\r\n            });\r\n        }\r\n        if (ext === null || ext === void 0 ? void 0 : ext.enrichGlue) {\r\n            ext.enrichGlue(glue);\r\n        }\r\n        if (glue42gd && glue42gd.updatePerfData) {\r\n            glue42gd.updatePerfData(glue.performance);\r\n        }\r\n        if (glue.agm) {\r\n            var deprecatedDecorator = function (fn, wrong, proper) {\r\n                return function () {\r\n                    glue.logger.warn(\"glue.js - 'glue.agm.\" + wrong + \"' method is deprecated, use 'glue.interop.\" + proper + \"' instead.\");\r\n                    return fn.apply(glue.agm, arguments);\r\n                };\r\n            };\r\n            var agmAny = glue.agm;\r\n            agmAny.method_added = deprecatedDecorator(glue.agm.methodAdded, \"method_added\", \"methodAdded\");\r\n            agmAny.method_removed = deprecatedDecorator(glue.agm.methodRemoved, \"method_removed\", \"methodRemoved\");\r\n            agmAny.server_added = deprecatedDecorator(glue.agm.serverAdded, \"server_added\", \"serverAdded\");\r\n            agmAny.server_method_aded = deprecatedDecorator(glue.agm.serverMethodAdded, \"server_method_aded\", \"serverMethodAdded\");\r\n            agmAny.server_method_removed = deprecatedDecorator(glue.agm.serverMethodRemoved, \"server_method_removed\", \"serverMethodRemoved\");\r\n        }\r\n        return glue;\r\n    }\r\n    function registerInstanceIfNeeded() {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var RegisterInstanceMethodName, isMethodAvailable, error_1, typedError;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        RegisterInstanceMethodName = \"T42.ACS.RegisterInstance\";\r\n                        if (!(Utils.isNode() && typeof process.env._GD_STARTING_CONTEXT_ === \"undefined\" && typeof (userConfig === null || userConfig === void 0 ? void 0 : userConfig.application) !== \"undefined\")) return [3, 4];\r\n                        isMethodAvailable = _interop.methods({ name: RegisterInstanceMethodName }).length > 0;\r\n                        if (!isMethodAvailable) return [3, 4];\r\n                        _a.label = 1;\r\n                    case 1:\r\n                        _a.trys.push([1, 3, , 4]);\r\n                        return [4, _interop.invoke(RegisterInstanceMethodName, { appName: userConfig === null || userConfig === void 0 ? void 0 : userConfig.application, pid: process.pid })];\r\n                    case 2:\r\n                        _a.sent();\r\n                        return [3, 4];\r\n                    case 3:\r\n                        error_1 = _a.sent();\r\n                        typedError = error_1;\r\n                        _logger.error(\"Cannot register as an instance: \" + JSON.stringify(typedError.message));\r\n                        return [3, 4];\r\n                    case 4: return [2];\r\n                }\r\n            });\r\n        });\r\n    }\r\n    return preloadPromise\r\n        .then(setupLogger)\r\n        .then(setupConnection)\r\n        .then(function () { return Promise.all([setupMetrics(), setupInterop(), setupContexts(), setupBus()]); })\r\n        .then(function () { return _interop.readyPromise; })\r\n        .then(function () { return registerInstanceIfNeeded(); })\r\n        .then(function () {\r\n        return setupExternalLibs(internalConfig.libs || []);\r\n    })\r\n        .then(waitForLibs)\r\n        .then(constructGlueObject)\r\n        .catch(function (err) {\r\n        return Promise.reject({\r\n            err: err,\r\n            libs: libs\r\n        });\r\n    });\r\n};\r\nif (typeof window !== \"undefined\") {\r\n    window.GlueCore = GlueCore;\r\n}\r\nGlueCore.version = version;\r\nGlueCore.default = GlueCore;\n\nexport default GlueCore;\n//# sourceMappingURL=core.es.js.map\n","import ActivityManager from \"../core/activityManager\";\r\n\r\n/**\r\n * Base class for activity entities with reference to the activity manager\r\n * @private\r\n */\r\nexport default class ActivityEntity {\r\n\r\n  public _manager: ActivityManager;\r\n  public _id: string;\r\n\r\n  constructor(id: string) {\r\n    this._id = id;\r\n  }\r\n\r\n  public get id(): string {\r\n    return this._id;\r\n  }\r\n\r\n  /**\r\n   * Updates the properties of the current object using the properties of another object\r\n   * These two should have the same id.\r\n   */\r\n  public _update(other: ActivityEntity) {\r\n    if (other._id !== this._id) {\r\n      throw Error(\"Can not update from entity with different id.\");\r\n    }\r\n    this._updateCore(other);\r\n  }\r\n\r\n  public _updateCore(other: ActivityEntity) {\r\n    return;\r\n  }\r\n\r\n  public _beforeDelete(other: ActivityEntity) {\r\n    return;\r\n  }\r\n}\r\n","// some small useful functions (so we don't reference underscore or lodash)\r\n\r\nexport function isNumber(arg: any) {\r\n  return typeof arg === \"number\";\r\n}\r\n\r\nexport function isString(arg: any) {\r\n  return typeof arg === \"string\";\r\n}\r\n\r\nexport function isObject(arg: any) {\r\n  return typeof arg === \"object\" && arg !== null;\r\n}\r\n\r\nexport function isArray(arg: any) {\r\n  // TODO optimize\r\n  if (Array.isArray) {\r\n    return Array.isArray(arg);\r\n  }\r\n  return toString.call(arg) === \"[object Array]\";\r\n}\r\nexport function isUndefined(arg: any) {\r\n  return typeof arg === \"undefined\";\r\n}\r\n\r\nexport function isUndefinedOrNull(arg: any) {\r\n  return arg === null || typeof arg === \"undefined\";\r\n}\r\n\r\nexport function isNullOrWhiteSpace(str: string) {\r\n  return (typeof str !== \"string\" || !str || str.length === 0 || /^\\s*$/.test(str));\r\n}\r\n\r\nexport function isBoolean(obj: any) {\r\n  return obj === true || obj === false || toString.call(obj) === \"[object Boolean]\";\r\n}\r\n\r\n/**\r\n *  Checks if an object is empty (has no properties)\r\n * @private\r\n */\r\nexport function isEmpty(arg: any) {\r\n  for (const prop in arg) {\r\n    if (arg.hasOwnProperty(prop)) {\r\n      return false;\r\n    }\r\n  }\r\n  return true;\r\n}\r\n\r\nexport function isFunction(arg: any) {\r\n  return !!(arg && arg.constructor && arg.call && arg.apply);\r\n}\r\n\r\nexport function some<T>(array: T[], predicate: (el: any, index: number) => boolean) {\r\n  for (let index = 0; index < array.length; index++) {\r\n    if (predicate(array[index], index)) {\r\n      return true;\r\n    }\r\n  }\r\n  return false;\r\n}\r\n\r\nexport function first<T>(array: T[], predicate: (el: any, index: number) => boolean) {\r\n  for (let index = 0; index < array.length; index++) {\r\n    if (predicate(array[index], index)) {\r\n      return array[index];\r\n    }\r\n  }\r\n  return undefined;\r\n}\r\n\r\nexport function ifNotUndefined<T>(what: T, doWithIt: (what: T) => void) {\r\n  if (typeof what !== \"undefined\") {\r\n    doWithIt(what);\r\n  }\r\n}\r\n\r\nexport function promisify(promise: Promise<any>, successCallback: () => void, errorCallback: () => void) {\r\n  \"use strict\";\r\n  if (typeof successCallback !== \"function\" && typeof errorCallback !== \"function\") {\r\n    return promise;\r\n  }\r\n\r\n  if (typeof successCallback !== \"function\") {\r\n    successCallback = () => { return; };\r\n  } else if (typeof errorCallback !== \"function\") {\r\n    errorCallback = () => { return; };\r\n  }\r\n\r\n  promise.then(successCallback, errorCallback);\r\n}\r\n","import * as contracts from \"../contracts/contracts\";\r\nimport Activity from \"./activity\";\r\nimport ActivityEntity from \"./activityEntity\";\r\nimport WindowType from \"./windowType\";\r\nimport { ifNotUndefined } from \"../helpers/util\";\r\nimport { WindowDefinition } from \"./windowDefinition\";\r\n\r\nimport { Glue42 } from \"../../../glue\";\r\ntype OverrideTypeDefinition = Glue42.Activities.OverrideTypeDefinition;\r\n\r\n/**\r\n * An activity type is a definition template for an activity, consisting of a collection of window types,\r\n * their layout and an initial activity context.\r\n *\r\n * @module activityType\r\n */\r\nexport default class ActivityType extends ActivityEntity {\r\n\r\n  public _name: string;\r\n  public _description: string;\r\n  public _ownerWindow: WindowType;\r\n  public _helperWindows: WindowType[];\r\n\r\n  constructor(name: string, ownerWindow: WindowType, helperWindows?: WindowType[], description?: string) {\r\n    super(name);\r\n    this._name = name;\r\n    this._description = description;\r\n    this._ownerWindow = ownerWindow;\r\n    this._helperWindows = helperWindows || [];\r\n  }\r\n\r\n  /**\r\n   * @var {string} name Name of the activity type\r\n   */\r\n  public get name(): string {\r\n    return this._name;\r\n  }\r\n\r\n  /**\r\n   * @var {string} description description for the activity type\r\n   */\r\n  public get description(): string {\r\n    return this._description;\r\n  }\r\n\r\n  /**\r\n   * A list of window types that should be created when initiating a new instance of that activity type\r\n   * @var {windowDefinition[]} helperWindows\r\n   */\r\n  public get helperWindows(): WindowType[] {\r\n    return this._helperWindows.map((hw) => this.covertToWindowDef(hw));\r\n  }\r\n\r\n  /**\r\n   * @var {windowDefinition} ownerWindow Returns the definition of the owner window for that activity type\r\n   */\r\n  public get ownerWindow(): WindowType {\r\n    return this.covertToWindowDef(this._ownerWindow);\r\n  }\r\n\r\n  /**\r\n   * Initiates a new activity of this type\r\n   *\r\n   * @function initiate\r\n   * @param {object} context The initial context to be used for the new activity\r\n   * @param callback\r\n   * @param configuration\r\n   * @returns {Promise<activity>}\r\n   */\r\n  public initiate(context: object, callback?: contracts.Callback<Activity>, configuration?: WindowDefinition[] | OverrideTypeDefinition): Promise<Activity> {\r\n    return this._manager.initiate(this._name, context, callback, configuration);\r\n  }\r\n\r\n  public _updateCore(other: ActivityType) {\r\n    super._updateCore(other);\r\n    ifNotUndefined(other._description, (x) => this._description = x);\r\n    ifNotUndefined(other._ownerWindow, (x) => this._ownerWindow = x);\r\n    ifNotUndefined(other._helperWindows, (x) => this._helperWindows = x);\r\n  }\r\n\r\n  private covertToWindowDef(windowType: any): any {\r\n    // GD2 + old glue js backward compatible\r\n    return {\r\n      type: windowType?.id?.type,\r\n      name: windowType?.id?.name\r\n    };\r\n  }\r\n}\r\n","import ActivityEntity from \"./activityEntity\";\r\nimport ActivityWindow from \"./activityWindow\";\r\nimport { WindowDefinition } from \"./windowDefinition\";\r\nimport Activity from \"./activity\";\r\nimport { Glue42 } from \"../../../glue\";\r\n\r\n/**\r\n * A window type is a definition of a window, typically configured in ACS.\r\n *\r\n * @module windowType\r\n */\r\nexport default class WindowType extends ActivityEntity {\r\n\r\n  public _name: string;\r\n  public _appByWindowTypeGetter: (name: string) => void;\r\n\r\n  constructor(name: string, appByWindowTypeGetter: (wt: string) => Glue42.AppManager.Application) {\r\n    super(name);\r\n    this._name = name;\r\n    this._appByWindowTypeGetter = appByWindowTypeGetter;\r\n  }\r\n\r\n  /**\r\n   * Name of the window type\r\n   * @var {string} name\r\n   */\r\n  public get name(): string {\r\n    return this._name;\r\n  }\r\n\r\n  /**\r\n   * Returns the ACS configuration related to this window type (as application object from AppManager API)\r\n   * @returns {any}\r\n   */\r\n  public get config(): any {\r\n    return this._appByWindowTypeGetter(this._name);\r\n  }\r\n\r\n  /**\r\n   * @var {activityWindow[]} windows All windows from that type\r\n   */\r\n  public get windows(): ActivityWindow[] {\r\n    return this._manager.getWindows({ type: this._name });\r\n  }\r\n\r\n  public create(activity: Activity, configuration: any): Promise<ActivityWindow> {\r\n    const definition: WindowDefinition = (Object as any).assign({ type: this.name, name: this.name, isIndependent: false }, configuration);\r\n    return this._manager.createWindow(activity, definition);\r\n  }\r\n}\r\n","import { ActivityStatus } from \"./activityStatus\";\r\n\r\nexport class EntityEvent<T> {\r\n    public entity: T;\r\n    public context: EntityEventContext;\r\n\r\n    constructor(entitiy: T, context: EntityEventContext) {\r\n        this.entity = entitiy;\r\n        this.context = context;\r\n    }\r\n}\r\n\r\nexport class EntityEventContext {\r\n    public type: string;\r\n\r\n    constructor(eventType: string) {\r\n        this.type = eventType;\r\n    }\r\n}\r\n\r\nexport class ActivityStatusChangeEventContext extends EntityEventContext {\r\n    public oldStatus: ActivityStatus;\r\n    public newStatus: ActivityStatus;\r\n\r\n    constructor(newStatus: ActivityStatus, oldStatus: ActivityStatus) {\r\n        super(EntityEventType.StatusChange);\r\n        this.newStatus = newStatus;\r\n        this.oldStatus = oldStatus;\r\n    }\r\n}\r\n\r\nexport class ActivityContextChangedEventContext extends EntityEventContext {\r\n    public context: object;\r\n    public updated: object;\r\n    public removed: string[];\r\n\r\n    constructor(context: string | object, updated: object, removed: string[]) {\r\n        super(EntityEventType.ActivityContextChange);\r\n        this.context = typeof context === \"string\" ? JSON.parse(context) : context;\r\n        this.updated = updated;\r\n        this.removed = removed;\r\n    }\r\n}\r\n\r\nexport class EntityEventType {\r\n    public static Added: string = \"added\";\r\n    public static Removed: string = \"removed\";\r\n    public static Updated: string = \"updated\";\r\n    public static Closed: string = \"closed\";\r\n    public static StatusChange: string = \"statusChange\";\r\n    public static ActivityContextChange: string = \"activityContextUpdate\";\r\n    public static ActivityWindowEvent: string = \"activityWindowEvent\";\r\n    // #deleteme TODO: these are not implemented in HC\r\n    public static ActivityWindowJoinedActivity: string = \"joined\";\r\n    public static ActivityWindowLeftActivity: string = \"left\";\r\n}\r\n\r\nexport class ActivityState {\r\n    public static Created: string = \"created\";\r\n    public static Started: string = \"started\";\r\n    public static Destroyed: string = \"destroyed\";\r\n}\r\n","import Activity from \"../entities/activity\";\r\nimport ActivityWindow from \"../entities/activityWindow\";\r\nimport * as util from \"../helpers/util\";\r\nimport { Glue42Core } from \"@glue42/core\";\r\nimport { promisify } from \"../helpers/util\";\r\n\r\n// A helper class that provides lame activity AGM implementation\r\n// Can be initialized with or without activity - in case no activity (independent windows outside activity) only\r\n// subset of the methods work\r\nexport class ActivityAGM {\r\n    public static AGM: Glue42Core.AGM.API;\r\n\r\n    private _activity: Activity;\r\n\r\n    constructor(activity: Activity) {\r\n        this._activity = activity;\r\n    }\r\n\r\n    public register(definition: string | Glue42Core.AGM.MethodDefinition, handler: (args: object, caller: Glue42Core.AGM.Instance) => object) {\r\n        this._ensureHasAgm();\r\n        ActivityAGM.AGM.register(definition, handler);\r\n    }\r\n\r\n    public servers(): Glue42Core.AGM.Instance[] {\r\n        this._ensureHasAgm();\r\n\r\n        if (util.isUndefinedOrNull(this._activity)) {\r\n            // or return ActivityAGM.AGM.servers()\r\n            return [];\r\n        }\r\n\r\n        return this._activity.windows.map(\r\n            (w: ActivityWindow) => {\r\n                return w.instance;\r\n            });\r\n    }\r\n\r\n    public methods(): Glue42Core.AGM.MethodDefinition[] {\r\n        this._ensureHasAgm();\r\n\r\n        if (util.isUndefinedOrNull(this._activity)) {\r\n            // or return ActivityAGM.AGM.methods()\r\n            return [];\r\n        }\r\n\r\n        const windows = this._activity.windows;\r\n        const methodNames: string[] = [];\r\n        const methods: Glue42Core.AGM.MethodDefinition[] = [];\r\n\r\n        // get all windows and their methods, then assemble distinct methods\r\n        windows.forEach((window) => {\r\n            const windowMethods = this.methodsForWindow(window);\r\n            windowMethods.forEach((currentWindowMethod) => {\r\n                if (methodNames.indexOf(currentWindowMethod.name) === -1) {\r\n                    methodNames.push(currentWindowMethod.name);\r\n                    methods.push(currentWindowMethod);\r\n                }\r\n            });\r\n        });\r\n\r\n        return methods;\r\n    }\r\n\r\n    public methodsForWindow(window: ActivityWindow): Glue42Core.AGM.MethodDefinition[] {\r\n        this._ensureHasAgm();\r\n        // get instance and use agm to get methods for instance\r\n        if (!window.instance) {\r\n            return [];\r\n        }\r\n\r\n        return ActivityAGM.AGM.methodsForInstance(window.instance);\r\n    }\r\n\r\n    /** Possible invoke targets\r\n     *\r\n     * \"activity.all\" - [default]\r\n     * \"activity.best\"\r\n     * ActivityWindow\r\n     * [ActivityWindow] -\r\n     *\r\n     * classic AGM\r\n     * \"all\" - agm all\r\n     * \"best\" - agm best\r\n     * instance - agm\r\n     * [ instances ]\r\n     *\r\n     */\r\n    public invoke(\r\n        methodName: string,\r\n        arg: object,\r\n        target: string | Glue42Core.AGM.Instance | ActivityWindow | Glue42Core.AGM.Instance[] | ActivityWindow[],\r\n        options?: Glue42Core.AGM.InvokeOptions,\r\n        success?: () => void,\r\n        error?: () => void): Promise<object> {\r\n\r\n        this._ensureHasAgm();\r\n        const activityServers = this.servers();\r\n        let serversToInvokeAgainst: Glue42Core.AGM.Instance[] = [];\r\n\r\n        if (util.isUndefinedOrNull(target)) {\r\n            target = \"activity.all\";\r\n        }\r\n\r\n        if (util.isString(target)) {\r\n            if (target === \"activity.all\") {\r\n                serversToInvokeAgainst = activityServers;\r\n            } else if (target === \"activity.best\") {\r\n                const potentialTargets = activityServers.filter((server) => {\r\n                    const methods = ActivityAGM.AGM.methodsForInstance(server);\r\n                    return methods.filter((m) => {\r\n                        return m.name === methodName;\r\n                    }).length > 0;\r\n                });\r\n                if (potentialTargets.length > 0) {\r\n                    serversToInvokeAgainst = [potentialTargets[0]];\r\n                }\r\n            } else if (target === \"all\" || target === \"best\") {\r\n                return promisify(ActivityAGM.AGM.invoke(methodName, arg, target, options), success, error);\r\n            } else {\r\n                throw new Error(\"Invalid invoke target \" + target);\r\n            }\r\n        } else if (util.isArray(target)) {\r\n            // if the array is not empty\r\n            if ((target as any).length >= 0) {\r\n                const firstElem = (target as any)[0];\r\n                // check argument type\r\n                if (this._isInstance(firstElem)) {\r\n                    serversToInvokeAgainst = (target as Glue42Core.AGM.Instance[]).map((instance: Glue42Core.AGM.Instance) => instance);\r\n                } else if (this._isActivityWindow(firstElem)) {\r\n                    serversToInvokeAgainst = (target as ActivityWindow[]).map((win: ActivityWindow) => win.instance);\r\n                } else {\r\n                    throw new Error(\"Unknown target object\");\r\n                }\r\n            }\r\n        } else {\r\n            if (this._isInstance(target)) {\r\n                serversToInvokeAgainst = [target as Glue42Core.AGM.Instance];\r\n            } else if (this._isActivityWindow(target)) {\r\n                serversToInvokeAgainst = [(target as ActivityWindow).instance];\r\n            } else {\r\n                throw new Error(\"Unknown target object\");\r\n            }\r\n        }\r\n\r\n        throw new Error(\"Not implemented\");\r\n        // return promisify(ActivityAGM.AGM.invoke(methodName, arg, serversToInvokeAgainst, options), success, error);\r\n    }\r\n\r\n    public unregister(definition: string | Glue42Core.AGM.MethodDefinition) {\r\n        this._ensureHasAgm();\r\n        return ActivityAGM.AGM.unregister(definition);\r\n    }\r\n\r\n    public createStream(methodDefinition: string | Glue42Core.AGM.MethodDefinition,\r\n                        subscriptionAddedHandler: (request: Glue42Core.AGM.StreamSubscription) => void,\r\n                        subscriptionRemovedHandler: (request: Glue42Core.AGM.StreamSubscription) => void) {\r\n        this._ensureHasAgm();\r\n\r\n        ActivityAGM.AGM.createStream(methodDefinition, {\r\n            subscriptionAddedHandler,\r\n            subscriptionRemovedHandler,\r\n            subscriptionRequestHandler: undefined\r\n        });\r\n    }\r\n\r\n    public subscribe(methodDefinition: string | Glue42Core.AGM.MethodDefinition, parameters: object, target: string | Glue42Core.AGM.Instance | Glue42Core.AGM.Instance[]): Promise<Glue42Core.AGM.Subscription> {\r\n        this._ensureHasAgm();\r\n        // #deleteme TODO: check servers needed?\r\n        // const servers = this.servers();\r\n\r\n        return ActivityAGM.AGM.subscribe(methodDefinition, parameters);\r\n    }\r\n\r\n    public _ensureHasAgm() {\r\n        if (util.isUndefinedOrNull(ActivityAGM.AGM)) {\r\n            throw new Error(\"Agm should be configured to be used in activity\");\r\n        }\r\n    }\r\n\r\n    public _isInstance(obj: any) {\r\n        // lame check\r\n        return obj.application !== undefined;\r\n    }\r\n\r\n    public _isActivityWindow(obj: any) {\r\n        return obj.instance !== undefined;\r\n    }\r\n}\r\n","import { ActivityDescriptor } from \"./activityDescriptor\";\r\nimport ActivityManager from \"../core/activityManager\";\r\nimport Activity from \"./activity\";\r\n\r\nexport class AttachedActivityDescriptor implements ActivityDescriptor {\r\n  private _manager: ActivityManager;\r\n  private _state: ActivityDescriptor;\r\n  private _ownerActivityId: string;\r\n\r\n  constructor(\r\n    manager: ActivityManager,\r\n    ownerActivityId: string,\r\n    state: ActivityDescriptor) {\r\n    this._manager = manager;\r\n    this._ownerActivityId = ownerActivityId;\r\n    this._state = state;\r\n  }\r\n\r\n  public get ownerId() {\r\n    return this._state.ownerId;\r\n  }\r\n\r\n  public get windowIds() {\r\n    return this._state.windowIds;\r\n  }\r\n\r\n  public get frameColor() {\r\n    return this._state.frameColor;\r\n  }\r\n\r\n  public get context() {\r\n    return this._state.context;\r\n  }\r\n\r\n  public get tag() {\r\n    return this._state.tag;\r\n  }\r\n\r\n  public detach(descriptor?: ActivityDescriptor): Promise<Activity> {\r\n\r\n    descriptor = descriptor || {};\r\n\r\n    const merged: ActivityDescriptor = {};\r\n\r\n    Object.keys(this._state).forEach((prop) => {\r\n      merged[prop] = this._state[prop];\r\n    });\r\n\r\n    merged.context = descriptor.context || merged.context;\r\n    merged.frameColor = descriptor.frameColor || merged.frameColor;\r\n\r\n    return this._manager.detachActivities(this._ownerActivityId, merged);\r\n  }\r\n}\r\n","import * as util from \"../helpers/util\";\r\n\r\nconst nextTick = (cb: () => void) => {\r\n  setTimeout(cb, 0);\r\n};\r\n\r\n/**\r\n * Convert a Promise to node style callback\r\n * @private\r\n */\r\nexport function nodeify<T>(promise: Promise<T>, callback: any): Promise<T> {\r\n  if (!util.isFunction(callback)) {\r\n    return promise;\r\n  }\r\n\r\n  promise.then(\r\n    (resp) => {\r\n      nextTick( () => { // not sure if this is needed, promises should be already executed on the event pool\r\n        callback(null, resp);\r\n      });\r\n    },\r\n    (err) => {\r\n      nextTick(() => {\r\n        callback(err, null);\r\n      });\r\n    });\r\n}\r\n","import * as contracts from \"../contracts/contracts\";\r\nimport ActivityType from \"./activityType\";\r\nimport ActivityWindow from \"./activityWindow\";\r\nimport { ActivityStatus } from \"../contracts/activityStatus\";\r\nimport ActivityEntity from \"./activityEntity\";\r\nimport { WindowDefinition } from \"./windowDefinition\";\r\nimport { ActivityAGM } from \"../core/activityAGM\";\r\nimport { CloneOptions } from \"./cloneOptions\";\r\nimport { AttachedActivityDescriptor } from \"./attachedActivityDescriptor\";\r\nimport { nodeify } from \"../helpers/promiseExtensions\";\r\nimport { ifNotUndefined } from \"../helpers/util\";\r\n\r\n/**\r\n * Activity is an instance of an activity type just like an object is an instance of a class\r\n * in class-based languages (and just like John is an instance of a 'Person).\r\n *\r\n * Activity is often used as a synonym for activity instance.\r\n *\r\n * Each activity instance has a single owner window and can optionally have one or more helper windows.\r\n *\r\n * @module activity\r\n */\r\nexport default class Activity extends ActivityEntity {\r\n\r\n  public _id: string;\r\n  public _actType: string;\r\n  public _status: ActivityStatus;\r\n  public _context: object;\r\n  public _ownerId: string;\r\n  public _agm: ActivityAGM;\r\n  public _attached: any;\r\n\r\n  constructor(\r\n    id: string,\r\n    actType: string,\r\n    status: ActivityStatus,\r\n    context: object,\r\n    ownerId: string) {\r\n    super(id);\r\n    this._id = id;\r\n    this._actType = actType;\r\n    this._status = status;\r\n    this._context = context;\r\n    this._ownerId = ownerId;\r\n    this._agm = new ActivityAGM(this);\r\n  }\r\n\r\n  /**\r\n   * Activity type\r\n   * @var {module:activityType} type\r\n   */\r\n  public get type(): ActivityType {\r\n    if (this._manager) {\r\n      return this._manager.getActivityType(this._actType);\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  /**\r\n   * Get current activity context. To update use updateContext , to replace setContext\r\n   * @var {object} context\r\n   */\r\n  public get context(): object {\r\n    return this._context;\r\n  }\r\n\r\n  /**\r\n   * Get activity status\r\n   * @var {activityStatus} status\r\n   */\r\n  public get status(): ActivityStatus {\r\n    return this._status;\r\n  }\r\n\r\n  /**\r\n   * The owner window\r\n   * @var {module:activityWindow} owner\r\n   */\r\n  public get owner(): ActivityWindow {\r\n    if (!this._ownerId) {\r\n      return null;\r\n    }\r\n    return this._manager.getWindows({ id: this._ownerId })[0];\r\n  }\r\n\r\n  /**\r\n   * All windows participating in the activity\r\n   * @var {module:activityWindow[]} windows\r\n   */\r\n  public get windows(): ActivityWindow[] {\r\n    return this._manager.getWindows({ activityId: this._id });\r\n  }\r\n\r\n  /**\r\n   * @var {module:activityAGM} agm\r\n   */\r\n  public get agm(): ActivityAGM {\r\n    return this._agm;\r\n  }\r\n\r\n  /**\r\n   * Joins a specific window to the activity\r\n   *\r\n   * @private\r\n   * @function join\r\n   * @param window    The window to join\r\n   * @param callback  (Optional) Result callback\r\n   * @returns         Promise for ActivityWindow\r\n   */\r\n  public addWindow(window: ActivityWindow, callback?: contracts.Callback<ActivityWindow>): Promise<ActivityWindow> {\r\n    return this._manager.addWindowToActivity(this, window, callback);\r\n  }\r\n\r\n  /**\r\n   * Creates a new window and joins it to the activity\r\n   *\r\n   * @function createWindow\r\n   * @param {string|windowDefinition} windowType The type of the window to be created\r\n   * @param callback\r\n   * @returns {Promise<module:activityWindow>}\r\n   */\r\n  public createWindow(windowType: string | WindowDefinition, callback?: contracts.Callback<ActivityWindow>): Promise<ActivityWindow> {\r\n    return this._manager.createWindow(this, windowType, callback);\r\n  }\r\n\r\n  /**\r\n   * Creates a stacked set of windows and joins them to the\r\n   *\r\n   * @function createStackedWindows\r\n   * @param {string[] | windowDefinition[]} windowTypes The types of the windows to be created\r\n   * @param {number} timeout\r\n   * @param callback\r\n   * @returns {Promise<module:activityWindow[]>}\r\n   */\r\n  public createStackedWindows(windowTypes: Array<string | WindowDefinition>, timeout?: number, callback?: contracts.Callback<ActivityWindow[]>): Promise<ActivityWindow[]> {\r\n    return this._manager.createStackedWindows(this, windowTypes, timeout, callback);\r\n  }\r\n\r\n  /**\r\n   * Removes a window from the activity\r\n   *\r\n   * @private\r\n   * @param window\r\n   * @param callback\r\n   * @returns     Promise for ActivityWindow\r\n   */\r\n  public leave(window: ActivityWindow, callback?: contracts.Callback<ActivityWindow>): Promise<ActivityWindow> {\r\n    return this._manager.leaveWindowFromActivity(this, window, callback);\r\n  }\r\n\r\n  /**\r\n   * Get all windows participating in the activity from a given type\r\n   *\r\n   * @param {string} windowType\r\n   * @returns {module:activityWindow[]}\r\n   */\r\n  public getWindowsByType(windowType: string): ActivityWindow[] {\r\n    const filter = { activityId: this._id, type: windowType };\r\n    return this._manager.getWindows(filter);\r\n  }\r\n\r\n  /**\r\n   * Replaces the activity context with a new one.\r\n   *\r\n   * @function setContext\r\n   * @param {object} context   The new context\r\n   * @param callback\r\n   * @returns {Promise<Object>}\r\n   */\r\n  public setContext(context: object, callback?: contracts.Callback<Activity>): Promise<object> {\r\n    return this._manager.setActivityContext(this, context, callback);\r\n  }\r\n\r\n  /**\r\n   * Updates activity context using the properties from the context argument.\r\n   * If old context is {a:1, b:2, c:3} and invoking updateContext({b:3, c:null}) will result a context\r\n   * be {a:1, b:3}\r\n   *\r\n   * @function updateContext\r\n   * @param {object} context\r\n   * @param callback\r\n   * @return {Promise<object>}\r\n   */\r\n  public updateContext(context: object, callback?: contracts.Callback<Activity>): Promise<object> {\r\n    return this._manager.updateActivityContext(this, context, callback);\r\n  }\r\n\r\n  /**\r\n   * Subscribe for status change events\r\n   *\r\n   * @function onStatusChange\r\n   *\r\n   * @param {activityStatusChangeHandler} handler Handler function that will receive status notifications\r\n   */\r\n  public onStatusChange(handler: (activity: Activity, newStatus: ActivityStatus, oldStatus: ActivityStatus) => void): () => void {\r\n    return this._manager.subscribeActivityEvents((a, ns, os) => {\r\n      if (a.id === this.id) {\r\n        handler(a, ns, os);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Subscribe for window related events, like joined, removed from activity\r\n   *\r\n   * @function onWindowEvent\r\n   * @param {windowEventHandler} handler Handler function that will receive windows events\r\n   */\r\n  public onWindowEvent(handler: contracts.ActivityWindowEventHandler): () => void {\r\n    return this._manager.subscribeWindowEvents((a, w, e) => {\r\n      if (a.id === this.id) {\r\n        handler(a, w, e);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Subscribe for context updates\r\n   *\r\n   * @function onContextChanged\r\n   * @param {contextChangedHandler} handler Handler function that will receive context related events\r\n   */\r\n  public onContextChanged(handler: contracts.ContextUpdateHandler) {\r\n    this._manager.subscribeActivityContextChanged((act, context, updated, removed) => {\r\n      if (act.id === this.id) {\r\n        handler(context, updated, removed, act);\r\n      }\r\n    });\r\n\r\n    try {\r\n      // replay the context at the time of subscribing, swallow user exceptions\r\n      handler(this.context, this.context, [], this);\r\n    } catch (e) {\r\n      return;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Stops the activity\r\n   * @function stop\r\n   */\r\n  public stop() {\r\n    this._manager.stopActivity(this);\r\n  }\r\n\r\n  /**\r\n   * Clones the activity into a new one\r\n   * @function clone\r\n   * @param {CloneOptions} options\r\n   */\r\n  public clone(options: CloneOptions) {\r\n    return this._manager.clone(this, options);\r\n  }\r\n\r\n  public attach(activity: Activity | string, tag?: object): Promise<AttachedActivityDescriptor> {\r\n    let activityId;\r\n    if (typeof activity === \"string\") {\r\n      activityId = activity;\r\n    } else {\r\n      activityId = activity.id;\r\n    }\r\n    return this._manager.attachActivities(activityId, this.id, tag);\r\n  }\r\n\r\n  public onActivityAttached(callback: (descriptor: AttachedActivityDescriptor) => void) {\r\n    this._manager.subscribeActivitiesAttached((newActId: string, oldActId: string, descriptor: AttachedActivityDescriptor) => {\r\n      if (newActId !== this._id) {\r\n        return;\r\n      }\r\n\r\n      callback(descriptor);\r\n    });\r\n  }\r\n\r\n  public onDetached(callback: (newAct: Activity, state: any) => void) {\r\n    this._manager.subscribeActivitiesDetached((newAct: Activity, originalActivity: Activity, state: any) => {\r\n      if (originalActivity.id !== this._id) {\r\n        return;\r\n      }\r\n\r\n      callback(newAct, state);\r\n    });\r\n  }\r\n\r\n  public _updateCore(other: Activity) {\r\n    super._updateCore(other);\r\n    ifNotUndefined(other._actType, (x) => this._actType = x);\r\n    ifNotUndefined(other._context, (x) => this._context = x);\r\n    ifNotUndefined(other._ownerId, (x) => this._ownerId = x);\r\n    if (other._status && (!this._status || (this._status.state !== other._status.state))) {\r\n      this._status = other._status;\r\n    }\r\n  }\r\n\r\n  public _updateDescriptors(allStates: any) {\r\n    this._attached = allStates.map((s: any) => {\r\n      return new AttachedActivityDescriptor(this._manager, this._id, s);\r\n    });\r\n  }\r\n\r\n  public get attached(): AttachedActivityDescriptor[] {\r\n    return this._attached;\r\n  }\r\n\r\n  public setFrameColor(color: string, callback: () => void): Promise<Activity> {\r\n    const promise = new Promise<Activity>((resolve, reject) => {\r\n\r\n      let callbacksToWait = this.windows.length;\r\n      if (callbacksToWait === 0) {\r\n        resolve(this);\r\n      }\r\n\r\n      this.windows.forEach((w) => {\r\n        w.underlyingWindow.setFrameColor(color, () => {\r\n          callbacksToWait--;\r\n          if (callbacksToWait <= 0) {\r\n            resolve(this);\r\n          }\r\n        });\r\n      });\r\n\r\n      setTimeout(() => {\r\n\r\n        if (callbacksToWait > 0) {\r\n          reject(this.id + \" - timed out waiting for setFrameColor with\" + color);\r\n        }\r\n\r\n      }, 5000);\r\n\r\n    });\r\n\r\n    return nodeify(promise, callback);\r\n  }\r\n\r\n  public getFrameColor(): string {\r\n\r\n    if (!this.windows || this.windows.length === 0) {\r\n      return \"\";\r\n    }\r\n\r\n    return this.windows[0].underlyingWindow.frameColor;\r\n  }\r\n}\r\n","/* tslint:disable */\r\n\r\nimport * as util from \"./util\";\r\nimport {Glue42Core} from \"@glue42/core\";\r\n\r\nexport class LogLevel {\r\n  public static Trace: string = \"trace\";\r\n  public static Debug: string = \"debug\";\r\n  public static Info: string = \"info\";\r\n  public static Warn: string = \"warn\";\r\n  public static Error: string = \"error\";\r\n}\r\n\r\nexport class Logger {\r\n\r\n  public static Level: string = LogLevel.Info;\r\n  public static GlueLogger: Glue42Core.Logger.API;\r\n\r\n  private _glueLogger: Glue42Core.Logger.API;\r\n\r\n  public static GetNamed(name: string): Logger {\r\n    return new Logger(name);\r\n  }\r\n\r\n  public static Get(owner: Object): Logger {\r\n    return new Logger(Logger.GetTypeName(owner));\r\n  }\r\n\r\n  public _name: string;\r\n\r\n  constructor(name: string) {\r\n    this._name = name;\r\n    // we have a glue logger let's create a new logger for it\r\n    if (!util.isUndefinedOrNull(Logger.GlueLogger)) {\r\n      this._glueLogger = Logger.GlueLogger.subLogger(name);\r\n    }\r\n  }\r\n\r\n  public trace(message: string) {\r\n    if (!util.isUndefinedOrNull(this._glueLogger)) {\r\n      this._glueLogger.trace(message);\r\n    } else {\r\n      if (Logger.Level === LogLevel.Trace) {\r\n        console.info(this._getMessage(message, LogLevel.Trace));\r\n      }\r\n    }\r\n  }\r\n\r\n  public debug(message: string) {\r\n    if (!util.isUndefinedOrNull(this._glueLogger)) {\r\n      this._glueLogger.debug(message);\r\n    } else {\r\n      if (Logger.Level === LogLevel.Debug ||\r\n        Logger.Level === LogLevel.Trace) {\r\n        console.info(this._getMessage(message, LogLevel.Debug));\r\n      }\r\n    }\r\n  }\r\n\r\n  public info(message: string) {\r\n    if (!util.isUndefinedOrNull(this._glueLogger)) {\r\n      this._glueLogger.info(message);\r\n    } else {\r\n      if (Logger.Level === LogLevel.Debug ||\r\n        Logger.Level === LogLevel.Trace ||\r\n        Logger.Level === LogLevel.Info) {\r\n        console.info(this._getMessage(message, LogLevel.Info));\r\n      }\r\n    }\r\n  }\r\n\r\n  public warn(message: string) {\r\n    if (!util.isUndefinedOrNull(this._glueLogger)) {\r\n      this._glueLogger.warn(message);\r\n    } else {\r\n      if (Logger.Level === LogLevel.Debug ||\r\n        Logger.Level === LogLevel.Trace ||\r\n        Logger.Level === LogLevel.Info ||\r\n        Logger.Level === LogLevel.Warn) {\r\n        console.info(this._getMessage(message, LogLevel.Info));\r\n      }\r\n    }\r\n  }\r\n\r\n  public error(message: string) {\r\n    if (!util.isUndefinedOrNull(this._glueLogger)) {\r\n      this._glueLogger.error(message);\r\n    } else {\r\n      console.error(this._getMessage(message, LogLevel.Error));\r\n      console.trace();\r\n    }\r\n  }\r\n\r\n  public _getMessage(message: string, level: string): string {\r\n    return \"[\" + level + \"] \" + this._name + \" - \" + message;\r\n  }\r\n\r\n  /**\r\n   * Returns the function name for a given object (same as constructor.name but cross-browser)\r\n   */\r\n  public static GetTypeName(object: object): string {\r\n    const funcNameRegex = /function (.{1,})\\(/;\r\n    const results = (funcNameRegex).exec(object.constructor.toString());\r\n    return (results && results.length > 1) ? results[1] : \"\";\r\n  }\r\n}\r\n","import * as contracts from \"../contracts/contracts\";\r\nimport { WindowBounds } from \"../contracts/windowBounds\";\r\n\r\nimport WindowType from \"./windowType\";\r\nimport ActivityEntity from \"./activityEntity\";\r\nimport Activity from \"./activity\";\r\n\r\nimport { Logger } from \"../helpers/logger\";\r\nimport * as util from \"../helpers/util\";\r\nimport { ifNotUndefined } from \"../helpers/util\";\r\nimport { EntityEventType } from \"../contracts/entityEvent\";\r\nimport { Glue42Core } from \"@glue42/core\";\r\nimport { Glue42 } from \"../../../glue\";\r\n\r\n/**\r\n * A window participating in an activity\r\n *\r\n * @module activityWindow\r\n */\r\nexport default class ActivityWindow extends ActivityEntity {\r\n\r\n    private _logger: Logger = Logger.Get(\"window\");\r\n\r\n    private _type: string;\r\n    private _activityId: string;\r\n    private _name: string;\r\n    private _instance: Glue42Core.AGM.Instance;\r\n    private _isIndependent: boolean;\r\n    private _windowGetter: () => Glue42.Windows.GDWindow;\r\n    private _hcWindowId: string;\r\n\r\n    constructor(id: string, name: string, type: string, activityId: string, instance: Glue42Core.AGM.Instance, isIndependent: boolean, windowGetter: any,\r\n                hcWindowId: string) {\r\n        super(id);\r\n        this._type = type;\r\n        this._activityId = activityId;\r\n        this._name = name;\r\n        this._instance = instance;\r\n        this._isIndependent = isIndependent;\r\n        this._windowGetter = windowGetter;\r\n        this._hcWindowId = hcWindowId;\r\n    }\r\n\r\n    /**\r\n     * Return window's title\r\n     * @function getBounds\r\n     * @return {Promise<WindowBounds>}\r\n     */\r\n    public getBounds(): Promise<WindowBounds> {\r\n        return this._manager.getWindowBounds(this.id);\r\n    }\r\n\r\n    /**\r\n     * @var {string} name The window name\r\n     */\r\n    public get name(): string {\r\n        return this._name;\r\n    }\r\n\r\n    /**\r\n     * @var {bool} isIndependent True if this is an independent window\r\n     */\r\n    public get isIndependent(): boolean {\r\n        return this._isIndependent;\r\n    }\r\n\r\n    /**\r\n     * @var {module:windowType} type The window type\r\n     */\r\n    public get type(): WindowType {\r\n        if (this._manager) {\r\n            return this._manager.getWindowType(this._type);\r\n        }\r\n        return undefined;\r\n    }\r\n\r\n    /**\r\n     * @var {module:activity} activity The activity that the window is part of\r\n     */\r\n    public get activity(): Activity {\r\n        if (util.isUndefined(this._activityId)) {\r\n            return undefined;\r\n        }\r\n        return this._manager.getActivityById(this._activityId);\r\n    }\r\n\r\n    /**\r\n     * @var {bool} isOwner True if the window is the owner of the activity.\r\n     */\r\n    public get isOwner(): boolean {\r\n        const act = this.activity;\r\n        if (util.isUndefined(act)) {\r\n            return false;\r\n        }\r\n\r\n        return act.owner.id === this.id;\r\n    }\r\n\r\n    /**\r\n     * Sets window's visibility\r\n     *\r\n     * @function setVisible\r\n     * @param {boolean} isVisible\r\n     * @returns {Promise<module:activityWindow>}\r\n     */\r\n    public setVisible(isVisible: boolean, callback?: contracts.Callback<ActivityWindow>): Promise<ActivityWindow> {\r\n        return this._manager.setWindowVisibility(this.id, isVisible);\r\n    }\r\n\r\n    /**\r\n     * Activate window\r\n     * @function activate\r\n     * @param {boolean} focus If true then activate window with focus otherwise activate window without focus\r\n     */\r\n    public activate(focus: boolean): Promise<ActivityWindow> {\r\n        return this._manager.activateWindow(this.id, focus);\r\n    }\r\n\r\n    /**\r\n     * Sets window's bounds\r\n     * @function setBounds\r\n     *\r\n     * @param {bounds} bounds The new bounds to be applied\r\n     * @returns  {Promise<module:activityWindow>}\r\n     */\r\n    public setBounds(bounds: WindowBounds, callback?: contracts.Callback<ActivityWindow>): Promise<ActivityWindow> {\r\n        return this._manager.setWindowBounds(this.id, bounds, callback);\r\n    }\r\n\r\n    /**\r\n     * Closes the window\r\n     *\r\n     * @function close\r\n     * @returns {Promise}\r\n     */\r\n    public close(): Promise<any> {\r\n        return this._manager.closeWindow(this.id);\r\n    }\r\n\r\n    /**\r\n     * @var {agmInstance} instance The agm instance of that window. You can use this to invoke AGM methods against that window\r\n     */\r\n    public get instance(): Glue42Core.AGM.Instance {\r\n        return this._instance;\r\n    }\r\n\r\n    /**\r\n     * Returns the window as object from Windows API (glue.windows).\r\n     *\r\n     * @var {window} underlyingWindow\r\n     */\r\n    public get underlyingWindow(): any {\r\n        const window = this._windowGetter();\r\n        if (!window) {\r\n            // we don't have the window object any more, let's return as much as we can\r\n            return {\r\n                id: this._hcWindowId\r\n            };\r\n        }\r\n        return window;\r\n    }\r\n\r\n    public onActivityJoined(callback: (activity: Activity) => void) {\r\n        this._subscribeForActivityWindowEvent(EntityEventType.ActivityWindowJoinedActivity, callback);\r\n    }\r\n\r\n    public onActivityRemoved(callback: (activity: Activity) => void) {\r\n        this._subscribeForActivityWindowEvent(EntityEventType.ActivityWindowLeftActivity, callback);\r\n    }\r\n\r\n    public _updateCore(other: ActivityWindow) {\r\n        ifNotUndefined(other._activityId, (x) => this._activityId = x);\r\n        ifNotUndefined(other._isIndependent, (x) => this._isIndependent = x);\r\n        ifNotUndefined(other._hcWindowId, (x) => this._hcWindowId = x);\r\n        ifNotUndefined(other._type, (x) => this._type = x);\r\n        ifNotUndefined(other._name, (x) => this._name = x);\r\n\r\n        if (!util.isUndefinedOrNull(other._instance)) {\r\n            this._instance = other._instance;\r\n        }\r\n    }\r\n\r\n    public _subscribeForActivityWindowEvent(eventName: string, callback: (activity: Activity) => void) {\r\n        this._manager.subscribeWindowEvents((activity, window, event) => {\r\n            // ignore events not related to this window\r\n            if (window.id !== this.id) {\r\n                return;\r\n            }\r\n\r\n            if (event === eventName) {\r\n                callback(activity);\r\n            }\r\n        });\r\n    }\r\n\r\n    public _beforeDelete(other: ActivityWindow) {\r\n        this._hcWindowId = other._hcWindowId;\r\n    }\r\n}\r\n","/**\r\n * @typedef {Object} activityStatus Defines activity instance status\r\n * @property {string} state Current state\r\n * @property {string} message Message\r\n * @property {Date} time Time of the last status update\r\n */\r\nexport class ActivityStatus {\r\n  public state: string;\r\n  public message: string;\r\n  public time: Date;\r\n\r\n  constructor(state: string, message: string, time: Date) {\r\n    this.state = state;\r\n    this.message = message;\r\n    this.time = time;\r\n  }\r\n\r\n  public getState(): string {\r\n    return this.state;\r\n  }\r\n\r\n  public getMessage(): string {\r\n    return this.message;\r\n  }\r\n\r\n  public getTime(): Date {\r\n    return this.time;\r\n  }\r\n}\r\n","import { AnnouncementInfo } from \"../contracts/announcementInfo\";\r\n\r\nimport { ActivityBridge } from \"./activityBridge\";\r\nimport ActivityType from \"../entities/activityType\";\r\nimport WindowType from \"../entities/windowType\";\r\nimport { EventHandlerCallback } from \"../contracts/contracts\";\r\nimport { WindowDefinition } from \"../entities/windowDefinition\";\r\nimport {\r\n    ActivityContextChangedEventContext,\r\n    ActivityStatusChangeEventContext,\r\n    EntityEvent,\r\n    EntityEventContext,\r\n    EntityEventType,\r\n} from \"../contracts/entityEvent\";\r\nimport { WindowFactory } from \"../contracts/windowFactory\";\r\nimport Activity from \"../entities/activity\";\r\nimport ActivityWindow from \"../entities/activityWindow\";\r\nimport { WindowBounds } from \"../contracts/windowBounds\";\r\nimport {\r\n    ActivityGwMessage,\r\n    ActivityTypeGwMessage,\r\n    ActivityTypeGwMessageEntity,\r\n    GwMessage,\r\n    PeerCreatedGwMessage,\r\n    PeerFactoryGwMessage,\r\n    PeerFactoryGwMessageEntity,\r\n    PeerRequestedGwMessage,\r\n} from \"./gw3BridgeMessages\";\r\nimport { ActivityDescriptor } from \"../entities/activityDescriptor\";\r\nimport { CloneOptions } from \"../entities/cloneOptions\";\r\nimport { Glue42 } from \"../../../glue\";\r\n\r\nimport { ActivityStatus } from \"../contracts/activityStatus\";\r\nimport { ActivityConfig } from \"../activityConfig\";\r\nimport { Glue42Core } from \"@glue42/core\";\r\n\r\nimport { Glue42 as glue42 } from \"../../../glue\";\r\ntype OverrideTypeDefinition = glue42.Activities.OverrideTypeDefinition;\r\n\r\nconst gwMessageSuccess = \"success\";\r\nconst gwMmessageError = \"error\";\r\n\r\nconst gwMessageAddActivityTypes = \"add-types\";\r\nconst gwMmessageActivityTypesAdded = \"types-added\";\r\nconst gwMessageRemoveActivityTypes = \"remove-types\";\r\nconst gwMessageActivityTypesRemoved = \"types-removed\";\r\n\r\nconst gwMessageActivityCreated = \"created\";\r\nconst gwMessageActivityDestroyed = \"destroyed\";\r\nconst gwMessageActivityInitiated = \"initiated\";\r\nconst gwMmessageJoinActivity = \"join-activity\";\r\nconst gwMessageJoinedActivity = \"joined\";\r\nconst gwMessageActivityJoined = \"activity-joined\";\r\nconst gwMessageLeaveActivity = \"leave-activity\";\r\nconst gwMessageActivityLeft = \"left\";\r\nconst gwNmessageMergeActivities = \"merge\";\r\nconst gwMessageSplitActivities = \"split\";\r\nconst gwMessageChildrenChanged = \"children-changed\";\r\nconst gwMessageOwnerChanged = \"owner-changed\";\r\n\r\nconst gwMessageAddPeerFactories = \"add-peer-factories\";\r\nconst gwMessagePeerFactoriesAdded = \"peer-factories-added\";\r\nconst gwMessageRemovePeerFactories = \"remove-peer-factories\";\r\nconst gwMessagePeerFactoriesRemoved = \"peer-factories-removed\";\r\n\r\nconst gwMessageCreateActivity = \"create\";\r\nconst gwMessageCreatePeer = \"create-peer\";\r\nconst gwMessagePeerRequested = \"peer-requested\";\r\nconst gwMessageReady = \"ready\";\r\nconst gwMessagePeerCreated = \"peer-created\";\r\n\r\nconst gwMessageDestroyActivity = \"destroy\";\r\nconst gwMessageDisposePeer = \"dispose-peer\";\r\nconst gwMessageDestroyPeer = \"destroy-peer\";\r\n\r\ndeclare let window: any;\r\ndeclare let process: any;\r\n\r\nexport default class GW3Bridge implements ActivityBridge {\r\n\r\n    private static activityTypeGwMessageEntityToActivityType(\r\n        entity: ActivityTypeGwMessageEntity,\r\n        description: string): ActivityType {\r\n\r\n        const nameToWindowType =\r\n            (windowName: any) =>\r\n                new WindowType(\r\n                    windowName,\r\n                    undefined);\r\n\r\n        return new ActivityType(\r\n            entity.name,\r\n            entity.owner_type && nameToWindowType(entity.owner_type),\r\n            entity.helper_types && entity.helper_types.map(nameToWindowType),\r\n            description);\r\n    }\r\n\r\n    private static peerFactoryGwMessageEntityToWindowType(entity: PeerFactoryGwMessageEntity): WindowType {\r\n        return new WindowType(\r\n            entity.peer_type,\r\n      /* #deleteme TODO: review - appmanager configuration? */(_) => undefined);\r\n    }\r\n\r\n    private static activityGwMessageToActivity(msg: ActivityGwMessage, status: ActivityStatus): Activity {\r\n        const ownerId = msg.owner !== undefined ? msg.owner.peer_id : msg.owner_id;\r\n        return new Activity(\r\n            msg.activity_id,\r\n            msg.activity_type,\r\n            status,\r\n            msg.context_snapshot,\r\n            ownerId);\r\n    }\r\n\r\n    private static activityToActivityStatusChangeEvent(act: Activity) {\r\n        return new EntityEvent<Activity>(act, new ActivityStatusChangeEventContext(act.status, undefined));\r\n    }\r\n\r\n    private _connection: Glue42.Connection.API;\r\n    private _logger: any;\r\n    private _contexts: Glue42.Contexts.API;\r\n    private _windows: Glue42.Windows.API;\r\n\r\n    private _gw3Session: Glue42Core.Connection.GW3DomainSession;\r\n\r\n    // callbacks\r\n\r\n    private _activityChangeCallbacks: Array<EventHandlerCallback<EntityEvent<Activity>>> = [];\r\n    private _activityTypeStatusChangeCallbacks: Array<EventHandlerCallback<EntityEvent<ActivityType>>> = [];\r\n    private _activityWindowChangeCallbacks: Array<EventHandlerCallback<EntityEvent<ActivityWindow>>> = [];\r\n    private _windowTypeStatusChangeCallbacks: Array<EventHandlerCallback<EntityEvent<WindowType>>> = [];\r\n\r\n    // state tracking\r\n    private _peerIdAndFactoryIdToPeerType: any = {};\r\n    private _peerFactoriesRegisteredByUs: { [index: string]: WindowFactory } = {};\r\n    private _gw3Subscriptions: any[] = [];\r\n    private _contextSubscriptions: any = {};\r\n    private _activityTypesInitiatedFromMe: any = {};\r\n\r\n    private _sessionJoinedPromise: Promise<GW3Bridge>;\r\n    private _sessionJoinedPromiseResolve: (bridge: GW3Bridge) => void;\r\n    private _activityJoinedPromise: Promise<object>;\r\n    private _activityJoinedPromiseResolve: (obj: object) => void;\r\n    private _config: ActivityConfig;\r\n\r\n    constructor(config: ActivityConfig) {\r\n        this._config = config;\r\n        this._connection = config.connection;\r\n        this._logger = config.logger;\r\n        this._contexts = config.contexts;\r\n        this._windows = config.windows;\r\n\r\n        this._sessionJoinedPromise = new Promise<GW3Bridge>((resolve /*, reject */) => {\r\n            this._sessionJoinedPromiseResolve = resolve;\r\n        });\r\n\r\n        this._activityJoinedPromise = new Promise<object>((resolve /*, reject */) => {\r\n            this._activityJoinedPromiseResolve = resolve;\r\n        });\r\n\r\n        if (!this._config.activityId) {\r\n            this._activityJoinedPromiseResolve({});\r\n        }\r\n\r\n        this._gw3Session = this._connection.domain(\r\n            \"activity\",\r\n            [\"joined\", \"initiated\", \"peer-created\", \"token\"]);\r\n\r\n        if (typeof window !== \"undefined\") {\r\n\r\n            const glue42gd = (window as any).glue42gd;\r\n\r\n            // only execute if in activity\r\n            if (glue42gd && glue42gd.activityInfo) {\r\n                // G4E-1343\r\n                if (typeof glue42gd.addRefreshHandler === \"function\") {\r\n\r\n                    glue42gd.addRefreshHandler((success: any, error: any) => {\r\n                        this._gw3Session\r\n                            .send(\r\n                                {\r\n                                    type: \"reload\"\r\n                                })\r\n                            .then(\r\n                                (msg: any) => {\r\n                                    if (!msg.token) {\r\n                                        error(\"Expected gateway token for refreshing.\");\r\n                                        return;\r\n                                    }\r\n                                    try {\r\n                                        glue42gd.setGWToken(msg.token as string);\r\n                                    } catch (e) {\r\n                                        error(e.message || e);\r\n                                        return;\r\n                                    }\r\n                                    success();\r\n                                },\r\n                                error);\r\n                    });\r\n                }\r\n\r\n                // JP_GD3-598\r\n                if (glue42gd && typeof glue42gd.addWillNavigateHandler === \"function\") {\r\n\r\n                    glue42gd.addWillNavigateHandler((success: any, error: any) => {\r\n                        this._gw3Session\r\n                            .send(\r\n                                {\r\n                                    type: \"reload\"\r\n                                })\r\n                            .then(\r\n                                (msg: any) => {\r\n                                    if (!msg.token) {\r\n                                        error(\"Expected gateway token for refreshing.\");\r\n                                        return;\r\n                                    }\r\n                                    try {\r\n                                        glue42gd.setGWToken(msg.token as string);\r\n                                    } catch (e) {\r\n                                        error(e.message || e);\r\n                                        return;\r\n                                    }\r\n                                    success();\r\n                                },\r\n                                error);\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    public get bridgeType(): \"GW3\" {\r\n        return \"GW3\";\r\n    }\r\n\r\n    public init() {\r\n        // activity types\r\n        this.forwardActivityTypeMessagesToStatusEventHandlers();\r\n\r\n        // activities\r\n        this.subscribe<ActivityGwMessage>(\r\n            gwMessageActivityCreated,\r\n            this.handleActivityCreatedMessage);\r\n\r\n        this.subscribe<ActivityGwMessage>(\r\n            gwMessageActivityDestroyed,\r\n            this.handleActivityDestroyedMessage);\r\n\r\n        this.forwardActivityMessagesToStatusEventHandlers();\r\n\r\n        this.forwardActivityCreatedAndJoinedActivityToActivityWindowEventHandlers();\r\n\r\n        // window types / peer factories\r\n\r\n        // NB: this forward must happen before the handlePeerFactoriesRemoved subscription\r\n        // since the latter clears state which is used by peerFactoryIdAndOwnerIdToWindowType\r\n        this.forwardPeerFactoryMessagesToStatusEventHandlers();\r\n\r\n        this.forwardPeerFactoryMessagesToPeerFactoryRequests();\r\n\r\n        this.subscribe(\r\n            gwMessagePeerFactoriesAdded,\r\n            this.handlePeerFactoriesAdded);\r\n\r\n        this.subscribe(\r\n            gwMessagePeerFactoriesRemoved,\r\n            this.handlePeerFactoriesRemoved);\r\n\r\n        // activity windows\r\n\r\n        this.forwardActivityWindowMessagesToEventHandlers();\r\n        //\r\n\r\n        this.subscribe(\r\n            gwMessageDisposePeer,\r\n      /*(msg)*/() => {\r\n                if (this._config.disposeRequestHandling === \"dispose\") {\r\n                    this.dispose();\r\n                    return;\r\n                }\r\n                if (this._config.disposeRequestHandling === \"exit\") {\r\n                    if (this._windows && typeof this._windows.my() !== \"undefined\") {\r\n                        this._windows.my().close();\r\n                        return;\r\n                    }\r\n                    if (typeof window !== \"undefined\" && typeof (window as any).close === \"function\") {\r\n                        window.close();\r\n                        return;\r\n                    }\r\n                    if (typeof process !== \"undefined\" && typeof (process as any).exit === \"function\") {\r\n                        process.exit();\r\n                        return;\r\n                    }\r\n                }\r\n            });\r\n\r\n        // start domain join handshake\r\n        this._gw3Session.onJoined(() => {\r\n\r\n            if (this._config.mode === \"trackMyOnly\" ||\r\n                this._config.mode === \"trackMyTypeAndInitiatedFromMe\") {\r\n                this._sessionJoinedPromiseResolve(this);\r\n            } else {\r\n                this._gw3Session\r\n                    .send(\r\n                        {\r\n                            type: \"subscribe\",\r\n                            activity_types:\r\n                                (this._config.mode === \"trackAll\" ? [] :\r\n                                    this._config.mode === \"trackTypes\" ? this._config.typesToTrack : [])\r\n                        })\r\n                    .then(() => {\r\n                        this._sessionJoinedPromiseResolve(this);\r\n                    });\r\n            }\r\n        });\r\n        this._gw3Session.join();\r\n    }\r\n\r\n    public dispose() {\r\n        this._gw3Subscriptions.forEach((sub) => sub && this._connection.off(sub));\r\n        this._gw3Subscriptions.length = 0;\r\n    }\r\n\r\n    // ActivityBridge interface\r\n\r\n    public ready(): Promise<object> {\r\n        return Promise.all([this._sessionJoinedPromise, this._activityJoinedPromise]);\r\n    }\r\n\r\n    public initReady(): Promise<ActivityBridge> {\r\n        return this._sessionJoinedPromise;\r\n    }\r\n\r\n    public onActivityTypeStatusChange(callback: EventHandlerCallback<EntityEvent<ActivityType>>) {\r\n        this._activityTypeStatusChangeCallbacks.push(callback);\r\n    }\r\n\r\n    public registerActivityType(\r\n        activityTypeName: string,\r\n        ownerWindow: WindowDefinition,\r\n        helperWindows?: WindowDefinition[],\r\n        config?: any,\r\n        description?: string): Promise<ActivityType> {\r\n\r\n        const entity: ActivityTypeGwMessageEntity = {};\r\n        entity.name = activityTypeName;\r\n        const toActivityPeerConfig = (windowDefinition: WindowDefinition) => ({ type: windowDefinition.type, name: windowDefinition.name, configuration: windowDefinition });\r\n\r\n        entity.owner_type = toActivityPeerConfig(ownerWindow);\r\n        entity.helper_types = helperWindows.map(toActivityPeerConfig);\r\n\r\n        return this._gw3Session\r\n            .send(\r\n                {\r\n                    type: gwMessageAddActivityTypes,\r\n                    types: [entity]\r\n                })\r\n            .then(() => {\r\n                const activityType = GW3Bridge.activityTypeGwMessageEntityToActivityType(entity, description);\r\n                this.invokeCallbacks(\r\n                    this._activityTypeStatusChangeCallbacks,\r\n                    new EntityEvent<ActivityType>(\r\n                        activityType,\r\n                        new EntityEventContext(EntityEventType.Added)),\r\n                    gwMessageAddActivityTypes);\r\n                return activityType;\r\n            });\r\n    }\r\n\r\n    public unregisterActivityType(activityTypeName: string): Promise<void> {\r\n        return this._gw3Session\r\n            .send(\r\n                {\r\n                    type: gwMessageRemoveActivityTypes,\r\n                    types: [activityTypeName]\r\n                })\r\n            .then(() => {\r\n                const activityType = new ActivityType(activityTypeName, undefined, undefined, undefined);\r\n                this.invokeCallbacks(\r\n                    this._activityTypeStatusChangeCallbacks,\r\n                    new EntityEvent<ActivityType>(\r\n                        activityType,\r\n                        new EntityEventContext(EntityEventType.Removed)),\r\n                    gwMessageAddActivityTypes);\r\n            });\r\n    }\r\n\r\n    public onWindowTypeStatusChange(callback: EventHandlerCallback<EntityEvent<WindowType>>): void {\r\n        this._windowTypeStatusChangeCallbacks.push(callback);\r\n    }\r\n\r\n    // NB: in GW3, peer factories have ids separate from the ids of the peers they create\r\n    // in this implementation we keep the two equal for simplicity\r\n    // NB: we assume only one peer will register a peer factory for a given type; otherwise the\r\n    // add/remove window types event logic will get messy\r\n    public registerWindowFactory(\r\n        windowType: string,\r\n        factory: WindowFactory,\r\n        parameters?: any): Promise<void> {\r\n        if (this._peerFactoriesRegisteredByUs[windowType]) {\r\n            return Promise.reject(new Error(`Factory for windowType ${windowType} already registered.`));\r\n        }\r\n\r\n        this._peerFactoriesRegisteredByUs[windowType] = factory;\r\n\r\n        // #deleteme TODO: review success/failure code paths\r\n        // #deleteme TODO: review - should we create the window type here?\r\n        const entity = {\r\n            id: windowType,\r\n            peer_type: windowType,\r\n            configuration: parameters\r\n        };\r\n        return this._gw3Session.send({\r\n            type: gwMessageAddPeerFactories,\r\n            factories: [entity]\r\n        })\r\n            .then(() => {\r\n                this.invokeCallbacks(\r\n                    this._windowTypeStatusChangeCallbacks,\r\n                    new EntityEvent(\r\n                        GW3Bridge.peerFactoryGwMessageEntityToWindowType(entity),\r\n                        new EntityEventContext(EntityEventType.Added)),\r\n                    gwMessageAddPeerFactories);\r\n            })\r\n            .catch(() => {\r\n                delete this._peerFactoriesRegisteredByUs[windowType];\r\n            });\r\n    }\r\n\r\n    public unregisterWindowFactory(windowType: string): Promise<void> {\r\n        const factory = this._peerFactoriesRegisteredByUs[windowType];\r\n        if (!factory) {\r\n            return Promise.reject(new Error(`Factory for windowType ${windowType} not registered.`));\r\n        }\r\n\r\n        delete this._peerFactoriesRegisteredByUs[windowType];\r\n\r\n        return this._gw3Session.send({\r\n            type: gwMessageRemovePeerFactories,\r\n            factory_ids: [windowType]\r\n        }).then(() => {\r\n            this.invokeCallbacks(\r\n                this._windowTypeStatusChangeCallbacks,\r\n                new EntityEvent(\r\n                    new WindowType(windowType, undefined),\r\n                    new EntityEventContext(EntityEventType.Removed)),\r\n                gwMessageAddPeerFactories);\r\n        });\r\n    }\r\n\r\n    public onActivityStatusChange(callback: EventHandlerCallback<EntityEvent<Activity>>) {\r\n        this._activityChangeCallbacks.push(callback);\r\n    }\r\n\r\n    public initiateActivity(activityType: string, context?: object, configuration?: WindowDefinition[] | OverrideTypeDefinition): Promise<string> {\r\n        const initiateMsg: any = {\r\n            type: gwMessageCreateActivity,\r\n            activity_type: activityType,\r\n            initial_context: context,\r\n        };\r\n\r\n        if (this.isOverrideTypeDefinition(configuration)) {\r\n            initiateMsg.types_override = {\r\n                owner_type: { type: configuration.owner.type, name: configuration.owner.name, configuration: configuration.owner },\r\n                helper_types: configuration.helpers && configuration.helpers.map((wd) => ({ type: wd.type, name: wd.name, configuration: wd }))\r\n            };\r\n        } else {\r\n            initiateMsg.configuration = configuration && configuration.map((wd) => ({ type: wd.type, name: wd.name, configuration: wd }));\r\n        }\r\n\r\n        return this.sendCreateAndMapResultingMessagesToPromise(\r\n            initiateMsg,\r\n            gwMessageActivityInitiated,\r\n            (msg, requestId) => msg.request_id === requestId,\r\n            gwMessageActivityCreated,\r\n            (msg, requestId, initMsg) => msg.activity_id === initMsg.activity_id,\r\n            gwMessageActivityDestroyed,\r\n            (msg, requestId, initMsg) => msg.activity_id === initMsg.activity_id,\r\n            (msg) => msg.activity_id,\r\n            null).then((id) => {\r\n                if (this._config.mode === \"trackMyTypeAndInitiatedFromMe\") {\r\n                    if (!this._activityTypesInitiatedFromMe[activityType]) {\r\n                        this._activityTypesInitiatedFromMe[activityType] = true;\r\n\r\n                        return this._gw3Session\r\n                            .send(\r\n                                {\r\n                                    type: \"subscribe\",\r\n                                    activity_types: [activityType]\r\n                                })\r\n                            .then(() => {\r\n                                return id;\r\n                            });\r\n                    }\r\n                }\r\n                return id;\r\n            });\r\n    }\r\n\r\n    public stopActivity(activity: Activity): Promise<boolean> {\r\n        return this._gw3Session.send({\r\n            type: gwMessageDestroyActivity,\r\n            activity_id: activity.id,\r\n            reason_uri: \"com.tick42.glue.activity.constants.destroyReason.general\",\r\n            reason: \"Destroying activity\"\r\n        }).then((_) => true);\r\n    }\r\n\r\n    public updateActivityContext(activity: Activity, context: any, fullReplace: boolean, removedKeys?: string[]): Promise<void> {\r\n        if (fullReplace) {\r\n            // this will currently fail on GW3\r\n            return this._contexts.set(activity.id, context);\r\n        } else {\r\n            removedKeys = removedKeys || [];\r\n            for (const x of removedKeys) {\r\n                context[x] = null;\r\n            }\r\n            return this._contexts.update(activity.id, context);\r\n        }\r\n    }\r\n\r\n    public announceWindow(windowType?: string, activityWindowId?: string) {\r\n        // in the GW3 case we are only joined to an activity after we announce ourselves\r\n        // so all announcement calls should go in 'registerWindow', not here\r\n        // (registerWindow registers a window that's not part of an activity, at least yet)\r\n        throw new Error(\"Invalid operation 'announceWindow' for GW3 protocol\");\r\n    }\r\n\r\n    public registerWindow(type: string, name: string, independent: boolean): Promise<string> {\r\n\r\n        let shouldSendReady = typeof this._connection.gatewayToken !== \"undefined\";\r\n        const peerId = this._connection.peerId;\r\n\r\n        // if running in GD3 (glue42gd is there) we should send ready only if we have the activityInfo object in glue\r\n        if (typeof window !== \"undefined\") {\r\n            const glue42gd = window.glue42gd;\r\n            if (glue42gd) {\r\n                shouldSendReady = typeof glue42gd.activityInfo !== \"undefined\";\r\n            }\r\n        }\r\n\r\n        if (shouldSendReady) {\r\n            this._gw3Session.send({\r\n                type: gwMessageReady,\r\n            });\r\n        }\r\n\r\n        this.invokeCallbacks(\r\n            this._activityWindowChangeCallbacks,\r\n            new EntityEvent<ActivityWindow>(\r\n                new ActivityWindow(peerId, name, type, undefined, this.getAgmInstance(peerId), independent, this.generateWindowGetter(peerId), undefined),\r\n                new EntityEventContext(EntityEventType.Added)),\r\n            \"register window\");\r\n\r\n        return Promise.resolve(peerId);\r\n    }\r\n\r\n    public onActivityWindowChange(callback: EventHandlerCallback<EntityEvent<ActivityWindow>>) {\r\n        this._activityWindowChangeCallbacks.push(callback);\r\n    }\r\n\r\n    public createWindow(activityId: string, windowDefinition: WindowDefinition): Promise<string> {\r\n\r\n        // if the user hasn't provided a layout option but has some of left,top,width,height\r\n        // insert a layout\r\n        if (!windowDefinition.layout) {\r\n            if (windowDefinition.left || windowDefinition.width || windowDefinition.height || windowDefinition.top) {\r\n                windowDefinition.layout = {\r\n                    mode: \"pixels\",\r\n                    cellSize: 1,\r\n                };\r\n            }\r\n        }\r\n\r\n        const joinPeer = (id: string) => {\r\n            if (!activityId) {\r\n                return;\r\n            }\r\n            return this.joinActivity(activityId, id, windowDefinition.name)\r\n                .then(() => {\r\n                    return id;\r\n                });\r\n        };\r\n\r\n        return this.sendCreateAndMapResultingMessagesToPromise(\r\n            {\r\n                type: gwMessageCreatePeer,\r\n                peer_type: windowDefinition.type,\r\n                peer_name: windowDefinition.name || windowDefinition.type,\r\n                configuration: windowDefinition,\r\n                activity_id: activityId,\r\n            },\r\n            undefined,\r\n            undefined,\r\n            gwMessagePeerCreated,\r\n            (msg, requestId) => msg.request_id === requestId,\r\n            undefined,\r\n            undefined,\r\n            (msg) => msg.created_id,\r\n            joinPeer)\r\n            .then(joinPeer);\r\n    }\r\n\r\n    public closeWindow(id: string): Promise<void> {\r\n        return this._gw3Session.send({\r\n            type: gwMessageDestroyPeer,\r\n            destroy_peer_id: id\r\n        }).then((_) => undefined);\r\n    }\r\n\r\n    public getAnnouncementInfo(): AnnouncementInfo {\r\n        let activityId = this._config.activityId || (this._config.announcementInfo && this._config.announcementInfo.activityId);\r\n        let activityWindowType = (this._config.announcementInfo && this._config.announcementInfo.activityWindowType);\r\n        let activityWindowIndependent = (this._config.announcementInfo && this._config.announcementInfo.activityWindowIndependent);\r\n        let activityWindowName = (this._config.announcementInfo && this._config.announcementInfo.activityWindowName);\r\n\r\n        if (typeof window !== \"undefined\" &&\r\n            typeof window.location !== \"undefined\" &&\r\n            window.location.search &&\r\n            typeof URLSearchParams === \"function\") {\r\n            const searchParams = new URLSearchParams(location.search.slice(1));\r\n            activityWindowType = activityWindowType || searchParams.get(\"t42PeerType\");\r\n            activityWindowType = activityWindowType || searchParams.get(\"t42ActivityWindowType\");\r\n            if (typeof activityWindowIndependent === \"undefined\") {\r\n                activityWindowIndependent = searchParams.get(\"t42ActivityWindowIndependent\");\r\n            }\r\n            activityWindowName = activityWindowName || searchParams.get(\"t42ActivityWindowName\");\r\n            activityId = activityId || searchParams.get(\"t42ActivityId\");\r\n        }\r\n\r\n        activityWindowType = activityWindowType || \"unknown\";\r\n        activityWindowIndependent = activityWindowIndependent || false;\r\n        activityWindowName = activityWindowName || this._connection.peerId;\r\n\r\n        return {\r\n            activityWindowId: undefined, // not member of activity from the get go\r\n            activityId,\r\n            activityWindowType,\r\n            activityWindowIndependent,\r\n            activityWindowName,\r\n        };\r\n    }\r\n\r\n    public joinActivity(activityId: string, windowId: string, name?: string): Promise<void> {\r\n        const maybeName = (name && { name }) || {};\r\n        return this._gw3Session.send({\r\n            type: gwMmessageJoinActivity,\r\n            target_id: windowId,\r\n            activity_id: activityId,\r\n            ...maybeName\r\n        }).then(() => {\r\n            this.invokeCallbacks(\r\n                this._activityWindowChangeCallbacks,\r\n                new EntityEvent<ActivityWindow>(\r\n                    new ActivityWindow(windowId, undefined, undefined, activityId, this.getAgmInstance(windowId), undefined, this.generateWindowGetter(windowId), undefined),\r\n                    new EntityEventContext(EntityEventType.ActivityWindowJoinedActivity)),\r\n                \"activity joined - ActivityWindow\");\r\n\r\n            this.invokeCallbacks(\r\n                this._activityChangeCallbacks,\r\n                new EntityEvent<Activity>(\r\n                    new Activity(activityId, undefined, new ActivityStatus(\"created\", undefined, undefined), undefined, undefined),\r\n                    new EntityEventContext(EntityEventType.Updated)),\r\n                \"activity joined - Activity\");\r\n        });\r\n    }\r\n\r\n    public leaveActivity(activityId: string, windowId: string): Promise<void> {\r\n        return this._gw3Session.send({\r\n            type: gwMessageLeaveActivity,\r\n            target_id: windowId,\r\n            activity_id: activityId\r\n        }).then(() => {\r\n            this.invokeCallbacks(\r\n                this._activityWindowChangeCallbacks,\r\n                new EntityEvent<ActivityWindow>(\r\n                    new ActivityWindow(windowId, undefined, undefined, null, this.getAgmInstance(windowId), undefined, this.generateWindowGetter(windowId), undefined),\r\n                    new EntityEventContext(EntityEventType.ActivityWindowLeftActivity)),\r\n                \"activity left - ActivityWindow\");\r\n\r\n            this.invokeCallbacks(\r\n                this._activityChangeCallbacks,\r\n                new EntityEvent<Activity>(\r\n                    new Activity(activityId, undefined, new ActivityStatus(\"created\", undefined, undefined), undefined, undefined),\r\n                    new EntityEventContext(EntityEventType.Updated)),\r\n                \"activity left - Activity\");\r\n        });\r\n    }\r\n\r\n    // purposefully returning empty arrays\r\n    public getActivityTypes(): Promise<ActivityType[]> {\r\n        return Promise.resolve([]);\r\n    }\r\n\r\n    public getWindowTypes(): Promise<WindowType[]> {\r\n        return Promise.resolve([]);\r\n    }\r\n\r\n    public getActivities(): Promise<Activity[]> {\r\n        return Promise.resolve([]);\r\n    }\r\n\r\n    public getActivityWindows(): Promise<ActivityWindow[]> {\r\n        return Promise.resolve([]);\r\n    }\r\n\r\n    // N/A\r\n\r\n    // ignore for now\r\n\r\n    // POSTPONED\r\n    public createStackedWindows(id: string, windowDefinitions: WindowDefinition[], timeout: number): Promise<string[]> {\r\n        return undefined;\r\n    }\r\n\r\n    // POSTPONED\r\n    public getWindowBounds(id: string): Promise<WindowBounds> {\r\n        return undefined;\r\n    }\r\n\r\n    // POSTPONED\r\n    public setWindowBounds(id: string, bounds: WindowBounds): Promise<void> {\r\n        return undefined;\r\n    }\r\n\r\n    // POSTPONED\r\n    public activateWindow(id: string, focus: boolean): Promise<void> {\r\n        return undefined;\r\n    }\r\n\r\n    // POSTPONED\r\n    public setWindowVisibility(id: string, visible: boolean): Promise<void> {\r\n        return undefined;\r\n    }\r\n\r\n    // POSTPONED\r\n    public cloneActivity(id: string, cloneOptions: CloneOptions): Promise<string> {\r\n        return undefined;\r\n    }\r\n\r\n    // POSTPONED\r\n    public attachActivities(from: string, to: string, tag: object): Promise<any> {\r\n        return this._gw3Session.send({\r\n            type: gwNmessageMergeActivities,\r\n            into: to,\r\n            merge: from\r\n        });\r\n    }\r\n\r\n    // POSTPONED\r\n    public detachActivities(activityId: string, newActivityInfo: ActivityDescriptor): Promise<string> {\r\n        return this._gw3Session.send({\r\n            type: gwMessageSplitActivities,\r\n            from: activityId,\r\n            // split: from\r\n        }).then(() => \"\");\r\n    }\r\n\r\n    // POSTPONED\r\n    public onActivitiesAttached(callback: (info: any) => void) {\r\n        // POSTPONED\r\n    }\r\n\r\n    // POSTPONED\r\n    public onActivitiesDetached(callback: (info: any) => void) {\r\n        // POSTPONED\r\n    }\r\n\r\n    public onActivityAttachedDescriptorsRefreshed(callback: (info: any) => void): void {\r\n        // POSTPONED\r\n    }\r\n\r\n    // POSTPONED\r\n    public getAttachedDescriptors(): Promise<any[]> {\r\n        return Promise.resolve([]);\r\n    }\r\n\r\n    // helpers\r\n\r\n    // Protocol handling\r\n\r\n    private getRandomRequestId() {\r\n        return this._connection.peerId + \":\" + Math.floor(Math.random() * 1e9) + \"\";\r\n    }\r\n\r\n    private forwardAddedAndRemovedMessagesToEventHandler<TMessage, TEntity>(\r\n        addedMessageType: string,\r\n        removedMessageType: string,\r\n        mapper: (msg: TMessage, isAdded: boolean) => TEntity[],\r\n        handlers: Array<EventHandlerCallback<EntityEvent<TEntity>>>) {\r\n\r\n        const getGetEntityEvent = (isAdded: boolean) => (entity: any) => new EntityEvent<TEntity>(\r\n            entity,\r\n            new EntityEventContext(\r\n                isAdded ?\r\n                    EntityEventType.Added :\r\n                    EntityEventType.Removed));\r\n\r\n        let sub1;\r\n        let sub2;\r\n\r\n        sub1 = addedMessageType && this.forwardMessageToEventHandler<TMessage, TEntity>(\r\n            addedMessageType,\r\n            (msg) => mapper(msg, true),\r\n            getGetEntityEvent(true),\r\n            handlers);\r\n\r\n        sub2 = removedMessageType && this.forwardMessageToEventHandler<TMessage, TEntity>(\r\n            removedMessageType,\r\n            (msg) => mapper(msg, false),\r\n            getGetEntityEvent(false),\r\n            handlers);\r\n\r\n        return [sub1, sub2].filter((x) => x);\r\n    }\r\n\r\n    private forwardMessageToEventHandler<TMessage, TEntity>(\r\n        messageType: string,\r\n        mapper: (msg: TMessage) => TEntity[],\r\n        getEntityEvent: (entity: TEntity, msg: TMessage) => EntityEvent<TEntity>,\r\n        handler: Array<EventHandlerCallback<EntityEvent<TEntity>>>) {\r\n        return this.subscribe(\r\n            messageType,\r\n            (msg: TMessage) => {\r\n                mapper(msg)\r\n                    .forEach((ent: any) =>\r\n                        handler.forEach((h) => h(getEntityEvent(ent, msg))));\r\n            });\r\n    }\r\n\r\n    private sendCreateAndMapResultingMessagesToPromise<TCreatedMessage extends GwMessage, TPromiseType>(\r\n        msg: any,\r\n        initiatedMessageType: string,\r\n        initiatedMessageFilter: (msg: any, requestId: string) => boolean,\r\n        createdMessageType: string,\r\n        createdMessageFilter: (msg: any, requestId: string, initMsg: any) => boolean,\r\n        cancelledMessageType: string,\r\n        cancelledMessageFilter: (msg: any, requestId: string, initMsg: any) => boolean,\r\n        createdMessageToPromiseResolution: (TCreatedMessage: any) => TPromiseType,\r\n        listenForRecreates: (result: TPromiseType) => void): Promise<TPromiseType> {\r\n\r\n        const reqId = this.getRandomRequestId();\r\n\r\n        let resolveCreatedPromise: (arg: any) => void;\r\n        let rejectCreatedPromise: (arg: any) => void;\r\n        const createdPromise = new Promise<TPromiseType>((resolve, reject) => {\r\n            resolveCreatedPromise = resolve;\r\n            rejectCreatedPromise = reject;\r\n        });\r\n\r\n        let initiatedMessageAck: any = null;\r\n\r\n        let initiatedSubscription: any;\r\n        let createdSubscription: any;\r\n        let cancelledSubscription: any;\r\n        let errorSubscription: any;\r\n\r\n        const dropSubscriptions = () => {\r\n            this.dropSubscription(initiatedSubscription);\r\n            if (!listenForRecreates) {\r\n                this.dropSubscription(createdSubscription);\r\n            }\r\n            this.dropSubscription(cancelledSubscription);\r\n            this.dropSubscription(errorSubscription);\r\n        };\r\n\r\n        initiatedSubscription = initiatedMessageType &&\r\n            this.subscribe(\r\n                initiatedMessageType,\r\n                (msg4: any) => {\r\n                    if (!initiatedMessageFilter(msg4, reqId)) {\r\n                        return;\r\n                    }\r\n                    initiatedMessageAck = msg4;\r\n                    this.dropSubscription(initiatedSubscription);\r\n                });\r\n\r\n        let recreated = false;\r\n        createdSubscription =\r\n            this.subscribe(\r\n                createdMessageType,\r\n                (msg1: TCreatedMessage) => {\r\n                    if (!createdMessageFilter(msg1, reqId, initiatedMessageAck)) {\r\n                        return;\r\n                    }\r\n                    if (recreated) {\r\n                        if (listenForRecreates) {\r\n                            listenForRecreates(createdMessageToPromiseResolution(msg1));\r\n                        }\r\n                    } else {\r\n                        recreated = true;\r\n                        resolveCreatedPromise(createdMessageToPromiseResolution(msg1));\r\n                    }\r\n                });\r\n        cancelledSubscription = cancelledMessageType &&\r\n            this.subscribe(\r\n                cancelledMessageType,\r\n                (msg2: any) => {\r\n                    if (!cancelledMessageFilter(msg2, reqId, initiatedMessageAck)) {\r\n                        return;\r\n                    }\r\n                    rejectCreatedPromise(msg2);\r\n                });\r\n        errorSubscription = cancelledMessageType &&\r\n            this.subscribe(\r\n                gwMmessageError,\r\n                (msg3: any) => {\r\n                    if (msg3.request_id !== reqId) {\r\n                        return;\r\n                    }\r\n                    rejectCreatedPromise(msg3);\r\n                });\r\n\r\n        msg.request_id = reqId;\r\n\r\n        const toReturn = this._gw3Session\r\n            .send(msg)\r\n            .then(() => {\r\n                return createdPromise;\r\n            });\r\n        toReturn.then(dropSubscriptions, dropSubscriptions);\r\n        return toReturn;\r\n    }\r\n\r\n    // Entity Mapping\r\n\r\n    private peerFactoryIdAndOwnerIdToWindowType(factoryId: string, ownerId: string) {\r\n        const peerType = this._peerIdAndFactoryIdToPeerType[ownerId + \":\" + factoryId];\r\n        if (!peerType) {\r\n            return null;\r\n        } else {\r\n            return new WindowType(peerType, undefined);\r\n        }\r\n    }\r\n\r\n    private subscribe<TMessage>(messageType: string, handler: (msg: TMessage) => void) {\r\n        const sub = this._connection.on(\r\n            messageType,\r\n            (msg: TMessage) => handler.bind(this)(msg));\r\n\r\n        this._gw3Subscriptions.push(sub);\r\n\r\n        return sub;\r\n    }\r\n\r\n    private dropSubscription(subscription: any) {\r\n        if (subscription) {\r\n            this._connection.off(subscription);\r\n            delete this._gw3Subscriptions[this._gw3Subscriptions.indexOf(subscription)];\r\n        }\r\n    }\r\n\r\n    private invokeCallbacks<TEvent>(\r\n        callbacks: Array<EventHandlerCallback<EntityEvent<TEvent>>>,\r\n        event: EntityEvent<TEvent>,\r\n        description?: string) {\r\n        callbacks.forEach((cb) => {\r\n            try {\r\n                cb(event);\r\n            } catch (err) {\r\n                this._logger.error(`Error in ${description || event.context.type} callback: ` + JSON.stringify(err));\r\n            }\r\n        });\r\n    }\r\n\r\n    private handleActivityCreatedMessage(msg: ActivityGwMessage) {\r\n        if (!msg.context_id) {\r\n            this._logger.error(\"Activity created with unknown context_id: \" + msg.activity_id);\r\n        } else {\r\n            if (!this._contextSubscriptions[msg.activity_id]) {\r\n                this.subscribeToContext(msg);\r\n            }\r\n        }\r\n    }\r\n\r\n    private async subscribeToContext(msg: ActivityGwMessage): Promise<void> {\r\n        const activityId = msg.activity_id;\r\n        this._contextSubscriptions[activityId] =\r\n            await this._contexts.subscribe(activityId,\r\n                (data: any, updated: any, removed: string[]) => {\r\n                    const event = new EntityEvent<Activity>(\r\n                        new Activity(activityId, undefined, undefined, data, undefined),\r\n                        new ActivityContextChangedEventContext(data, updated, removed));\r\n\r\n                    this.invokeCallbacks(\r\n                        this._activityChangeCallbacks,\r\n                        event,\r\n                        \"context updated\");\r\n                });\r\n    }\r\n\r\n    private handleActivityDestroyedMessage(msg: ActivityGwMessage) {\r\n        const unsubscribeContext = this._contextSubscriptions[msg.activity_id];\r\n        if (typeof unsubscribeContext === \"function\") {\r\n            unsubscribeContext();\r\n        }\r\n        delete this._contextSubscriptions[msg.activity_id];\r\n    }\r\n\r\n    private handlePeerFactoriesAdded(msg: PeerFactoryGwMessage) {\r\n        msg.factories.forEach((entity: PeerFactoryGwMessageEntity) => {\r\n            this._peerIdAndFactoryIdToPeerType[msg.owner_id + \":\" + entity.id] = entity.peer_type;\r\n        });\r\n    }\r\n\r\n    private handlePeerFactoriesRemoved(msg: PeerFactoryGwMessage) {\r\n        msg.factory_ids.forEach((factoryId: string) => {\r\n            delete this._peerIdAndFactoryIdToPeerType[msg.owner_id + \":\" + factoryId];\r\n        });\r\n    }\r\n\r\n    private forwardActivityTypeMessagesToStatusEventHandlers() {\r\n        this.forwardAddedAndRemovedMessagesToEventHandler<ActivityTypeGwMessage, ActivityType>(\r\n            gwMmessageActivityTypesAdded,\r\n            gwMessageActivityTypesRemoved,\r\n            (msg: ActivityTypeGwMessage, isAdded) => isAdded\r\n                ? msg.types.map((t) => GW3Bridge.activityTypeGwMessageEntityToActivityType(t, undefined))\r\n                : msg.types.map((t) => new ActivityType(t.name, undefined, undefined, undefined)),\r\n            this._activityTypeStatusChangeCallbacks);\r\n\r\n    }\r\n\r\n    private forwardActivityCreatedAndJoinedActivityToActivityWindowEventHandlers() {\r\n        // if we're created as part of this activity, the JOINED ACTIVITY is\r\n\r\n        // the first time we'll hear about it; so let's record the participants\r\n        for (const activityCreatedMessage of [gwMessageActivityCreated, gwMessageJoinedActivity, gwMessageOwnerChanged]) {\r\n            this.forwardMessageToEventHandler<ActivityGwMessage, ActivityWindow>(\r\n                activityCreatedMessage,\r\n                (msg) =>\r\n                    ([msg.owner || { ...msg, type: msg.peer_type, name: msg.peer_name, peer_id: msg.owner_id }])\r\n                        .concat(msg.participants || [])\r\n                        .map((info: any) => new ActivityWindow(info.peer_id, info.name, info.type, msg.activity_id, this.getAgmInstance(info.peer_id), undefined, this.generateWindowGetter(info.peer_id), undefined)),\r\n                (ent, msg) => new EntityEvent<ActivityWindow>(ent, new EntityEventContext(EntityEventType.ActivityWindowJoinedActivity)),\r\n                this._activityWindowChangeCallbacks);\r\n        }\r\n    }\r\n\r\n    private forwardActivityMessagesToStatusEventHandlers() {\r\n\r\n        // see dot-net-activity\\Activity\\ActivityState.cs\r\n\r\n        for (const createdMessage of [gwMessageActivityCreated, gwMessageJoinedActivity]) {\r\n            this.forwardMessageToEventHandler<ActivityGwMessage, Activity>(\r\n                createdMessage,\r\n                (msg) => [GW3Bridge.activityGwMessageToActivity(msg, new ActivityStatus(\"started\", \"\", new Date()))],\r\n                (ent, msg) => GW3Bridge.activityToActivityStatusChangeEvent(ent),\r\n                this._activityChangeCallbacks);\r\n        }\r\n\r\n        this.forwardMessageToEventHandler<ActivityGwMessage, Activity>(\r\n            gwMessageActivityDestroyed,\r\n            (msg) => [GW3Bridge.activityGwMessageToActivity(msg, new ActivityStatus(\"destroyed\", msg.reason, new Date()))],\r\n            (ent, msg) => GW3Bridge.activityToActivityStatusChangeEvent(ent),\r\n            this._activityChangeCallbacks);\r\n\r\n        this.forwardMessageToEventHandler<ActivityGwMessage, Activity>(\r\n            gwMessageActivityInitiated,\r\n            (msg) => [GW3Bridge.activityGwMessageToActivity(msg, new ActivityStatus(\"created\", \"\", new Date()))],\r\n            (ent, msg) => GW3Bridge.activityToActivityStatusChangeEvent(ent),\r\n            this._activityChangeCallbacks);\r\n\r\n        this.forwardMessageToEventHandler<ActivityGwMessage, Activity>(\r\n            gwMessageOwnerChanged,\r\n            (msg) => [GW3Bridge.activityGwMessageToActivity(msg, new ActivityStatus(\"created\", \"\", new Date()))],\r\n            (ent, msg) => GW3Bridge.activityToActivityStatusChangeEvent(ent),\r\n            this._activityChangeCallbacks);\r\n    }\r\n\r\n    private forwardPeerFactoryMessagesToStatusEventHandlers() {\r\n        this.forwardAddedAndRemovedMessagesToEventHandler<PeerFactoryGwMessage, WindowType>(\r\n            gwMessagePeerFactoriesAdded,\r\n            gwMessagePeerFactoriesRemoved,\r\n            (msg: PeerFactoryGwMessage, isAdded: boolean) => isAdded\r\n                ? msg.factories.map(GW3Bridge.peerFactoryGwMessageEntityToWindowType)\r\n                : msg.factory_ids.map((id) => this.peerFactoryIdAndOwnerIdToWindowType(id, msg.owner_id)).filter((x) => x != null),\r\n            this._windowTypeStatusChangeCallbacks);\r\n    }\r\n\r\n    private forwardPeerFactoryMessagesToPeerFactoryRequests() {\r\n        this.subscribe(\r\n            gwMessagePeerRequested,\r\n            (msg: PeerRequestedGwMessage) => {\r\n                const factory = this._peerFactoriesRegisteredByUs[msg.peer_factory];\r\n                if (!factory) {\r\n                    this._gw3Session.send(\r\n                        {\r\n                            type: gwMmessageError,\r\n                            request_id: msg.request_id,\r\n                            reason: `Unknown peer factory ${msg.peer_factory}`\r\n                        });\r\n                    return;\r\n                }\r\n\r\n                try {\r\n                    const configuration = msg.configuration || {};\r\n                    // NB: peer factories (or whoever they're delegating to) need to support whatever activity\r\n                    // environment (GW3, HC) we're targeting when they're creating peers\r\n                    // the manager is env agnostic, the bridge will augment the configuration with whatever's required\r\n\r\n                    // NB: also, since peers are requested in two ways (single peer with just its configuration,\r\n                    // or peer created as part of new activity, where the factory receives the aggregate config of\r\n                    // all peers, combined from ADD ACTIVITY TYPE and CREATE ACTIVITY), the peer factories need to\r\n                    // be able to handle both configuration structures intelligently.\r\n                    configuration.gateway_token = configuration.gateway_token || msg.gateway_token;\r\n                    configuration.peer_factory = configuration.peer_factory || msg.peer_factory;\r\n                    const promise = factory({\r\n                        activityId: msg.activity && msg.activity.id,\r\n                        activityType: msg.activity && msg.activity.type,\r\n                        type: msg.configuration && msg.configuration.type,\r\n                        gwToken: configuration.gateway_token,\r\n                        configuration\r\n                    });\r\n                    if (promise && promise.then && promise.catch) {\r\n                        promise.catch((err) => this._gw3Session.send(\r\n                            {\r\n                                type: gwMmessageError,\r\n                                request_id: msg.request_id,\r\n                                reason: err && (err.message || JSON.stringify(err))\r\n                            }));\r\n                    }\r\n                } catch (err) {\r\n                    this._gw3Session.send(\r\n                        {\r\n                            type: gwMmessageError,\r\n                            request_id: msg.request_id,\r\n                            reason: err && (err.message || JSON.stringify(err))\r\n                        });\r\n                }\r\n            });\r\n    }\r\n\r\n    private forwardActivityWindowMessagesToEventHandlers() {\r\n        for (const joinedMessage of [gwMessageActivityJoined, gwMessageJoinedActivity]) {\r\n            this.subscribe(joinedMessage,\r\n                (msg: any) => {\r\n                    const joinedId = (joinedMessage === gwMessageActivityJoined) ? msg.joined_id : msg.peer_id;\r\n                    const joinedType = (joinedMessage === gwMessageActivityJoined) ? msg.joined_type : msg.peer_type;\r\n                    const joinedName = (joinedMessage === gwMessageActivityJoined) ? msg.joined_name : msg.peer_name;\r\n\r\n                    const entity = new ActivityWindow(\r\n                        joinedId,\r\n                        joinedName,\r\n                        joinedType /* for ACTIVITY JOINED */,\r\n                        msg.activity_id,\r\n                        this.getAgmInstance(joinedId),\r\n                        undefined,\r\n                        this.generateWindowGetter(joinedId),\r\n                        undefined);\r\n\r\n                    // TODO review - what if it's our activity, do we\r\n                    // even need to subscribe\r\n                    if (!this._contextSubscriptions[msg.activity_id]) {\r\n                        this.subscribeToContext(msg).then(() => {\r\n                            if (joinedMessage === gwMessageJoinedActivity) {\r\n                                this._activityJoinedPromiseResolve({});\r\n                            }\r\n                        });\r\n                    } else if (joinedMessage === gwMessageJoinedActivity) {\r\n                        this._activityJoinedPromiseResolve({});\r\n                    }\r\n\r\n                    // TODO review: we might have the context data here already\r\n                    // why not update it here instead of waiting for subscribeToContext\r\n                    this.invokeCallbacks(\r\n                        this._activityWindowChangeCallbacks,\r\n                        new EntityEvent<ActivityWindow>(\r\n                            entity,\r\n                            new EntityEventContext(EntityEventType.ActivityWindowJoinedActivity)),\r\n                        joinedMessage);\r\n\r\n                });\r\n        }\r\n\r\n        this.subscribe(\r\n            gwMessageActivityLeft,\r\n            (msg: any) => {\r\n                const entity = new ActivityWindow(\r\n                    msg.left_id,\r\n                    undefined,\r\n                    undefined,\r\n                    null,\r\n                    this.getAgmInstance(msg.left_id),\r\n                    undefined,\r\n                    this.generateWindowGetter(msg.left_id),\r\n                    undefined);\r\n\r\n                this.invokeCallbacks(\r\n                    this._activityWindowChangeCallbacks,\r\n                    new EntityEvent<ActivityWindow>(\r\n                        entity,\r\n                        new EntityEventContext(EntityEventType.ActivityWindowLeftActivity)),\r\n                    gwMessageActivityLeft);\r\n            });\r\n\r\n        this.forwardAddedAndRemovedMessagesToEventHandler<PeerCreatedGwMessage, ActivityWindow>(\r\n            gwMessagePeerCreated,\r\n            undefined,\r\n            (msg) => [\r\n                new ActivityWindow(\r\n                    msg.created_id,\r\n                    undefined /* #deleteme TODO: review - we should know the name if any */,\r\n                    undefined /* #deleteme TODO: review - we should know the type */,\r\n                    undefined,\r\n                    undefined,\r\n                    undefined,\r\n                    this.generateWindowGetter(msg.created_id),\r\n                    undefined)],\r\n            this._activityWindowChangeCallbacks);\r\n    }\r\n\r\n    private getAgmInstance(id: string): Glue42.AGM.Instance {\r\n        return this._config.agm.servers().find((s) => s.peerId === id || s.windowId === id);\r\n    }\r\n\r\n    private generateWindowGetter(peerId: string): () => Glue42.Windows.GDWindow {\r\n        return () => {\r\n            const server = this.getAgmInstance(peerId);\r\n            if (!server) {\r\n                return;\r\n            }\r\n            const windowId = server.windowId;\r\n            return this._config.windows.list().filter((w) => w.id === windowId)[0];\r\n        };\r\n    }\r\n\r\n    private isOverrideTypeDefinition(value: OverrideTypeDefinition | WindowDefinition[]): value is OverrideTypeDefinition {\r\n        if (typeof value === \"undefined\") {\r\n            return false;\r\n        }\r\n        if ((value as OverrideTypeDefinition).owner) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n}\r\n","import { EntityEventType } from \"./../contracts/entityEvent\";\r\nimport Activity from \"./../entities/activity\";\r\nimport ActivityWindow from \"./../entities/activityWindow\";\r\n\r\nimport ActivityManager from \"./../core/activityManager\";\r\nimport { Logger } from \"./../helpers/logger\";\r\nimport * as util from \"./../helpers/util\";\r\n\r\nimport { WindowDefinition } from \"./../entities/windowDefinition\";\r\nimport { CloneOptions } from \"../entities/cloneOptions\";\r\nimport { Callback } from \"../contracts/contracts\";\r\nimport { AttachedActivityDescriptor } from \"../entities/attachedActivityDescriptor\";\r\nimport { Glue42 } from \"../../../glue\";\r\n\r\nexport interface My {\r\n\r\n  activity: Activity;\r\n\r\n  window: ActivityWindow;\r\n\r\n  context: object;\r\n\r\n  updateContext(context: object, callback?: any): Promise<object>;\r\n\r\n  setContext(context: object, callback?: any): Promise<object>;\r\n\r\n  onActivityJoined(callback: (activity: Activity) => void): void;\r\n\r\n  onActivityLeft(callback: (activity: Activity) => void): void;\r\n\r\n  onContextChanged(callback: (context: object, delta: object, removed: string[], activity: Activity) => void): void;\r\n\r\n  clone(options: CloneOptions, callback: Callback<Activity>): Promise<Activity>;\r\n\r\n  attach(activity: Activity | string, tag?: object): Promise<AttachedActivityDescriptor>;\r\n\r\n  setFrameColor(color: string, callback: () => void): Promise<Activity>;\r\n\r\n  getFrameColor(): string;\r\n\r\n  onFrameColorChanged(callback: () => void): void;\r\n}\r\n\r\n/**\r\n * A lightweight, single activity oriented subset of the API which should be used by most activity applications.\r\n * Provides access to the activity of your application (my.activity) and shortcuts to the most commonly used methods\r\n * (e.g. my.createWindow is a shortcut for my.activity.createWindow)\r\n *\r\n * @module my\r\n */\r\nexport default class ActivityMy implements My {\r\n\r\n  public _myAttached: Array<(state: AttachedActivityDescriptor) => void> = [];\r\n  public _myDetached: Array<(state: AttachedActivityDescriptor) => void> = [];\r\n  public _myAttachedTo: Array<(activity: Activity, state: AttachedActivityDescriptor) => void> = [];\r\n  public _myDetachedFrom: Array<(detached: Activity, existing: Activity, state: AttachedActivityDescriptor) => void> = [];\r\n  public _myActivityFrameColorChanged: Array<(frameColor: string) => void> = [];\r\n  public _myActivityJoinedCallbacks: Array<(activity: Activity, event: any) => void> = [];\r\n  public _myActivityRemovedCallbacks: Array<(activity: Activity, event: any) => void> = [];\r\n  public _myContextUpdateCallbacks: Array<(context: object, delta: object, removed: string[], activity: Activity) => void> = [];\r\n  public _w: ActivityWindow;\r\n  public _m: ActivityManager;\r\n  public _logger: Logger = Logger.Get(this);\r\n\r\n  constructor(manager: ActivityManager, windows: any) {\r\n    this._m = manager;\r\n    manager.ready()\r\n      .then((am) => {\r\n        // Subscribe for events for driving \"my\" logic\r\n        am.subscribeActivityContextChanged(this._subscribeMyContextChanged.bind(this));\r\n        am.subscribeWindowEvents(this._subscribeMyWindowEvent.bind(this));\r\n        am.subscribeActivitiesAttached(this._subscribeActivitiesAttached.bind(this));\r\n        am.subscribeActivitiesDetached(this._subscribeActivitiesDetached.bind(this));\r\n        if (windows) {\r\n          windows.onWindowFrameColorChanged(this._subscribeWindowFrameColorChanged.bind(this));\r\n        }\r\n      });\r\n  }\r\n\r\n  /**\r\n   * The current activity window; can be undefined (if the window is not part of any activity)\r\n   *\r\n   * @var {Window} window\r\n   */\r\n  public get window(): ActivityWindow {\r\n    if (util.isUndefinedOrNull(this._w)) {\r\n      const announcedWindows = this._m.announcedWindows;\r\n      if (announcedWindows.length > 0) {\r\n        this._w = announcedWindows[0];\r\n      }\r\n    }\r\n    return this._w;\r\n  }\r\n\r\n  /**\r\n   * The current activity that the application participates in.\r\n   * Can be undefined (if currently not part of any activity)\r\n   *\r\n   * @var {module:activity} activity\r\n   */\r\n  public get activity(): Activity {\r\n    const myWin = this.window;\r\n    if (util.isUndefinedOrNull(myWin)) {\r\n      return undefined;\r\n    }\r\n    return myWin.activity;\r\n  }\r\n\r\n  /**\r\n   * Creates a new window and joins it to the activity\r\n   *\r\n   * @function createWindow\r\n   * @param {string| windowDefinition} windowType The type of the window to be created\r\n   * @returns {Promise<module:activityWindow>}\r\n   */\r\n  public createWindow(windowType: string | WindowDefinition): Promise<ActivityWindow> {\r\n    return this._m.createWindow(this.activity, windowType);\r\n  }\r\n\r\n  /**\r\n   * Creates a stacked set of windows and joins them to the\r\n   *\r\n   * @function createStackedWindows\r\n   * @param {string[] | windowDefinition[]} windowTypes The types of the windows to be created\r\n   * @param {number} timeout\r\n   * @returns {Promise<module:activityWindow[]>}\r\n   */\r\n  public createStackedWindows(windowTypes: Array<string | WindowDefinition>, timeout?: number): Promise<ActivityWindow[]> {\r\n    return this._m.createStackedWindows(this.activity, windowTypes, timeout);\r\n  }\r\n\r\n  /**\r\n   * The current activity context. To update use my.updateContext, to replace my.setContext\r\n   *\r\n   * @var {object} context\r\n   */\r\n  public get context(): object {\r\n    const activity = this.activity;\r\n    if (util.isUndefined(activity)) {\r\n      return {};\r\n    }\r\n\r\n    return activity.context;\r\n  }\r\n\r\n  /**\r\n   * Updates activity context using the properties from the context argument.\r\n   * If old context is {a:1, b:2, c:3} and invoking updateContext({b:3, c:null}) will result a context\r\n   * be {a:1, b:3}\r\n   *\r\n   * @function updateContext\r\n   * @param {object} context\r\n   * @return {Promise<object>}\r\n   */\r\n  public updateContext(context: object, callback?: any): Promise<object> {\r\n    const activity = this.activity;\r\n    if (util.isUndefined(activity)) {\r\n      return new Promise<object>((resolve, reject) => {\r\n        reject(\"Not in activity\");\r\n      });\r\n    }\r\n\r\n    return activity.updateContext(context, callback);\r\n  }\r\n\r\n  /**\r\n   * Replaces the activity context with a new one.\r\n   *\r\n   * @function setContext\r\n   * @param {object} context   The new context\r\n   * @returns {Promise<Object>}\r\n   */\r\n  public setContext(context: object, callback?: any): Promise<object> {\r\n    const activity = this.activity;\r\n    if (util.isUndefined(activity)) {\r\n      return new Promise((resolve, reject) => {\r\n        reject(\"Not in activity\");\r\n      });\r\n    }\r\n\r\n    return activity.setContext(context, callback);\r\n  }\r\n\r\n  public onActivityJoined(callback: (activity: Activity) => void) {\r\n    this._myActivityJoinedCallbacks.push(callback);\r\n\r\n    // replay joined event\r\n    const myWin = this.window;\r\n    if (!util.isUndefinedOrNull(myWin) && !util.isUndefinedOrNull(myWin.activity)) {\r\n      callback(myWin.activity);\r\n    }\r\n  }\r\n\r\n  public onActivityLeft(callback: (activity: Activity) => void) {\r\n    this._myActivityRemovedCallbacks.push(callback);\r\n  }\r\n\r\n  /**\r\n   * Subscribe for context updates\r\n   *\r\n   * @function onContextChanged\r\n   * @param {contextChangedHandler} callback Handler function that will receive context related events\r\n   */\r\n  public onContextChanged(callback: (context: object, delta: object, removed: string[], activity: Activity) => void) {\r\n    this._myContextUpdateCallbacks.push(callback);\r\n\r\n    // publish initial event\r\n    const myWin = this.window;\r\n    if (util.isUndefinedOrNull(myWin)) {\r\n      return;\r\n    }\r\n\r\n    const activity = myWin.activity;\r\n    if (util.isUndefinedOrNull(activity)) {\r\n      return;\r\n    }\r\n\r\n    // NB: either the callback is added before the activity is recorded in the API, or\r\n    // the activity is recorded before the callback\r\n    // in the former case, when the activity is seen, the callback will be invoked in _notifyMyContextChanged\r\n    // in the latter, the callback will be invoked here\r\n    // in both cases, the callback will be invoked at least once as soon as an activity is recorded\r\n\r\n    // see \"long analysis for callback behavior in GW3: several cases\" for full explanation\r\n\r\n    callback(activity.context, activity.context, [], activity);\r\n  }\r\n\r\n  public clone(options: CloneOptions, callback: Callback<Activity>): Promise<Activity> {\r\n    const act = this.activity;\r\n    return this._m.clone(act, options, callback);\r\n  }\r\n\r\n  public attach(activity: Activity | string, tag?: object): Promise<AttachedActivityDescriptor> {\r\n    let activityId: string;\r\n    if (typeof activity === \"string\") {\r\n      activityId = activity;\r\n    } else {\r\n      activityId = activity.id;\r\n    }\r\n    return this._m.attachActivities(activityId, this.activity.id, tag);\r\n  }\r\n\r\n  public onActivityAttached(callback: (state: AttachedActivityDescriptor) => void) {\r\n    this._myAttached.push(callback);\r\n  }\r\n\r\n  public onActivityDetached(callback: (state: AttachedActivityDescriptor) => void) {\r\n    this._myDetached.push(callback);\r\n  }\r\n\r\n  public onAttachedToActivity(callback: (activity: Activity, state: AttachedActivityDescriptor) => void) {\r\n    this._myAttachedTo.push(callback);\r\n  }\r\n\r\n  public onDetachedFromActivity(callback: (detached: Activity, existing: Activity, state: AttachedActivityDescriptor) => void)  {\r\n    this._myDetachedFrom.push(callback);\r\n  }\r\n\r\n  public get attached() {\r\n    if (!this.activity) {\r\n      return [];\r\n    }\r\n\r\n    return this.activity.attached;\r\n  }\r\n\r\n  public setFrameColor(color: string, callback: () => void): Promise<Activity> {\r\n\r\n    if (this.activity) {\r\n      return this.activity.setFrameColor(color, callback);\r\n    } else {\r\n      return Promise.resolve(null);\r\n    }\r\n  }\r\n\r\n  public getFrameColor(): string {\r\n\r\n    if (this.activity) {\r\n      return this.activity.getFrameColor();\r\n    }\r\n\r\n    return \"\";\r\n  }\r\n\r\n  public onFrameColorChanged(callback: () => void) {\r\n    this._myActivityFrameColorChanged.push(callback);\r\n  }\r\n\r\n  private _subscribeMyContextChanged(activity: Activity, context: object, delta: object, removed: string[]) {\r\n    const myWin = this.window;\r\n    if (util.isUndefinedOrNull(myWin)) {\r\n      return;\r\n    }\r\n\r\n    const myActivity = myWin.activity;\r\n    if (util.isUndefinedOrNull(myActivity)) {\r\n      return;\r\n    }\r\n\r\n    // ignore events not related to my activity\r\n    if (activity.id !== myActivity.id) {\r\n      return;\r\n    }\r\n\r\n    this._notifyMyContextChanged(activity, context, delta, removed);\r\n  }\r\n\r\n  private _subscribeMyWindowEvent(activity: Activity, window: ActivityWindow, event: any) {\r\n\r\n    if (util.isUndefinedOrNull(this.window)) {\r\n      return;\r\n    }\r\n\r\n    // ignore events not related to my window\r\n    if (this.window.id !== window.id) {\r\n      return;\r\n    }\r\n\r\n    if (event === EntityEventType.ActivityWindowJoinedActivity) {\r\n      this._notifyMyWindowEvent(activity, this._myActivityJoinedCallbacks);\r\n\r\n      // NB: tick42-contexts doesn't raise automatically an update event on join if the snapshot matches\r\n      // the currently recorded data\r\n      // revisited: however, it is pushing an update on subscribe() (which is performed by js-activity)\r\n      // long analysis for callback behavior in GW3: several cases\r\n      // 1 client calls onContextChanged before joined-activity arrives\r\n      // then callback is pushed but onContextChanged callback call is skipped\r\n      //    1-1 js-activity handles joined-activity first; it calls js-context subscribe\r\n      //    1-1-1 js-context has not seen the activity so far so it doesn't invoke an update\r\n      //    however, js-context then handles joined-activity and raises an update\r\n      //    1-1-2 js-context has seen the activity, so it raises an update\r\n      //    js-context then handles joined-activity and doesn't raise a second update unless the received snapshot is\r\n      //    different from the last seen context value (can this even happen?)\r\n      //    1-2 js-context handles joined-activity first\r\n      //    since js-activity is not subscribed, whether it raises an update or not, it's not propagated\r\n      //    js-activity then handles joined-activity, performs a subscribe and js-context raises an update\r\n      // 2 joined-activity arrives, whatever updates are raised by js-activity's subscribe() or js-context's\r\n      // message handler are not propagated since the callback is not pushed, client then calls onContextChanged,\r\n      // and the callback is called inside that\r\n      // also, the callback cannot be invoked first in 1 then 2 or first 2 then 1\r\n      // => in all cases, a callback is called exactly once as soon as (it's subscribed && the activity is joined)\r\n      // (in 1-1-2 it *might* be possible to be called twice, first with a slightly out of date context,\r\n      // then with the joined-activity snapshot, see \"different from the last seen context value\", but it's unlikely,\r\n      // and not a real issue anyway)\r\n      // in the HC case, however, case 1 doesn't work since js-context doesn't raise updates on subscribe() nor\r\n      // joining the activity (#deleteme TODO LATER MINOR: verify), so we need to raise it ourselves\r\n\r\n      // 2017-09-08: final revisit (@vnikolov)\r\n      // since SBGW_D-163 allows automatic subscription to contexts of pre-existing activities, 1-1-2 no longer works\r\n      // (we might have already seen the latest state before joined-activity so no update will be raised)\r\n      // for this reason I'm invoking notifyMyContextChanged unconditionally - so we might have multiple\r\n      // invocations; if this turns into a problem we might add a guard inside notifyMyContextChanged that\r\n      // checks we're not raising it twice with the same context value\r\n      //\r\n      // we might also get a duplicate raise if the sender of an update is also subscribed to the context\r\n      // if (this._m.usingHc) {\r\n      this._notifyMyContextChanged(activity, activity.context, null, null);\r\n      // }\r\n\r\n      // #deleteme TODO LATER MAJOR: what about the cases when we're not watching foreign activity contexts?\r\n    } else if (event === EntityEventType.ActivityWindowLeftActivity) {\r\n      this._notifyMyWindowEvent(activity, this._myActivityRemovedCallbacks);\r\n      // #deleteme TODO LATER MINOR: should we send null update here?\r\n    }\r\n  }\r\n\r\n  private _notifyMyWindowEvent(activity: Activity, callbackStore: Array<(activity: Activity, event: any) => void>) {\r\n    callbackStore.forEach((element) => {\r\n      try {\r\n        element(activity, event);\r\n      } catch (e) {\r\n        this._logger.warn(\"error in user callback \" + e);\r\n      }\r\n    });\r\n  }\r\n\r\n  private _notifyMyContextChanged(activity: Activity, context: object, delta?: object, removed?: string[]) {\r\n    delta = delta || {};\r\n    removed = removed || [];\r\n\r\n    this._myContextUpdateCallbacks.forEach( (element) => {\r\n      try {\r\n        element(context, delta, removed, activity);\r\n      } catch (e) {\r\n        this._logger.warn(\"error in user callback \" + e);\r\n      }\r\n    });\r\n  }\r\n\r\n  private _notifyAttached(state: AttachedActivityDescriptor) {\r\n\r\n    this._myAttached.forEach((cb) => {\r\n      try {\r\n        cb(state);\r\n      } catch (e) {\r\n        this._logger.warn(\"error in user callback \" + e);\r\n      }\r\n    });\r\n  }\r\n\r\n  private _notifyDetached(state: AttachedActivityDescriptor) {\r\n\r\n    this._myDetached.forEach((cb) => {\r\n      try {\r\n        cb(state);\r\n      } catch (e) {\r\n        this._logger.warn(\"error in user callback \" + e);\r\n      }\r\n    });\r\n  }\r\n\r\n  private _notifyAttachedTo(state: AttachedActivityDescriptor) {\r\n\r\n    this._myAttachedTo.forEach((cb) => {\r\n      try {\r\n        cb(this.activity, state);\r\n      } catch (e) {\r\n        this._logger.warn(\"error in user callback \" + e);\r\n      }\r\n    });\r\n  }\r\n\r\n  private _notifyDetachedFrom(detached: Activity, existing: Activity, state: AttachedActivityDescriptor) {\r\n\r\n    this._myDetachedFrom.forEach((cb) => {\r\n      try {\r\n        cb(detached, existing, state);\r\n      } catch (e) {\r\n        this._logger.warn(\"error in user callback \" + e);\r\n      }\r\n    });\r\n  }\r\n\r\n  private _subscribeActivitiesAttached(newAct: Activity, state: AttachedActivityDescriptor) {\r\n    const myWin = this.window;\r\n    if (util.isUndefinedOrNull(myWin)) {\r\n      return;\r\n    }\r\n\r\n    const myActivity = myWin.activity;\r\n    if (util.isUndefinedOrNull(myActivity)) {\r\n      return;\r\n    }\r\n\r\n    // ignore events not related to my activity\r\n    if (newAct.id !== myActivity.id) {\r\n      return;\r\n    }\r\n\r\n    if (state.windowIds.indexOf(myWin.id) >= 0) {\r\n      this._notifyAttachedTo(state);\r\n      return;\r\n    }\r\n\r\n    this._notifyAttached(state);\r\n  }\r\n\r\n  private _subscribeActivitiesDetached(newAct: Activity, oldAct: Activity, state: any) {\r\n    const myWin = this.window;\r\n    if (util.isUndefinedOrNull(myWin)) {\r\n      return;\r\n    }\r\n\r\n    const myActivity = myWin.activity;\r\n    if (util.isUndefinedOrNull(myActivity)) {\r\n      return;\r\n    }\r\n\r\n    // ignore events not related to my activity\r\n    if (oldAct.id === myActivity.id) {\r\n      this._notifyDetached(state);\r\n    }\r\n\r\n    if (newAct.id === myActivity.id) {\r\n      this._notifyDetachedFrom(newAct, oldAct, state);\r\n    }\r\n  }\r\n\r\n  private _subscribeWindowFrameColorChanged(window: Glue42.Windows.GDWindow) {\r\n    const act = this.activity;\r\n    if (!act) {\r\n      return;\r\n    }\r\n\r\n    if (!act.owner) {\r\n      return;\r\n    }\r\n\r\n    if (act.owner.underlyingWindow.id === window.id) {\r\n      this._myActivityFrameColorChanged.forEach((callback) => {\r\n        callback(window.frameColor);\r\n      });\r\n    }\r\n  }\r\n}\r\n","import {Logger} from \"./logger\";\r\nimport * as util from \"../helpers/util\";\r\n/**\r\n * Class that can be used as a marker for successful completion of a set of events\r\n * @private\r\n * @module readyMarker\r\n */\r\nexport class ReadyMarker {\r\n  private _callbacks: Array<(err: any) => void>;\r\n  private _signals: number;\r\n  private _error: any;\r\n  private _logger: Logger;\r\n  private _name: string;\r\n\r\n  /**\r\n   * Creates new marker\r\n   * @param name Name of the marker, useful in logging\r\n   * @param signalsToWait Number of signals(events) that needs to be signaled (completed) before the marker is set as completed\r\n   */\r\n  constructor(name: string, signalsToWait: number) {\r\n    this._logger = Logger.Get(\"ReadyMarker [\" + name + \"]\");\r\n    this._logger.debug(\"Initializing ready marker for '\" + name + \"' with \" + signalsToWait + \" signals to wait\");\r\n    if (signalsToWait <= 0) {\r\n      throw new Error(\"Invalid signal number. Should be > 0\");\r\n    }\r\n    this._signals = signalsToWait;\r\n    this._callbacks = [];\r\n    this._name = name;\r\n  }\r\n\r\n  /**\r\n   * Adds a new callback that will be notified when the events are completed (success) or some error happened\r\n   */\r\n  public setCallback(callback: (err: any) => void) {\r\n    if (this.isSet()) {\r\n      callback(undefined);\r\n      return;\r\n    } else if (this.isError()) {\r\n      callback(this._error);\r\n      return;\r\n    }\r\n    this._callbacks.push(callback);\r\n  }\r\n\r\n  /**\r\n   * Signals for a completion of an event. If this is the last event success callbacks will be called\r\n   */\r\n  public signal(message?: string) {\r\n    this._logger.debug(\"Signaled - \" + message + \" - signals left \" + (this._signals - 1));\r\n    this._signals--;\r\n    if (this._signals < 0) {\r\n      throw new Error(\"Error in ready marker '\" + this._name + \" - signals are \" + this._signals);\r\n    }\r\n\r\n    if (this.isSet()) {\r\n      this._callbacks.forEach((callback) => {\r\n        callback(undefined);\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Signals for an error in some of the events. This will notify all callbacks that the marker has failed\r\n   */\r\n  public error(error: string) {\r\n    this._error = error;\r\n    this._callbacks.forEach((errorCallback) => {\r\n      errorCallback(error);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Checks if the marker is set (completed)\r\n   */\r\n  public isSet() {\r\n    if (this.isError()) {\r\n      return false;\r\n    }\r\n    return this._signals === 0;\r\n  }\r\n\r\n  /**\r\n   * Checks if the marker has failed (some of the events has failed)\r\n   */\r\n  public isError() {\r\n    return !util.isUndefined(this._error);\r\n  }\r\n\r\n  /**\r\n   * Returns the last reported error (undefined if no error)\r\n   */\r\n  public getError() {\r\n    return this._error;\r\n  }\r\n}\r\n","import ActivityEntity from \"../entities/activityEntity\";\r\nimport {\r\n  ActivityStatusChangeEventContext,\r\n  EntityEvent,\r\n  EntityEventContext,\r\n  EntityEventType\r\n} from \"../contracts/entityEvent\";\r\nimport Activity from \"../entities/activity\";\r\nimport ActivityWindow from \"../entities/activityWindow\";\r\nimport { ActivityState } from \"..//contracts/entityEvent\";\r\n\r\ndeclare const htmlContainer: any;\r\n\r\n/**\r\n * Collection of ActivityEntities that provides change notifications\r\n * @module entityCollection\r\n * @private\r\n */\r\nexport class EntityObservableCollection<T extends ActivityEntity> {\r\n\r\n  private _items: { [key: string]: T } = {};\r\n  private _listeners: Array<(item: T, action: EntityEventContext) => void> = [];\r\n  private _processNew: (entity: T) => void;\r\n\r\n  constructor(processNew: (entity: T) => void) {\r\n    this._processNew = processNew;\r\n  }\r\n\r\n  /**\r\n   * Adds one item to the collection\r\n   */\r\n  public addOne(item: T) {\r\n    this.add([item]);\r\n  }\r\n\r\n  /**\r\n   * Adds an array of items to the collection\r\n   */\r\n  public add(items: T[]) {\r\n    items.forEach((element) => {\r\n      this.process(new EntityEvent<T>(element, new EntityEventContext(EntityEventType.Added)));\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Process existing EntityEvent\r\n   */\r\n  public process(event: EntityEvent<T>): T {\r\n\r\n    const context = event.context;\r\n    const type = context.type;\r\n    const entity = event.entity;\r\n\r\n    // here we're populating some data which particular implementations (e.g.\r\n    // GW3) can't provide\r\n\r\n    // TODO: extract these cases into external filters\r\n\r\n    // activity status change without old status?\r\n    // grab it from the existing entity\r\n    if (type === EntityEventType.StatusChange &&\r\n      !(context as ActivityStatusChangeEventContext).oldStatus) {\r\n      const act = this._items[entity.id] as any as Activity;\r\n      if (act) {\r\n        (context as ActivityStatusChangeEventContext).oldStatus = act.status;\r\n      }\r\n    }\r\n\r\n    // the GW3 bridge notifies us of possible status changes (it's mostly stateless so\r\n    // it can't/doesn't distinguish between JOINED ACTIVITY for an activity we already\r\n    // know about vs a brand new activity. for this reason, we just coalesce status\r\n    // updates which indicate the same state.\r\n    if (type === EntityEventType.StatusChange &&\r\n      (context as ActivityStatusChangeEventContext).oldStatus &&\r\n      (context as ActivityStatusChangeEventContext).newStatus &&\r\n      (context as ActivityStatusChangeEventContext).oldStatus.state ===\r\n      (context as ActivityStatusChangeEventContext).newStatus.state) {\r\n      context.type = EntityEventType.Updated;\r\n    }\r\n\r\n    // GW3: coalesce multiple joined/left events\r\n\r\n    if (typeof htmlContainer === \"undefined\") {\r\n      if (type === EntityEventType.ActivityWindowJoinedActivity &&\r\n        this._items[entity.id] &&\r\n        (this._items[entity.id] as any as ActivityWindow).activity) {\r\n        context.type = EntityEventType.Updated;\r\n      }\r\n      if (type === EntityEventType.ActivityWindowLeftActivity &&\r\n        this._items[entity.id] &&\r\n        !(this._items[entity.id] as any as ActivityWindow).activity) {\r\n        context.type = EntityEventType.Updated;\r\n      }\r\n    }\r\n\r\n    // update internal collections (adding the entity or updating existing entity). From that\r\n    // point start using the internalEntity\r\n    // NB: undefined properties are coalesced, null properties represent removals\r\n    const internalEntity = this._updateInternalCollections(entity, type, context);\r\n    this._notifyListeners(internalEntity, context);\r\n    return internalEntity;\r\n  }\r\n\r\n  /**\r\n   * Gets all items from the collection.\r\n   */\r\n  public get(): T[] {\r\n    const result = [];\r\n    for (const key in this._items) {\r\n      if (this._items.hasOwnProperty(key)) {\r\n        const element = this._items[key];\r\n        result.push(element);\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Gets item by name/id\r\n   * @param name  Name/id of the item to get\r\n   * @returns     Item if found; undefined if not\r\n   */\r\n  public getByName(name: string) {\r\n    // this does not work for some reason\r\n    // return this._items[name];\r\n    for (const key in this._items) {\r\n      if (key === name) {\r\n        return this._items[key];\r\n      }\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  /**\r\n   * Gets a item if in the collection or waits for it to appear\r\n   * @param name\r\n   * @returns {Promise<T>}\r\n   */\r\n  public getOrWait(name: string): Promise<T> {\r\n    return new Promise<T>((resolve) => {\r\n      const entityAddedHandler = (entity: T) => {\r\n        if (entity.id !== name) {\r\n          return;\r\n        }\r\n        resolve(entity);\r\n        this.unsubscribe(entityAddedHandler);\r\n      };\r\n      this.subscribe(entityAddedHandler);\r\n\r\n      // try to get right away - if not here wait for it to appear\r\n      const window = this.getByName(name);\r\n      if (window) {\r\n        this.unsubscribe(entityAddedHandler);\r\n        resolve(window);\r\n        return;\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Subscribes a listener for changes\r\n   * @param handler Callback for changes\r\n   */\r\n  public subscribe(handler: (act: T, action: EntityEventContext) => void): () => void {\r\n    this._listeners.push(handler);\r\n    // replay existing items for new subscribers\r\n    Object.keys(this._items).forEach((key) => {\r\n      const element = this._items[key];\r\n      handler(element, new EntityEventContext(EntityEventType.Added.toString()));\r\n    });\r\n\r\n    return () => {\r\n      this.unsubscribe(handler);\r\n    };\r\n  }\r\n\r\n  /**\r\n   *  Unsubscribes a listener\r\n   */\r\n  public unsubscribe(handler: (act: T, action: EntityEventContext) => void) {\r\n    const index = this._listeners.indexOf(handler);\r\n    if (index !== -1) {\r\n      this._listeners.splice(index, 1);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Notify all listeners for some event\r\n   */\r\n  private _notifyListeners(entity: T, context: EntityEventContext) {\r\n    this._listeners.forEach((listener) => {\r\n      try {\r\n        listener(entity, context);\r\n      } catch (e) {\r\n        return;\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Update internal collections (usually after some kind of modification event has arrived)\r\n   */\r\n  private _updateInternalCollections(entity: T, type: EntityEventType, context: any) {\r\n    const entityAsAny = (entity as any);\r\n\r\n    // #deleteme TODO: refactor - currently we apply some rules for each type\r\n    const isActivityDestroy =\r\n      (type === EntityEventType.StatusChange &&\r\n        entityAsAny.status &&\r\n        entityAsAny.status.state === ActivityState.Destroyed) ||\r\n      (type === EntityEventType.StatusChange &&\r\n        context &&\r\n        context.newStatus &&\r\n        context.newStatus.state === ActivityState.Destroyed);\r\n\r\n    // #deleteme TODO: verify this stuff\r\n    // windows have two states - removed from activity and closed (TODO: this only works in GD 2.1 and later)\r\n    const isWindowClose = type === EntityEventType.Closed;\r\n    const isTypeRemove = type === EntityEventType.Removed && typeof entityAsAny.isIndependent === \"undefined\";\r\n\r\n    if (isTypeRemove || isWindowClose || isActivityDestroy) {\r\n\r\n      const oldEntity = this._items[entity.id];\r\n      delete this._items[entity.id];\r\n      // on remove return the input entity\r\n      this._processNew(entity);\r\n      if (oldEntity) {\r\n        entity._beforeDelete(oldEntity);\r\n      }\r\n      return entity;\r\n    } else {\r\n      const key = entity.id;\r\n      // if new object add, otherwise clone object properties\r\n      if (!this._items.hasOwnProperty(key)) {\r\n        this._processNew(entity);\r\n        this._items[entity.id] = entity;\r\n      } else {\r\n        this._items[entity.id]._update(entity);\r\n      }\r\n    }\r\n\r\n    return this._items[entity.id];\r\n  }\r\n}\r\n","/* tslint:disable */\r\nimport { ActivityContextUpdateHandler, Callback } from \"../contracts/contracts\";\r\nimport { ActivityStatus } from \"../contracts/activityStatus\";\r\nimport {\r\n  ActivityContextChangedEventContext,\r\n  ActivityStatusChangeEventContext,\r\n  EntityEvent,\r\n  EntityEventContext,\r\n  EntityEventType\r\n} from \"../contracts/entityEvent\";\r\n\r\nimport ActivityType from \"../entities/activityType\";\r\nimport WindowType from \"../entities/windowType\";\r\nimport Activity from \"../entities/activity\";\r\nimport ActivityEntity from \"../entities/activityEntity\";\r\nimport ActivityWindow from \"../entities/activityWindow\";\r\nimport WindowSource from \"../entities/windowSource\";\r\n\r\nimport { nodeify } from \"../helpers/promiseExtensions\";\r\nimport { ReadyMarker } from \"../helpers/readyMarker\";\r\nimport { EntityObservableCollection } from \"../helpers/entityObservableCollection\";\r\nimport { Logger } from \"../helpers/logger\";\r\nimport * as util from \"../helpers/util\";\r\n\r\nimport { ActivityBridge } from \"../bridges/activityBridge\";\r\nimport { WindowDefinition } from \"../entities/windowDefinition\";\r\nimport { WindowBounds } from \"../contracts/windowBounds\";\r\nimport { CloneOptions } from \"../entities/cloneOptions\";\r\nimport { AttachedActivityDescriptor } from \"../entities/attachedActivityDescriptor\";\r\nimport { ActivityDescriptor } from \"../entities/activityDescriptor\";\r\nimport { ActivityState } from \"../contracts/entityEvent\";\r\nimport { WindowFactory } from \"../contracts/windowFactory\";\r\nimport { Glue42 } from \"../../../glue\";\r\n/* tslint:enable */\r\n\r\ntype OverrideTypeDefinition = Glue42.Activities.OverrideTypeDefinition;\r\n\r\ndeclare const htmlContainer: any;\r\n\r\nexport default class ActivityManager {\r\n  private _bridge: ActivityBridge;\r\n  private _readyMarker: ReadyMarker;\r\n  private _dataReadyMarker: ReadyMarker;\r\n  private _descriptorsMarker: ReadyMarker;\r\n\r\n  private _activityTypes: EntityObservableCollection<ActivityType>;\r\n  private _windowTypes: EntityObservableCollection<WindowType>;\r\n  private _activities: EntityObservableCollection<Activity>;\r\n  private _windows: EntityObservableCollection<ActivityWindow>;\r\n  private _logger: Logger = Logger.Get(\"activityManager\");\r\n  private _announcedWindows: ActivityWindow[] = [];\r\n  private _attachedCallbacks: Array<(newAct: any, descriptor: any) => void> = [];\r\n  private _detachedCallbacks: Array<(newAct: any, oldAct: Activity, descriptor: any) => void> = [];\r\n  private _frameColorChangesCallbacks: Array<(act: Activity, frameColor: string) => void> = [];\r\n  private _windowHandlers: any[][] = [];\r\n\r\n  public get usingHc(): boolean {\r\n    return this._bridge.bridgeType === \"HC\";\r\n  }\r\n\r\n  public get announcedWindows(): ActivityWindow[] {\r\n    return this._announcedWindows;\r\n  }\r\n\r\n  public set announcedWindows(v: ActivityWindow[]) {\r\n    throw new Error(\"not allowed\");\r\n  }\r\n\r\n  constructor(bridge: ActivityBridge, autoAnnounce: boolean, windows: any) {\r\n    this._bridge = bridge;\r\n    this._activityTypes = new EntityObservableCollection<ActivityType>((e) => this._grabEntity(e));\r\n    this._windowTypes = new EntityObservableCollection<WindowType>((e) => this._grabEntity(e));\r\n    this._activities = new EntityObservableCollection<Activity>((e) => this._grabEntity(e));\r\n    this._windows = new EntityObservableCollection<ActivityWindow>((e) => this._grabEntity(e));\r\n\r\n    // signals to wait for - get AT, get WT, get Activities and get Windows\r\n    this._dataReadyMarker = new ReadyMarker(\"Activity Manager Data\", [\"GetActivityTypes\", \"GetWindowTypes\", \"GetActivities\", \"GetWindows\"].length);\r\n    this._descriptorsMarker = new ReadyMarker(\"Attached Activities Descriptors\", [\"GetDescriptors\"].length);\r\n\r\n    // waiting for activity data first\r\n\r\n    // NB: in the GW3 case, we don't have the ability to request data at will\r\n    // but need wait for delta messages\r\n    // So GW3Bridge returns empty arrays from the get() calls\r\n    // We're relying on the fact that the GW3 bridge will wait\r\n    // until resolving its .ready()\r\n\r\n    if (autoAnnounce) {\r\n      // if auto announce replace the ready marker, so:\r\n      // 1) wait for data\r\n      // 2) get descriptors\r\n      // 3) announce the current window\r\n\r\n      this._readyMarker = new ReadyMarker(\"Activity Manager Announce\", [\"Announcement\"].length);\r\n      this._dataReadyMarker.setCallback((dataErr: any) => {\r\n        if (dataErr) {\r\n          this._readyMarker.error(dataErr);\r\n        }\r\n\r\n        this._descriptorsMarker.setCallback((err: any) => {\r\n\r\n          if (err) {\r\n            this._readyMarker.error(err);\r\n          }\r\n\r\n          this._logger.debug(\"Auto announcing window\");\r\n          // signal no matter if it failed or not\r\n          this.announceWindow()\r\n            .then((w) => {\r\n              // NB: this creates glue.activities.my.window\r\n              this._announcedWindows.push(w);\r\n              this._readyMarker.signal(\"Successfully announced window with id '\" + w.id + \"'\");\r\n            })\r\n            .catch((errCatch) => {\r\n              this._logger.debug(\"Will not announce window - \" + errCatch);\r\n              this._readyMarker.signal();\r\n            });\r\n        });\r\n\r\n        this.refreshDescriptors();\r\n      });\r\n    } else {\r\n      // TODO: not sure if this still works\r\n      this._readyMarker = this._dataReadyMarker;\r\n    }\r\n\r\n    this._bridge.onActivitiesAttached((e) => {\r\n      this._handleActivitiesAttached(e);\r\n    });\r\n    this._bridge.onActivitiesDetached((e) => {\r\n      this._handleActivitiesDetached(e);\r\n    });\r\n    this._bridge.onActivityAttachedDescriptorsRefreshed((e) => {\r\n      this._handleActivityDescriptorsRefreshed(e);\r\n    });\r\n    if (windows) {\r\n      windows.onWindowFrameColorChanged(this._handleWindowFrameColorChanged.bind(this));\r\n    }\r\n\r\n    // initialize the bridge\r\n    this._bridge.init();\r\n\r\n    // NB: there is no race condition here.\r\n    // Since browser/Node JS is a single-threaded environment, assuming no events on _bridge\r\n    // fire inside .init(), this subscribe will catch anything that comes between it and the init() call\r\n    this._subscribeForData();\r\n\r\n    // NB: in GW3 case, the initial state messages after a JOIN come in before the JOIN's SUCCESS\r\n    // message (see https://confluence.tick42.com:8443/display/TD/Global+Gateway+Domain#GlobalGatewayDomain-JOIN)\r\n    // so the .initReady().then() callback will only get invoked after we've received the initial domain\r\n    // state. We need to be ready to handle events before that, hence the _subscribeForData() above.\r\n    // what's more, our own JOINED ACTIVITY will come only after we've sent our READY, hence waiting\r\n    // for bridge.ready() in the manager's ready()\r\n\r\n    // wait for it to become ready and then start getting/subscribing for data\r\n    this._bridge\r\n      .initReady()\r\n      .then((aw) => {\r\n        this._getInitialData();\r\n      })\r\n      .catch((error) => {\r\n        // tslint:disable-next-line\r\n        console.log(error);\r\n      });\r\n  }\r\n\r\n  public ready(callback?: (err: string, manager: ActivityManager) => void): Promise<ActivityManager> {\r\n    const promise = new Promise<ActivityManager>((resolve, reject) => {\r\n      this._readyMarker.setCallback(\r\n        (err) => {\r\n          if (!err) {\r\n            resolve(this);\r\n          } else {\r\n            reject(this._readyMarker.getError());\r\n          }\r\n        });\r\n    });\r\n\r\n    return nodeify(Promise.all([this._bridge.ready(), promise]).then(() => this), callback);\r\n  }\r\n\r\n  /**\r\n   * @returns All known activity types\r\n   */\r\n  public getActivityTypes(): ActivityType[] {\r\n    return this._activityTypes.get();\r\n  }\r\n\r\n  /**\r\n   * Gets ActivityType by name\r\n   * @param name  Name to search for\r\n   * @returns     If found the @type ActivityType; otherwise undefined\r\n   */\r\n  public getActivityType(name: string): ActivityType {\r\n    return this._activityTypes.getByName(name);\r\n  }\r\n\r\n  /**\r\n   * Registers a new activity type\r\n   * @param activityTypeName      The name of the activity type to be created\r\n   * @param ownerWindowType       The type of the owner window or a WindowDefinition for the owner window\r\n   * @param helperWindowTypes     Types of helper windows (or WindowDefinitions for helper windows) for that activity type\r\n   * @param config                (HC only, deprecated) Layout config\r\n   * @param description           (HC only, deprecated) Description for the new activity type\r\n   * @param callback              (Optional) Callback for results - if not specified the method will return a promise\r\n   */\r\n  public registerActivityType(\r\n    activityTypeName: string,\r\n    ownerWindowType: string | WindowDefinition,\r\n    helperWindowTypes?: string[] | WindowDefinition[],\r\n    config?: any,\r\n    description?: string,\r\n    callback?: Callback<ActivityType>): Promise<ActivityType> {\r\n    const promise = new Promise<ActivityType>((resolve, reject) => {\r\n\r\n      // activityTypeName checks\r\n      if (util.isUndefinedOrNull(activityTypeName)) {\r\n        reject(\"activityTypeName argument can not be undefined\");\r\n        return;\r\n      }\r\n      if (!util.isString(activityTypeName)) {\r\n        reject(\"activityTypeName should be string\");\r\n        return;\r\n      }\r\n      // check if type is already defined\r\n      const actType = this.getActivityType(activityTypeName);\r\n      if (!util.isUndefinedOrNull(actType)) {\r\n        reject(\"Activity type '\" + activityTypeName + \"' already exists\");\r\n        return;\r\n      }\r\n\r\n      // ownerWindowType checks\r\n      let ownerDefinition: WindowDefinition;\r\n      if (util.isUndefined(ownerWindowType)) {\r\n        reject(\"Owner window type can not be undefined\");\r\n        return;\r\n      }\r\n      if (util.isString(ownerWindowType)) {\r\n        ownerDefinition = { type: (ownerWindowType as string), name: \"\", isIndependent: false, arguments: {} };\r\n      } else {\r\n        ownerDefinition = (ownerWindowType as WindowDefinition);\r\n      }\r\n\r\n      // helperWindowTypes checks\r\n      const helperDefinitions: WindowDefinition[] = [];\r\n      if (!util.isUndefined(helperWindowTypes) && util.isArray(helperWindowTypes)) {\r\n        // tslint:disable-next-line\r\n        for (const index in helperWindowTypes) {\r\n          const item = helperWindowTypes[index];\r\n          if (util.isString(item)) {\r\n            const definition = {\r\n              type: (item as string),\r\n              name: \"\",\r\n              isIndependent: false,\r\n              arguments: {},\r\n              relativeTo: \"\",\r\n              relativeDirection: \"\",\r\n              windowStyleAttributes: {}\r\n            };\r\n            helperDefinitions.push(definition);\r\n          } else {\r\n            helperDefinitions.push(item as WindowDefinition);\r\n          }\r\n        }\r\n      }\r\n\r\n      // redirect to bridge\r\n      this._bridge\r\n        .registerActivityType(activityTypeName,\r\n          ownerDefinition,\r\n          helperDefinitions,\r\n          config,\r\n          description)\r\n        .then((activityType) => {\r\n          // add to from collections\r\n          this._grabEntity(activityType);\r\n          resolve(activityType);\r\n        })\r\n        .catch((error) => {\r\n          reject(error);\r\n        });\r\n    });\r\n\r\n    return nodeify(promise, callback);\r\n  }\r\n\r\n  /**\r\n   * Unregister existing activity type\r\n   * @param type The name of the activity type to be removed\r\n   */\r\n  public unregisterActivityType(type: string, callback?: Callback<any>) {\r\n    const promise = new Promise<ActivityType>((resolve, reject) => {\r\n      // check if type is defined\r\n      const actType = this.getActivityType(type);\r\n      if (util.isUndefined(actType)) {\r\n        reject(\"Activity type '\" + type + \"' does not exists\");\r\n        return;\r\n      }\r\n      this._bridge.unregisterActivityType(type).then(() => resolve(actType), reject);\r\n    });\r\n    return nodeify(promise, callback);\r\n  }\r\n\r\n  /**\r\n   * Initiates a new activity from the given type.\r\n   * @param activityType  The ActivityType to initiate\r\n   * @param context       The initial context of the activity\r\n   * @param callback      Callback for result\r\n   * @param configuration Optional configuration passed to window/peer factories for the new activity's participants\r\n   * @returns             Promise for activity\r\n   */\r\n  public initiate(activityType: string, context?: object, callback?: Callback<Activity>, configuration?: WindowDefinition[] | OverrideTypeDefinition): Promise<Activity> {\r\n    const promise = new Promise<Activity>((resolve, reject) => {\r\n      // check if type is defined\r\n      const actType = this.getActivityType(activityType);\r\n      if (util.isUndefined(actType)) {\r\n        reject(\"Activity type '\" + activityType + \"' does not exists\");\r\n        return;\r\n      }\r\n\r\n      this._bridge\r\n        .initiateActivity(activityType, context, configuration)\r\n        .then((actId) => {\r\n\r\n          this._activities\r\n            .getOrWait(actId)\r\n            .then((act: Activity) => {\r\n              resolve(act);\r\n            })\r\n            .catch((err) => reject(err));\r\n        })\r\n        .catch((err) => {\r\n          reject(err);\r\n        });\r\n    });\r\n    return nodeify(promise, callback);\r\n  }\r\n\r\n  public subscribeActivityTypeEvents(handler: (act: ActivityType, action: string) => void) {\r\n    this._activityTypes.subscribe((at, context) => {\r\n      handler(at, context.type);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * @returns All known WindowTypes\r\n   */\r\n  public getWindowTypes(): WindowType[] {\r\n    return this._windowTypes.get();\r\n  }\r\n\r\n  /**\r\n   * Gets WindowType by name\r\n   * @param name  The name of the type @type WindowType\r\n   * @returns     WindowType if found; undefined otherwise\r\n   */\r\n  public getWindowType(name: string): WindowType {\r\n    return this._windowTypes.getByName(name);\r\n  }\r\n\r\n  /**\r\n   * Registers a factory for a given WindowType. The factory will be called once window of that type is requested\r\n   * @param windowType   Window type that will be constructed from the factory. Can be a string (name of the window type)\r\n   * or object that has name, description properties\r\n   * @param factoryMethod      The factory that will construct Windows of that type\r\n   * @param description\r\n   * @param callback\r\n   * @param configuration\r\n   * @returns {}\r\n   */\r\n  public registerWindowFactory(\r\n    windowType: any,\r\n    factoryMethod: WindowFactory,\r\n    callback?: any): Promise<any> {\r\n    const promise = new Promise<any>((resolve, reject) => {\r\n      if (util.isUndefinedOrNull(windowType)) {\r\n        reject(\"no windowType specified\");\r\n        return;\r\n      }\r\n\r\n      if (util.isObject(windowType)) {\r\n        windowType = windowType.getName();\r\n      } else if (!util.isString(windowType)) {\r\n        reject(\"windowType should be string or object that has getName method\");\r\n        return;\r\n      }\r\n\r\n      this._bridge\r\n        .registerWindowFactory(windowType, factoryMethod)\r\n        .then((v) => {\r\n          resolve(v);\r\n        })\r\n        .catch((err) => {\r\n          reject(err);\r\n        });\r\n    });\r\n    return nodeify(promise, callback);\r\n  }\r\n\r\n  /**\r\n   * Unregisters all factories for a given WindowType.\r\n   * @param windowType   Window type that is constructed from the factory.\r\n   * @param callback\r\n   * @returns {}\r\n   */\r\n  public unregisterWindowFactory(windowType: string, callback?: any): Promise<any> {\r\n    const promise = new Promise<any>((resolve, reject) => {\r\n      if (util.isUndefinedOrNull(windowType)) {\r\n        reject(\"no windowType specified\");\r\n        return;\r\n      }\r\n\r\n      if (!util.isString(windowType)) {\r\n        reject(\"windowType should be a string\");\r\n        return;\r\n      }\r\n\r\n      this._bridge\r\n        .unregisterWindowFactory(windowType)\r\n        .then((v) => {\r\n          resolve(v);\r\n        })\r\n        .catch((err) => {\r\n          reject(err);\r\n        });\r\n    });\r\n    return nodeify(promise, callback);\r\n  }\r\n\r\n  /**\r\n   * @returns All started activities\r\n   * @param activityType Can be a string or @type ActivityType. If string a new activityType will be created using the string for name.\r\n   * @returns Array of Activity objects\r\n   */\r\n  public getActivities(activityType?: string | ActivityType | string[] | ActivityType[]): Activity[] {\r\n    let act = this._activities.get();\r\n    act = act.filter((a) => a._ownerId);\r\n    if (!activityType) {\r\n      return act;\r\n    }\r\n    let types: any = activityType;\r\n    if (util.isString(activityType)) {\r\n      types = [activityType];\r\n    } else if (activityType instanceof ActivityType) {\r\n      types = [activityType.name];\r\n    } else if (activityType instanceof Array) {\r\n      // TODO check if string array or array of ActivityTypes\r\n    } else {\r\n      throw new Error(\"Invalid input argument 'activityType' = \" + activityType);\r\n    }\r\n\r\n    return act.filter((at: Activity) => {\r\n      const type = at.type;\r\n      return util.some(types, (t: ActivityType) => {\r\n        return type.id === t.id;\r\n      });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Returns Activity by ID\r\n   */\r\n  public getActivityById(id: string): Activity {\r\n    return this._activities.getByName(id);\r\n  }\r\n\r\n  /**\r\n   * Initialises activity for the current window - by doing this the window is announced as activity aware to the other participants\r\n   * @param windowType            Type of window\r\n   * @param activityWindowId      The id of the window that was created\r\n   * @returns {}                  Promise for an activity window (joined to an activity, if the activity creation fails the promise will be rejected)\r\n   */\r\n  public announceWindow(activityWindowId?: string, windowType?: string): Promise<ActivityWindow> {\r\n    const promise = new Promise<ActivityWindow>((resolve, reject) => {\r\n\r\n      // get the announcement info from the bridge (e.g. the context in HC) - this will be used if no arguments passed\r\n      const announcementInfo = this._bridge.getAnnouncementInfo();\r\n      if (util.isUndefined(activityWindowId)) {\r\n        activityWindowId = announcementInfo.activityWindowId;\r\n      }\r\n      if (util.isUndefined(windowType)) {\r\n        windowType = announcementInfo.activityWindowType;\r\n      }\r\n      if (util.isUndefinedOrNull(windowType)) {\r\n        throw new Error(\"Can not announce - unknown windowType\");\r\n      }\r\n\r\n      const activityId = announcementInfo && announcementInfo.activityId;\r\n\r\n      // We cover two cases here:\r\n      // * no activityWindowId supplied (neither in arguments or announcement info) - in that case we register new window by type. Most of the time this is the case when an independent window is created outside activity\r\n      // * activityWindowId supplied - window created as part of activity creation\r\n\r\n      // NB: in GW3, windows are created standalone, and receive 'JOINED' after they send a 'READY'\r\n      // so we always go in 'if' case, not 'else'\r\n      if (util.isUndefinedOrNull(activityWindowId)) {\r\n        this._logger.debug(\"Registering window with type:'\" + windowType + \"', name:'\" + announcementInfo.activityWindowName + \"', ind.:'\" + announcementInfo.activityWindowIndependent + \"'\");\r\n        // register new window created outside activity\r\n        this._bridge.registerWindow(windowType, announcementInfo.activityWindowName, announcementInfo.activityWindowIndependent)\r\n          .then(this._windows.getOrWait.bind(this._windows))\r\n          .then((w: any) => {\r\n            if (activityId) {\r\n              return this._activities.getOrWait(activityId).then((_: any) => w);\r\n            } else {\r\n              return w;\r\n            }\r\n          })\r\n          .then((w: any) => {\r\n            resolve(w);\r\n          })\r\n          .catch((err) => {\r\n            this._logger.error(err);\r\n          });\r\n\r\n      } else {\r\n        // announce new window created in an activity creation process\r\n        this._logger.debug(\"Announcing window with id '\" + activityWindowId + \"' and type '\" + windowType + \"'\");\r\n\r\n        // check if the window is already created -\r\n        const currentWindow = this._windows.getByName(activityWindowId);\r\n        if (!util.isUndefinedOrNull(currentWindow)) {\r\n          this._logger.debug(\"Window with id '\" + activityWindowId + \"' already announced - reusing the window\");\r\n          resolve(currentWindow);\r\n          return;\r\n        }\r\n\r\n        // window events handler\r\n        const windowEventHandler = (a: Activity, w: ActivityWindow, e: any) => {\r\n          if (activityWindowId === w.id) {\r\n            if (e === EntityEventType.ActivityWindowJoinedActivity) {\r\n              const activity = w.activity;\r\n              if (util.isUndefined(activity)) {\r\n                reject(\"UNDEFINED ACTIVITY\");\r\n              }\r\n              this._logger.trace(\"Got joined event for id '\" + activityWindowId + \"'\");\r\n              resolve(w);\r\n              this.unsubscribeWindowEvents(windowEventHandler);\r\n            }\r\n          }\r\n        };\r\n\r\n        this.subscribeWindowEvents(windowEventHandler);\r\n        this._logger.trace(\"Waiting for joined event for id '\" + activityWindowId + \"'\");\r\n        this._bridge.announceWindow(windowType, activityWindowId);\r\n      }\r\n    });\r\n    return promise;\r\n  }\r\n\r\n  /**\r\n   * Allows you to subscribe for windows events, e.g. window type registered\r\n   * @param handler   The handler to receive notifications\r\n   * @returns {}\r\n   */\r\n  public subscribeWindowTypeEvents(handler: (act: WindowType, event: string) => void) {\r\n    this._windowTypes.subscribe((wt, context) => {\r\n      handler(wt, context.type);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Subscribe for activity status events\r\n   * @param handler Handler function that will receive status notifications\r\n   * @returns {}\r\n   */\r\n  public subscribeActivityEvents(handler: (activity: Activity, newStatus: ActivityStatus, oldStatus: ActivityStatus) => void): () => void {\r\n    return this._activities.subscribe((act, context) => {\r\n      if (context.type === EntityEventType.StatusChange) {\r\n        const p = (context as ActivityStatusChangeEventContext);\r\n        handler(act, p.newStatus, p.oldStatus);\r\n      }\r\n\r\n      // implicitly leave the activity on destroy\r\n      if (context.type === EntityEventType.Removed ||\r\n        (context.type === EntityEventType.StatusChange &&\r\n          (context as ActivityStatusChangeEventContext).newStatus.getState() === ActivityState.Destroyed)) {\r\n        for (const window of this._windows.get()) {\r\n          if (window.activity && window.activity.id === act.id) {\r\n            this._windows.process(new EntityEvent<ActivityWindow>(window, new EntityEventContext(EntityEventType.ActivityWindowLeftActivity)));\r\n          }\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Allows you to subscribe for windows events, e.g. window joining to activity\r\n   * @param handler   The handler to receive notifications\r\n   * @returns {}\r\n   */\r\n  public subscribeWindowEvents(handler: (activity: Activity, window: ActivityWindow, event: any) => void): () => void {\r\n    const wrappingHandler = (window: ActivityWindow, context: any) => {\r\n      let eventType = context.type;\r\n      if (eventType === EntityEventType.Added) {\r\n        // rename added to opened (because added is misleading - semantically it's the opposite of remove);\r\n        eventType = \"opened\";\r\n      }\r\n      handler(window.activity, window, eventType);\r\n    };\r\n    this._windowHandlers.push([handler, wrappingHandler]);\r\n    return this._windows.subscribe(wrappingHandler);\r\n  }\r\n\r\n  public unsubscribeWindowEvents(handler: (activity: Activity, window: ActivityWindow, event: any) => void) {\r\n    const found = this._windowHandlers.find((pair) => pair[0] === handler);\r\n    if (found) {\r\n      this._windowHandlers.splice(this._windowHandlers.indexOf(found), 1);\r\n      this._windows.unsubscribe(found[1]);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Creates a new window from a given type and joins it to an activity\r\n   *\r\n   * @param activity      Activity to join the window to\r\n   * @param windowType    The window type to join (string or window definition)\r\n   * @param callback      (Optional) Result callback\r\n   * @returns             Promise for ActivityWindow\r\n   */\r\n  public createWindow(activity: Activity, windowTypeOrConfiguration: string | WindowDefinition | any, callback?: Callback<ActivityWindow>): Promise<ActivityWindow> {\r\n    const promise = new Promise<ActivityWindow>((resolve, reject) => {\r\n      if (util.isUndefinedOrNull(windowTypeOrConfiguration)) {\r\n        reject(\"windowType is undefined\");\r\n      }\r\n\r\n      let windowDefinition: WindowDefinition;\r\n      if (util.isString(windowTypeOrConfiguration)) {\r\n        windowDefinition = { type: (windowTypeOrConfiguration as string), name: \"\", isIndependent: false, arguments: {} };\r\n      } else if (windowTypeOrConfiguration instanceof WindowType) {\r\n        windowDefinition = {\r\n          type: (windowTypeOrConfiguration as any).type || windowTypeOrConfiguration.id,\r\n          name: windowTypeOrConfiguration.name || (windowTypeOrConfiguration as any).type || windowTypeOrConfiguration.id,\r\n          isIndependent: false\r\n        };\r\n      } else {\r\n        // G4E-3178 When creating a window in activity, the loading animation doesn't hide - extra property URL\r\n        const invalidKeys: string[] = [\"url\"];\r\n\r\n        const filteredWindowTypeOrConfiguration: any = {};\r\n\r\n        Object.keys(windowTypeOrConfiguration).forEach((key) => {\r\n          if (invalidKeys.indexOf(key) === -1) {\r\n            filteredWindowTypeOrConfiguration[key] = windowTypeOrConfiguration[key];\r\n          }\r\n        });\r\n        windowDefinition = filteredWindowTypeOrConfiguration as WindowDefinition;\r\n      }\r\n\r\n      let relativeToWindow: string | WindowSource;\r\n      if (!util.isUndefinedOrNull(windowDefinition.relativeTo)) {\r\n        relativeToWindow = windowDefinition.relativeTo;\r\n        if (typeof relativeToWindow === \"string\") {\r\n          const windows = this.getWindows({ type: relativeToWindow as string });\r\n          if (!util.isUndefinedOrNull(windows) && windows.length > 0) {\r\n            windowDefinition.relativeTo = windows[0].id;\r\n          }\r\n        } else if (!util.isUndefinedOrNull(relativeToWindow.type)) {\r\n          const windows = this.getWindows({ type: relativeToWindow.type });\r\n          if (!util.isUndefinedOrNull(windows) && windows.length > 0) {\r\n            windowDefinition.relativeTo = windows[0].id;\r\n          }\r\n        } else if (!util.isUndefinedOrNull(relativeToWindow.windowId)) {\r\n          windowDefinition.relativeTo = relativeToWindow.windowId;\r\n        }\r\n      }\r\n\r\n      this._bridge.createWindow(activity && activity.id, windowDefinition)\r\n        .then((wid) => {\r\n\r\n          this._logger.debug(\"Window created, waiting for window entity with id \" + wid);\r\n          const handler = (window: ActivityWindow, context: EntityEventContext) => {\r\n            // wait until the window has activity property (this means it was joined)\r\n            if (window.id === wid && (!activity || window.activity)) {\r\n              this._logger.debug(\"Got entity window with id \" + wid);\r\n              resolve(window);\r\n              this._windows.unsubscribe(handler);\r\n            }\r\n          };\r\n\r\n          // if we can not get the window right away, wait for event\r\n          this._windows.subscribe(handler);\r\n        })\r\n        .catch((err) => {\r\n          reject(err);\r\n        });\r\n\r\n    });\r\n    return nodeify(promise, callback);\r\n  }\r\n\r\n  /**\r\n   * Creates relative windows from a given types and joins them to an activity\r\n   *\r\n   * @param activity               Activity to join relative windows to\r\n   * @param relativeWindowTypes    Relative window types to join (string or window definitions array)\r\n   * @param callback               (Optional) Result callback\r\n   * @returns                      Promise for ActivityWindow\r\n   */\r\n  public createStackedWindows(activity: Activity, relativeWindowTypes: Array<string | WindowDefinition>, timeout?: number, callback?: Callback<ActivityWindow[]>): Promise<ActivityWindow[]> {\r\n    const promise = new Promise<ActivityWindow[]>((resolve, reject) => {\r\n      if (util.isUndefinedOrNull(activity)) {\r\n        reject(\"activity is undefined\");\r\n      }\r\n      if (util.isUndefinedOrNull(relativeWindowTypes)) {\r\n        reject(\"relativeWindowTypes is undefined\");\r\n      }\r\n\r\n      if (!Array.isArray(relativeWindowTypes)) {\r\n        reject(\"relativeWindowTypes has to be an array\");\r\n      }\r\n      if (util.isUndefinedOrNull(timeout)) {\r\n        timeout = 20000; // default timeout: 20 seconds\r\n      }\r\n\r\n      const windowDefinitions: WindowDefinition[] = [];\r\n      relativeWindowTypes.forEach((element) => {\r\n        let windowDefinition: WindowDefinition;\r\n        if (util.isString(element)) {\r\n          windowDefinition = { type: (element as string), name: \"\", isIndependent: false, arguments: {} };\r\n        } else {\r\n          windowDefinition = (element as WindowDefinition);\r\n        }\r\n\r\n        // a hint that this comes from createStackedWindows\r\n        windowDefinition.stackedWindow = true;\r\n        windowDefinition.timeout = timeout;\r\n\r\n        let relativeToWindow: WindowSource;\r\n        if (!util.isUndefinedOrNull(windowDefinition.relativeTo)) {\r\n          // this can not be string, converted in the prev. layer\r\n          relativeToWindow = windowDefinition.relativeTo as WindowSource;\r\n          if (!util.isUndefinedOrNull(relativeToWindow.type)) {\r\n            windowDefinition.relativeTo = relativeToWindow.type;\r\n          } else if (!util.isUndefinedOrNull(relativeToWindow.windowId)) {\r\n            const windows = this.getWindows({ id: relativeToWindow.windowId });\r\n            if (!util.isUndefinedOrNull(windows) && windows.length > 0) {\r\n              windowDefinition.relativeTo = windows[0].type.name;\r\n            }\r\n          }\r\n        }\r\n        windowDefinitions.push(windowDefinition);\r\n      });\r\n\r\n      const tasks: Array<Promise<ActivityWindow>> = [];\r\n      windowDefinitions.forEach((wd) => tasks.push(this.createWindow(activity, wd)));\r\n\r\n      Promise.all(tasks).then(resolve).catch(reject);\r\n    });\r\n    return nodeify(promise, callback);\r\n  }\r\n\r\n  /**\r\n   * Joins a new window from a given type to the activity\r\n   *\r\n   * @param activity      Activity to join the window to\r\n   * @param window        The window to join\r\n   * @param callback      (Optional) Result callback\r\n   * @returns             Promise for ActivityWindow\r\n   */\r\n  public addWindowToActivity(activity: Activity, window: ActivityWindow, callback?: Callback<ActivityWindow>): Promise<ActivityWindow> {\r\n    const toReturn = this._bridge.joinActivity(activity.id, window.id)\r\n      .then(() => window);\r\n    nodeify(toReturn, callback);\r\n    return toReturn;\r\n  }\r\n\r\n  /**\r\n   * Removes a window from the activity\r\n   *\r\n   * @param activity  Activity to remove the window from\r\n   * @param           The window to remove\r\n   * @param           (Optional) Result callback\r\n   * @returns         Promise for ActivityWindow\r\n   */\r\n  public leaveWindowFromActivity(activity: Activity, window: ActivityWindow, callback?: Callback<ActivityWindow>): Promise<ActivityWindow> {\r\n    const toReturn = this._bridge.leaveActivity(activity.id, window.id)\r\n      .then(() => window);\r\n    nodeify(toReturn, callback);\r\n    return toReturn;\r\n  }\r\n\r\n  /**\r\n   * Replaces the activity context\r\n   * @param activity  Activity\r\n   * @param context   The new context\r\n   * @param callback  (Optional) Result callback\r\n   * @returns         Promise for Activity\r\n   */\r\n  public setActivityContext(activity: Activity, context: object, callback?: Callback<Activity>): Promise<Activity> {\r\n    const promise = new Promise<Activity>((resolve, reject) => {\r\n      if (util.isUndefinedOrNull(activity)) {\r\n        reject(\"activity can not be null\");\r\n      }\r\n\r\n      // TODO: duplication with updateActivityContext\r\n\r\n      // DONE: verify is the change visible here when 'updateActivityContext' resolves?\r\n      this._bridge\r\n        .updateActivityContext(activity, context, true)\r\n        .then((_) => {\r\n          resolve(activity);\r\n        })\r\n        .catch((err) => {\r\n          reject(err);\r\n        });\r\n    });\r\n\r\n    return nodeify(promise, callback);\r\n  }\r\n\r\n  /**\r\n   * Updates activity context using the properties from  context argument.\r\n   * If old context is {a:1, b:2, c:3} and invoking updateContext({b:3, c:null}) will result a context\r\n   * be {a:1, b:3}\r\n   *\r\n   * @param activity\r\n   * @param context\r\n   * @param callback\r\n   */\r\n  public updateActivityContext(activity: Activity, context: any, callback?: Callback<Activity>): Promise<Activity> {\r\n    const promise = new Promise<Activity>((resolve, reject) => {\r\n      if (util.isUndefinedOrNull(activity)) {\r\n        reject(\"activity can not be null\");\r\n      }\r\n\r\n      const removedKeys = [];\r\n      for (const key in context) {\r\n        if (context.hasOwnProperty(key) && context[key] === null) {\r\n          removedKeys.push(key);\r\n        }\r\n      }\r\n      for (const removedKey of removedKeys) {\r\n        delete context[removedKey];\r\n      }\r\n\r\n      this._bridge\r\n        .updateActivityContext(activity, context, false, removedKeys)\r\n        .then((_) => {\r\n          // DONE: verify is the change already visible here when 'updateActivityContext' resolves?\r\n          resolve(activity);\r\n        })\r\n        .catch((err) => {\r\n          reject(err);\r\n        });\r\n    });\r\n\r\n    return nodeify(promise, callback);\r\n  }\r\n\r\n  /**\r\n   * Subscribe for activity context update events\r\n   *\r\n   * @param activity  Activity\r\n   * @param handler   Handler function that will receive context related events\r\n   * @returns {}\r\n   */\r\n  public subscribeActivityContextChanged(handler: ActivityContextUpdateHandler) {\r\n    this._activities.subscribe((act, context) => {\r\n      if (context.type === EntityEventType.ActivityContextChange) {\r\n        const updateContext = context as ActivityContextChangedEventContext;\r\n        handler(act, updateContext.context, updateContext.updated, updateContext.removed);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Stops an activity\r\n   * @returns {}\r\n   */\r\n  public stopActivity(activity: Activity, callback?: Callback<boolean>): Promise<boolean> {\r\n    const promise = this._bridge.stopActivity(activity);\r\n    return nodeify(promise, callback);\r\n  }\r\n\r\n  /**\r\n   * Returns activity windows based on some filter. If no filter supplied all activity windows are returned.\r\n   * @param filter  Filter that\r\n   * @returns Array of ActivityWindows that match the filter object\r\n   */\r\n  public getWindows(filter: { id?: string, type?: string, name?: string, activityId?: string }): ActivityWindow[] {\r\n    if (util.isUndefined(filter)) {\r\n      return this._windows.get();\r\n    }\r\n\r\n    if (!util.isUndefined(filter.id)) {\r\n      return [this._windows.getByName(filter.id)];\r\n    }\r\n\r\n    const allWindows = this._windows.get();\r\n\r\n    return allWindows.filter((w) => {\r\n\r\n      if (!util.isUndefined(filter.type) && w.type.id !== filter.type) {\r\n        return false;\r\n      }\r\n\r\n      if (!util.isUndefined(filter.name) && w.name !== filter.name) {\r\n        return false;\r\n      }\r\n\r\n      if (!util.isUndefined(filter.activityId)) {\r\n        if (util.isUndefinedOrNull(w.activity)) {\r\n          return false;\r\n        }\r\n\r\n        if (w.activity.id !== filter.activityId) {\r\n          return false;\r\n        }\r\n      }\r\n\r\n      return true;\r\n    });\r\n  }\r\n\r\n  public getWindowBounds(id: string): Promise<WindowBounds> {\r\n    return this._bridge.getWindowBounds(id);\r\n  }\r\n\r\n  public setWindowBounds(id: string, bounds: WindowBounds, callback?: Callback<ActivityWindow>): Promise<any> {\r\n    const promise = new Promise<any>((resolve, reject) => {\r\n      this._bridge.setWindowBounds(id, bounds)\r\n        .then(() => resolve())\r\n        .catch((err) => reject(err));\r\n    });\r\n\r\n    return nodeify(promise, callback);\r\n  }\r\n\r\n  public closeWindow(id: string): Promise<any> {\r\n    return this._bridge.closeWindow(id);\r\n  }\r\n\r\n  public activateWindow(id: string, focus: boolean): Promise<any> {\r\n    return this._bridge.activateWindow(id, focus);\r\n  }\r\n\r\n  public setWindowVisibility(id: string, visible: boolean): Promise<any> {\r\n    return this._bridge.setWindowVisibility(id, visible);\r\n  }\r\n\r\n  public clone(activity: Activity, cloneOptions: CloneOptions, callback?: Callback<Activity>) {\r\n    const promise = new Promise<any>((resolve, reject) => {\r\n      if (!activity) {\r\n        reject(\"activity can not be null\");\r\n      }\r\n\r\n      this._bridge.cloneActivity(activity.id, cloneOptions)\r\n        .then((activityId) => {\r\n          this._activities\r\n            .getOrWait(activityId)\r\n            .then((act: Activity) => {\r\n              resolve(act);\r\n            })\r\n            .catch((err) => reject(err));\r\n        })\r\n        .catch((err) => reject(err));\r\n    });\r\n\r\n    return nodeify(promise, callback);\r\n  }\r\n\r\n  public attachActivities(from: string, to: string, tag?: object, callback?: Callback<AttachedActivityDescriptor>): Promise<AttachedActivityDescriptor> {\r\n\r\n    tag = tag || {};\r\n\r\n    const promise = new Promise<AttachedActivityDescriptor>((resolve, reject) => {\r\n\r\n      const fromActivity = this._activities.getByName(from);\r\n      if (!fromActivity) {\r\n        reject(\"can not find activity with id \" + from);\r\n        return;\r\n      }\r\n\r\n      const toActivity = this._activities.getByName(to);\r\n      if (!toActivity) {\r\n        reject(\"can not find activity with id \" + to);\r\n        return;\r\n      }\r\n\r\n      return this._bridge.attachActivities(from, to, tag)\r\n        .then((data: any) => {\r\n          const newActId = data.to;\r\n          const state = data.descriptor;\r\n          const allStates = data.descriptors;\r\n\r\n          this._activities.getOrWait(newActId).then((act) => {\r\n            act._updateDescriptors(allStates);\r\n            const stateWrapped = act.attached.filter((u) => u.ownerId === state.ownerId)[0];\r\n\r\n            resolve(stateWrapped);\r\n          });\r\n        })\r\n        .catch((err) => {\r\n          reject(err);\r\n        });\r\n    });\r\n\r\n    return nodeify(promise, callback);\r\n  }\r\n\r\n  public detachActivities(\r\n    activityId: string,\r\n    descriptor: ActivityDescriptor,\r\n    callback?: Callback<Activity>): Promise<Activity> {\r\n    const promise = new Promise<Activity>((resolve, reject) => {\r\n      return this._bridge.detachActivities(activityId, descriptor)\r\n        .then(/*(params)*/() => {\r\n          // #deleteme TODO: deal with this\r\n          const oldActId: string = undefined; // params.oldActivityId;\r\n          const newActId: string = undefined; // params.newActivityId;\r\n          const descriptors: any = undefined; // params.descriptors;\r\n\r\n          this._activities\r\n            .getOrWait(oldActId)\r\n            .then((oldAct: Activity) => {\r\n              oldAct._updateDescriptors(descriptors);\r\n\r\n              this._activities\r\n                .getOrWait(newActId)\r\n                .then((newAct: Activity) => {\r\n                  resolve(newAct);\r\n                });\r\n            })\r\n            .catch((err) => reject(err));\r\n        })\r\n        .catch((err) => {\r\n          reject(err);\r\n        });\r\n    });\r\n\r\n    return nodeify(promise, callback);\r\n  }\r\n\r\n  public subscribeActivitiesAttached(callback: any) {\r\n    this._attachedCallbacks.push(callback);\r\n  }\r\n\r\n  public subscribeActivitiesDetached(callback: any) {\r\n    this._detachedCallbacks.push(callback);\r\n  }\r\n\r\n  public subscribeActivityFrameColorChanged(callback: () => void) {\r\n    this._frameColorChangesCallbacks.push(callback);\r\n  }\r\n\r\n  /** Assigns a manager to a given ActivityEntity */\r\n  private _grabEntity(entity: ActivityEntity) {\r\n    entity._manager = this;\r\n  }\r\n\r\n  private _getInitialData() {\r\n    this._logger.debug(\"Request initial data...\");\r\n\r\n    // NB: there's no possibility for duplicate entities from events that have come\r\n    // in between _bridge.init() and _bridge.ready()'s resolve, since the ObservableCollections\r\n    // coalesce items by id.\r\n\r\n    this._bridge.getActivityTypes()\r\n      .then((at) => {\r\n        this._activityTypes.add(at);\r\n        this._dataReadyMarker.signal(\"Got act types\");\r\n      })\r\n      .catch((error) => {\r\n        this._logger.error(error);\r\n        this._dataReadyMarker.error(\"Can not initialize ActivityManager - error getting activity types -\" + error);\r\n      });\r\n\r\n    this._bridge.getWindowTypes()\r\n      .then((wt) => {\r\n        this._windowTypes.add(wt);\r\n        this._dataReadyMarker.signal(\"Got window types\");\r\n      })\r\n      .catch((error) => {\r\n        this._logger.error(error);\r\n        this._dataReadyMarker.error(\"Can not initialize ActivityManager - error getting window types  \" + error);\r\n      });\r\n\r\n    this._bridge.getActivities()\r\n      .then((ac) => {\r\n        this._activities.add(ac);\r\n        this._dataReadyMarker.signal(\"Got activities\");\r\n      })\r\n      .catch((error) => {\r\n        this._logger.error(error);\r\n        this._dataReadyMarker.error(\"Can not initialize ActivityManager - error getting activity instances -\" + error);\r\n      });\r\n\r\n    this._bridge.getActivityWindows()\r\n      .then((aw) => {\r\n        this._windows.add(aw);\r\n        this._dataReadyMarker.signal(\"Got windows\");\r\n      })\r\n      .catch((error) => {\r\n        this._logger.error(error);\r\n        this._dataReadyMarker.error(\"Can not initialize ActivityManager - error getting activity windows -\" + error);\r\n      });\r\n  }\r\n\r\n  private _subscribeForData() {\r\n    this._logger.debug(\"Subscribe for data...\");\r\n\r\n    // NB: there's no possibility for duplicate entities from events that have come\r\n    // in between _bridge.init() and _bridge.ready()'s resolve, since the ObservableCollections\r\n    // coalesce items by id.\r\n\r\n    this._bridge.onActivityTypeStatusChange((event) => {\r\n      this._activityTypes.process(event);\r\n    });\r\n\r\n    this._bridge.onWindowTypeStatusChange((event) => {\r\n      this._windowTypes.process(event);\r\n    });\r\n\r\n    this._bridge.onActivityWindowChange((event) => {\r\n      this._windows.process(event);\r\n    });\r\n\r\n    this._bridge.onActivityStatusChange((event: EntityEvent<Activity>) => {\r\n      this._activities.process(event);\r\n    });\r\n  }\r\n\r\n  private _handleActivitiesAttached(data: any) {\r\n\r\n    const newActId = data.to;\r\n    const descriptor = data.descriptor;\r\n    const descriptors = data.descriptors;\r\n\r\n    this._activities.getOrWait(newActId).then((act) => {\r\n      act._updateDescriptors(descriptors);\r\n      const descriptorAsObjectFromAPI = act.attached.filter((u) => u.ownerId === descriptor.ownerId)[0];\r\n\r\n      this._attachedCallbacks.forEach((callback) => {\r\n        try {\r\n          callback(act, descriptorAsObjectFromAPI);\r\n        } catch (err) {\r\n          return;\r\n        }\r\n      });\r\n\r\n    });\r\n  }\r\n\r\n  private _handleActivitiesDetached(data: any) {\r\n    const oldActId = data.oldActivityId;\r\n    const newActId = data.newActivityId;\r\n    const descriptors = data.descriptors;\r\n    const descriptor = data.descriptor;\r\n\r\n    this._activities.getOrWait(oldActId).then((oldAct) => {\r\n\r\n      oldAct._updateDescriptors(descriptors);\r\n\r\n      this._activities.getOrWait(newActId).then((newAct) => {\r\n\r\n        this._detachedCallbacks.forEach((callback) => {\r\n          try {\r\n            callback(newAct, oldAct, descriptor);\r\n          } catch (err) {\r\n            return;\r\n          }\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  private _handleActivityDescriptorsRefreshed(data: any) {\r\n    const id = data.id;\r\n    const descriptors = data.descriptors;\r\n\r\n    const act = this._activities.getByName(id);\r\n    if (act) {\r\n      act._updateDescriptors(descriptors);\r\n    }\r\n  }\r\n\r\n  private refreshDescriptors() {\r\n    this._bridge.getAttachedDescriptors()\r\n      .then((map: any) => {\r\n\r\n        // populate descriptors\r\n        if (map) {\r\n          Object.keys(map).forEach((key: string) => {\r\n            const actId = key;\r\n            const descriptors = map[key];\r\n\r\n            const act = this._activities.getByName(actId);\r\n            if (act) {\r\n              act._updateDescriptors(descriptors);\r\n            }\r\n          });\r\n        }\r\n\r\n        this._descriptorsMarker.signal(\"Successfully got descriptors\");\r\n      })\r\n      .catch((err) => {\r\n        this._descriptorsMarker.error(\"failed to get descriptors - \" + err);\r\n      });\r\n  }\r\n\r\n  private _handleWindowFrameColorChanged(win: Glue42.Windows.GDWindow) {\r\n    if (!win.activityId) {\r\n      return;\r\n    }\r\n\r\n    const act = this._activities.getByName(win.activityId);\r\n    if (!act) {\r\n      return;\r\n    }\r\n\r\n    // notify for the owner only\r\n    if (!act.owner) {\r\n      return;\r\n    }\r\n\r\n    if (act.owner.underlyingWindow.id !== win.id) {\r\n      return;\r\n    }\r\n\r\n    this._frameColorChangesCallbacks.forEach((callback) => {\r\n      try {\r\n        callback(act, win.frameColor);\r\n      } catch (e) {\r\n        return;\r\n      }\r\n    });\r\n  }\r\n}\r\n","import ActivityType from \"./../entities/activityType\";\r\nimport WindowType from \"./../entities/windowType\";\r\nimport * as util from \"./../helpers/util\";\r\nimport ActivityManager from \"./../core/activityManager\";\r\nimport My from \"./activityMyAPI\";\r\nimport { WindowDefinition } from \"./../entities/windowDefinition\";\r\nimport { Callback } from \"./../contracts/contracts\";\r\nimport Activity from \"./../entities/activity\";\r\nimport ActivityWindow from \"./../entities/activityWindow\";\r\nimport { ActivityStatus } from \"./../contracts/activityStatus\";\r\nimport { WindowFactory } from \"../contracts/windowFactory\";\r\nimport { Glue42 } from \"../../../glue\";\r\n\r\nexport interface ManagementAPI {\r\n  activityTypes: Glue42.Activities.ActivityTypesAPI;\r\n  windowTypes: Glue42.Activities.WindowTypesAPI;\r\n  windows: Glue42.Activities.WindowingAPI;\r\n  instances: Glue42.Activities.InstancesAPI;\r\n\r\n  onAttached(callback: () => void): void;\r\n  onDetached(callback: () => void): void;\r\n  onActivityFrameColorChanged(callback: () => void): void;\r\n}\r\n\r\nexport class ActivityManagementAPI implements ManagementAPI {\r\n\r\n  public _m: ActivityManager;\r\n\r\n  public _my: My;\r\n\r\n  public activityTypes: Glue42.Activities.ActivityTypesAPI;\r\n\r\n  public windowTypes: Glue42.Activities.WindowTypesAPI;\r\n\r\n  public windows: Glue42.Activities.WindowingAPI;\r\n\r\n  public instances: Glue42.Activities.InstancesAPI;\r\n\r\n  constructor(manager: ActivityManager, my: My) {\r\n    this._m = manager;\r\n    this._my = my;\r\n\r\n    this.activityTypes = {\r\n      get: this._getActivityTypesWrapper.bind(this),\r\n      register: this._m.registerActivityType.bind(this._m),\r\n      unregister: this._m.unregisterActivityType.bind(this._m),\r\n      subscribe: this._m.subscribeActivityTypeEvents.bind(this._m),\r\n      unsubscribe: undefined,\r\n      initiate: this._m.initiate.bind(this._m)\r\n    };\r\n\r\n    this.windowTypes = {\r\n      get: this._getWindowTypesWrapper.bind(this),\r\n      registerFactory: this._m.registerWindowFactory.bind(this._m),\r\n      unregisterFactory: this._m.unregisterWindowFactory.bind(this._m),\r\n      subscribe: this._m.subscribeWindowTypeEvents.bind(this._m),\r\n      unsubscribe: undefined\r\n    };\r\n\r\n    this.windows = {\r\n      get: this._m.getWindows.bind(this._m),\r\n      subscribe: this._m.subscribeWindowEvents.bind(this._m),\r\n      announce: this._m.announceWindow.bind(this._m),\r\n      unsubscribe: undefined,\r\n      create: this._m.createWindow.bind(this._m)\r\n    };\r\n\r\n    this.instances = {\r\n      get: this._m.getActivities.bind(this._m),\r\n      subscribe: this._m.subscribeActivityEvents.bind(this._m),\r\n      unsubscribe: undefined\r\n    };\r\n  }\r\n\r\n  public onAttached(callback: () => void) {\r\n    this._m.subscribeActivitiesAttached(callback);\r\n  }\r\n\r\n  public onDetached(callback: () => void) {\r\n    this._m.subscribeActivitiesDetached(callback);\r\n  }\r\n\r\n  public onActivityFrameColorChanged(callback: () => void) {\r\n    this._m.subscribeActivityFrameColorChanged(callback);\r\n  }\r\n\r\n  private _getActivityTypesWrapper(name?: string): ActivityType[] | ActivityType {\r\n    if (util.isUndefined(name)) {\r\n      return this._m.getActivityTypes();\r\n    }\r\n    return this._m.getActivityType(name);\r\n  }\r\n\r\n  private _getWindowTypesWrapper(name?: string): WindowType[] | WindowType {\r\n    if (util.isUndefined(name)) {\r\n      return this._m.getWindowTypes();\r\n    }\r\n    return this._m.getWindowType(name);\r\n  }\r\n}\r\n","import ActivityManager from \"./../core/activityManager\";\r\nimport My from \"./activityMyAPI\";\r\nimport { nodeify } from \"./../helpers/promiseExtensions\";\r\nimport { ActivityManagementAPI, ManagementAPI } from \"./activityManagementAPI\";\r\nimport { ActivityAGM } from \"../core/activityAGM\";\r\n\r\nexport interface API {\r\n\r\n  aware: boolean;\r\n\r\n  inActivity: boolean;\r\n\r\n  my: My;\r\n\r\n  agm: ActivityAGM;\r\n\r\n  all: ManagementAPI;\r\n\r\n  ready(callback?: (api: API) => void): Promise<API>;\r\n\r\n  getAvailableFrameColors(): string[];\r\n}\r\n\r\n/**\r\n * The entry points of activities API - accessible from glue.activities\r\n *\r\n * @module activities\r\n */\r\nexport class ActivityAPI implements API {\r\n\r\n  public _mgr: ActivityManager;\r\n  public _my: My;\r\n\r\n /**\r\n  * Extended API that provides access to all running activities and windows and available activity and window types\r\n  *\r\n  * @var {module:all} all\r\n  */\r\n public all: ManagementAPI;\r\n\r\n  constructor(manager: ActivityManager, my: My) {\r\n    this._mgr = manager;\r\n    this._my = my;\r\n    this.all = new ActivityManagementAPI(manager, my);\r\n  }\r\n\r\n  /**\r\n   * The entry point for your activity code.\r\n   *\r\n   * @function ready\r\n   * @returns {Promise<module:activities>} A promise for activity API\r\n   */\r\n  public ready(callback?: any): Promise<API> {\r\n    const promise = new Promise<any>((resolve, reject) => {\r\n      this._mgr.ready()\r\n        .then(() => {\r\n          resolve(this);\r\n        })\r\n        .catch((err) => {\r\n          reject(err);\r\n        });\r\n    });\r\n    return nodeify(promise, callback);\r\n  }\r\n\r\n  /**\r\n   * A lightweight, single activity oriented subset of the API which should be used by most activity applications\r\n   *\r\n   * @var {module:my} my\r\n   */\r\n  public get my(): My {\r\n    return this._my;\r\n  }\r\n\r\n  /**\r\n   * True if the current window is activity aware - meaning that the window has been created as\r\n   * an activity participant - either a helper or an independent window.\r\n   * Check this after the API is ready.\r\n   *\r\n   * @var {bool} aware\r\n   */\r\n  public get aware(): boolean {\r\n    return this._my.window !== undefined;\r\n  }\r\n\r\n  /**\r\n   * Returns true if the current window is activity aware and is currently participating in activity\r\n   *\r\n   * @var {bool} inActivity\r\n   */\r\n  public get inActivity(): boolean {\r\n    return this.aware && this._my.activity !== undefined;\r\n  }\r\n\r\n  /**\r\n   * Defines an Activity-specific version of the AGM API which:\r\n   * * restricts method registrations to activity-only windows\r\n   * * restricts method discovery and invocation to activity-only methods, unless you explicitly specify otherwise\r\n   * Other than that, the API is pretty much the same.\r\n   *\r\n   * @var  {module:activityAGM} agm\r\n   *\r\n   */\r\n  public get agm(): ActivityAGM {\r\n    if (!this.aware) {\r\n      // no agm if not activity aware\r\n      return undefined;\r\n    }\r\n    if (!this.inActivity) {\r\n      // if we're not in activity no\r\n      return new ActivityAGM(null);\r\n    }\r\n\r\n    return this._my.activity.agm;\r\n  }\r\n\r\n  /**\r\n   * Returns a list of frame colors that can be used as activity frame colors\r\n   *\r\n   * @returns {string[]}\r\n   */\r\n  public getAvailableFrameColors(): string[] {\r\n    // TODO - not available in GD3\r\n    return [];\r\n  }\r\n}\r\n","import GW3Bridge from \"./bridges/gw3Bridge\";\r\n\r\nimport My from \"./API/activityMyAPI\";\r\nimport ActivityManager from \"./core/activityManager\";\r\n\r\nimport { ActivityBridge } from \"./bridges/activityBridge\";\r\n\r\nimport { ActivityConfig } from \"./activityConfig\";\r\nimport { ActivityAPI } from \"./API/activityAPI\";\r\nimport { ActivityAGM } from \"./core/activityAGM\";\r\nimport { Logger } from \"./helpers/logger\";\r\nimport * as util from \"./helpers/util\";\r\n\r\nimport { Glue42Core } from \"@glue42/core\";\r\n\r\nimport { nodeify } from \"./helpers/promiseExtensions\";\r\n\r\n/**\r\n * Activity context update handler - used when we want to subscribe for context changes in a specific activity\r\n *\r\n * @callback contextChangedHandler\r\n * @param {Object} context The full context of the activity after the update\r\n * @param {Object} delta The delta (contains the added/removed keys at top level)\r\n * @param {string[]} removed  Array of keys that were removed from context\r\n * @param {module:activity} activity The activity instance that owns the context\r\n *\r\n */\r\n\r\n/**\r\n * @callback windowEventHandler Handler for ActivityWindow events - e.g window joined to activity, window removed from\r\n * activity\r\n * @param {module:activity} activity\r\n * @param {module:activityWindow} window\r\n * @param {string} event 'joined' or 'removed'\r\n */\r\n\r\n/**\r\n * @callback activityStatusChangeHandler Handler for activity status changed events\r\n * @param {module:activity} activity\r\n * @param {activityStatus} newStatus\r\n * @param {activityStatus} oldStatus\r\n *\r\n */\r\n\r\n/**\r\n * @typedef {Object} windowDefinition\r\n * @property {string} type\r\n * @property {string} name\r\n * @property {Object} arguments\r\n */\r\n\r\n/**\r\n * @typedef {Object} bounds\r\n * @param {number} top\r\n * @param {number} left\r\n * @param {number} width\r\n * @param {number} height\r\n *\r\n */\r\n\r\n/**\r\n * @typedef {Object} agmInstance\r\n * @param {string} application\r\n * @param {string} pid\r\n * @param {string} machine\r\n * @param {string} user\r\n * @param {string} environment\r\n * @param {string} region\r\n */\r\n\r\n// Factory function for activity API\r\nexport class ActivityModule {\r\n    public static checkIsUsingGW3Implementation(connection: Glue42Core.Connection.API) {\r\n        return connection.protocolVersion === 3;\r\n    }\r\n\r\n    private _api: ActivityAPI;\r\n    private _isUsingGW3Implementation: boolean;\r\n    private _isUsingHCImplementation: boolean;\r\n    private _readyPromise: Promise<ActivityModule>;\r\n\r\n    get api(): ActivityAPI {\r\n        return this._api;\r\n    }\r\n\r\n    set api(value: ActivityAPI) {\r\n        this._api = value;\r\n    }\r\n\r\n    constructor(config: ActivityConfig) {\r\n        if (!config) {\r\n            throw new Error(\"config can not be null\");\r\n        }\r\n\r\n        // set log level\r\n        if (!util.isUndefined(config.logLevel)) {\r\n            Logger.Level = config.logLevel;\r\n        }\r\n\r\n        if (!util.isUndefinedOrNull(config.logger)) {\r\n            Logger.GlueLogger = config.logger;\r\n        }\r\n\r\n        // choose the correct bridge\r\n        let bridge: ActivityBridge;\r\n        this._isUsingHCImplementation = config.gdMajorVersion === 2;\r\n        this._isUsingGW3Implementation = ActivityModule.checkIsUsingGW3Implementation(config.connection);\r\n\r\n        if (this._isUsingHCImplementation) {\r\n            throw new Error(\"GD2 not supported\");\r\n        } else if (this._isUsingGW3Implementation) {\r\n            bridge = new GW3Bridge(config);\r\n        } else {\r\n            throw new Error(\"Unable to instantiate activity bridge implementation\");\r\n        }\r\n\r\n        if (!bridge) {\r\n            throw new Error(\"A bridge to native activity is needed to create activity lib.\");\r\n        }\r\n\r\n        ActivityAGM.AGM = config.agm;\r\n        const activityManager = new ActivityManager(bridge, !config.disableAutoAnnounce, config.windows);\r\n        const my = new My(activityManager, config.windows);\r\n        this._api = new ActivityAPI(activityManager, my);\r\n        this._readyPromise = activityManager.ready().then((_) => this);\r\n    }\r\n\r\n    public get isUsingHCImplementation(): boolean {\r\n        return this._isUsingHCImplementation;\r\n    }\r\n\r\n    public get isUsingGW3Implementation(): boolean {\r\n        return this._isUsingGW3Implementation;\r\n    }\r\n\r\n    public ready(callback?: (err: string, module: ActivityModule) => void): Promise<void> {\r\n        return nodeify(this._readyPromise, callback) as any as Promise<void>;\r\n    }\r\n}\r\n","export const ShutdownMethodName = \"T42.ACS.Shutdown\";\r\nexport const OnGDShutdownMethodName = \"T42.ACS.OnGDShutdown\";\r\nexport const RestartMethodName = \"T42.ACS.Restart\";\r\n\r\nexport const FeedbackMethodName = \"T42.ACS.Feedback\";\r\n\r\nexport const GetConfigurationRegionMethodName = \"T42.ACS.GetConfigurationRegion\";\r\nexport const SetConfigurationRegionMethodName = \"T42.ACS.SetConfigurationRegion\";\r\n\r\nexport const GetUserMethodName = \"T42.ACS.GetUser\";\r\nexport const GetBranchesMethodName = \"T42.ACS.GetBranches\";\r\nexport const GetCurrentBranchMethodName = \"T42.ACS.GetCurrentBranch\";\r\nexport const SetCurrentBranchMethodName = \"T42.ACS.SetCurrentBranch\";\r\n\r\nexport const GetFunctionalEntitlementMethodName = \"T42.ACS.GetFunctionalEntitlement\";\r\nexport const CanIMethodName = \"T42.ACS.CanI\";\r\n\r\nexport const StartApplicationMethodName = \"T42.ACS.StartApplication\";\r\nexport const StopApplicationMethodName = \"T42.ACS.StopApplication\";\r\nexport const ActivateApplicationMethodName = \"T42.ACS.ActivateApplication\";\r\nexport const RunApplicationMethodName = \"T42.ACS.RunApplication\";\r\n\r\nexport const OnEventMethodName = \"T42.ACS.OnEvent\";\r\n\r\nexport const GetApplicationsMethodName = \"T42.ACS.GetApplications\";\r\n","\"use strict\";\nfunction createRegistry(options) {\n    if (options && options.errorHandling\n        && typeof options.errorHandling !== \"function\"\n        && options.errorHandling !== \"log\"\n        && options.errorHandling !== \"silent\"\n        && options.errorHandling !== \"throw\") {\n        throw new Error(\"Invalid options passed to createRegistry. Prop errorHandling should be [\\\"log\\\" | \\\"silent\\\" | \\\"throw\\\" | (err) => void], but \" + typeof options.errorHandling + \" was passed\");\n    }\n    var _userErrorHandler = options && typeof options.errorHandling === \"function\" && options.errorHandling;\n    var callbacks = {};\n    function add(key, callback, replayArgumentsArr) {\n        var callbacksForKey = callbacks[key];\n        if (!callbacksForKey) {\n            callbacksForKey = [];\n            callbacks[key] = callbacksForKey;\n        }\n        callbacksForKey.push(callback);\n        if (replayArgumentsArr) {\n            setTimeout(function () {\n                replayArgumentsArr.forEach(function (replayArgument) {\n                    var _a;\n                    if ((_a = callbacks[key]) === null || _a === void 0 ? void 0 : _a.includes(callback)) {\n                        try {\n                            if (Array.isArray(replayArgument)) {\n                                callback.apply(undefined, replayArgument);\n                            }\n                            else {\n                                callback.apply(undefined, [replayArgument]);\n                            }\n                        }\n                        catch (err) {\n                            _handleError(err, key);\n                        }\n                    }\n                });\n            }, 0);\n        }\n        return function () {\n            var allForKey = callbacks[key];\n            if (!allForKey) {\n                return;\n            }\n            allForKey = allForKey.reduce(function (acc, element, index) {\n                if (!(element === callback && acc.length === index)) {\n                    acc.push(element);\n                }\n                return acc;\n            }, []);\n            if (allForKey.length === 0) {\n                delete callbacks[key];\n            }\n            else {\n                callbacks[key] = allForKey;\n            }\n        };\n    }\n    function execute(key) {\n        var argumentsArr = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            argumentsArr[_i - 1] = arguments[_i];\n        }\n        var callbacksForKey = callbacks[key];\n        if (!callbacksForKey || callbacksForKey.length === 0) {\n            return [];\n        }\n        var results = [];\n        callbacksForKey.forEach(function (callback) {\n            try {\n                var result = callback.apply(undefined, argumentsArr);\n                results.push(result);\n            }\n            catch (err) {\n                results.push(undefined);\n                _handleError(err, key);\n            }\n        });\n        return results;\n    }\n    function _handleError(exceptionArtifact, key) {\n        var errParam = exceptionArtifact instanceof Error ? exceptionArtifact : new Error(exceptionArtifact);\n        if (_userErrorHandler) {\n            _userErrorHandler(errParam);\n            return;\n        }\n        var msg = \"[ERROR] callback-registry: User callback for key \\\"\" + key + \"\\\" failed: \" + errParam.stack;\n        if (options) {\n            switch (options.errorHandling) {\n                case \"log\":\n                    return console.error(msg);\n                case \"silent\":\n                    return;\n                case \"throw\":\n                    throw new Error(msg);\n            }\n        }\n        console.error(msg);\n    }\n    function clear() {\n        callbacks = {};\n    }\n    function clearKey(key) {\n        var callbacksForKey = callbacks[key];\n        if (!callbacksForKey) {\n            return;\n        }\n        delete callbacks[key];\n    }\n    return {\n        add: add,\n        execute: execute,\n        clear: clear,\n        clearKey: clearKey\n    };\n}\n;\ncreateRegistry.default = createRegistry;\nmodule.exports = createRegistry;\n//# sourceMappingURL=index.js.map","export function objectValues(source: {[key: string]: any}): any[] {\r\n    if (!source) {\r\n        return [];\r\n    }\r\n    return Object.keys(source).map((key) => source[key]);\r\n}\r\n\r\nexport function objectClone(obj: {[key: string]: any}): any {\r\n    let result;\r\n    try {\r\n        result = JSON.parse(JSON.stringify(obj || {}));\r\n    } catch (error) {\r\n        result = {};\r\n    }\r\n\r\n    return result;\r\n}\r\n","import * as AgmNames from \"./const/agm-names\";\r\nimport { default as CallbackRegistryFactory, CallbackRegistry, UnsubscribeFunction } from \"callback-registry\";\r\nimport { Glue42 } from \"../../glue\";\r\nimport { AppProps, StartAppResult } from \"./types\";\r\nimport AppManagerImpl from \"./app-manager\";\r\nimport { Glue42Core } from \"@glue42/core\";\r\nimport { objectClone } from \"./helper\";\r\nimport { isUndefinedOrNull } from \"../activity/helpers/util\";\r\n\r\nexport default class ApplicationImpl implements Glue42.AppManager.Application {\r\n\r\n    private _registry: CallbackRegistry = CallbackRegistryFactory();\r\n\r\n    // Additional properties of the Application\r\n    private _props: AppProps;\r\n\r\n    constructor(private _appManager: AppManagerImpl, private _name: string, private _agm: Glue42Core.AGM.API) {\r\n\r\n        // TODO: Replace string events with constants. The string declaration of the registry event name should only ever appear once. Ever. Period.\r\n\r\n        // subscribe for events from app-manager\r\n        _appManager.onInstanceStarted((instance) => {\r\n            if (instance.application && instance.application.name !== this._name) {\r\n                return;\r\n            }\r\n\r\n            this._registry.execute(\"instanceStarted\", instance);\r\n        });\r\n\r\n        _appManager.onInstanceStopped((instance) => {\r\n            if (instance.application && instance.application.name !== this._name) {\r\n                return;\r\n            }\r\n\r\n            this._registry.execute(\"instanceStopped\", instance);\r\n        });\r\n\r\n        _appManager.onAppRemoved((app) => {\r\n            if (app.name !== this._name) {\r\n                return;\r\n            }\r\n\r\n            this._registry.execute(\"appRemoved\", app);\r\n        });\r\n\r\n        _appManager.onAppChanged((app) => {\r\n            if (app.name !== this._name) {\r\n                return;\r\n            }\r\n\r\n            this._registry.execute(\"appChanged\", app);\r\n        });\r\n\r\n        _appManager.onAppAvailable((app) => {\r\n            if (app.name !== this._name) {\r\n                return;\r\n            }\r\n            this._props.IsReady = true;\r\n            this._registry.execute(\"appAvailable\", app);\r\n        });\r\n\r\n        _appManager.onAppUnavailable((app) => {\r\n            if (app.name !== this._name) {\r\n                return;\r\n            }\r\n            this._props.IsReady = false;\r\n            this._registry.execute(\"appUnavailable\", app);\r\n        });\r\n    }\r\n\r\n    get name(): string { return this._name; }\r\n    get title(): string { return this._props.Title; }\r\n    get version(): string { return this._props.Version; }\r\n    get autoStart(): boolean { return this._props.AutoStart; }\r\n    get isShell(): boolean { return this._props.IsShell; }\r\n    get caption(): string { return this._props.Caption; }\r\n    get hidden(): boolean { return this._props.IsHidden; }\r\n    get container(): string { return this._props.ApplicationName; }\r\n    get activityType(): string { return this._props.ActivityType; }\r\n    get activityWindowType(): string { return this._props.ActivityWindowType; }\r\n    get windowSettings(): { [key: string]: any } {\r\n        if (!this._props.Arguments) {\r\n            return {};\r\n        }\r\n        return objectClone(this._props.Arguments);\r\n    }\r\n    get allowMultiple(): boolean { return this._props.AllowMultiple; }\r\n    get available(): boolean { return this._props.IsReady || true; }\r\n    get icon(): string { return this._props.Icon; }\r\n    get iconURL(): string { return this._props.IconUrl; }\r\n    get sortOrder(): number { return this._props.SortOrder; }\r\n    get userProperties(): { [key: string]: any } {\r\n        if (!this._props.UserProperties) {\r\n            return {};\r\n        }\r\n        return objectClone(this._props.UserProperties);\r\n    }\r\n    get keywords(): string[] {\r\n        if (!this._props.Keywords) {\r\n            return [];\r\n        }\r\n        return this._props.Keywords;\r\n    }\r\n    get isActivity(): boolean {\r\n        return this._props.ActivityType !== undefined && this._props.ActivityType !== \"\";\r\n    }\r\n\r\n    get configuration(): Glue42.AppManager.LegacyAppConfigProperties {\r\n        return {\r\n            autoStart: this._props.AutoStart,\r\n            caption: this._props.Caption,\r\n            hidden: this._props.IsHidden,\r\n            container: this._props.ApplicationName,\r\n            activityType: this._props.ActivityType,\r\n            allowMultiple: this._props.AllowMultiple\r\n        };\r\n    }\r\n\r\n    get instances() {\r\n        return this._appManager.instances().filter((instance: Glue42.AppManager.Instance) => instance.application.name === this._name);\r\n    }\r\n\r\n    get type() {\r\n        return this._props.Type;\r\n    }\r\n\r\n    get mode() {\r\n        if (!this._props) {\r\n            // no info about the app\r\n            return \"unknown\";\r\n        }\r\n\r\n        // GD3 - we always have Mode from the stream object\r\n        if (this._props.Mode && typeof this._props.Mode === \"string\") {\r\n            return this._props.Mode.toLowerCase() as Glue42.Windows.WindowMode;\r\n        }\r\n\r\n        // GD2\r\n        // return unknown for activity applications\r\n        if (this.isActivity) {\r\n            return \"unknown\";\r\n        }\r\n\r\n        // check definition -> hc.args.mode\r\n        if (this._props.Arguments && this._props.Arguments.mode && typeof this._props.Arguments.mode === \"string\") {\r\n            return this._props.Arguments.mode.toLowerCase() as Glue42.Windows.WindowMode;\r\n        }\r\n\r\n        // if no hc.args.mode, check hc.WindowStyleAttributes\r\n        let styleAttributes = this._props.WindowStyleAttributes;\r\n        if (styleAttributes) {\r\n            // WindowStyleAttributes is not a valid JSON, we will need to find mode in the string\r\n            styleAttributes = styleAttributes.split(\" \").join(\"\");\r\n            const searchFor = \"mode:\\\"\";\r\n            const modeIndex = styleAttributes.indexOf(searchFor);\r\n            if (modeIndex !== -1) {\r\n                const startModeIndex = modeIndex + searchFor.length;\r\n                const stopModeIndex = styleAttributes.indexOf(\"\\\"\", startModeIndex);\r\n                const style = styleAttributes.substr(startModeIndex, stopModeIndex - startModeIndex);\r\n                if (style && typeof style === \"string\") {\r\n                    return style.toLowerCase() as Glue42.Windows.WindowMode;\r\n                }\r\n            }\r\n        }\r\n\r\n        // default mode for GD2\r\n        return \"flat\";\r\n    }\r\n\r\n    public updateFromProps(props: AppProps) {\r\n        if (!this._props) {\r\n            this._props = { Name: props.Name };\r\n        }\r\n\r\n        Object.keys(props).forEach((key) => {\r\n            (this._props as any)[key] = (props as any)[key];\r\n        });\r\n    }\r\n\r\n    public start(context?: unknown, options?: Glue42.AppManager.ApplicationStartOptions): Promise<Glue42.AppManager.Instance> {\r\n        return new Promise<Glue42.AppManager.Instance>(async (resolve, reject) => {\r\n            const name = this._name;\r\n            let startTimeout: number = 60000;\r\n            if (isUndefinedOrNull(context)) {\r\n                context = {};\r\n            } else if (typeof context !== \"object\") {\r\n                return reject(new Error(`Invalid \"context\" parameter - must be an object.`));\r\n            }\r\n\r\n            if (isUndefinedOrNull(options)) {\r\n                options = {};\r\n            } else if (typeof options !== \"object\") {\r\n                return reject(new Error(`Invalid \"options\" parameter - must be an object.`));\r\n            }\r\n\r\n            let waitForAGMInstance = options.waitForAGMReady ?? true;\r\n\r\n            const waitForApplicationInstance = (id: string) => {\r\n                let unsub: () => void;\r\n                // reject after some timeout\r\n                const timeout = setTimeout(() => {\r\n                    if (unsub) {\r\n                        unsub();\r\n                    }\r\n                    reject(`timed out while waiting for instance id ${id} for app ${this.name}`);\r\n                }, startTimeout);\r\n\r\n                const waitFunc = (i: Glue42.AppManager.Instance) => {\r\n                    if (i.id !== id) {\r\n                        return;\r\n                    }\r\n                    if (unsub) {\r\n                        unsub();\r\n                        unsub = undefined;\r\n                    }\r\n                    clearTimeout(timeout);\r\n                    resolve(i);\r\n                };\r\n\r\n                if (waitForAGMInstance) {\r\n                    unsub = this._appManager.onInstanceAgmServerReady(waitFunc);\r\n                } else {\r\n                    // if not there subscribe for instance events\r\n                    unsub = this._appManager.onInstanceStarted(waitFunc);\r\n                }\r\n            };\r\n\r\n            const result = await this._agm.invoke<StartAppResult>(AgmNames.StartApplicationMethodName,\r\n                {\r\n                    Name: name,\r\n                    Context: context,\r\n                    Options: options\r\n                },\r\n                \"best\",\r\n                {\r\n                    methodResponseTimeoutMs: startTimeout\r\n                });\r\n\r\n            const acsResult: StartAppResult = result.returned;\r\n            if (typeof acsResult.timeout !== \"undefined\") {\r\n                startTimeout = acsResult.timeout * 1000;\r\n            }\r\n            if (typeof acsResult.waitForInterop !== \"undefined\" && typeof options.waitForAGMReady === \"undefined\") {\r\n                waitForAGMInstance = acsResult.waitForInterop;\r\n            }\r\n\r\n            if (acsResult && acsResult.Id) {\r\n                if (this._appManager.mode === \"startOnly\") {\r\n                    // we're in startOnly mode, no stream, so we will simulate the instance\r\n                    // based on the data received from GD\r\n                    const instance = this._appManager.handleInstanceStarted({\r\n                        ActivityId: undefined,\r\n                        IsActivityOwner: undefined,\r\n                        Context: undefined,\r\n                        Title: undefined,\r\n                        AgmServers: undefined,\r\n                        Id: acsResult.Id,\r\n                        Name: acsResult.Name,\r\n                    });\r\n                    resolve(instance);\r\n                } else {\r\n                    // we received instance from ACS, let's wait until it appears on the stream\r\n                    waitForApplicationInstance(acsResult.Id);\r\n                }\r\n            } else {\r\n                // we haven't received instance from ACS - this might happen if the app does not\r\n                // support tracking instances (e.g. we start internet explorer with some url)\r\n                resolve(undefined);\r\n            }\r\n        });\r\n    }\r\n\r\n    public onInstanceStarted(callback: (instance: Glue42.AppManager.Instance) => any): UnsubscribeFunction {\r\n        return this._registry.add(\"instanceStarted\", callback);\r\n    }\r\n\r\n    public onInstanceStopped(callback: (instance: Glue42.AppManager.Instance) => any): UnsubscribeFunction {\r\n        return this._registry.add(\"instanceStopped\", callback);\r\n    }\r\n\r\n    public onAvailable(callback: (app: Glue42.AppManager.Application) => any): UnsubscribeFunction {\r\n        if (this._props.IsReady) {\r\n            setTimeout(() => {\r\n                this._registry.execute(\"appAvailable\", this);\r\n            }, 0);\r\n        }\r\n        return this._registry.add(\"appAvailable\", callback);\r\n    }\r\n\r\n    public onUnavailable(callback: (app: Glue42.AppManager.Application) => any): UnsubscribeFunction {\r\n        if (this._props.IsReady === false) {\r\n            setTimeout(() => {\r\n                this._registry.execute(\"appUnavailable\", this);\r\n            }, 0);\r\n        }\r\n        return this._registry.add(\"appUnavailable\", callback);\r\n    }\r\n\r\n    public onChanged(callback: (app: Glue42.AppManager.Application) => any): void {\r\n        this._registry.add(\"appChanged\", callback);\r\n    }\r\n\r\n    public onRemoved(callback: (app: Glue42.AppManager.Application) => any): void {\r\n        this._registry.add(\"appRemoved\", callback);\r\n    }\r\n}\r\n","import * as AgmNames from \"./const/agm-names\";\r\nimport { default as CallbackRegistryFactory, CallbackRegistry, UnsubscribeFunction } from \"callback-registry\";\r\nimport { InstanceProps, WindowContext } from \"./types\";\r\nimport AppManagerImpl from \"./app-manager\";\r\nimport { Glue42 } from \"../../glue\";\r\nimport { Glue42Core } from \"@glue42/core\";\r\nimport { isUndefinedOrNull } from \"../activity/helpers/util\";\r\n\r\nexport default class InstanceImpl implements Glue42.AppManager.Instance {\r\n    private _registry: CallbackRegistry = CallbackRegistryFactory();\r\n\r\n    private _startUpContext: WindowContext;\r\n    private _title: string;\r\n    private _isActivityInstance: boolean;\r\n    private _activityId: string;\r\n    private _inActivity: boolean;\r\n    private _isActivityOwner: boolean;\r\n    private _agmInstance: Partial<Glue42Core.AGM.Instance>;\r\n    private _unsubscribeInstanceAgmServerReady: UnsubscribeFunction;\r\n    private _unsubscribeInstanceStopped: UnsubscribeFunction;\r\n\r\n    constructor(\r\n        private _id: string,\r\n        private _appName: string,\r\n        private _appManager: AppManagerImpl,\r\n        private _agm: Glue42Core.AGM.API,\r\n        private _activities: Glue42.Activities.API,\r\n        private _windows: Glue42.Windows.API,\r\n        startFailed?: boolean\r\n    ) {\r\n        if (startFailed) {\r\n            return;\r\n        }\r\n\r\n        this._unsubscribeInstanceStopped = this._appManager.onInstanceStopped((instance: Glue42.AppManager.Instance) => {\r\n            if (instance.id !== this._id) {\r\n                return;\r\n            }\r\n\r\n            this._registry.execute(\"stopped\", instance);\r\n        });\r\n\r\n        this._unsubscribeInstanceAgmServerReady = this._appManager.onInstanceAgmServerReady((instance) => {\r\n            if (instance.id !== this._id) {\r\n                return;\r\n            }\r\n\r\n            this._registry.execute(\"agmReady\", instance);\r\n        });\r\n    }\r\n\r\n    get id(): string { return this._id; }\r\n\r\n    get application(): Glue42.AppManager.Application { return this._appManager.application(this._appName); }\r\n\r\n    get activity(): Glue42.Activities.Activity {\r\n        if (!this._activities) {\r\n            throw new Error(\"This method requires glue.activities library to be enabled.\");\r\n        }\r\n        return this._activities.all.instances.get()\r\n            .filter((activityInstance: Glue42.Activities.Activity) => activityInstance.id === this._activityId)[0];\r\n    }\r\n\r\n    get isActivityOwner(): boolean { return this._isActivityOwner; }\r\n\r\n    // this property returns a list of activity window instances (not activity instances)\r\n    get activityInstances(): Glue42.AppManager.Instance[] {\r\n        return this._appManager.instances().filter((i) =>\r\n            i.application.type !== \"activity\" && // GD2 backward compatibility -  do not show activity instances into the activity window instances list\r\n            i.activityId && // glue js 2 and 3 bug and breaking change - they will show non activity window instances as activity in case of activityId === undefined\r\n            i.activityId === this._activityId);\r\n    }\r\n\r\n    get activityOwnerInstance(): Glue42.AppManager.Instance {\r\n        if (!this._activityId) {\r\n            return undefined;\r\n        }\r\n        return this.activityInstances.filter((inst) => (inst as InstanceImpl)?.isActivityOwner)[0];\r\n    }\r\n\r\n    get window(): Glue42.Windows.GDWindow {\r\n        if (!this._windows) {\r\n            throw new Error(\"This method requires glue.windows library to be enabled.\");\r\n        }\r\n\r\n        let win = this._windows.list().filter((w) => w.id === this._id)[0];\r\n        if (!win && this._activities && this.activity && this.activityOwnerInstance) {\r\n            // This is covering GD3 activity instance\r\n            win = this.activityOwnerInstance.window;\r\n        }\r\n\r\n        return win;\r\n    }\r\n\r\n    get context(): WindowContext {\r\n        return this._startUpContext ?? this.window?.context ?? {};\r\n    }\r\n\r\n    get title(): string { return this._title; }\r\n\r\n    get isActivityInstance(): boolean { return this._isActivityInstance; }\r\n\r\n    get activityId(): string { return this._activityId; }\r\n\r\n    get inActivity(): boolean { return this._inActivity; }\r\n\r\n    get isSingleWindowApp(): boolean { return !this._inActivity; }\r\n\r\n    get agm(): Partial<Glue42Core.AGM.Instance> {\r\n        return this._agmInstance;\r\n    }\r\n\r\n    public onAgmReady(callback: (instance: Glue42.AppManager.Instance) => any) {\r\n        if (this._agmInstance) {\r\n            setTimeout(() => {\r\n                this._registry.execute(\"agmReady\", this);\r\n            }, 0);\r\n        }\r\n        return this._registry.add(\"agmReady\", callback);\r\n    }\r\n\r\n    public onStopped(callback: (instance: Glue42.AppManager.Instance) => any) {\r\n        return this._registry.add(\"stopped\", callback);\r\n    }\r\n\r\n    // uses this.window and waits for the window to appear if needed\r\n    // we can not remove this.window for legacy reasons\r\n    public getWindow(): Promise<Glue42.Windows.GDWindow> {\r\n        return new Promise((resolve, reject) => {\r\n            // try to get it the normal way\r\n            const result = this.window;\r\n            if (result) {\r\n                resolve(result);\r\n                return;\r\n            }\r\n\r\n            // if we can not find it directly wait for it to appear\r\n            const done = (error?: Error, window?: Glue42.Windows.GDWindow) => {\r\n                if (error) {\r\n                    reject(error);\r\n                }\r\n\r\n                if (window) {\r\n                    resolve(window);\r\n                }\r\n\r\n                setTimeout(() => {\r\n                    clearTimeout(timeout);\r\n                    unsub();\r\n                }, 0);\r\n            };\r\n\r\n            // if not found for 30 sec reject\r\n            const timeout = setTimeout(() => {\r\n                done(new Error(`can not find a window with id ${this._id}`));\r\n            }, 30000);\r\n\r\n            const unsub = this._windows.onWindowAdded((w) => {\r\n                if (w.id === this._id) {\r\n                    done(undefined, w);\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    public updateFromProps(props: InstanceProps): void {\r\n        this._startUpContext = props.Context;\r\n        this._title = props.Title;\r\n        this._isActivityInstance = false;\r\n        if (props.ActivityId && props.ActivityId !== \"\") {\r\n            this._activityId = props.ActivityId;\r\n            this._isActivityInstance = true;\r\n        }\r\n        this._isActivityOwner = props.IsActivityOwner;\r\n        if (!this._activityId && this._startUpContext && this._startUpContext.activityId) {\r\n            this._activityId = this._startUpContext.activityId;\r\n        }\r\n        this._inActivity = Boolean(this._activityId);\r\n\r\n        this.updateAgmInstanceFromProps(props);\r\n    }\r\n\r\n    public updateAgmInstanceFromProps(props: InstanceProps) {\r\n        if (!props.AgmServers) {\r\n            return;\r\n        }\r\n\r\n        const agmInstances: Glue42Core.AGM.Instance[] = props.AgmServers as Glue42Core.AGM.Instance[];\r\n        if (agmInstances && agmInstances.length > 0 && !isUndefinedOrNull(agmInstances[0])) {\r\n            this._agmInstance = agmInstances[0];\r\n        }\r\n    }\r\n\r\n    public stop(): Promise<void> {\r\n        return new Promise((resolve, reject) => {\r\n            const unsubscribe = this._appManager.onInstanceStopped((instance) => {\r\n                if (instance.id === this._id) {\r\n                    unsubscribe();\r\n                    resolve();\r\n                }\r\n            });\r\n\r\n            this._agm.invoke(\r\n                AgmNames.StopApplicationMethodName,\r\n                {\r\n                    Name: this._appName,\r\n                    Id: this._id\r\n                })\r\n                .then(() => {\r\n                    if (this._appManager.mode === \"startOnly\") {\r\n                        this._appManager.handleInstanceStopped({\r\n                            Name: this._appName,\r\n                            Id: this.id,\r\n                            Context: undefined,\r\n                            Title: undefined,\r\n                            ActivityId: undefined,\r\n                            IsActivityOwner: undefined,\r\n                            AgmServers: undefined\r\n                        });\r\n                        // in startOnly mode, resolve stop as soon as we receive\r\n                        resolve();\r\n                    }\r\n                })\r\n                .catch((err: any) => reject(err));\r\n        });\r\n    }\r\n\r\n    public activate(): Promise<Glue42Core.AGM.InvocationResult<any>> {\r\n        return this._agm.invoke(AgmNames.ActivateApplicationMethodName, { Name: this._appName, Id: this._id });\r\n    }\r\n\r\n    public done() {\r\n\r\n        // remove all handlers\r\n        this._registry.clear();\r\n        // remove subscriptions\r\n        this._unsubscribeInstanceAgmServerReady();\r\n        this._unsubscribeInstanceStopped();\r\n    }\r\n\r\n    public getContext(): Promise<object> {\r\n        return Promise.resolve(this.context);\r\n    }\r\n}\r\n","import ApplicationImpl from \"./application\";\r\nimport { Glue42 } from \"../../glue\";\r\nimport { AppProps, InstanceProps } from \"./types\";\r\nimport { default as CallbackRegistryFactory, CallbackRegistry, UnsubscribeFunction } from \"callback-registry\";\r\nimport InstanceImpl from \"./instance\";\r\nimport { Glue42Core } from \"@glue42/core\";\r\n\r\nexport default class AppManagerImpl implements Glue42.AppManager.AppManager {\r\n\r\n    private _apps: { [key: string]: ApplicationImpl } = {};\r\n    private _instances: InstanceImpl[] = [];\r\n    private _registry: CallbackRegistry = CallbackRegistryFactory();\r\n\r\n    constructor(\r\n        public mode: Glue42.AppManager.Mode,\r\n        private _agm: Glue42Core.AGM.API,\r\n        private _activities: Glue42.Activities.API,\r\n        private _windows: Glue42.Windows.API,\r\n        private _logger: Glue42Core.Logger.API,\r\n        private _gdMajorVersion: number\r\n    ) {\r\n        //\r\n    }\r\n\r\n    public application = (name: string) => {\r\n        if (typeof name !== \"string\") {\r\n            throw new Error(`\"name\" must be string`);\r\n        }\r\n        return this._apps[name];\r\n    }\r\n\r\n    public applications = () => {\r\n        return Object.keys(this._apps).map((k: string) => this._apps[k]);\r\n    }\r\n\r\n    public instances = () => {\r\n        return this._instances;\r\n    }\r\n\r\n    public getMyInstance = () => {\r\n        const glue42gd = typeof window !== \"undefined\" && (window as any).glue42gd;\r\n        if (glue42gd) {\r\n            if (this._gdMajorVersion >= 3) {\r\n                // GD3 check\r\n                const instanceId = glue42gd.appInstanceId;\r\n                return this._instances.find((i) => i.id === instanceId);\r\n            }\r\n        } else {\r\n            const instanceId = this._agm.instance.instance;\r\n            return this._instances.find((i) => i.id === instanceId);\r\n        }\r\n        return undefined;\r\n    }\r\n\r\n    public handleAppAdded = (props: AppProps) => {\r\n        const id = this._getAppId(props);\r\n        this._logger.trace(`adding app ${id}`);\r\n        this._apps[id] = new ApplicationImpl(this, id, this._agm);\r\n        const app = this._updateAppFromProps(props);\r\n\r\n        this._registry.execute(\"appAdded\", app);\r\n        // keeps backwards compatibility\r\n        this._registry.execute(\"appAvailable\", app);\r\n    }\r\n\r\n    public handleAppUpdated = (props: AppProps) => {\r\n        // TODO: check side effects, is this._apps updated?\r\n\r\n        const app = this._updateAppFromProps(props);\r\n\r\n        this._registry.execute(\"appChanged\", app);\r\n    }\r\n\r\n    public handleAppRemoved = (props: AppProps) => {\r\n        const id = this._getAppId(props);\r\n        this._logger.trace(`removing app ${id}`);\r\n        const app = this.application(id);\r\n\r\n        // remove all instances related to the app\r\n        this._instances = this._instances.filter((i) => i.application.name !== app.name);\r\n\r\n        delete this._apps[id];\r\n\r\n        this._registry.execute(\"appRemoved\", app);\r\n    }\r\n\r\n    // not called from GD3\r\n    public handleAppReady = (props: AppProps) => {\r\n        const id = this._getAppId(props);\r\n        const app = this._getAppOrThrow(id);\r\n        app.updateFromProps(props);\r\n\r\n        if (app.available) {\r\n            this._registry.execute(\"appAvailable\", app);\r\n        } else {\r\n            this._registry.execute(\"appUnavailable\", app);\r\n        }\r\n    }\r\n\r\n    public handleInstanceStarted = (props: InstanceProps): InstanceImpl => {\r\n        this._logger.trace(`started app ${props.Name} ${props.Id}`);\r\n        const id = this._getInstanceId(props);\r\n        const appName = this._getInstanceAppName(props);\r\n\r\n        const instance = new InstanceImpl(id, appName, this, this._agm, this._activities, this._windows);\r\n\r\n        this._updateInstanceFromProps(instance, props);\r\n\r\n        this._instances.push(instance);\r\n\r\n        this._registry.execute(\"instanceStarted\", instance);\r\n        return instance;\r\n    }\r\n\r\n    public handleInstanceStopped = (props: InstanceProps) => {\r\n        this._logger.trace(`failed to start app ${props.Name} ${props.Id}`);\r\n\r\n        const id = this._getInstanceId(props);\r\n        const appName = this._getInstanceAppName(props);\r\n        const instance = this._getInstanceOrThrow(id, appName);\r\n\r\n        this._instances = this._instances.filter((i) => !this._matchInstance(i, id, appName));\r\n\r\n        this._registry.execute(\"instanceStopped\", instance);\r\n        instance.done();\r\n    }\r\n\r\n    public handleInstanceAgmServerReady = (props: InstanceProps) => {\r\n\r\n        const id = this._getInstanceId(props);\r\n        const appName = this._getInstanceAppName(props);\r\n        const instance = this._getInstanceOrThrow(id, appName);\r\n\r\n        instance.updateAgmInstanceFromProps(props);\r\n\r\n        this._registry.execute(\"instanceAgmServerReady\", instance);\r\n    }\r\n\r\n    public handleInstanceStartFailed = (props: InstanceProps) => {\r\n\r\n        const id = this._getInstanceId(props);\r\n        const appName = this._getInstanceAppName(props);\r\n        const startFailed = true;\r\n        const instance = new InstanceImpl(id, appName, undefined, undefined, undefined, undefined, startFailed);\r\n\r\n        this._updateInstanceFromProps(instance, props);\r\n\r\n        this._registry.execute(\"instanceStartFailed\", instance);\r\n    }\r\n\r\n    public handleInstanceUpdated = (props: InstanceProps) => {\r\n\r\n        const id = this._getInstanceId(props);\r\n        const app = this._getInstanceAppName(props);\r\n        const instance = this._getInstanceOrThrow(id, app);\r\n\r\n        this._updateInstanceFromProps(instance, props);\r\n    }\r\n\r\n    /** Event subscription methods */\r\n    public onInstanceStarted = (callback: (item: Glue42.AppManager.Instance) => any): UnsubscribeFunction => {\r\n        return this._registry.add(\"instanceStarted\", callback, this._instances);\r\n    }\r\n\r\n    public onInstanceStartFailed = (callback: (item: Glue42.AppManager.Instance) => any): UnsubscribeFunction => {\r\n        return this._registry.add(\"instanceStartFailed\", callback);\r\n    }\r\n\r\n    public onInstanceStopped = (callback: (item: Glue42.AppManager.Instance) => any): UnsubscribeFunction => {\r\n        return this._registry.add(\"instanceStopped\", callback);\r\n    }\r\n\r\n    public onInstanceUpdated = (callback: (item: Glue42.AppManager.Instance) => any): UnsubscribeFunction => {\r\n        return this._registry.add(\"instanceChanged\", callback);\r\n    }\r\n\r\n    public onInstanceAgmServerReady = (callback: (item: Glue42.AppManager.Instance) => any): UnsubscribeFunction => {\r\n        return this._registry.add(\"instanceAgmServerReady\", callback);\r\n    }\r\n\r\n    public onAppAdded = (callback: (item: Glue42.AppManager.Application) => any): UnsubscribeFunction => {\r\n        return this._registry.add(\"appAdded\", callback, Object.values(this._apps));\r\n    }\r\n\r\n    public onAppRemoved = (callback: (item: Glue42.AppManager.Application) => any): UnsubscribeFunction => {\r\n        return this._registry.add(\"appRemoved\", callback);\r\n    }\r\n\r\n    public onAppAvailable = (callback: (item: Glue42.AppManager.Application) => any): UnsubscribeFunction => {\r\n        return this._registry.add(\"appAvailable\", callback);\r\n    }\r\n\r\n    public onAppUnavailable = (callback: (item: Glue42.AppManager.Application) => any): UnsubscribeFunction => {\r\n        return this._registry.add(\"appUnavailable\", callback);\r\n    }\r\n\r\n    public onAppChanged = (callback: (item: Glue42.AppManager.Application) => any): UnsubscribeFunction => {\r\n        return this._registry.add(\"appChanged\", callback);\r\n    }\r\n\r\n    private _getAppOrThrow(id: string) {\r\n        const result = this.application(id);\r\n        if (!result) {\r\n            throw Error(`app with id ${id} not found`);\r\n        }\r\n        return result;\r\n    }\r\n\r\n    private _getAppId(props: AppProps) {\r\n        return props.Name;\r\n    }\r\n\r\n    private _matchInstance(instance: Glue42.AppManager.Instance, id: string, appName: string) {\r\n        return instance.id === id && instance.application.name === appName;\r\n    }\r\n\r\n    private _getInstanceByIdAndName(id: string, appName: string) {\r\n        return this._instances.filter((i) => this._matchInstance(i, id, appName))[0];\r\n    }\r\n\r\n    private _getInstanceOrThrow(id: string, appName: string) {\r\n        const result = this._getInstanceByIdAndName(id, appName);\r\n        if (!result) {\r\n            throw Error(`instance with id ${id} not found`);\r\n        }\r\n        return result;\r\n    }\r\n\r\n    private _getInstanceId(props: InstanceProps) {\r\n        return props.Id;\r\n    }\r\n\r\n    private _getInstanceAppName(props: InstanceProps) {\r\n        return props.Name;\r\n    }\r\n\r\n    private _updateAppFromProps(props: AppProps) {\r\n        const id = this._getAppId(props);\r\n        this._logger.trace(`updating app with  + ${id}, ${props}`);\r\n        const app = this._getAppOrThrow(id);\r\n\r\n        app.updateFromProps(props);\r\n\r\n        return app;\r\n    }\r\n\r\n    private _updateInstanceFromProps(instance: InstanceImpl, props: InstanceProps) {\r\n        this._logger.trace(\"updating instance with \" + this._getInstanceId(props) + \" for app \" + this._getInstanceAppName(props));\r\n        instance.updateFromProps(props);\r\n    }\r\n}\r\n","import * as AgmNames from \"./const/agm-names\";\r\nimport { default as CallbackRegistryFactory, CallbackRegistry, UnsubscribeFunction } from \"callback-registry\";\r\nimport { Glue42 } from \"../../glue\";\r\nimport { Glue42Core } from \"@glue42/core\";\r\nimport { OnGDShutdownMethodName } from \"./const/agm-names\";\r\n\r\nfunction promisify(promise: Promise<any>, successCallback: (arg?: any) => void, errorCallback: (err?: any) => void) {\r\n    const isFunction = (arg: any) => {\r\n        return !!(arg && arg.constructor && arg.call && arg.apply);\r\n    };\r\n\r\n    if (!isFunction(successCallback) && !isFunction(errorCallback)) {\r\n        return promise;\r\n    }\r\n\r\n    if (!isFunction(successCallback)) {\r\n        successCallback = () => {\r\n            // EMPTY\r\n        };\r\n    } else if (!isFunction(errorCallback)) {\r\n        errorCallback = () => {\r\n            // EMPTY\r\n        };\r\n    }\r\n\r\n    return promise.then(successCallback, errorCallback);\r\n}\r\n\r\nexport default class EntitlementsImpl implements Glue42.AppManager.Entitlements {\r\n\r\n    private _registry: CallbackRegistry = CallbackRegistryFactory();\r\n    private _isMethodRegistered = false;\r\n\r\n    constructor(\r\n        private _agm: Glue42Core.AGM.API\r\n    ) {\r\n        //\r\n    }\r\n\r\n    public handleBranchModified = (branch: Glue42.AppManager.Branch) => {\r\n        this._registry.execute(\"branchChanged\", branch);\r\n    }\r\n\r\n    public handleBranchesModified = (branches: Glue42.AppManager.Branch[]) => {\r\n        this._registry.execute(\"branchesChanged\", branches);\r\n    }\r\n\r\n    public getRegion = (success?: (region: string) => any, error?: (err: any) => any): void | Promise<string> => {\r\n        return promisify(\r\n            this._agmInvoke(\r\n                AgmNames.GetConfigurationRegionMethodName,\r\n                (e: Glue42Core.AGM.InvocationResult<{ Region: string }>) => e.returned.Region\r\n            ),\r\n            success,\r\n            error\r\n        );\r\n    }\r\n\r\n    public getBranches = (success?: (branches: Glue42.AppManager.Branch[]) => any, error?: (err: any) => any): void | Promise<Glue42.AppManager.Branch[]> => {\r\n        const promise = this._agmInvoke(\r\n            AgmNames.GetBranchesMethodName,\r\n            (e) => {\r\n                const obj = e.returned.Branches as { [key: string]: Glue42.AppManager.Branch };\r\n                return Object.keys(obj).map((key) => obj[key]);\r\n            }\r\n        );\r\n\r\n        return promisify(promise, success, error);\r\n    }\r\n\r\n    public getCurrentBranch = (success?: (branch: Glue42.AppManager.Branch) => any, error?: (err: any) => any): void | Promise<Glue42.AppManager.Branch> => {\r\n        const promise = this._agmInvoke(\r\n            AgmNames.GetCurrentBranchMethodName,\r\n            (e) => e.returned.Branch,\r\n            undefined\r\n        );\r\n\r\n        return promisify(promise, success, error);\r\n    }\r\n\r\n    public setRegion = (region: string, success?: (resMsg: string) => any, error?: (err: any) => any): void | Promise<string> => {\r\n        const promise = this._agmInvoke(\r\n            AgmNames.SetConfigurationRegionMethodName,\r\n            (e) => e.returned.ResultMessage,\r\n            { Region: region }\r\n        );\r\n\r\n        return promisify(promise, success, error);\r\n    }\r\n\r\n    public setCurrentBranch = (branch: string, success?: (resMsg: string) => any, error?: (err: any) => any): void | Promise<string> => {\r\n        const promise = this._agmInvoke(\r\n            AgmNames.SetCurrentBranchMethodName,\r\n            (e) => e.returned.ResultMessage,\r\n            { Branch: branch }\r\n        );\r\n\r\n        return promisify(promise, success, error);\r\n    }\r\n\r\n    public currentUser = (success?: (user: Glue42.AppManager.UserInfo) => any, error?: (err: any) => any): void | Promise<Glue42.AppManager.UserInfo> => {\r\n        const promise = this._agmInvoke(AgmNames.GetUserMethodName);\r\n        return promisify(promise, success, error);\r\n    }\r\n\r\n    public getFunctionalEntitlement = (funct: string, success?: (entitlement: string) => any, error?: (err: any) => any): void | Promise<string> => {\r\n        const promise = this._agmInvoke(\r\n            AgmNames.GetFunctionalEntitlementMethodName,\r\n            (e) => e.returned.Entitlement,\r\n            { Function: funct }\r\n        );\r\n\r\n        return promisify(promise, success, error);\r\n    }\r\n\r\n    public getFunctionalEntitlementBranch = (funct: string, branch: string, success?: (entitlement: string) => any, error?: (err: any) => any): void | Promise<string> => {\r\n        const promise = this._agmInvoke(\r\n            AgmNames.GetFunctionalEntitlementMethodName,\r\n            (e) => e.returned.Entitlement,\r\n            { Function: funct, Branch: branch }\r\n        );\r\n        return promisify(promise, success, error);\r\n    }\r\n\r\n    public canI = (func: string, success?: (allowed: boolean) => any, error?: (err: any) => any): void | Promise<boolean> => {\r\n        const promise = this._agmInvoke(\r\n            AgmNames.CanIMethodName,\r\n            (e) => e.returned.Result,\r\n            { Function: func }\r\n        );\r\n\r\n        return promisify(promise, success, error);\r\n    }\r\n\r\n    public canIBranch = (func: string, branch: string, success?: (allowed: boolean) => any, error?: (err: any) => any): void | Promise<boolean> => {\r\n        const promise = this._agmInvoke(\r\n            AgmNames.CanIMethodName,\r\n            (e) => e.returned.Result,\r\n            { Function: func, Branch: branch }\r\n        );\r\n\r\n        return promisify(promise, success, error);\r\n    }\r\n\r\n    public onBranchesChanged = (callback: (branches: Glue42.AppManager.Branch[]) => any): UnsubscribeFunction => {\r\n        return this._registry.add(\"branchesChanged\", callback);\r\n    }\r\n\r\n    public onBranchChanged = (callback: (branch: Glue42.AppManager.Branch) => any): UnsubscribeFunction => {\r\n        return this._registry.add(\"branchChanged\", callback);\r\n    }\r\n\r\n    public exit = (options?: Glue42.AppManager.ExitOpts): Promise<any> => {\r\n        return this._agmInvoke(\r\n            AgmNames.ShutdownMethodName,\r\n            null,\r\n            options\r\n        );\r\n    }\r\n\r\n    public onShuttingDown = (callback: (args: Glue42.AppManager.ShuttingDownEventArgs) => Promise<{ prevent: boolean }>) => {\r\n        this.registerMethod();\r\n        return this._registry.add(\"onShuttingDown\", callback);\r\n    }\r\n\r\n    public restart = (options?: Glue42.AppManager.ExitOpts): Promise<any> => {\r\n        return this._agmInvoke(\r\n            AgmNames.RestartMethodName,\r\n            null,\r\n            options\r\n        );\r\n    }\r\n\r\n    private registerMethod() {\r\n        if (!this._isMethodRegistered) {\r\n            this._agm.register(OnGDShutdownMethodName, async (args) => {\r\n                try {\r\n                    const results = await Promise.all(this._registry.execute(\"onShuttingDown\", args)) as Array<{ prevent: boolean }>;\r\n                    const prevent = results.some((r) => r.prevent);\r\n                    return { prevent };\r\n                } catch (error) {\r\n                    //\r\n                }\r\n            });\r\n            this._isMethodRegistered = true;\r\n        }\r\n    }\r\n\r\n    private _agmInvoke = (\r\n        method: string,\r\n        transformFunction?: (res: Glue42Core.AGM.InvocationResult<any>) => any,\r\n        args?: object\r\n    ): Promise<any> => {\r\n        args = args || {};\r\n        return new Promise((resolve, reject) => {\r\n            const errHandler: Glue42Core.AGM.InvokeErrorHandler = (error) => reject(error);\r\n            this._agm.invoke(method, args)\r\n                .then((result) => {\r\n                    if (!transformFunction) {\r\n                        transformFunction = (d: Glue42Core.AGM.InvocationResult<any>) => d.returned;\r\n                    }\r\n                    resolve(transformFunction(result));\r\n                })\r\n                .catch(errHandler);\r\n        });\r\n    }\r\n}\r\n","import * as AgmNames from \"./const/agm-names\";\r\nimport { objectValues } from \"./helper\";\r\nimport { Glue42Core } from \"@glue42/core\";\r\nimport AppManagerImpl from \"./app-manager\";\r\n\r\n/** Retrieves application snapshot from ACS */\r\nexport default function snapshot(agm: Glue42Core.AGM.API, appManager: AppManagerImpl): Promise<void> {\r\n    return new Promise<void>((resolve, reject) => {\r\n        agm.invoke(AgmNames.GetApplicationsMethodName, { skipIcon: true })\r\n            .then((response) => {\r\n                const data = response.returned;\r\n                if (!data) {\r\n                    resolve();\r\n                }\r\n\r\n                const applications = data.applications;\r\n                if (!applications) {\r\n                    resolve();\r\n                }\r\n\r\n                objectValues(applications).map((item) => appManager.handleAppAdded(item));\r\n\r\n                resolve();\r\n            })\r\n            .catch((err) => reject(`Error getting application snapshot: ${err.message}`));\r\n    });\r\n}\r\n","export const OnNotificationEvent = \"OnNotification\";\r\n\r\nexport const OnBranchChangedEvent = \"OnBranchChanged\";\r\nexport const OnBranchesModifiedEvent = \"OnBranchesModified\";\r\n\r\nexport const OnApplicationAddedEvent = \"OnApplicationAdded\";\r\nexport const OnApplicationRemovedEvent = \"OnApplicationRemoved\";\r\nexport const OnApplicationChangedEvent = \"OnApplicationChanged\";\r\nexport const OnApplicationReadyEvent = \"OnApplicationReady\";\r\n\r\nexport const OnApplicationStartedEvent = \"OnApplicationStarted\";\r\nexport const OnApplicationRegisteredEvent = \"OnApplicationRegistered\";\r\nexport const OnApplicationAgmServerReadyEvent = \"OnApplicationAgmServerReady\";\r\nexport const OnApplicationUpdatedEvent = \"OnApplicationUpdated\";\r\nexport const OnApplicationStoppedEvent = \"OnApplicationStopped\";\r\nexport const OnApplicationStartFailedEvent = \"OnApplicationStartFailed\";\r\n","import * as AgmNames from \"./const/agm-names\";\r\nimport * as EventNames from \"./const/event-names\";\r\nimport { objectValues } from \"./helper\";\r\nimport { Glue42Core } from \"@glue42/core\";\r\nimport { Glue42 } from \"../../glue\";\r\nimport { AppProps, InstanceProps } from \"./types\";\r\nimport AppManagerImpl from \"./app-manager\";\r\nimport EntitlementsImpl from \"./entitlements\";\r\n\r\n/** Subscribe for the AGM stream published by ACS and distributes events to applications and instances components */\r\nexport default function createDataSubscription(agm: Glue42Core.AGM.API, applications: AppManagerImpl, entitlements: EntitlementsImpl, skipIcons: boolean) {\r\n    let subscription: Glue42Core.AGM.Subscription;\r\n    let initiated = false;\r\n    const start = () => {\r\n        let resolveFunc: () => void;\r\n        let rejectFunc: (error?: any) => void;\r\n\r\n        const resultPromise = new Promise<void>((resolve, reject) => {\r\n            resolveFunc = resolve;\r\n            rejectFunc = reject;\r\n        });\r\n\r\n        agm.subscribe(AgmNames.OnEventMethodName, { arguments: { skipIcon: skipIcons }, waitTimeoutMs: 10000 })\r\n            .then((s) => {\r\n                subscription = s;\r\n                subscription.onData((streamData: Glue42Core.AGM.StreamData) => {\r\n                    const events: any = streamData.data;\r\n\r\n                    const onApplicationAddedEventArgs: AppProps[] = objectValues(events[EventNames.OnApplicationAddedEvent]);\r\n                    onApplicationAddedEventArgs.map((item: AppProps) => applications.handleAppAdded(item));\r\n\r\n                    objectValues(events[EventNames.OnApplicationChangedEvent])\r\n                        .map((item: AppProps) => applications.handleAppUpdated(item));\r\n\r\n                    objectValues(events[EventNames.OnApplicationRemovedEvent])\r\n                        .map((item: AppProps) => applications.handleAppRemoved(item));\r\n\r\n                    objectValues(events[EventNames.OnApplicationReadyEvent])\r\n                        .map((item: AppProps) => applications.handleAppReady(item));\r\n\r\n                    const onApplicationStartedEventArgs: InstanceProps[] = objectValues(events[EventNames.OnApplicationStartedEvent]);\r\n                    onApplicationStartedEventArgs.map((item: InstanceProps) => applications.handleInstanceStarted(item));\r\n\r\n                    objectValues(events[EventNames.OnApplicationStartFailedEvent])\r\n                        .map((item: InstanceProps) => applications.handleInstanceStartFailed(item));\r\n\r\n                    objectValues(events[EventNames.OnApplicationStoppedEvent])\r\n                        .map((item: InstanceProps) => applications.handleInstanceStopped(item));\r\n\r\n                    objectValues(events[EventNames.OnApplicationUpdatedEvent])\r\n                        .map((item: InstanceProps) => applications.handleInstanceUpdated(item));\r\n\r\n                    objectValues(events[EventNames.OnApplicationAgmServerReadyEvent])\r\n                        .map((item: InstanceProps) => applications.handleInstanceAgmServerReady(item));\r\n\r\n                    objectValues(events[EventNames.OnBranchChangedEvent])\r\n                        .map((item: Glue42.AppManager.Branch) => entitlements.handleBranchModified(item));\r\n\r\n                    objectValues(events[EventNames.OnBranchesModifiedEvent])\r\n                        .map((item: Glue42.AppManager.Branch[]) => entitlements.handleBranchesModified(item));\r\n\r\n                    if (!initiated) {\r\n                        initiated = true;\r\n                        const hasMyAppInSnapShot = onApplicationAddedEventArgs.some((a) => a.Name === agm.instance.application);\r\n                        const hasMyInstanceInSnapShot = onApplicationStartedEventArgs.some((i) => i.Id === agm.instance.instance);\r\n                        if (hasMyAppInSnapShot) {\r\n                            if (hasMyInstanceInSnapShot) {\r\n                                resolveFunc();\r\n                            } else {\r\n                                const un = applications.onInstanceStarted((i) => {\r\n                                    if (i.id === agm.instance.instance) {\r\n                                        un();\r\n                                        resolveFunc();\r\n                                    }\r\n                                });\r\n                            }\r\n                        } else {\r\n                            resolveFunc();\r\n                        }\r\n                    }\r\n                });\r\n\r\n                subscription.onFailed((err: any) => rejectFunc(err));\r\n\r\n            })\r\n            .catch((err) => rejectFunc(`Error subscribing for ${AgmNames.OnEventMethodName} stream. Err: ${err.message ?? err}`));\r\n\r\n        return resultPromise;\r\n    };\r\n\r\n    const stop = () => {\r\n        if (subscription) {\r\n            subscription.close();\r\n        }\r\n    };\r\n\r\n    return {\r\n        start,\r\n        stop\r\n    };\r\n}\r\n","import { Glue42Core } from \"@glue42/core\";\r\nimport { Glue42 } from \"../../glue\";\r\n\r\nexport const InMemoryStoreCommandMethodName = \"T42.ACS.InMemoryStoreCommand\";\r\n\r\nexport type InMemoryStoreCommandArgs = InMemoryImportCommand | InMemoryExportCommand | InMemoryRemoveCommand | InMemoryClearCommand;\r\n\r\nexport interface GenericInMemoryCommand<C, A> {\r\n    command: C;\r\n    args?: A;\r\n}\r\n\r\ntype InMemoryImportCommand = GenericInMemoryCommand<\"import\", InMemoryImportArgs>;\r\ninterface InMemoryImportArgs {\r\n    apps: Glue42.AppManager.Definition[];\r\n    mode?: \"merge\" | \"replace\";\r\n}\r\n\r\ntype InMemoryRemoveCommand = GenericInMemoryCommand<\"remove\", { apps: string[] }>;\r\nexport interface InMemoryRemoveArgs {\r\n    apps: string[];\r\n}\r\n\r\ntype InMemoryExportCommand = GenericInMemoryCommand<\"export\", undefined>;\r\ntype InMemoryClearCommand = GenericInMemoryCommand<\"clear\", undefined>;\r\n\r\nexport interface InMemoryExportResult {\r\n    apps: Glue42.AppManager.Definition[];\r\n}\r\n\r\nexport class InMemoryStore implements Glue42.AppManager.InMemoryStore {\r\n\r\n    constructor(private interop: Glue42Core.Interop.API) {\r\n    }\r\n\r\n    public import(apps: Glue42.AppManager.Definition[], mode?: \"replace\" | \"merge\"): Promise<Glue42.AppManager.ImportResult> {\r\n        if (!apps || !Array.isArray(apps)) {\r\n            return Promise.reject(\"invalid apps argument - should be an array of application definitions\");\r\n        }\r\n        if (mode && mode !== \"replace\" && mode !== \"merge\") {\r\n            return Promise.reject(\"invalid mode argument - should be 'replace' or 'merge'\");\r\n        }\r\n\r\n        mode = mode ?? \"replace\";\r\n        const command: InMemoryImportCommand = {\r\n            command: \"import\",\r\n            args: {\r\n                apps,\r\n                mode\r\n            }\r\n        };\r\n        return this.interop.invoke<Glue42.AppManager.ImportResult>(InMemoryStoreCommandMethodName, command)\r\n            .then((r) => r.returned);\r\n    }\r\n\r\n    public export(): Promise<Glue42.AppManager.Definition[]> {\r\n        return this.interop.invoke<InMemoryExportResult>(InMemoryStoreCommandMethodName, { command: \"export\" })\r\n            .then((r) => r.returned.apps);\r\n    }\r\n\r\n    public remove(app: string): Promise<void> {\r\n        if (!app || typeof app !== \"string\") {\r\n            return Promise.reject(\"invalid app name, should be a string value\");\r\n        }\r\n        const command: InMemoryRemoveCommand = {\r\n            command: \"remove\",\r\n            args: {\r\n                apps: [app]\r\n            }\r\n        };\r\n        return this.interop.invoke<void>(InMemoryStoreCommandMethodName, command).then((r) => r.returned);\r\n    }\r\n\r\n    public clear(): Promise<void> {\r\n        const command: InMemoryClearCommand = {\r\n            command: \"clear\"\r\n        };\r\n        return this.interop.invoke<void>(InMemoryStoreCommandMethodName, command).then((r) => r.returned);\r\n    }\r\n\r\n    public createAppDef(name: string, url: string): Glue42.AppManager.Definition {\r\n        if (!url) {\r\n            url = \"https://google.com\";\r\n        }\r\n        return {\r\n            name,\r\n            type: \"window\",\r\n            title: name,\r\n            details: {\r\n                url\r\n            }\r\n        };\r\n    }\r\n}\r\n","import AppManagerImpl from \"./app-manager\";\r\nimport EntitlementsImpl from \"./entitlements\";\r\nimport snapshot from \"./snapshot\";\r\nimport subscriptionFactory from \"./data-subscription\";\r\nimport { Glue42 } from \"../../glue\";\r\nimport { InMemoryStore } from \"./in-memory\";\r\n\r\nexport default (config: Glue42.AppManager.Config): Glue42.AppManager.API => {\r\n\r\n    if (!config) {\r\n        throw Error(\"config not set\");\r\n    }\r\n\r\n    if (!config.agm) {\r\n        throw Error(\"config.agm is missing\");\r\n    }\r\n\r\n    const START_ONLY: Glue42.AppManager.Mode = \"startOnly\";\r\n    const SKIP_ICONS: Glue42.AppManager.Mode = \"skipIcons\";\r\n    const FULL: Glue42.AppManager.Mode = \"full\";\r\n\r\n    const mode: Glue42.AppManager.Mode = config.mode || START_ONLY;\r\n    if (mode !== START_ONLY && mode !== SKIP_ICONS && mode !== FULL) {\r\n        throw new Error(`Invalid mode for appManager lib - ${mode} is not supported`);\r\n    }\r\n\r\n    const activities = config.activities;\r\n    const agm = config.agm;\r\n    const logger = config.logger;\r\n    const windows = config.windows;\r\n    const appManager = new AppManagerImpl(mode, agm, activities, windows, logger.subLogger(\"applications\"), config.gdMajorVersion);\r\n    const entitlements = new EntitlementsImpl(agm);\r\n\r\n    let readyPromise: Promise<void>;\r\n    if (mode === START_ONLY) {\r\n        readyPromise = snapshot(agm, appManager);\r\n    } else {\r\n        const subscription = subscriptionFactory(agm, appManager, entitlements, mode === SKIP_ICONS);\r\n        readyPromise = subscription.start();\r\n    }\r\n\r\n    const api: Glue42.AppManager.API = {\r\n        ready: () => readyPromise,\r\n\r\n        applications: appManager.applications,\r\n        application: appManager.application,\r\n\r\n        onAppAdded: appManager.onAppAdded,\r\n        onAppRemoved: appManager.onAppRemoved,\r\n        onAppChanged: appManager.onAppChanged,\r\n        onAppAvailable: appManager.onAppAvailable,\r\n        onAppUnavailable: appManager.onAppUnavailable,\r\n\r\n        instances: appManager.instances,\r\n        get myInstance() {\r\n            return appManager.getMyInstance();\r\n        },\r\n\r\n        onInstanceStarted: appManager.onInstanceStarted,\r\n        onInstanceStopped: appManager.onInstanceStopped,\r\n        onInstanceUpdated: appManager.onInstanceUpdated,\r\n        onInstanceStartFailed: appManager.onInstanceStartFailed,\r\n\r\n        getRegion: entitlements.getRegion,\r\n        getBranches: entitlements.getBranches,\r\n        getCurrentBranch: entitlements.getCurrentBranch,\r\n        getFunctionalEntitlement: entitlements.getFunctionalEntitlement,\r\n        getFunctionalEntitlementBranch: entitlements.getFunctionalEntitlementBranch,\r\n\r\n        setCurrentBranch: entitlements.setCurrentBranch,\r\n        setRegion: entitlements.setRegion,\r\n\r\n        currentUser: entitlements.currentUser,\r\n\r\n        canI: entitlements.canI,\r\n        canIBranch: entitlements.canIBranch,\r\n\r\n        onBranchesChanged: entitlements.onBranchesChanged,\r\n\r\n        exit: entitlements.exit,\r\n        restart: entitlements.restart,\r\n\r\n        onShuttingDown: entitlements.onShuttingDown,\r\n\r\n        inMemory: new InMemoryStore(agm)\r\n    };\r\n\r\n    return api;\r\n};\r\n","'use strict';\n\n// Found this seed-based random generator somewhere\n// Based on The Central Randomizer 1.3 (C) 1997 by Paul Houle (houle@msc.cornell.edu)\n\nvar seed = 1;\n\n/**\n * return a random number based on a seed\n * @param seed\n * @returns {number}\n */\nfunction getNextValue() {\n    seed = (seed * 9301 + 49297) % 233280;\n    return seed/(233280.0);\n}\n\nfunction setSeed(_seed_) {\n    seed = _seed_;\n}\n\nmodule.exports = {\n    nextValue: getNextValue,\n    seed: setSeed\n};\n","'use strict';\n\nvar randomFromSeed = require('./random/random-from-seed');\n\nvar ORIGINAL = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-';\nvar alphabet;\nvar previousSeed;\n\nvar shuffled;\n\nfunction reset() {\n    shuffled = false;\n}\n\nfunction setCharacters(_alphabet_) {\n    if (!_alphabet_) {\n        if (alphabet !== ORIGINAL) {\n            alphabet = ORIGINAL;\n            reset();\n        }\n        return;\n    }\n\n    if (_alphabet_ === alphabet) {\n        return;\n    }\n\n    if (_alphabet_.length !== ORIGINAL.length) {\n        throw new Error('Custom alphabet for shortid must be ' + ORIGINAL.length + ' unique characters. You submitted ' + _alphabet_.length + ' characters: ' + _alphabet_);\n    }\n\n    var unique = _alphabet_.split('').filter(function(item, ind, arr){\n       return ind !== arr.lastIndexOf(item);\n    });\n\n    if (unique.length) {\n        throw new Error('Custom alphabet for shortid must be ' + ORIGINAL.length + ' unique characters. These characters were not unique: ' + unique.join(', '));\n    }\n\n    alphabet = _alphabet_;\n    reset();\n}\n\nfunction characters(_alphabet_) {\n    setCharacters(_alphabet_);\n    return alphabet;\n}\n\nfunction setSeed(seed) {\n    randomFromSeed.seed(seed);\n    if (previousSeed !== seed) {\n        reset();\n        previousSeed = seed;\n    }\n}\n\nfunction shuffle() {\n    if (!alphabet) {\n        setCharacters(ORIGINAL);\n    }\n\n    var sourceArray = alphabet.split('');\n    var targetArray = [];\n    var r = randomFromSeed.nextValue();\n    var characterIndex;\n\n    while (sourceArray.length > 0) {\n        r = randomFromSeed.nextValue();\n        characterIndex = Math.floor(r * sourceArray.length);\n        targetArray.push(sourceArray.splice(characterIndex, 1)[0]);\n    }\n    return targetArray.join('');\n}\n\nfunction getShuffled() {\n    if (shuffled) {\n        return shuffled;\n    }\n    shuffled = shuffle();\n    return shuffled;\n}\n\n/**\n * lookup shuffled letter\n * @param index\n * @returns {string}\n */\nfunction lookup(index) {\n    var alphabetShuffled = getShuffled();\n    return alphabetShuffled[index];\n}\n\nmodule.exports = {\n    characters: characters,\n    seed: setSeed,\n    lookup: lookup,\n    shuffled: getShuffled\n};\n","'use strict';\n\nvar crypto = typeof window === 'object' && (window.crypto || window.msCrypto); // IE 11 uses window.msCrypto\n\nfunction randomByte() {\n    if (!crypto || !crypto.getRandomValues) {\n        return Math.floor(Math.random() * 256) & 0x30;\n    }\n    var dest = new Uint8Array(1);\n    crypto.getRandomValues(dest);\n    return dest[0] & 0x30;\n}\n\nmodule.exports = randomByte;\n","'use strict';\n\nvar randomByte = require('./random/random-byte');\n\nfunction encode(lookup, number) {\n    var loopCounter = 0;\n    var done;\n\n    var str = '';\n\n    while (!done) {\n        str = str + lookup( ( (number >> (4 * loopCounter)) & 0x0f ) | randomByte() );\n        done = number < (Math.pow(16, loopCounter + 1 ) );\n        loopCounter++;\n    }\n    return str;\n}\n\nmodule.exports = encode;\n","'use strict';\nvar alphabet = require('./alphabet');\n\n/**\n * Decode the id to get the version and worker\n * Mainly for debugging and testing.\n * @param id - the shortid-generated id.\n */\nfunction decode(id) {\n    var characters = alphabet.shuffled();\n    return {\n        version: characters.indexOf(id.substr(0, 1)) & 0x0f,\n        worker: characters.indexOf(id.substr(1, 1)) & 0x0f\n    };\n}\n\nmodule.exports = decode;\n","'use strict';\n\nvar encode = require('./encode');\nvar alphabet = require('./alphabet');\n\n// Ignore all milliseconds before a certain time to reduce the size of the date entropy without sacrificing uniqueness.\n// This number should be updated every year or so to keep the generated id short.\n// To regenerate `new Date() - 0` and bump the version. Always bump the version!\nvar REDUCE_TIME = 1459707606518;\n\n// don't change unless we change the algos or REDUCE_TIME\n// must be an integer and less than 16\nvar version = 6;\n\n// Counter is used when shortid is called multiple times in one second.\nvar counter;\n\n// Remember the last time shortid was called in case counter is needed.\nvar previousSeconds;\n\n/**\n * Generate unique id\n * Returns string id\n */\nfunction build(clusterWorkerId) {\n\n    var str = '';\n\n    var seconds = Math.floor((Date.now() - REDUCE_TIME) * 0.001);\n\n    if (seconds === previousSeconds) {\n        counter++;\n    } else {\n        counter = 0;\n        previousSeconds = seconds;\n    }\n\n    str = str + encode(alphabet.lookup, version);\n    str = str + encode(alphabet.lookup, clusterWorkerId);\n    if (counter > 0) {\n        str = str + encode(alphabet.lookup, counter);\n    }\n    str = str + encode(alphabet.lookup, seconds);\n\n    return str;\n}\n\nmodule.exports = build;\n","'use strict';\nvar alphabet = require('./alphabet');\n\nfunction isShortId(id) {\n    if (!id || typeof id !== 'string' || id.length < 6 ) {\n        return false;\n    }\n\n    var characters = alphabet.characters();\n    var len = id.length;\n    for(var i = 0; i < len;i++) {\n        if (characters.indexOf(id[i]) === -1) {\n            return false;\n        }\n    }\n    return true;\n}\n\nmodule.exports = isShortId;\n","'use strict';\n\nvar alphabet = require('./alphabet');\nvar encode = require('./encode');\nvar decode = require('./decode');\nvar build = require('./build');\nvar isValid = require('./is-valid');\n\n// if you are using cluster or multiple servers use this to make each instance\n// has a unique value for worker\n// Note: I don't know if this is automatically set when using third\n// party cluster solutions such as pm2.\nvar clusterWorkerId = require('./util/cluster-worker-id') || 0;\n\n/**\n * Set the seed.\n * Highly recommended if you don't want people to try to figure out your id schema.\n * exposed as shortid.seed(int)\n * @param seed Integer value to seed the random alphabet.  ALWAYS USE THE SAME SEED or you might get overlaps.\n */\nfunction seed(seedValue) {\n    alphabet.seed(seedValue);\n    return module.exports;\n}\n\n/**\n * Set the cluster worker or machine id\n * exposed as shortid.worker(int)\n * @param workerId worker must be positive integer.  Number less than 16 is recommended.\n * returns shortid module so it can be chained.\n */\nfunction worker(workerId) {\n    clusterWorkerId = workerId;\n    return module.exports;\n}\n\n/**\n *\n * sets new characters to use in the alphabet\n * returns the shuffled alphabet\n */\nfunction characters(newCharacters) {\n    if (newCharacters !== undefined) {\n        alphabet.characters(newCharacters);\n    }\n\n    return alphabet.shuffled();\n}\n\n/**\n * Generate unique id\n * Returns string id\n */\nfunction generate() {\n  return build(clusterWorkerId);\n}\n\n// Export all other functions as properties of the generate function\nmodule.exports = generate;\nmodule.exports.generate = generate;\nmodule.exports.seed = seed;\nmodule.exports.worker = worker;\nmodule.exports.characters = characters;\nmodule.exports.decode = decode;\nmodule.exports.isValid = isValid;\n","'use strict';\nmodule.exports = require('./lib/index');\n","import shortid from \"shortid\";\r\nimport { Glue42 } from \"../../../glue\";\r\nimport { Executor, JumpListUpdateActionSettings, JumpListUpdateSettings, JumpListSettingsInternal } from \"../types\";\r\n\r\nconst T42JumpListAction = \"T42.JumpList.Action\";\r\n\r\nexport interface ActionCallback {\r\n    callbackId: string;\r\n    callback: () => Promise<void>;\r\n}\r\n\r\nexport class JumpListManager {\r\n\r\n    private _executor: Executor;\r\n    private _agm: Glue42.AGM.API;\r\n    private _logger: Glue42.Logger.API;\r\n    private _groupActionCallbacks: Map<string, ActionCallback[]> = new Map<string, ActionCallback[]>();\r\n    private _registered: boolean = false;\r\n\r\n    public init(executor: Executor, agm: Glue42.AGM.API, logger: Glue42.Logger.API) {\r\n        this._executor = executor;\r\n        this._agm = agm;\r\n        this._logger = logger;\r\n\r\n        this.registerCallbackMethod();\r\n    }\r\n\r\n    public setEnabled(windowId: string, enabled: boolean): Promise<void> {\r\n        const settings: JumpListUpdateSettings = {\r\n            enabled\r\n        };\r\n\r\n        return this._executor.updateJumpList(windowId, settings);\r\n    }\r\n\r\n    public createCategory(windowId: string, title: string, actions: Glue42.Windows.JumpListActionSettings[]): Promise<void> {\r\n        this.validateActions(title, actions);\r\n        const settings: JumpListUpdateSettings = {\r\n            category: {\r\n                title,\r\n                operation: \"create\",\r\n                actions: this.toUpdateActions(windowId, \"create\", title, actions)\r\n            }\r\n        };\r\n\r\n        return this._executor.updateJumpList(windowId, settings);\r\n    }\r\n\r\n    public removeCategory(windowId: string, title: string) {\r\n        const settings: JumpListUpdateSettings = {\r\n            category: {\r\n                title,\r\n                operation: \"remove\",\r\n                actions: []\r\n            }\r\n        };\r\n\r\n        this.manageActionCallback(windowId, settings.category.operation, title);\r\n\r\n        return this._executor.updateJumpList(windowId, settings);\r\n    }\r\n\r\n    public createActions(windowId: string, categoryTitle: string, actions: Glue42.Windows.JumpListActionSettings[]): Promise<void> {\r\n        this.validateActions(categoryTitle, actions);\r\n        const settings: JumpListUpdateSettings = {\r\n            category: {\r\n                title: categoryTitle,\r\n                operation: \"update\",\r\n                actions: this.toUpdateActions(windowId, \"create\", categoryTitle, actions)\r\n            }\r\n        };\r\n\r\n        return this._executor.updateJumpList(windowId, settings);\r\n    }\r\n\r\n    public removeActions(windowId: string, categoryTitle: string, actions: Glue42.Windows.JumpListActionSettings[]): Promise<void> {\r\n        const settings: JumpListUpdateSettings = {\r\n            category: {\r\n                title: categoryTitle,\r\n                operation: \"update\",\r\n                actions: this.toUpdateActions(windowId, \"remove\", categoryTitle, actions)\r\n            }\r\n        };\r\n\r\n        return this._executor.updateJumpList(windowId, settings);\r\n    }\r\n\r\n    public async getActions(windowId: string, catgoryTitle: string): Promise<Glue42.Windows.JumpListActionSettings[]> {\r\n        const actions: Glue42.Windows.JumpListActionSettings[] = [];\r\n        const configuration = await this.getJumpListSettings(windowId);\r\n        const currentCategory = configuration.categories.find((category) => category.title === catgoryTitle);\r\n        if (currentCategory) {\r\n            currentCategory.actions.forEach((action) => {\r\n                const actionCallback = this.getActionCallback(action.callbackId);\r\n                if (actionCallback) {\r\n                    action.callback = actionCallback.callback;\r\n                }\r\n                actions.push({\r\n                    icon: action.icon,\r\n                    callback: action.callback,\r\n                    singleInstanceTitle: action.singleInstanceTitle,\r\n                    multiInstanceTitle: action.multiInstanceTitle\r\n                }as Glue42.Windows.JumpListActionSettings);\r\n            });\r\n        }\r\n        return Promise.resolve(actions);\r\n    }\r\n\r\n    public getJumpListSettings(windowId: string): Promise<JumpListSettingsInternal> {\r\n        return this._executor.getJumpList(windowId);\r\n    }\r\n\r\n    private toUpdateActions(windowId: string, operation: string, categoryTitle: string, actions: Glue42.Windows.JumpListActionSettings[]): JumpListUpdateActionSettings[] {\r\n        return actions.map((action) => {\r\n            const updateAction = {\r\n                icon: action.icon,\r\n                callback: action.callback,\r\n                callbackId: shortid.generate(),\r\n                singleInstanceTitle: action.singleInstanceTitle,\r\n                multiInstanceTitle: action.multiInstanceTitle,\r\n                operation\r\n            } as JumpListUpdateActionSettings;\r\n\r\n            this.manageActionCallback(windowId, operation, categoryTitle, updateAction);\r\n\r\n            return updateAction;\r\n        });\r\n    }\r\n\r\n    private manageActionCallback(windowId: string, operation: string, categoryTitle: string, updateAction?: JumpListUpdateActionSettings) {\r\n        const groupCallbacksKey = `${categoryTitle}-${windowId}`;\r\n        if (operation === \"create\") {\r\n            if (!this._groupActionCallbacks.has(groupCallbacksKey)) {\r\n                this._groupActionCallbacks.set(groupCallbacksKey, []);\r\n            }\r\n\r\n            const categoryActionCallbacks = this._groupActionCallbacks.get(groupCallbacksKey);\r\n            categoryActionCallbacks.push( {\r\n                callbackId: updateAction.callbackId,\r\n                callback: updateAction.callback\r\n            });\r\n\r\n        } else if (operation === \"remove\") {\r\n            if (updateAction) {\r\n                let categoryActionCallbacks = this._groupActionCallbacks.get(groupCallbacksKey);\r\n                categoryActionCallbacks = categoryActionCallbacks.filter((accCal) => accCal.callbackId !== updateAction.callbackId);\r\n                if (categoryActionCallbacks.length === 0) {\r\n                    this._groupActionCallbacks.delete(groupCallbacksKey);\r\n                } else {\r\n                    this._groupActionCallbacks.set(groupCallbacksKey, categoryActionCallbacks);\r\n                }\r\n            } else {\r\n                this._groupActionCallbacks.delete(groupCallbacksKey);\r\n            }\r\n        }\r\n    }\r\n\r\n    private registerCallbackMethod() {\r\n        if (this._registered) {\r\n            return;\r\n        }\r\n        this._registered = true;\r\n\r\n        try {\r\n            this._agm.register(T42JumpListAction, (args: any, caller: any) => {\r\n                const actionCallback = this.getActionCallback(args.callbackId);\r\n                if (actionCallback) {\r\n                    try {\r\n                        actionCallback.callback();\r\n                    } catch (e) {\r\n                        this._logger.error(\"Unable to execute user callback for jump list action!\", e);\r\n                    }\r\n                }\r\n            });\r\n        } catch (e) {\r\n            this._logger.error(`Unable to register method ${T42JumpListAction} for invoking jump list action callbacks!`, e);\r\n            return Promise.reject(e);\r\n        }\r\n    }\r\n\r\n    private getActionCallback(callbackId: string): ActionCallback {\r\n        let callbackAction: ActionCallback;\r\n        [...this._groupActionCallbacks.values()].forEach((callbacks: ActionCallback[]) => {\r\n            const callback = callbacks.find((cal) => cal.callbackId === callbackId);\r\n            if (callback) {\r\n                callbackAction = callback;\r\n            }\r\n        });\r\n        return callbackAction;\r\n    }\r\n\r\n    private validateActions(category: string, actions: Glue42.Windows.JumpListActionSettings[]) {\r\n        if (!(actions && actions.length > 0)) {\r\n            throw new Error(`Category '${category}' doesn't contain any actions!`);\r\n        }\r\n\r\n        actions.forEach((action) => {\r\n            if (!action.singleInstanceTitle) {\r\n                throw new Error(`Category '${category}' contains an action with undefined singleInstanceTitle!`);\r\n            }\r\n            if (!action.multiInstanceTitle) {\r\n                throw new Error(`Category '${category}' contains an action with undefined multiInstanceTitle!`);\r\n            }\r\n            if (!action.callback) {\r\n                throw new Error(`Category '${category}' contains an action with undefined callback function!`);\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nexport default new JumpListManager();\r\n","import { CallbackRegistry, UnsubscribeFunction, default as CallbackFactory } from \"callback-registry\";\r\nimport { Glue42Core } from \"@glue42/core\";\r\nimport { PendingWindowState, WindowEvents, WindowWrapper } from \"./types\";\r\n\r\nexport class WindowStore {\r\n    private readonly waitForTimeoutInMilliseconds: number = 60000;\r\n    private _windows: { [key: string]: WindowWrapper } = {};\r\n    private _pendingWindows: { [key: string]: WindowWrapper } = {};\r\n    private _pendingWindowsStates: { [key: string]: PendingWindowState } = {};\r\n    private _registry: CallbackRegistry;\r\n    private _logger: Glue42Core.Logger.API;\r\n\r\n    constructor() {\r\n        this._registry = CallbackFactory();\r\n    }\r\n\r\n    public init(logger: Glue42Core.Logger.API) {\r\n        this._logger = logger;\r\n    }\r\n\r\n    // Returns a window which either in Ready OR NOT 'ready' state (when the window is NOT marked with readyToShow)\r\n    public get(id: string): WindowWrapper {\r\n        return this._windows[id] || this._pendingWindows[id];\r\n    }\r\n\r\n    // Returns a window which is in 'ready' state (when the window is marked with readyToShow)\r\n    public getIfReady(id: string): WindowWrapper {\r\n        return this._windows[id];\r\n    }\r\n\r\n    public get list(): { [key: string]: WindowWrapper } {\r\n        return this._windows;\r\n    }\r\n\r\n    public add(window: WindowWrapper) {\r\n        const isExist = this._pendingWindows[window.API.id] ? true : false;\r\n        if (isExist) {\r\n            this._logger.error(`trying to add window with id ${window.API.id} from windowStore, which already exists`);\r\n            return;\r\n        }\r\n        const remote = window.API.windowType === \"remote\";\r\n        this._pendingWindows[window.API.id] = window;\r\n        this._pendingWindowsStates[window.API.id] = {\r\n            ready: false,\r\n            urlChanged: remote, // remote windows don't have url events\r\n        };\r\n\r\n        this._registry.execute(\"on-added\", window);\r\n    }\r\n\r\n    public remove(window: WindowWrapper) {\r\n        delete this._windows[window.API.id];\r\n        delete this._pendingWindows[window.API.id];\r\n        delete this._pendingWindowsStates[window.API.id];\r\n        this._registry.execute(\"on-removed\", window);\r\n    }\r\n\r\n    public setReadyState(windowId: string) {\r\n        const targetWindowState = this._pendingWindowsStates[windowId];\r\n\r\n        if (typeof targetWindowState === \"undefined\") {\r\n            return;\r\n        }\r\n\r\n        targetWindowState.ready = true;\r\n\r\n        if (targetWindowState.urlChanged) {\r\n            this.markReadyToShow(windowId);\r\n        }\r\n    }\r\n\r\n    public setUrlChangedState(windowId: string) {\r\n        const targetWindowState = this._pendingWindowsStates[windowId];\r\n\r\n        if (typeof targetWindowState === \"undefined\") {\r\n            return;\r\n        }\r\n\r\n        targetWindowState.urlChanged = true;\r\n\r\n        if (targetWindowState.ready) {\r\n            this.markReadyToShow(windowId);\r\n        }\r\n    }\r\n\r\n    public waitFor(id: string): Promise<WindowWrapper> {\r\n        return new Promise((resolve, reject) => {\r\n\r\n            let un: UnsubscribeFunction;\r\n\r\n            const timeout = setTimeout(() => {\r\n                un();\r\n                reject(\"waitFor timed out.\");\r\n            }, this.waitForTimeoutInMilliseconds);\r\n\r\n            const win = this._windows[id];\r\n            if (win) {\r\n                clearTimeout(timeout);\r\n                resolve(win);\r\n            } else {\r\n                un = this.onReadyWindow((w: WindowWrapper) => {\r\n                    if (w.API.id !== id) {\r\n                        return;\r\n                    }\r\n                    clearTimeout(timeout);\r\n                    un();\r\n                    resolve(w);\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    public onReadyWindow(callback: (win: WindowWrapper) => void): UnsubscribeFunction {\r\n        return this._registry.add(\"on-ready\", callback);\r\n    }\r\n\r\n    public onAdded(callback: (win: WindowWrapper) => void): UnsubscribeFunction {\r\n        return this._registry.add(\"on-added\", callback);\r\n    }\r\n\r\n    public onRemoved(callback: (win: WindowWrapper) => void): UnsubscribeFunction {\r\n        return this._registry.add(\"on-removed\", callback);\r\n    }\r\n\r\n    // newly created windows now need to hear both \"ready\" and \"urlChanged\" events in otder to be markedReadyToShow\r\n    public markReadyToShow(windowId: string) {\r\n        if (this._pendingWindows[windowId]) {\r\n            this._windows[windowId] = this._pendingWindows[windowId];\r\n            delete this._pendingWindows[windowId];\r\n            delete this._pendingWindowsStates[windowId];\r\n        }\r\n\r\n        this._registry.execute(\"on-ready\", this._windows[windowId]);\r\n    }\r\n}\r\n\r\nexport default new WindowStore();\r\n","import { Glue42 } from \"../glue\";\r\n\r\nexport default class Utils {\r\n    public static getGDMajorVersion() {\r\n        if (typeof window === \"undefined\") {\r\n            return -1;\r\n        }\r\n        if (!window.glueDesktop) {\r\n            return -1;\r\n        }\r\n        if (!window.glueDesktop.version) {\r\n            return -1;\r\n        }\r\n        const ver = Number(window.glueDesktop.version.substr(0, 1));\r\n        return isNaN(ver) ? -1 : ver;\r\n    }\r\n\r\n    public static callbackifyPromise<T>(\r\n        action: () => Promise<T>,\r\n        successCallback?: (args?: T) => void,\r\n        errorCallback?: (errorMessage: string) => void): Promise<T> {\r\n\r\n        const fail = (error: any) => {\r\n            let msg = error;\r\n            if (error instanceof Error) {\r\n                msg = error.message;\r\n            }\r\n            if (typeof errorCallback === \"function\") {\r\n                errorCallback(msg);\r\n                return;\r\n            }\r\n\r\n            return Promise.reject(msg);\r\n        };\r\n\r\n        try {\r\n            return action()\r\n                .then((result) => {\r\n                    if (typeof successCallback === \"function\") {\r\n                        successCallback(result);\r\n                    }\r\n                    return result;\r\n                })\r\n                .catch((error) => {\r\n                    return fail(error);\r\n                });\r\n        } catch (err) {\r\n            return fail(err);\r\n        }\r\n    }\r\n\r\n    public static getMonitor(bounds: Glue42.Windows.Bounds, displays?: Glue42.Screen[]): Glue42.Screen {\r\n        const monitorsSortedByOverlap = displays.map((m) => {\r\n            const { left, top, workingAreaWidth: width, workingAreaHeight: height } = m;\r\n            const overlap = this.calculateTotalOverlap({ left, top, width, height }, bounds);\r\n            return {\r\n                monitor: m,\r\n                totalOverlap: overlap\r\n            };\r\n        }).sort((a, b) => b.totalOverlap - a.totalOverlap);\r\n\r\n        return monitorsSortedByOverlap[0].monitor;\r\n    }\r\n\r\n    public static getDisplayCenterOfScreen(a: Partial<Glue42.Windows.Bounds>, currentDisplay: Glue42.Displays.Display, primaryDisplay: Glue42.Displays.Display) {\r\n        const physicalWidth = a.width / currentDisplay.scaleFactor;\r\n        const physicalHeight = a.height / currentDisplay.scaleFactor;\r\n        const physicalDisplayLeft = currentDisplay.workArea.left / primaryDisplay.scaleFactor;\r\n        const physicalDisplayTop = currentDisplay.workArea.top / primaryDisplay.scaleFactor;\r\n        const physicalDisplayWidth = currentDisplay.workArea.width / currentDisplay.scaleFactor;\r\n        const physicalDisplayHeight = currentDisplay.workArea.height / currentDisplay.scaleFactor;\r\n\r\n        const physicalHOffset = Math.max((physicalDisplayWidth - physicalWidth) / 2, 0);\r\n        const physicalVOffset = Math.max((physicalDisplayHeight - physicalHeight) / 2, 0);\r\n        const centeredPhysicalLeft = Math.floor(physicalDisplayLeft + physicalHOffset);\r\n        const centeredPhysicalTop = Math.floor(physicalDisplayTop + physicalVOffset);\r\n        const left = centeredPhysicalLeft * primaryDisplay.scaleFactor;\r\n        const top = centeredPhysicalTop * primaryDisplay.scaleFactor;\r\n\r\n        return {\r\n            left,\r\n            top,\r\n            width: a.width,\r\n            height: a.height\r\n        };\r\n    }\r\n\r\n    public static isNode() {\r\n        if (typeof Utils._isNode !== \"undefined\") {\r\n            return Utils._isNode;\r\n        }\r\n\r\n        if (typeof window !== \"undefined\") {\r\n            Utils._isNode = false;\r\n            return false;\r\n        }\r\n\r\n        // Only Node.JS has a process variable that is of [[Class]] process\r\n        try {\r\n            Utils._isNode = Object.prototype.toString.call(global.process) === \"[object process]\";\r\n        } catch (e) {\r\n            Utils._isNode = false;\r\n        }\r\n        return Utils._isNode;\r\n    }\r\n\r\n    private static _isNode?: boolean;\r\n\r\n    private static calculateTotalOverlap(r1: Glue42.Windows.Bounds, r2: Glue42.Windows.Bounds) {\r\n        const r1x = r1.left;\r\n        const r1y = r1.top;\r\n        const r1xMax = r1x + r1.width;\r\n        const r1yMax = r1y + r1.height;\r\n\r\n        const r2x = r2.left;\r\n        const r2y = r2.top;\r\n        const r2xMax = r2x + r2.width;\r\n        const r2yMax = r2y + r2.height;\r\n\r\n        const xOverlap = Math.max(0, Math.min(r1xMax, r2xMax) - Math.max(r1x, r2x));\r\n        const yOverlap = Math.max(0, Math.min(r1yMax, r2yMax) - Math.max(r1y, r2y));\r\n\r\n        return xOverlap * yOverlap;\r\n    }\r\n}\r\n","import { Glue42 } from \"../../../glue\";\r\nimport jumpListManager from \"./manager\";\r\n\r\nexport default class JumpListActions implements Glue42.Windows.JumpListActionsAPI {\r\n\r\n    private _categoryTitle: string;\r\n\r\n    constructor(private windowId: string, configuration: Glue42.Windows.JumpListCategorySettings) {\r\n        this._categoryTitle = configuration.title;\r\n    }\r\n\r\n    public list(): Promise<Glue42.Windows.JumpListActionSettings[]> {\r\n        return jumpListManager.getActions(this.windowId, this._categoryTitle);\r\n    }\r\n\r\n    public create(actions: Glue42.Windows.JumpListActionSettings[]): Promise<void> {\r\n        return jumpListManager.createActions(this.windowId, this._categoryTitle, actions);\r\n    }\r\n\r\n    public remove(actions: Glue42.Windows.JumpListActionSettings[]): Promise<void> {\r\n        return jumpListManager.removeActions(this.windowId, this._categoryTitle, actions);\r\n    }\r\n}\r\n","import { Glue42 } from \"../../../glue\";\r\nimport JumpListActions from \"./actions\";\r\nimport jumpListManager from \"./manager\";\r\n\r\nexport default class JumpListCategories implements Glue42.Windows.JumpListCategoriesAPI {\r\n\r\n    constructor(private windowId: string) {\r\n    }\r\n\r\n    public list(): Promise<Glue42.Windows.JumpListCategory[]> {\r\n        return this.getCategories();\r\n    }\r\n\r\n    public create(title: string, actions: Glue42.Windows.JumpListActionSettings[]): Promise<void> {\r\n        return jumpListManager.createCategory(this.windowId, title, actions);\r\n    }\r\n\r\n    public remove(title: string): Promise<void> {\r\n        return jumpListManager.removeCategory(this.windowId, title);\r\n    }\r\n\r\n    public async find(title: string): Promise<Glue42.Windows.JumpListCategory> {\r\n        const categories = await this.getCategories();\r\n        return categories.find((cat) => cat.title === title);\r\n    }\r\n\r\n    private async getCategories(): Promise<Glue42.Windows.JumpListCategory[]> {\r\n        const result: Glue42.Windows.JumpListCategory[] = [];\r\n\r\n        const configuration = await jumpListManager.getJumpListSettings(this.windowId);\r\n        configuration.categories.forEach((category) => {\r\n            result.push({\r\n                title: category.title,\r\n                actions: new JumpListActions(this.windowId, category)\r\n            });\r\n        });\r\n        return result;\r\n    }\r\n}\r\n","import { Glue42 } from \"../../../glue\";\r\nimport JumpListCategories from \"./categories\";\r\nimport jumpListManager from \"./manager\";\r\n\r\nexport default class JumpList implements Glue42.Windows.JumpList {\r\n\r\n    private _categories: Glue42.Windows.JumpListCategoriesAPI;\r\n\r\n    constructor(private windowId: string) {\r\n        this._categories = new JumpListCategories(windowId);\r\n    }\r\n\r\n    get categories(): Glue42.Windows.JumpListCategoriesAPI {\r\n        return this._categories;\r\n    }\r\n\r\n    public async isEnabled(): Promise<boolean> {\r\n        const configuration = await jumpListManager.getJumpListSettings(this.windowId);\r\n        return configuration.enabled;\r\n    }\r\n\r\n    public setEnabled(enabled: boolean): Promise<void> {\r\n        return jumpListManager.setEnabled(this.windowId, enabled);\r\n    }\r\n}\r\n","import CallbackFactory, { CallbackRegistry, UnsubscribeFunction } from \"callback-registry\";\r\nimport { Glue42Core } from \"@glue42/core\";\r\nimport { Glue42 } from \"../../glue\";\r\nimport {\r\n    Executor,\r\n    FrameButton,\r\n    Neighbours,\r\n    WindowConstructorOptions,\r\n    WindowEvents,\r\n    WindowWrapper,\r\n    FlashOptions,\r\n    DetachTabOptions,\r\n} from \"./types\";\r\nimport * as util from \"../activity/helpers/util\";\r\nimport utils from \"../utils\";\r\n\r\nimport { default as windowStore } from \"./store\";\r\nimport GDWindow = Glue42.Windows.GDWindow;\r\nimport { CompositionChangedData } from \"./environment/gd/types\";\r\nimport JumpList from \"./jumpList/main\";\r\n\r\nexport default (id: string, options: WindowConstructorOptions, executor: Executor, logger: Glue42Core.Logger.API, appManagerGetter: () => Glue42.AppManager.API, displayAPIGetter: () => Glue42.Displays.API, channelsAPIGetter: () => Glue42.Channels, agm: Glue42.AGM.API): WindowWrapper => {\r\n    const _registry: CallbackRegistry = CallbackFactory();\r\n    const _logger = logger.subLogger(`window ${id}`);\r\n    const getChannels = () => {\r\n        const channels = channelsAPIGetter();\r\n        if (!channels) {\r\n            throw new Error(`To use this method you need to enable channels API - set the channels property to true when initializing the Glue42 library`);\r\n        }\r\n        return channels;\r\n    };\r\n\r\n    let resultWindow: Glue42.Windows.GDWindow;\r\n\r\n    const _id = id;\r\n    const _name: string = options.name;\r\n    const _mode: Glue42.Windows.WindowMode = options.mode;\r\n    let _bounds: Glue42.Windows.Bounds = options.bounds;\r\n    let _url: string = options.url;\r\n    let _title: string = options.title;\r\n    let _context: any = options.context ?? {};\r\n    let _frameColor: string = options.frameColor;\r\n    let _focus: boolean = options.focus;\r\n    let _neighbours: Neighbours = options.neighbours ?? {};\r\n    let _groupId: string = options.groupId;\r\n    let _isGroupHeaderVisible: boolean = options.isGroupHeaderVisible;\r\n    let _isTabHeaderVisible: boolean = options.isTabHeaderVisible;\r\n    let _isTabSelected: boolean = options.isTabSelected ?? false;\r\n    let _settings: Glue42.Windows.WindowSettings = options.settings;\r\n    const _applicationName = options.applicationName;\r\n\r\n    // is Window visible\r\n    let _isVisible: boolean = options.isVisible;\r\n\r\n    // is Window sticky enable\r\n    let _isSticky: boolean = options.isSticky;\r\n\r\n    // Window state Collapsed | Expanded\r\n    let _isCollapsed: boolean = options.isCollapsed;\r\n\r\n    // Window state normal | maximized | minimized\r\n    let _windowState: Glue42.Windows.WindowState = options.state;\r\n\r\n    // tabGroupId only for window with 'Tab' mode\r\n    let _tabGroupId: string = options.tabGroupId;\r\n    let _tabIndex: number = options.tabIndex;\r\n\r\n    let _frameId: string = options.frameId;\r\n    // window is locked or unlocked;\r\n    let _isLocked: boolean = options.isLocked;\r\n\r\n    let _group: Glue42.Windows.Group;\r\n\r\n    // Holding all frame buttons\r\n    let _frameButtons: Glue42.Windows.ButtonInfo[] = options.frameButtons ?? [];\r\n\r\n    // Holding the current zoom factor\r\n    let _zoomFactor = options.zoomFactor;\r\n\r\n    let _placementSettings: Glue42.Windows.PlacementSettings = options.placementSettings;\r\n\r\n    const _jumpList: JumpList = new JumpList(id);\r\n\r\n    //#region \"AGM methods\"\r\n\r\n    function close(success?: (window: Glue42.Windows.GDWindow) => void, error?: (error: string) => void): Promise<Glue42.Windows.GDWindow> {\r\n        return utils.callbackifyPromise(() => {\r\n            if (!id) {\r\n                throw new Error(\"The window is already closed.\");\r\n            }\r\n            return executor.close(resultWindow);\r\n        }, success, error);\r\n    }\r\n\r\n    function navigate(newUrl: string, options: Glue42.Windows.LoadURLOptions): Promise<Glue42.Windows.GDWindow>;\r\n    function navigate(newUrl: string, success?: (window: GDWindow) => void, error?: (error: string) => void): Promise<GDWindow>;\r\n    function navigate(newUrl: string, optionsOrCallback: Glue42.Windows.LoadURLOptions | ((window: Glue42.Windows.GDWindow) => void), error?: (error: string) => void): Promise<Glue42.Windows.GDWindow> {\r\n        if (typeof optionsOrCallback === \"function\") {\r\n            return utils.callbackifyPromise(() => {\r\n                if (util.isNullOrWhiteSpace(newUrl)) {\r\n                    throw new Error(\"The new URL must be a non-empty string.\");\r\n                }\r\n                return executor.navigate(resultWindow, newUrl);\r\n            }, optionsOrCallback, error);\r\n        }\r\n        if (util.isNullOrWhiteSpace(newUrl)) {\r\n            throw new Error(\"The new URL must be a non-empty string.\");\r\n        }\r\n        return executor.navigate(resultWindow, newUrl, optionsOrCallback);\r\n    }\r\n\r\n    function setStyle(style: Glue42.Windows.WindowStyle, success?: (window: Glue42.Windows.GDWindow) => void, error?: (error: string) => void): Promise<Glue42.Windows.GDWindow> {\r\n        return utils.callbackifyPromise(() => {\r\n            if (!style || Object.keys(style).length === 0 || Object.keys(style).every((key) => !key)) {\r\n                throw new Error(\"Invalid style arguments: \" + JSON.stringify(style));\r\n            }\r\n            if (style && style.focus !== undefined) {\r\n                if (typeof style.focus !== \"boolean\") {\r\n                    throw new Error(\"Focus must be a boolean value. Currently, only `focus: true` is supported.\");\r\n                } else if (style.focus === false) {\r\n                    _logger.warn(\"`focus: false` is not supported!\");\r\n                }\r\n            }\r\n            if (style && style.hidden !== undefined && typeof style.hidden !== \"boolean\") {\r\n                throw new Error(\"The `hidden` property must hold a boolean value.\");\r\n            }\r\n            for (const prop of [\"minHeight\", \"maxHeight\", \"minWidth\", \"maxWidth\"]) {\r\n                const styleAsAny = style as any;\r\n                const value = styleAsAny[prop];\r\n                if (prop in style) {\r\n                    if (util.isUndefinedOrNull(value)) {\r\n                        delete styleAsAny[prop];\r\n                        continue;\r\n                    }\r\n                    if (!util.isNumber(styleAsAny[prop])) {\r\n                        throw new Error(`\"${prop}\" must be a number`);\r\n                    }\r\n                }\r\n            }\r\n            return executor.setStyle(resultWindow, style);\r\n        }, success, error);\r\n    }\r\n    // REVIEW\r\n    function resetButtons(buttons: Glue42.Windows.WindowButtons, success?: (window: Glue42.Windows.GDWindow) => void, error?: (error: string) => void): Promise<Glue42.Windows.GDWindow> {\r\n        return utils.callbackifyPromise(\r\n            () => executor.resetButtons(resultWindow, buttons),\r\n            success,\r\n            error\r\n        );\r\n    }\r\n\r\n    function setOnTop(onTop: boolean, success?: (window: Glue42.Windows.GDWindow) => void, error?: (error: string) => void): Promise<Glue42.Windows.GDWindow> {\r\n        return utils.callbackifyPromise(() => {\r\n            if (typeof onTop !== \"boolean\") {\r\n                throw new Error(\"`onTop` must hold a boolean value.\");\r\n            }\r\n            return executor.setOnTop(resultWindow, onTop);\r\n        }, success, error);\r\n    }\r\n\r\n    function setSizeConstraints(constraints: Glue42.Windows.SizeConstraints, success?: (window: Glue42.Windows.GDWindow) => void, error?: (error: string) => void): Promise<Glue42.Windows.GDWindow> {\r\n        return utils.callbackifyPromise(() => {\r\n            if (!constraints || Object.keys(constraints).every((value) => value === undefined)) {\r\n                throw new Error(\"The properties of `constraints` cannot be null or undefined.\");\r\n            }\r\n            return executor.setSizeConstraints(resultWindow, constraints);\r\n        }, success, error);\r\n    }\r\n\r\n    function setTitle(newTitle: string, success?: (window: Glue42.Windows.GDWindow) => void, error?: (error: string) => void): Promise<Glue42.Windows.GDWindow> {\r\n        return utils.callbackifyPromise(() => {\r\n            if (util.isUndefinedOrNull(newTitle)) {\r\n                throw new Error(\"`newTitle` must not be null or undefined.\");\r\n            }\r\n            if (newTitle === _title) {\r\n                return Promise.resolve(resultWindow);\r\n            }\r\n            return executor.setTitle(resultWindow, newTitle);\r\n        }, success, error);\r\n    }\r\n\r\n    function setSticky(isSticky: boolean, success?: (window: Glue42.Windows.GDWindow) => void, error?: (error: string) => void): Promise<Glue42.Windows.GDWindow> {\r\n        return utils.callbackifyPromise(() => {\r\n            if (typeof isSticky !== \"boolean\") {\r\n                throw new Error(\"`isSticky` must hold a boolean value.\");\r\n            }\r\n            return executor.setSticky(resultWindow, isSticky);\r\n        }, success, error);\r\n    }\r\n\r\n    function moveResize(bounds: Partial<Glue42.Windows.Bounds>, success?: (window: Glue42.Windows.GDWindow) => void, error?: (error: string) => void): Promise<Glue42.Windows.GDWindow> {\r\n        return utils.callbackifyPromise(() => {\r\n            if (util.isUndefinedOrNull(bounds)) {\r\n                throw new Error(\"The properties of `bounds` cannot be null or undefined.\");\r\n            }\r\n            return executor.moveResize(resultWindow, bounds);\r\n        }, success, error);\r\n    }\r\n\r\n    function addFrameButton(buttonInfo: Glue42.Windows.ButtonInfo, success?: (window: Glue42.Windows.GDWindow) => void, error?: (error: string) => void): Promise<Glue42.Windows.GDWindow> {\r\n        return utils.callbackifyPromise(() => {\r\n            if (typeof buttonInfo === \"undefined\" || Object.keys(buttonInfo).length === 0) {\r\n                throw new Error(\"Button info is not available.\");\r\n            }\r\n            if (util.isNullOrWhiteSpace(buttonInfo.buttonId)) {\r\n                throw new Error(\"`buttonId` must not be null or undefined.\");\r\n            }\r\n            if (util.isNullOrWhiteSpace(buttonInfo.imageBase64)) {\r\n                throw new Error(\"`imageBase64` must not be null or undefined.\");\r\n            }\r\n            return executor.addFrameButton(resultWindow, buttonInfo);\r\n        }, success, error);\r\n    }\r\n\r\n    function removeFrameButton(buttonId: string, success?: (window: Glue42.Windows.GDWindow) => void, error?: (error: string) => void): Promise<Glue42.Windows.GDWindow> {\r\n        return utils.callbackifyPromise(() => {\r\n            if (util.isNullOrWhiteSpace(buttonId)) {\r\n                throw new Error(\"`buttonId` must not be null or undefined.\");\r\n            }\r\n            return executor.removeFrameButton(resultWindow, buttonId);\r\n        }, success, error);\r\n    }\r\n\r\n    function activate(success?: (window: Glue42.Windows.GDWindow) => void, error?: (error: string) => void): Promise<Glue42.Windows.GDWindow> {\r\n        return utils.callbackifyPromise(() => {\r\n            if (_focus) {\r\n                return Promise.resolve(resultWindow);\r\n            }\r\n            return executor.activate(resultWindow);\r\n        }, success, error);\r\n    }\r\n\r\n    function focus(success?: (window: Glue42.Windows.GDWindow) => void, error?: (error: string) => void): Promise<Glue42.Windows.GDWindow> {\r\n        return utils.callbackifyPromise(() => {\r\n            if (_focus) {\r\n                return Promise.resolve(resultWindow);\r\n            }\r\n            return executor.focus(resultWindow);\r\n        }, success, error);\r\n    }\r\n\r\n    function maximizeRestore(success?: (window: Glue42.Windows.GDWindow) => void, error?: (error: string) => void): Promise<Glue42.Windows.GDWindow> {\r\n        return utils.callbackifyPromise(() => {\r\n            return executor.maximizeRestore(resultWindow);\r\n        }, success, error);\r\n    }\r\n\r\n    function maximize(success?: (window: Glue42.Windows.GDWindow) => void, error?: (error: string) => void): Promise<Glue42.Windows.GDWindow> {\r\n        return utils.callbackifyPromise(() => {\r\n            if (_windowState === \"maximized\") {\r\n                return Promise.resolve(resultWindow);\r\n            }\r\n            return executor.maximize(resultWindow);\r\n        }, success, error);\r\n    }\r\n\r\n    function restore(success?: (window: Glue42.Windows.GDWindow) => void, error?: (error: string) => void): Promise<Glue42.Windows.GDWindow> {\r\n        return utils.callbackifyPromise(() => {\r\n            if (_windowState === \"normal\") {\r\n                return Promise.resolve(resultWindow);\r\n            }\r\n            return executor.restore(resultWindow);\r\n        }, success, error);\r\n    }\r\n\r\n    function minimize(success?: (window: Glue42.Windows.GDWindow) => void, error?: (error: string) => void): Promise<Glue42.Windows.GDWindow> {\r\n        return utils.callbackifyPromise(() => {\r\n            if (_windowState === \"minimized\") {\r\n                return Promise.resolve(resultWindow);\r\n            }\r\n            return executor.minimize(resultWindow);\r\n        }, success, error);\r\n    }\r\n\r\n    function collapse(success?: (window: Glue42.Windows.GDWindow) => void, error?: (error: string) => void): Promise<Glue42.Windows.GDWindow> {\r\n        return utils.callbackifyPromise(() => {\r\n            if (_isCollapsed) {\r\n                return Promise.resolve(resultWindow);\r\n            }\r\n            return executor.collapse(resultWindow);\r\n        }, success, error);\r\n    }\r\n\r\n    function expand(success?: (window: Glue42.Windows.GDWindow) => void, error?: (error: string) => void): Promise<Glue42.Windows.GDWindow> {\r\n        return utils.callbackifyPromise(() => {\r\n            if (!_isCollapsed) {\r\n                return Promise.resolve(resultWindow);\r\n            }\r\n            return executor.expand(resultWindow);\r\n        }, success, error);\r\n    }\r\n\r\n    function toggleCollapse(success?: (window: Glue42.Windows.GDWindow) => void, error?: (error: string) => void): Promise<Glue42.Windows.GDWindow> {\r\n        return utils.callbackifyPromise(() => {\r\n            return executor.toggleCollapse(resultWindow);\r\n        }, success, error);\r\n    }\r\n\r\n    function snap(target: string | Glue42.Windows.GDWindow, direction: Glue42.Windows.RelativeDirection, success?: (window: Glue42.Windows.GDWindow) => void, error?: (error: string) => void): Promise<Glue42.Windows.GDWindow> {\r\n        return utils.callbackifyPromise(() => {\r\n            if (util.isUndefinedOrNull(target)) {\r\n                throw new Error(`A target window is not specified - ${target}`);\r\n            }\r\n\r\n            if (typeof target === \"string\") {\r\n                const win = windowStore.get(target);\r\n                if (!win) {\r\n                    throw new Error(`Invalid \"target\" parameter or no such window. Invoked with: ${target}`);\r\n                }\r\n                target = win.API;\r\n            }\r\n            return executor.snap(resultWindow, target, direction);\r\n        }, success, error);\r\n    }\r\n\r\n    function attachTab(tab: Glue42.Windows.GDWindow | string, opt: number | Glue42.Windows.AttachOptions, success?: (window: Glue42.Windows.GDWindow) => void, error?: (error: string) => void): Promise<Glue42.Windows.GDWindow> {\r\n        return utils.callbackifyPromise(() => {\r\n            const errorMessage = `Invalid \"tab\" parameter - must be an object with an \"id\" property or a string. Invoked for source window with ID:`;\r\n            if (util.isUndefinedOrNull(tab)) {\r\n                throw new Error(errorMessage + tab);\r\n            }\r\n            // tab === sourceWindow\r\n            let sourceWindow;\r\n            if (typeof tab === \"string\") {\r\n                sourceWindow = windowStore.get(tab)?.API;\r\n                if (util.isUndefinedOrNull(sourceWindow)) {\r\n                    throw new Error(errorMessage + sourceWindow);\r\n                }\r\n            } else if (!util.isUndefinedOrNull(tab.id)) {\r\n                sourceWindow = tab;\r\n            } else {\r\n                throw new Error(errorMessage);\r\n            }\r\n            const attachOptions: Glue42.Windows.AttachOptions = {};\r\n            if (!util.isUndefinedOrNull(opt)) {\r\n                if (typeof opt === \"number\") {\r\n                    attachOptions.index = opt;\r\n                } else {\r\n                    attachOptions.selected = opt.selected;\r\n                    attachOptions.index = opt.index;\r\n                }\r\n            }\r\n\r\n            return executor.attachTab(resultWindow, sourceWindow, attachOptions);\r\n        }, success, error);\r\n    }\r\n\r\n    function detachTab(opt: Glue42.Windows.DetachOptions = {}, success?: (window: Glue42.Windows.GDWindow) => void, error?: (error: string) => void): Promise<Glue42.Windows.GDWindow> {\r\n        return utils.callbackifyPromise(() => {\r\n            const argsForSend: DetachTabOptions = {};\r\n            function isDetachRelative(o: Glue42.Windows.DetachOptions) {\r\n                return o.relativeTo !== undefined;\r\n            }\r\n            if (isDetachRelative(opt)) {\r\n                if (typeof opt.relativeTo === \"string\") {\r\n                    argsForSend.relativeTo = opt.relativeTo;\r\n                } else if (!util.isUndefinedOrNull(opt.relativeTo.id)) {\r\n                    argsForSend.relativeTo = opt.relativeTo.id;\r\n                }\r\n                if (!util.isUndefinedOrNull(opt.relativeDirection)) {\r\n                    argsForSend.relativeDirection = opt.relativeDirection;\r\n                }\r\n                if (!util.isUndefinedOrNull(opt.width)) {\r\n                    argsForSend.width = opt.width;\r\n                }\r\n                if (!util.isUndefinedOrNull(opt.height)) {\r\n                    argsForSend.height = opt.height;\r\n                }\r\n            } else {\r\n                if (!util.isUndefinedOrNull(opt.bounds)) {\r\n                    argsForSend.bounds = opt.bounds;\r\n                }\r\n            }\r\n            if (!util.isUndefinedOrNull(opt.hideTabHeader)) {\r\n                argsForSend.hideTabHeader = opt.hideTabHeader;\r\n            }\r\n            return executor.detachTab(resultWindow, argsForSend);\r\n        }, success, error);\r\n    }\r\n\r\n    function setVisible(toBeVisible?: boolean, success?: (window: Glue42.Windows.GDWindow) => void, error?: (error: string) => void): Promise<Glue42.Windows.GDWindow> {\r\n        return utils.callbackifyPromise(() => {\r\n            return executor.setVisible(resultWindow, toBeVisible);\r\n        }, success, error);\r\n    }\r\n\r\n    async function center(display?: Glue42.Displays.Display) {\r\n        const displayAPI = displayAPIGetter();\r\n        const primaryDisplay = await displayAPI.getPrimary();\r\n        const resultDisplay = await resultWindow.getDisplay();\r\n        return moveResize(utils.getDisplayCenterOfScreen(resultWindow.bounds, display || resultDisplay, primaryDisplay));\r\n    }\r\n\r\n    function showLoader(loader?: Glue42.Windows.Loader): Promise<Glue42.Windows.GDWindow> {\r\n        return executor.showLoader(resultWindow, loader);\r\n    }\r\n\r\n    function hideLoader(): Promise<Glue42.Windows.GDWindow> {\r\n        return executor.hideLoader(resultWindow);\r\n    }\r\n\r\n    function updateContext(context: any, success?: (window: Glue42.Windows.GDWindow) => void, error?: (error: string) => void): Promise<Glue42.Windows.GDWindow> {\r\n        return utils.callbackifyPromise(() => {\r\n            if (util.isUndefinedOrNull(context)) {\r\n                throw new Error(`\"context\" must not be null or undefined.`);\r\n            }\r\n\r\n            return executor.updateContext(resultWindow, context, false);\r\n        }, success, error);\r\n    }\r\n\r\n    function lock(success?: (window: Glue42.Windows.GDWindow) => void, error?: (error: string) => void): Promise<Glue42.Windows.GDWindow> {\r\n        return utils.callbackifyPromise(() => {\r\n            return executor.lock(resultWindow);\r\n        }, success, error);\r\n    }\r\n\r\n    function unlock(success?: (window: Glue42.Windows.GDWindow) => void, error?: (error: string) => void): Promise<Glue42.Windows.GDWindow> {\r\n        return utils.callbackifyPromise(() => {\r\n            return executor.unlock(resultWindow);\r\n        }, success, error);\r\n    }\r\n\r\n    function getIcon(success?: (icon: string) => void, error?: (error: string) => void): Promise<string> {\r\n        return utils.callbackifyPromise(() => {\r\n            return executor.getIcon(resultWindow);\r\n        }, success, error);\r\n    }\r\n\r\n    function setIcon(base64Image: string, success?: (window: Glue42.Windows.GDWindow) => void, error?: (error: string) => void): Promise<Glue42.Windows.GDWindow> {\r\n        return utils.callbackifyPromise(() => {\r\n            if (util.isNullOrWhiteSpace(base64Image)) {\r\n                throw new Error(`\"base64Image\" must be a non-empty string.`);\r\n            }\r\n            return executor.setIcon(resultWindow, base64Image);\r\n        }, success, error);\r\n    }\r\n\r\n    function setFrameColor(frameColor: string, success?: (window: Glue42.Windows.GDWindow) => void, error?: (error: string) => void): Promise<Glue42.Windows.GDWindow> {\r\n        return utils.callbackifyPromise(() => {\r\n            if (util.isNullOrWhiteSpace(frameColor)) {\r\n                throw new Error(`\"frameColor\" must be a non-empty string`);\r\n            }\r\n            return executor.setFrameColor(resultWindow, frameColor);\r\n        }, success, error);\r\n    }\r\n\r\n    function setTabHeaderVisible(toBeTabHeaderVisible: boolean, success?: (window: Glue42.Windows.GDWindow) => void, error?: (error: string) => void): Promise<Glue42.Windows.GDWindow> {\r\n        return utils.callbackifyPromise(() => {\r\n            if (typeof toBeTabHeaderVisible !== \"boolean\") {\r\n                throw new Error(`\"toBeTabHeaderVisible\" must hold a boolean value.`);\r\n            }\r\n            return executor.setTabHeaderVisible(resultWindow, toBeTabHeaderVisible);\r\n        }, success, error);\r\n    }\r\n\r\n    async function setTabTooltip(tooltip: string): Promise<Glue42.Windows.GDWindow> {\r\n        if (util.isNullOrWhiteSpace(tooltip)) {\r\n            throw new Error(`\"${tooltip}\" must not be null or undefined`);\r\n        }\r\n        return executor.setTabTooltip(resultWindow, tooltip);\r\n    }\r\n\r\n    function showPopup(config: Glue42.Windows.PopupOptions): Promise<Glue42.Windows.GDWindow> {\r\n        return executor.showPopup(resultWindow, config);\r\n    }\r\n\r\n    function createFlydown(config: Glue42.Windows.FlydownOptions): Promise<Glue42.Windows.Flydown> {\r\n        return executor.createFlydown(resultWindow.id, config);\r\n    }\r\n\r\n    function setModalState(isModal: boolean): Promise<void> {\r\n        return executor.setModalState(resultWindow.id, isModal || false);\r\n    }\r\n\r\n    function zoomIn(success?: (window: Glue42.Windows.GDWindow) => void, error?: (error: string) => void): Promise<Glue42.Windows.GDWindow> {\r\n        return utils.callbackifyPromise<Glue42.Windows.GDWindow>(() => {\r\n            return executor.zoomIn(resultWindow);\r\n        }, success, error);\r\n    }\r\n\r\n    function zoomOut(success?: (window: Glue42.Windows.GDWindow) => void, error?: (error: string) => void): Promise<Glue42.Windows.GDWindow> {\r\n        return utils.callbackifyPromise<Glue42.Windows.GDWindow>(() => {\r\n            return executor.zoomOut(resultWindow);\r\n        }, success, error);\r\n    }\r\n\r\n    function setZoomFactor(zoomFactor: number, success?: (window: Glue42.Windows.GDWindow) => void, error?: (error: string) => void): Promise<Glue42.Windows.GDWindow> {\r\n        return utils.callbackifyPromise<Glue42.Windows.GDWindow>(() => {\r\n            if (isNaN(zoomFactor)) {\r\n                throw new Error(`zoomFactor is not a number`);\r\n            }\r\n            return executor.setZoomFactor(resultWindow, zoomFactor);\r\n        }, success, error);\r\n    }\r\n\r\n    function showDevTools() {\r\n        return executor.showDevTools(resultWindow);\r\n    }\r\n\r\n    function capture(captureOptions: Glue42.Windows.CaptureOptions): Promise<string> {\r\n        return executor.capture(resultWindow, captureOptions);\r\n    }\r\n\r\n    function flash(suppliedOptions?: boolean, mode?: Glue42.Windows.FlashMode): Promise<Glue42.Windows.GDWindow> {\r\n        const flashOptions: FlashOptions = {\r\n            shouldFlash: true,\r\n            mode: \"auto\"\r\n        };\r\n\r\n        if (typeof suppliedOptions === \"boolean\") {\r\n            flashOptions.shouldFlash = suppliedOptions;\r\n        }\r\n\r\n        if (typeof mode !== \"undefined\") {\r\n            flashOptions.mode = mode;\r\n        }\r\n\r\n        return executor.flash(resultWindow, flashOptions);\r\n    }\r\n\r\n    function print(printOptions: Glue42.Windows.PrintOptions): Promise<Glue42.Windows.GDWindow> {\r\n        return executor.print(resultWindow, printOptions);\r\n    }\r\n\r\n    function printToPDF(printToPDFOptions: Glue42.Windows.PrintToPDFOptions): Promise<string> {\r\n        return executor.printToPDF(resultWindow, printToPDFOptions);\r\n    }\r\n\r\n    function ungroup(ungroupOptions?: Glue42.Windows.UngroupOptions): Promise<Glue42.Windows.GDWindow> {\r\n        return new Promise((resolve, reject) => {\r\n            const unGroupChanged = onGroupChanged(\r\n                (win: Glue42.Windows.GDWindow, newGroup: Glue42.Windows.Group, oldGroup: Glue42.Windows.Group) => {\r\n                    if (id === win.id) {\r\n                        unGroupChanged();\r\n                        resolve(resultWindow);\r\n                    }\r\n                });\r\n\r\n            executor.ungroup(resultWindow, ungroupOptions)\r\n                .catch((e: string) => {\r\n                    unGroupChanged();\r\n                    reject(e);\r\n                });\r\n        });\r\n    }\r\n\r\n    function place(placementSettings: Glue42.Windows.PlacementSettings): Promise<void> {\r\n        return executor.place(resultWindow, placementSettings);\r\n    }\r\n\r\n    function refresh(ignoreCache: boolean) {\r\n        return executor.refresh(resultWindow, ignoreCache);\r\n    }\r\n\r\n    function download(url: string, opts: Glue42.Windows.DownloadOptions) {\r\n        return executor.download(resultWindow, url, opts);\r\n    }\r\n\r\n    function configure(settings: Glue42.Windows.WindowConfiguration) {\r\n        return executor.configureWindow(resultWindow, settings);\r\n    }\r\n\r\n    //#endregion \"AGM methods\"\r\n\r\n    //#region \"Events\"\r\n\r\n    function onTitleChanged(callback: (title: string, window: Glue42.Windows.GDWindow) => void): UnsubscribeFunction {\r\n        return onEventCore(\"onTitleChanged\", callback, [resultWindow.title, resultWindow]);\r\n    }\r\n\r\n    function onClose(callback: (window: Glue42.Windows.GDWindow) => void): UnsubscribeFunction {\r\n        if (!util.isFunction(callback)) {\r\n            throw new Error(\"callback should be a function\");\r\n        }\r\n        if (id === undefined) {\r\n            callback(resultWindow);\r\n        }\r\n        return _registry.add(\"onClose\", callback);\r\n    }\r\n\r\n    function onUrlChanged(callback: (url: string, window: Glue42.Windows.GDWindow) => void): UnsubscribeFunction {\r\n        return onEventCore(\"onUrlChanged\", callback);\r\n    }\r\n\r\n    function onFrameButtonAdded(callback: (btnInfo: Glue42.Windows.ButtonInfo, window: Glue42.Windows.GDWindow) => void): UnsubscribeFunction {\r\n        return onEventCore(\"onFrameButtonAdded\", callback);\r\n    }\r\n\r\n    function onFrameButtonRemoved(callback: (btnInfo: Glue42.Windows.ButtonInfo, window: Glue42.Windows.GDWindow) => void): UnsubscribeFunction {\r\n        return onEventCore(\"onFrameButtonRemoved\", callback);\r\n    }\r\n\r\n    function onFrameButtonClicked(callback: (btnInfo: Glue42.Windows.ButtonInfo, window: Glue42.Windows.GDWindow) => void): UnsubscribeFunction {\r\n        return onEventCore(\"onFrameButtonClicked\", callback);\r\n    }\r\n\r\n    function onCollapsed(callback: (window: Glue42.Windows.GDWindow) => void): UnsubscribeFunction {\r\n        if (!util.isFunction(callback)) {\r\n            throw new Error(\"callback should be a function\");\r\n        }\r\n        if (_isCollapsed) {\r\n            callback(resultWindow);\r\n        }\r\n        return _registry.add(\"collapsed\", callback);\r\n    }\r\n\r\n    function onExpanded(callback: (window: Glue42.Windows.GDWindow) => void): UnsubscribeFunction {\r\n        if (!util.isFunction(callback)) {\r\n            throw new Error(\"callback should be a function\");\r\n        }\r\n        if (!_isCollapsed) {\r\n            callback(resultWindow);\r\n        }\r\n        return _registry.add(\"expanded\", callback);\r\n    }\r\n\r\n    function onMaximized(callback: (window: Glue42.Windows.GDWindow) => void): UnsubscribeFunction {\r\n        if (_windowState === \"maximized\") {\r\n            return onEventCore(\"maximized\", callback, [resultWindow]);\r\n        } else {\r\n            return onEventCore(\"maximized\", callback);\r\n        }\r\n    }\r\n\r\n    function onMinimized(callback: (window: Glue42.Windows.GDWindow) => void): UnsubscribeFunction {\r\n        if (_windowState === \"minimized\") {\r\n            return onEventCore(\"minimized\", callback, [resultWindow]);\r\n        } else {\r\n            return onEventCore(\"minimized\", callback);\r\n        }\r\n    }\r\n\r\n    function onNormal(callback: (window: Glue42.Windows.GDWindow) => void): UnsubscribeFunction {\r\n        if (_windowState === \"normal\") {\r\n            return onEventCore(\"normal\", callback, [resultWindow]);\r\n        } else {\r\n            return onEventCore(\"normal\", callback);\r\n        }\r\n    }\r\n\r\n    function onAttached(callback: (window: Glue42.Windows.GDWindow) => void): UnsubscribeFunction {\r\n        return onEventCore(\"attached\", callback);\r\n    }\r\n\r\n    function onDetached(callback: (window: Glue42.Windows.GDWindow) => void): UnsubscribeFunction {\r\n        return onEventCore(\"detached\", callback);\r\n    }\r\n\r\n    function onVisibilityChanged(callback: (window: Glue42.Windows.GDWindow) => void): UnsubscribeFunction {\r\n        return onEventCore(\"visibility-changed\", callback);\r\n    }\r\n\r\n    function onContextUpdated(callback: (context: any, window: Glue42.Windows.GDWindow) => void): UnsubscribeFunction {\r\n        return onEventCore(\"context-updated\", callback);\r\n    }\r\n\r\n    function onLockingChanged(callback: (window: Glue42.Windows.GDWindow) => void): UnsubscribeFunction {\r\n        return onEventCore(\"lock-changed\", callback);\r\n    }\r\n\r\n    function onBoundsChanged(callback: (window: Glue42.Windows.GDWindow) => void): UnsubscribeFunction {\r\n        return onEventCore(\"bounds-changed\", callback);\r\n    }\r\n\r\n    function onFocusChanged(callback: (window: Glue42.Windows.GDWindow) => void): UnsubscribeFunction {\r\n        return onEventCore(\"focus-changed\", callback);\r\n    }\r\n\r\n    function onStickyChanged(callback: (window: Glue42.Windows.GDWindow) => void): UnsubscribeFunction {\r\n        return onEventCore(\"sticky-changed\", callback);\r\n    }\r\n\r\n    function onFrameColorChanged(callback: (window: Glue42.Windows.GDWindow) => void): UnsubscribeFunction {\r\n        return onEventCore(\"frame-color-changed\", callback);\r\n    }\r\n\r\n    function onTabHeaderVisibilityChanged(callback: (window: Glue42.Windows.GDWindow) => void): UnsubscribeFunction {\r\n        return onEventCore(\"tab-header-visibility-changed\", callback);\r\n    }\r\n\r\n    function onWindowAttached(callback: (window: Glue42.Windows.GDWindow) => void): UnsubscribeFunction {\r\n        return onEventCore(\"window-attached\", callback);\r\n    }\r\n\r\n    function onWindowDetached(callback: (window: Glue42.Windows.GDWindow) => void): UnsubscribeFunction {\r\n        return onEventCore(\"window-detached\", callback);\r\n    }\r\n\r\n    function onGroupChanged(callback: (window: Glue42.Windows.GDWindow, newGroup: Glue42.Windows.Group, oldGroup: Glue42.Windows.Group) => void): UnsubscribeFunction {\r\n        return onEventCore(\"group-changed\", callback);\r\n    }\r\n\r\n    function onTabSelectionChanged(callback: (selectedWindow: Glue42.Windows.GDWindow, previousWindow: Glue42.Windows.GDWindow, window: Glue42.Windows.GDWindow) => void): UnsubscribeFunction {\r\n        return onEventCore(\"tab-selection-changed\", callback);\r\n    }\r\n\r\n    function onClosing(callback: () => Promise<void>): UnsubscribeFunction {\r\n        if (!util.isFunction(callback)) {\r\n            throw new Error(\"callback must be a function\");\r\n        }\r\n\r\n        type GDHandler = (success: () => void, error: () => void) => void;\r\n        const callbackWrap: GDHandler = (success: () => void, error: () => void) => {\r\n            const promise = callback();\r\n            if (promise && promise.then) {\r\n                promise.then(success).catch(error);\r\n            } else {\r\n                success();\r\n            }\r\n        };\r\n        return executor.onClosing(callbackWrap, id);\r\n    }\r\n\r\n    function onRefreshing(callback: (prevent: () => void) => Promise<void>): UnsubscribeFunction {\r\n        if (!util.isFunction(callback)) {\r\n            throw new Error(\"callback must be a function\");\r\n        }\r\n\r\n        type GDRefreshHandler = (success: () => void, error: () => void, prevent: () => void) => void;\r\n        const callbackWrap: GDRefreshHandler = (success: () => void, error: () => void, prevent: () => void) => {\r\n            const promise = callback(prevent);\r\n            if (promise && promise.then) {\r\n                promise.then(success).catch(error);\r\n            } else {\r\n                success();\r\n            }\r\n        };\r\n        return executor.onRefreshing(callbackWrap, id);\r\n    }\r\n\r\n    function onZoomFactorChanged(callback: (window: Glue42.Windows.GDWindow) => void): UnsubscribeFunction {\r\n        return onEventCore(\"zoom-factor-changed\", callback);\r\n    }\r\n\r\n    function onPlacementSettingsChanged(callback: (window: Glue42.Windows.GDWindow) => void): UnsubscribeFunction {\r\n        return onEventCore(\"placementSettingsChanged\", callback);\r\n    }\r\n\r\n    function onNeighboursChanged(callback: (neighbours: Glue42.Windows.Neighbours, window: Glue42.Windows.GDWindow) => void): UnsubscribeFunction {\r\n        return onEventCore(\"neighbours-changed\", callback);\r\n    }\r\n\r\n    function onEventCore(key: string, callback: any, replayArguments?: any[]) {\r\n        if (!util.isFunction(callback)) {\r\n            throw new Error(\"callback must be a function\");\r\n        }\r\n\r\n        return _registry.add(key, callback, replayArguments);\r\n    }\r\n\r\n    function onNavigating(callback: (args: { newUrl: string }) => Promise<void>): UnsubscribeFunction {\r\n        if (!util.isFunction(callback)) {\r\n            throw new Error(\"callback must be a function\");\r\n        }\r\n\r\n        type Handler = (success: () => void, error: () => void, prevent: () => void, args: { newUrl: string }) => void;\r\n        const callbackWrap: Handler = (success: () => void, error: () => void, prevent: () => void, args: { newUrl: string }) => {\r\n            const promise = callback(args);\r\n            if (promise && promise.then) {\r\n                promise.then(success).catch(error);\r\n            } else {\r\n                success();\r\n            }\r\n        };\r\n        return executor.onNavigating(callbackWrap, id);\r\n    }\r\n\r\n    function goBack() {\r\n        return executor.goBack(resultWindow);\r\n    }\r\n\r\n    function goForward() {\r\n        return executor.goForward(resultWindow);\r\n    }\r\n\r\n    //#endregion \"Events\"\r\n\r\n    //#region \"Stream function\"\r\n\r\n    function handleUpdate(updated: WindowConstructorOptions) {\r\n        _url = updated.url;\r\n        _title = updated.title;\r\n        _context = updated.context || {};\r\n        _bounds = updated.bounds;\r\n        _frameColor = updated.frameColor;\r\n        _focus = updated.focus;\r\n        _neighbours = updated.neighbours || {};\r\n        _groupId = updated.groupId;\r\n        _isGroupHeaderVisible = updated.isGroupHeaderVisible;\r\n        _isTabHeaderVisible = updated.isTabHeaderVisible;\r\n        _isTabSelected = updated.isTabSelected;\r\n        _settings = updated.settings;\r\n        _isVisible = updated.isVisible;\r\n        _isSticky = updated.isSticky;\r\n        _isCollapsed = updated.isCollapsed;\r\n        _windowState = updated.state;\r\n        _tabGroupId = updated.tabGroupId;\r\n        _frameId = updated.frameId;\r\n        _isLocked = updated.isLocked;\r\n        // _frameButtons = updated.fra;\r\n        // _group: Glue42.Windows.Group;\r\n        _zoomFactor = updated.zoomFactor;\r\n        _placementSettings = updated.placementSettings;\r\n    }\r\n\r\n    function handleTitleChanged(newTitle: string): void {\r\n        _title = newTitle;\r\n        executor.finished\r\n            .finally(() => {\r\n                _registry.execute(\"onTitleChanged\", newTitle, resultWindow);\r\n            });\r\n    }\r\n\r\n    function handleUrlChanged(newUrl: string): void {\r\n        _url = newUrl;\r\n        _registry.execute(\"onUrlChanged\", newUrl, resultWindow);\r\n    }\r\n\r\n    function handleVisibilityChanged(isVisible: boolean) {\r\n        if (isVisible === _isVisible) {\r\n            return;\r\n        }\r\n        _isVisible = isVisible;\r\n        _registry.execute(\"visibility-changed\", resultWindow);\r\n    }\r\n\r\n    function handleWindowSettingsChanged(settings: Glue42.Windows.WindowSettings): void {\r\n        _settings = settings;\r\n        _registry.execute(\"settings-changed\", resultWindow);\r\n    }\r\n\r\n    function handleContextUpdated(context: any): void {\r\n        _context = context;\r\n        _registry.execute(\"context-updated\", _context, resultWindow);\r\n    }\r\n\r\n    function handleWindowClose(): void {\r\n        if (id === undefined) {\r\n            return;\r\n        }\r\n        _registry.execute(\"onClose\", resultWindow);\r\n        id = undefined;\r\n    }\r\n\r\n    function handleFrameButtonAdded(frameButton: FrameButton): void {\r\n        const buttonObj: Glue42.Windows.ButtonInfo = [\"buttonId\", \"imageBase64\", \"order\", \"tooltip\"].reduce((memo: any, k) => {\r\n            memo[k] = frameButton[k];\r\n            return memo;\r\n        }, {}) as Glue42.Windows.ButtonInfo;\r\n\r\n        const frameButtonsIds = _frameButtons.map((btn) => {\r\n            return btn.buttonId;\r\n        });\r\n\r\n        if (frameButtonsIds.indexOf(frameButton.buttonId) === -1) {\r\n            _frameButtons.push(buttonObj);\r\n        }\r\n\r\n        _registry.execute(\"onFrameButtonAdded\", buttonObj, resultWindow);\r\n    }\r\n\r\n    function handleFrameButtonRemoved(frameButtonId: string): void {\r\n        let button: Glue42.Windows.ButtonInfo;\r\n        _frameButtons = _frameButtons.reduce((memo, btn) => {\r\n            if (btn.buttonId === frameButtonId) {\r\n                button = btn;\r\n            } else {\r\n                memo.push(btn);\r\n            }\r\n            return memo;\r\n        }, []);\r\n\r\n        if (button !== undefined) {\r\n            _registry.execute(\"onFrameButtonRemoved\", button, resultWindow);\r\n        }\r\n    }\r\n\r\n    function handleFrameButtonClicked(frameButton: FrameButton): void {\r\n        const button = _frameButtons.filter((btn) => {\r\n            return btn.buttonId === frameButton.buttonId;\r\n        });\r\n\r\n        if (button.length > 0) {\r\n            _registry.execute(\"onFrameButtonClicked\", button[0], resultWindow);\r\n        }\r\n    }\r\n\r\n    async function handleWindowChangeState(state: string): Promise<void> {\r\n        if (state === \"collapsed\") {\r\n            _isCollapsed = true;\r\n        } else if (state === \"expanded\") {\r\n            _isCollapsed = false;\r\n        } else {\r\n            _windowState = state as Glue42.Windows.WindowState;\r\n        }\r\n        await executor.finished;\r\n        _registry.execute(state, resultWindow);\r\n    }\r\n\r\n    function handleFrameIsLockedChanged(isLocked: boolean): void {\r\n        _isLocked = isLocked;\r\n        _registry.execute(\"lock-changed\", resultWindow);\r\n    }\r\n\r\n    function handleBoundsChanged(bounds: Glue42.Windows.Bounds): void {\r\n        if (_bounds.top === bounds.top && _bounds.left === bounds.left && _bounds.width === bounds.width && _bounds.height === bounds.height) {\r\n            return;\r\n        }\r\n        _bounds = bounds;\r\n        _registry.execute(\"bounds-changed\", resultWindow);\r\n    }\r\n\r\n    function handleFocusChanged(isFocused: boolean): void {\r\n        _focus = isFocused;\r\n        _registry.execute(\"focus-changed\", resultWindow);\r\n    }\r\n\r\n    function handleIsStickyChanged(isSticky: boolean): void {\r\n        _isSticky = isSticky;\r\n        _registry.execute(\"sticky-changed\", isSticky, resultWindow);\r\n    }\r\n\r\n    function handleFrameColorChanged(frameColor: string): void {\r\n        _frameColor = frameColor;\r\n        _registry.execute(\"frame-color-changed\", resultWindow);\r\n    }\r\n\r\n    function handleFrameAttached(tabGroupId: string, frameId: string, isTabHeaderVisible: boolean): void {\r\n        _tabGroupId = tabGroupId;\r\n        _frameId = frameId;\r\n        _isTabHeaderVisible = isTabHeaderVisible;\r\n        _registry.execute(\"frame-attached\", resultWindow);\r\n    }\r\n\r\n    function handleCompositionChanged(state: CompositionChangedData): void {\r\n        _neighbours = state.neighbors || {};\r\n        _tabIndex = state.index;\r\n        _registry.execute(\"neighbours-changed\", _neighbours, resultWindow);\r\n    }\r\n\r\n    function handleGroupHeaderVisibilityChanged(isGroupHeaderVisible: boolean): void {\r\n        _isGroupHeaderVisible = isGroupHeaderVisible;\r\n    }\r\n\r\n    function handleTabHeaderVisibilityChanged(isTabHeaderVisible: boolean): void {\r\n        if (_isTabHeaderVisible !== isTabHeaderVisible) {\r\n            _isTabHeaderVisible = isTabHeaderVisible;\r\n            _registry.execute(\"tab-header-visibility-changed\", resultWindow);\r\n        }\r\n    }\r\n\r\n    async function handleFrameSelectionChanged(newWindow: string, prevWindow: string) {\r\n        let selectedWindow: Glue42.Windows.GDWindow;\r\n        if (newWindow === id) {\r\n            _isTabSelected = true;\r\n            selectedWindow = resultWindow;\r\n        } else {\r\n            _isTabSelected = false;\r\n            selectedWindow = windowStore.get(newWindow) ? windowStore.get(newWindow).API : undefined;\r\n        }\r\n        const previousWindow = windowStore.get(prevWindow) ? windowStore.get(prevWindow).API : undefined;\r\n        await executor.finished;\r\n        _registry.execute(\"tab-selection-changed\", selectedWindow, previousWindow, resultWindow);\r\n    }\r\n\r\n    async function handleAttached(newTabGroupId: string, newFrameId: string, tabHeaderVisible: boolean, isLocked: boolean, winsToBeNotified: WindowWrapper[]): Promise<void> {\r\n        _tabGroupId = newTabGroupId;\r\n        _isTabHeaderVisible = tabHeaderVisible;\r\n        _frameId = newFrameId;\r\n        if (typeof isLocked !== \"undefined\") {\r\n            _isLocked = isLocked;\r\n        }\r\n        await executor.finished;\r\n        winsToBeNotified.forEach((w) => {\r\n            w.Events.handleWindowAttached(resultWindow);\r\n        });\r\n        _registry.execute(\"attached\", resultWindow);\r\n    }\r\n\r\n    function handleWindowAttached(win: Glue42.Windows.GDWindow): void {\r\n        _registry.execute(\"window-attached\", win);\r\n    }\r\n\r\n    async function handleDetached(isLocked: boolean, winsToBeNotified: WindowWrapper[]): Promise<void> {\r\n        _tabGroupId = undefined;\r\n        _isTabSelected = false;\r\n        if (typeof isLocked !== \"undefined\") {\r\n            _isLocked = isLocked;\r\n        }\r\n        await executor.finished;\r\n        winsToBeNotified.forEach((w) => {\r\n            w.Events.handleWindowDetached(resultWindow);\r\n        });\r\n        _registry.execute(\"detached\", resultWindow);\r\n    }\r\n\r\n    function handleWindowDetached(win: Glue42.Windows.GDWindow): void {\r\n        _registry.execute(\"window-detached\", win);\r\n    }\r\n\r\n    function handleZoomFactorChanged(zoomFactor: number): void {\r\n        _zoomFactor = zoomFactor;\r\n        _registry.execute(\"zoom-factor-changed\", resultWindow);\r\n    }\r\n\r\n    function handlePlacementSettingsChanged(placementSettings: Glue42.Windows.PlacementSettings): void {\r\n        let promise: Promise<Glue42.Displays.Display>;\r\n        const copy = placementSettings as any;\r\n        if (!copy.display) {\r\n            promise = Promise.resolve(undefined);\r\n        } else {\r\n            const displayAPI = displayAPIGetter();\r\n            if (!displayAPI) {\r\n                // display API is disabled\r\n                promise = Promise.resolve(undefined);\r\n            } else {\r\n                const index = copy.display - 1;\r\n                promise = new Promise((resolve, reject) => {\r\n                    displayAPI.all().then((displays) => {\r\n                        const display = displays.find((d) => d.index === index);\r\n                        resolve(display);\r\n                    }).catch(reject);\r\n                });\r\n            }\r\n        }\r\n\r\n        promise.then((d) => {\r\n            copy.display = d;\r\n            _placementSettings = copy;\r\n            _registry.execute(\"placementSettingsChanged\", resultWindow);\r\n        });\r\n    }\r\n    //#endregion \"Stream function\"\r\n\r\n    //#region \"Group Events\"\r\n    function handleGroupChanged(newGroup: Glue42.Windows.Group, oldGroup: Glue42.Windows.Group) {\r\n        _group = newGroup;\r\n        _groupId = newGroup?.id;\r\n\r\n        if (!util.isUndefinedOrNull(newGroup) && !util.isUndefinedOrNull(oldGroup)) {\r\n            _registry.execute(\"group-changed\", resultWindow, newGroup, oldGroup);\r\n        }\r\n    }\r\n\r\n    //#region \"Internal function\"\r\n\r\n    function getAllTabs(): Glue42.Windows.GDWindow[] {\r\n        const allWindows = windowStore.list;\r\n        if (_mode.toLowerCase() !== \"tab\") {\r\n            return [];\r\n        }\r\n        const tabs = Object.keys(allWindows).reduce<GDWindow[]>((memo, win) => {\r\n            const window: WindowWrapper = allWindows[win];\r\n            if (window\r\n                && window.API.tabGroupId\r\n                && typeof window.API.tabGroupId !== \"undefined\"\r\n                && typeof resultWindow.tabGroupId !== \"undefined\"\r\n                && window.API.tabGroupId === resultWindow.tabGroupId) {\r\n                memo.push(window.API);\r\n            }\r\n            return memo;\r\n        }, []);\r\n        return tabs.sort((w1, w2) => {\r\n            if (w1.tabIndex !== w2.tabIndex) {\r\n                if (w1.tabIndex === -1) {\r\n                    return Number.MAX_SAFE_INTEGER;\r\n                }\r\n                if (w2.tabIndex === -1) {\r\n                    return Number.MIN_SAFE_INTEGER;\r\n                }\r\n            }\r\n            return w1.tabIndex - w2.tabIndex;\r\n        });\r\n    }\r\n\r\n    function mapWindowIdsToWindowObjects(windowIdArr: string[]): Glue42.Windows.GDWindow[] {\r\n        return windowIdArr.reduce((memo, winId) => {\r\n            const window = windowStore.get(winId);\r\n            if (window) {\r\n                memo.push(window.API);\r\n            }\r\n            return memo;\r\n        }, []);\r\n    }\r\n\r\n    function getNeighboursByDirection(direction: string): Glue42.Windows.GDWindow[] {\r\n        const windowIds = _neighbours[direction];\r\n        if (typeof windowIds !== \"undefined\") {\r\n            return mapWindowIdsToWindowObjects(windowIds);\r\n        }\r\n    }\r\n\r\n    function getApplicationName(): string {\r\n        if (_applicationName) {\r\n            return _applicationName;\r\n        }\r\n        if (_context._APPLICATION_NAME) {\r\n            return _context._APPLICATION_NAME;\r\n        }\r\n        if (_context && _context._t42 && _context._t42.application) {\r\n            return _context._t42.application;\r\n        }\r\n        const info = getWindowInfo();\r\n        if (info && info.applicationName) {\r\n            return info.applicationName;\r\n        }\r\n\r\n        // last try (NodeJS apps)\r\n        const appManager = appManagerGetter();\r\n        if (appManager) {\r\n            const instance = appManager.instances().find((i) => id === i.id);\r\n            if (instance) {\r\n                return instance.application?.name;\r\n            }\r\n        }\r\n\r\n        return undefined;\r\n    }\r\n\r\n    function getWindowInfo() {\r\n        if (typeof window !== \"undefined\" && window.glue42gd && window.glue42gd.getWindowInfo) {\r\n            const info = window.glue42gd.getWindowInfo(id);\r\n            if (!info) {\r\n                return undefined;\r\n            } else {\r\n                return info;\r\n            }\r\n        }\r\n    }\r\n\r\n    //#endregion \"Internal function\"\r\n\r\n    //#region \"API\"\r\n\r\n    resultWindow = {\r\n        get id() {\r\n            return _id;\r\n        },\r\n        get name() {\r\n            return _name;\r\n        },\r\n        get application() {\r\n            const appManager = appManagerGetter();\r\n            const appName = getApplicationName();\r\n            if (appName && appManager) {\r\n                return appManager.application(appName);\r\n            }\r\n        },\r\n        get hostInstance() {\r\n            return executor.hostInstance;\r\n        },\r\n        get agmInstance() {\r\n            if (typeof window !== \"undefined\" && window.glue42gd) {\r\n                return agm.servers().find((s) => s.windowId === this.id);\r\n            }\r\n            const appName = getApplicationName();\r\n            return appName ? { application: appName } : undefined;\r\n        },\r\n        get url() {\r\n            return _url;\r\n        },\r\n        get title() {\r\n            return _title;\r\n        },\r\n        get windowStyleAttributes() {\r\n            return _settings;\r\n        },\r\n        get settings() {\r\n            return _settings;\r\n        },\r\n        get tabGroupId() {\r\n            return _mode.toLowerCase() === \"tab\" ? _tabGroupId : undefined;\r\n        },\r\n        get tabIndex() {\r\n            return _mode.toLowerCase() === \"tab\" ? _tabIndex : undefined;\r\n        },\r\n        get frameId() {\r\n            return _frameId;\r\n        },\r\n        get frameButtons() {\r\n            return _frameButtons;\r\n        },\r\n        get mode() {\r\n            return _mode;\r\n        },\r\n        get state() {\r\n            return _windowState;\r\n        },\r\n        get isCollapsed() {\r\n            return _isCollapsed;\r\n        },\r\n        get isVisible() {\r\n            return _isVisible;\r\n        },\r\n        get isLocked() {\r\n            return _isLocked;\r\n        },\r\n        get context() {\r\n            return _context;\r\n        },\r\n        get bounds() {\r\n            return _bounds;\r\n        },\r\n        get minHeight() {\r\n            return _settings.minHeight;\r\n        },\r\n        get maxHeight() {\r\n            return _settings.maxHeight;\r\n        },\r\n        get minWidth() {\r\n            return _settings.minWidth;\r\n        },\r\n        get maxWidth() {\r\n            return _settings.maxWidth;\r\n        },\r\n        get isFocused() {\r\n            return _focus;\r\n        },\r\n        get frameColor() {\r\n            return _frameColor;\r\n        },\r\n        get opened() {\r\n            return resultWindow.id !== undefined;\r\n        },\r\n        get group() {\r\n            return _group;\r\n        },\r\n        get groupId() {\r\n            return _groupId;\r\n        },\r\n        get isSticky() {\r\n            return _isSticky;\r\n        },\r\n        get topNeighbours() {\r\n            return getNeighboursByDirection(\"top\");\r\n        },\r\n        get leftNeighbours() {\r\n            return getNeighboursByDirection(\"left\");\r\n        },\r\n        get rightNeighbours() {\r\n            return getNeighboursByDirection(\"right\");\r\n        },\r\n        get bottomNeighbours() {\r\n            return getNeighboursByDirection(\"bottom\");\r\n        },\r\n        get isGroupHeaderVisible() {\r\n            return _isGroupHeaderVisible;\r\n        },\r\n        get activityId() {\r\n            if (_context._t42) {\r\n                return _context._t42.activityId;\r\n            }\r\n            const info = getWindowInfo();\r\n            if (!info) {\r\n                return undefined;\r\n            }\r\n            return info.activityId;\r\n        },\r\n        get activityWindowId() {\r\n            if (_context._t42) {\r\n                return _context._t42.activityWindowId;\r\n            }\r\n            const info = getWindowInfo();\r\n            if (!info) {\r\n                return undefined;\r\n            }\r\n            return info.activityWindowId;\r\n        },\r\n        get windowType() {\r\n            return options.windowType || \"electron\";\r\n        },\r\n        get zoomFactor() {\r\n            return _zoomFactor;\r\n        },\r\n        get screen() {\r\n            if (typeof window !== \"undefined\" && window.glue42gd) {\r\n                return utils.getMonitor(resultWindow.bounds, (window.glue42gd as any).monitors);\r\n            }\r\n            return undefined;\r\n        },\r\n        get placementSettings(): Glue42.Windows.PlacementSettings {\r\n            return Object.assign({}, _placementSettings);\r\n        },\r\n        get jumpList(): JumpList {\r\n            return _jumpList;\r\n        },\r\n        maximize,\r\n        restore,\r\n        minimize,\r\n        maximizeRestore,\r\n        collapse,\r\n        expand,\r\n        toggleCollapse,\r\n        focus,\r\n        activate,\r\n        moveResize,\r\n        setTitle,\r\n        setStyle,\r\n        setOnTop,\r\n        resetButtons,\r\n        setSizeConstraints,\r\n        navigate,\r\n        addFrameButton,\r\n        removeFrameButton,\r\n        setVisible,\r\n        show: () => setVisible(true),\r\n        hide: () => setVisible(false),\r\n        center,\r\n        close,\r\n        snap,\r\n        showLoader,\r\n        hideLoader,\r\n        updateContext,\r\n        lock,\r\n        unlock,\r\n        getIcon,\r\n        setIcon,\r\n        setFrameColor,\r\n        setTabTooltip,\r\n        attachTab,\r\n        detachTab,\r\n        setTabHeaderVisible,\r\n        showPopup,\r\n        createFlydown,\r\n        setModalState,\r\n        setZoomFactor,\r\n        zoomIn,\r\n        zoomOut,\r\n        showDevTools,\r\n        capture,\r\n        flash,\r\n        setSticky,\r\n        print,\r\n        printToPDF,\r\n        place,\r\n        ungroup,\r\n        refresh,\r\n        goBack,\r\n        goForward,\r\n        download,\r\n        configure,\r\n        getChannel: async () => {\r\n            const wins = await getChannels().getWindowsWithChannels({ windowIds: [_id] });\r\n            return wins[0]?.channel;\r\n        },\r\n\r\n        onClose,\r\n        onUrlChanged,\r\n        onTitleChanged,\r\n        onFrameButtonAdded,\r\n        onFrameButtonRemoved,\r\n        onFrameButtonClicked,\r\n        onCollapsed,\r\n        onExpanded,\r\n        onMinimized,\r\n        onMaximized,\r\n        onNormal,\r\n        onAttached,\r\n        onDetached,\r\n        onVisibilityChanged,\r\n        onContextUpdated,\r\n        onLockingChanged,\r\n        onBoundsChanged,\r\n        onFrameColorChanged,\r\n        onFocusChanged,\r\n        onStickyChanged,\r\n        onGroupChanged,\r\n        onWindowAttached,\r\n        onWindowDetached,\r\n        onTabSelectionChanged,\r\n        onTabHeaderVisibilityChanged,\r\n        onClosing,\r\n        onRefreshing,\r\n        onZoomFactorChanged,\r\n        onPlacementSettingsChanged,\r\n        onNeighboursChanged,\r\n        onNavigating,\r\n\r\n        get tabs() {\r\n            return getAllTabs();\r\n        },\r\n\r\n        get isTabHeaderVisible() {\r\n            return _isTabHeaderVisible;\r\n        },\r\n\r\n        get isTabSelected() {\r\n            return _isTabSelected;\r\n        },\r\n\r\n        // @glue42/web compatibility layer\r\n        getURL() {\r\n            return Promise.resolve(_url);\r\n        },\r\n\r\n        getTitle() {\r\n            return Promise.resolve(_title);\r\n        },\r\n\r\n        getBounds(): Promise<Glue42.Windows.Bounds> {\r\n            return Promise.resolve(_bounds);\r\n        },\r\n\r\n        getContext(): Promise<any> {\r\n            return Promise.resolve(_context);\r\n        },\r\n\r\n        setContext(context: any): Promise<GDWindow> {\r\n            if (util.isUndefinedOrNull(context)) {\r\n                throw new Error(`\"context\" must not be null or undefined, set to empty object if you want to clear it out.`);\r\n            }\r\n\r\n            return executor.updateContext(resultWindow, context, true);\r\n        },\r\n\r\n        getDisplay(): Promise<Glue42.Displays.Display> {\r\n            const displayAPI = displayAPIGetter();\r\n            return displayAPI.getByWindowId(id);\r\n        },\r\n\r\n        resizeTo(width?: number, height?: number): Promise<GDWindow> {\r\n            return moveResize({ width, height });\r\n        },\r\n\r\n        moveTo(top?: number, left?: number): Promise<GDWindow> {\r\n            return moveResize({ top, left });\r\n        },\r\n\r\n        async getParentWindow() {\r\n            const myParentId = (_settings as any).parentInstanceId;\r\n            if (!myParentId) {\r\n                return undefined;\r\n            }\r\n            return windowStore.list[myParentId]?.API;\r\n        },\r\n\r\n        async getChildWindows() {\r\n            return Object.keys(windowStore.list)\r\n                .map((key) => windowStore.list[key].API)\r\n                .filter((w) => {\r\n                    const parentId = (w.settings as any).parentInstanceId;\r\n                    return parentId === id;\r\n                });\r\n        },\r\n\r\n        joinChannel: (name: string) => {\r\n            return getChannels().join(name, id);\r\n        },\r\n\r\n        leaveChannel: () => {\r\n            return getChannels().leave(id);\r\n        }\r\n    };\r\n\r\n    //#endregion \"API\"\r\n\r\n    //#endregion \"Group Events\"\r\n\r\n    const events: WindowEvents = {\r\n        handleUpdate,\r\n\r\n        handleWindowClose,\r\n        handleWindowChangeState,\r\n        handleTitleChanged,\r\n        handleVisibilityChanged,\r\n        handleUrlChanged,\r\n        handleWindowSettingsChanged,\r\n        handleContextUpdated,\r\n        handleFrameIsLockedChanged,\r\n        handleBoundsChanged,\r\n        handleFocusChanged,\r\n        handleFrameButtonAdded,\r\n        handleFrameButtonRemoved,\r\n        handleFrameButtonClicked,\r\n        handleFrameColorChanged,\r\n        handleFrameAttached,\r\n        handleFrameSelectionChanged,\r\n        handleCompositionChanged,\r\n        handleGroupHeaderVisibilityChanged,\r\n        handleTabHeaderVisibilityChanged,\r\n        handleGroupChanged,\r\n        handleAttached,\r\n        handleDetached,\r\n        handleWindowAttached,\r\n        handleWindowDetached,\r\n        handleZoomFactorChanged,\r\n        handleIsStickyChanged,\r\n        handlePlacementSettingsChanged\r\n    };\r\n\r\n    return {\r\n        API: resultWindow,\r\n        Events: events\r\n    };\r\n};\r\n","import { Glue42Core } from \"@glue42/core\";\r\nimport { Glue42 } from \"../../../../glue\";\r\nimport { DetachTabOptions, Executor, FlashOptions, JumpListSettingsInternal, JumpListUpdateSettings } from \"../../types\";\r\nimport { ShowFlydownData, ReformatedFlydownOptions, ReformatedFlydownZone, ReformatedPopupOptions, EventTypes } from \"./types\";\r\nimport { CallbackRegistry, default as CallbackFactory, UnsubscribeFunction } from \"callback-registry\";\r\nimport shortid from \"shortid\";\r\nimport windowStore from \"../../store\";\r\nimport { isNullOrWhiteSpace, isUndefinedOrNull } from \"../../../activity/helpers/util\";\r\n\r\nexport class GDExecutor implements Executor {\r\n    private agm: Glue42Core.AGM.API;\r\n    private agmTarget: {};\r\n    private _registry: CallbackRegistry = CallbackFactory();\r\n    private _finished: Promise<void> = Promise.resolve();\r\n    private unsubCallbacks: { [key: string]: Array<(success: () => void, error: () => void, prevent?: () => void, args?: { newUrl: string }) => void> } = {};\r\n    public get hostInstance() {\r\n        return this.agmTarget;\r\n    }\r\n\r\n    public get finished() {\r\n        return this._finished;\r\n    }\r\n\r\n    public init(agm: Glue42Core.AGM.API, instance: Glue42Core.AGM.Instance | string) {\r\n        this.agm = agm;\r\n        this.agmTarget = instance;\r\n        this._registry.add(\"event\", (data: { windowId: string, type: string }) => {\r\n            if (data.type === \"Closed\") {\r\n                const keys = Object.keys(this.unsubCallbacks);\r\n                keys.forEach((key) => {\r\n                    const isSameWindow = key.startsWith(data.windowId);\r\n                    if (isSameWindow) {\r\n                        delete this.unsubCallbacks[key];\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    }\r\n    // refactor\r\n    public handleEvent(data: any) {\r\n        this._registry.execute(\"event\", data);\r\n    }\r\n\r\n    public async open(options: Glue42.Windows.WindowCreateOptions) {\r\n        let finishedResolve: () => void;\r\n        this._finished = new Promise((resolve) => {\r\n            finishedResolve = resolve;\r\n        });\r\n        try {\r\n            const result = await this.agm.invoke<{ id: string }>(\"T42.Wnd.Create\", options, this.agmTarget);\r\n            if (result.returned === undefined) {\r\n                throw new Error(\"failed to execute T42.Wnd.Create - unknown reason\");\r\n            }\r\n\r\n            const id = result.returned.id;\r\n            const win = await windowStore.waitFor(id);\r\n            setTimeout(() => {\r\n                if (win.API.windowType === \"electron\") {\r\n                    // on normal windows urlCHanged has to be detected first in order for the window to be ready\r\n                    // that causes the user callbacks to miss urlChanged since they are not registered yet\r\n                    // here we 'replay' the urlChanged event\r\n                    win.Events.handleUrlChanged(win.API.url);\r\n                }\r\n            }, 0);\r\n            return win.API;\r\n        } catch (error) {\r\n            throw error;\r\n        } finally {\r\n            finishedResolve();\r\n        }\r\n    }\r\n\r\n    public async close(w: Glue42.Windows.GDWindow): Promise<Glue42.Windows.GDWindow> {\r\n        await this.execute(\"close\", { windowId: w.id }, `Closed`);\r\n        return w;\r\n    }\r\n\r\n    public async navigate(w: Glue42.Windows.GDWindow, newUrl: string, urlLoadOptions: Glue42.Windows.LoadURLOptions): Promise<Glue42.Windows.GDWindow> {\r\n        await this.execute(\"navigate\", { windowId: w.id, options: { url: newUrl, urlLoadOptions } }, \"UrlChanged\");\r\n        return w;\r\n    }\r\n    // Calls the public methods of the window. No Call to GD is made\r\n    public async setStyle(w: Glue42.Windows.GDWindow, style: Glue42.Windows.WindowSettings): Promise<Glue42.Windows.GDWindow> {\r\n        const stylePromises: Array<Promise<any>> = [];\r\n        const wait = (promise: Promise<any>) => stylePromises.push(promise);\r\n\r\n        if (!isUndefinedOrNull(style.focus) && !w.isFocused) {\r\n            wait(w.focus());\r\n        }\r\n\r\n        // Todo: only if !isRestoring (hopefully setVisible does this check)\r\n        if (!isUndefinedOrNull(style.hidden)) {\r\n            const toBeVisible = !style.hidden;\r\n            wait(w.setVisible(toBeVisible));\r\n        }\r\n\r\n        if (!isUndefinedOrNull(style.onTop)) {\r\n            wait(w.setOnTop(style.onTop));\r\n        }\r\n\r\n        if (!isNullOrWhiteSpace(style.tabTooltip) || !isNullOrWhiteSpace((style as any).tabToolTip)) {\r\n            const toolTip = style.tabTooltip ?? (style as any).tabToolTip;\r\n            wait(w.setTabTooltip(toolTip));\r\n        }\r\n\r\n        if (!isNullOrWhiteSpace(style.tabTitle)) {\r\n            wait(this.execute(\"setTabTitle\", { windowId: w.id, options: { tabTitle: style.tabTitle } }));\r\n        }\r\n\r\n        const {\r\n            maxWidth, maxHeight, minWidth, minHeight,\r\n            allowClose, allowCollapse, allowLockUnlock, allowMaximize, allowMinimize\r\n        } = style;\r\n\r\n        wait(w.setSizeConstraints({ maxWidth, maxHeight, minWidth, minHeight }));\r\n        wait(w.resetButtons({ allowClose, allowCollapse, allowLockUnlock, allowMaximize, allowMinimize }));\r\n\r\n        await Promise.all(stylePromises);\r\n\r\n        return w;\r\n    }\r\n\r\n    public async setSizeConstraints(w: Glue42.Windows.GDWindow, constraints: Glue42.Windows.SizeConstraints): Promise<Glue42.Windows.GDWindow> {\r\n        await this.execute(\"setSizeConstraints\", { windowId: w.id, options: constraints });\r\n        return w;\r\n    }\r\n\r\n    public async setTabTooltip(w: Glue42.Windows.GDWindow, tabTooltip: string): Promise<Glue42.Windows.GDWindow> {\r\n        await this.execute(\"setTabTooltip\", { windowId: w.id, options: { tabTooltip } });\r\n        return w;\r\n    }\r\n\r\n    public async resetButtons(w: Glue42.Windows.GDWindow, buttonsConfig: Glue42.Windows.WindowButtons): Promise<Glue42.Windows.GDWindow> {\r\n        await this.execute(\"resetButtons\", { windowId: w.id, options: buttonsConfig });\r\n        return w;\r\n    }\r\n\r\n    public async setOnTop(w: Glue42.Windows.GDWindow, onTop: boolean): Promise<Glue42.Windows.GDWindow> {\r\n        await this.execute(\"setOnTop\", { windowId: w.id, options: { onTop } });\r\n        return w;\r\n    }\r\n\r\n    public async setTitle(w: Glue42.Windows.GDWindow, newTitle: string): Promise<Glue42.Windows.GDWindow> {\r\n        const options = {\r\n            windowId: w.id,\r\n            options: {\r\n                title: newTitle\r\n            }\r\n        };\r\n        await this.execute(\"setTitle\", options, \"TitleChanged\");\r\n        return w;\r\n    }\r\n\r\n    public async setSticky(w: Glue42.Windows.GDWindow, isSticky: boolean): Promise<Glue42.Windows.GDWindow> {\r\n        const options = {\r\n            windowId: w.id,\r\n            options: {\r\n                isSticky\r\n            }\r\n        };\r\n        await this.execute(\"setSticky\", options);\r\n        return w;\r\n    }\r\n\r\n    public async moveResize(w: Glue42.Windows.GDWindow, bounds: Partial<Glue42.Windows.Bounds>): Promise<Glue42.Windows.GDWindow> {\r\n        if (typeof window !== \"undefined\" && (window.glueDesktop as any).versionNum < 31200) {\r\n            return new Promise(async (res, rej) => {\r\n                const resolveImmediately = this.areBoundsEqual(bounds, w);\r\n                let isDone = false;\r\n                const done = () => {\r\n                    if (isDone) {\r\n                        return;\r\n                    }\r\n                    isDone = true;\r\n\r\n                    if (unsubscribeBoundsChanged) {\r\n                        unsubscribeBoundsChanged();\r\n                        unsubscribeBoundsChanged = undefined;\r\n                    }\r\n                    res(w);\r\n                    if (resolveTimeout) {\r\n                        clearTimeout(resolveTimeout);\r\n                        resolveTimeout = undefined;\r\n                    }\r\n                };\r\n                let resolveTimeout: any;\r\n                let unsubscribeBoundsChanged: () => void;\r\n                if (!resolveImmediately) {\r\n                    unsubscribeBoundsChanged = w.onBoundsChanged((win: Glue42.Windows.GDWindow) => {\r\n                        if (!this.areBoundsEqual(bounds, win)) {\r\n                            return;\r\n                        }\r\n                        done();\r\n                    });\r\n                }\r\n\r\n                try {\r\n                    // always execute moveResize (we might have old bounds and prevent calls that are actually valid)\r\n                    await this.execute(\"moveResize\", { windowId: w.id, options: { bounds } });\r\n                } catch (error) {\r\n                    rej(error);\r\n                    return;\r\n                }\r\n\r\n                // if we're trying to resize with the bounds we already have\r\n                if (resolveImmediately) {\r\n                    done();\r\n                    return;\r\n                }\r\n\r\n                // if no bounds change in the next 1s resolve\r\n                resolveTimeout = setTimeout(() => {\r\n                    done();\r\n                }, 1000);\r\n            });\r\n        } else {\r\n            await this.execute(\"moveResize\", { windowId: w.id, options: { bounds } });\r\n        }\r\n        return w;\r\n    }\r\n\r\n    public async addFrameButton(w: Glue42.Windows.GDWindow, buttonInfo: Glue42.Windows.ButtonInfo): Promise<Glue42.Windows.GDWindow> {\r\n        await this.execute(\"addButton\", { windowId: w.id, options: buttonInfo }, \"ButtonAdded\");\r\n        return w;\r\n    }\r\n\r\n    public async removeFrameButton(w: Glue42.Windows.GDWindow, buttonId: string): Promise<Glue42.Windows.GDWindow> {\r\n        await this.execute(\"removeButton\", { windowId: w.id, options: buttonId }, \"ButtonRemoved\");\r\n        return w;\r\n    }\r\n\r\n    public async activate(w: Glue42.Windows.GDWindow): Promise<Glue42.Windows.GDWindow> {\r\n        let un: UnsubscribeFunction;\r\n        try {\r\n            const done = new Promise<void>((resolve, reject) => {\r\n                un = w.onFocusChanged(() => {\r\n                    resolve();\r\n                });\r\n            });\r\n            await Promise.all([this.execute(\"activate\", { windowId: w.id }, \"FocusChanged\"), done]);\r\n            return w;\r\n        } catch (error) {\r\n            throw error;\r\n        } finally {\r\n            if (un) {\r\n                un();\r\n            }\r\n        }\r\n    }\r\n\r\n    public async focus(w: Glue42.Windows.GDWindow): Promise<Glue42.Windows.GDWindow> {\r\n        let un: UnsubscribeFunction;\r\n        try {\r\n            const done = new Promise<void>((resolve, reject) => {\r\n                un = w.onFocusChanged(() => {\r\n                    resolve();\r\n                });\r\n            });\r\n            await Promise.all([this.execute(\"focus\", { windowId: w.id }, \"FocusChanged\"), done]);\r\n            return w;\r\n        } catch (error) {\r\n            throw error;\r\n        } finally {\r\n            if (un) {\r\n                un();\r\n            }\r\n        }\r\n    }\r\n\r\n    public async maximizeRestore(w: Glue42.Windows.GDWindow): Promise<Glue42.Windows.GDWindow> {\r\n        await this.execute(\"maximizeRestore\", { windowId: w.id }, \"StateChanged\");\r\n        return w;\r\n    }\r\n\r\n    public async maximize(w: Glue42.Windows.GDWindow): Promise<Glue42.Windows.GDWindow> {\r\n        await this.execute(\"maximize\", { windowId: w.id }, \"StateChanged\");\r\n        return w;\r\n    }\r\n\r\n    public async restore(w: Glue42.Windows.GDWindow): Promise<Glue42.Windows.GDWindow> {\r\n        await this.execute(\"restore\", { windowId: w.id }, \"StateChanged\");\r\n        return w;\r\n    }\r\n\r\n    public async minimize(w: Glue42.Windows.GDWindow): Promise<Glue42.Windows.GDWindow> {\r\n        await this.execute(\"minimize\", { windowId: w.id }, \"StateChanged\");\r\n        return w;\r\n    }\r\n\r\n    public async collapse(w: Glue42.Windows.GDWindow): Promise<Glue42.Windows.GDWindow> {\r\n        await this.execute(\"collapse\", { windowId: w.id }, \"StateChanged\");\r\n        return w;\r\n    }\r\n\r\n    public async expand(w: Glue42.Windows.GDWindow): Promise<Glue42.Windows.GDWindow> {\r\n        await this.execute(\"expand\", { windowId: w.id }, \"StateChanged\");\r\n        return w;\r\n    }\r\n\r\n    public async toggleCollapse(w: Glue42.Windows.GDWindow): Promise<Glue42.Windows.GDWindow> {\r\n        await this.execute(\"toggleCollapse\", { windowId: w.id }, \"StateChanged\");\r\n        return w;\r\n    }\r\n\r\n    public async snap(w: Glue42.Windows.GDWindow, targetWindow: Glue42.Windows.GDWindow, direction: Glue42.Windows.RelativeDirection): Promise<Glue42.Windows.GDWindow> {\r\n        const args: any = {\r\n            targetWindowId: targetWindow.id\r\n        };\r\n\r\n        if (direction) {\r\n            args.snappingEdge = direction;\r\n        }\r\n        await this.execute(\"snap\", { windowId: w.id, options: args }, \"CompositionChanged\", `CompositionChanged-${targetWindow.id}`);\r\n        return w;\r\n    }\r\n\r\n    public async attachTab(w: Glue42.Windows.GDWindow, sourceWindow: Glue42.Windows.GDWindow, options: Glue42.Windows.AttachOptions): Promise<Glue42.Windows.GDWindow> {\r\n        await this.execute(\"attachTab\", {\r\n            windowId: w.id,\r\n            options: {\r\n                index: options,\r\n                sourceWindowId: sourceWindow.id,\r\n                targetWindowId: w.id,\r\n            }\r\n        }, `WindowFrameAdded-${sourceWindow.id}`, `WindowFrameRemoved-${sourceWindow.id}`);\r\n        return w;\r\n    }\r\n\r\n    public async detachTab(w: Glue42.Windows.GDWindow, options: DetachTabOptions): Promise<Glue42.Windows.GDWindow> {\r\n        const eventKeys: string[] = [\"WindowFrameRemoved\", `WindowFrameAdded`];\r\n        if (!isUndefinedOrNull(options?.relativeTo)) {\r\n            eventKeys.push(`CompositionChanged`);\r\n            eventKeys.push(`CompositionChanged-${options.relativeTo}`);\r\n        } else {\r\n            eventKeys.push(\"BoundsChanged\");\r\n        }\r\n        await this.execute(\"detachTab\", { windowId: w.id, options }, ...eventKeys);\r\n        return w;\r\n    }\r\n\r\n    public async setVisible(w: Glue42.Windows.GDWindow, toBeVisible: boolean = true): Promise<Glue42.Windows.GDWindow> {\r\n        let command: string;\r\n        if (toBeVisible) {\r\n            command = \"show\";\r\n        } else {\r\n            command = \"hide\";\r\n        }\r\n\r\n        await this.execute(command, { windowId: w.id }, \"VisibilityChanged\");\r\n        return w;\r\n    }\r\n\r\n    public async showLoader(w: Glue42.Windows.GDWindow, loader?: Glue42.Windows.Loader): Promise<Glue42.Windows.GDWindow> {\r\n        await this.execute(\"showLoadingAnimation\", { windowId: w.id, options: loader });\r\n        return w;\r\n    }\r\n\r\n    public async hideLoader(w: Glue42.Windows.GDWindow): Promise<Glue42.Windows.GDWindow> {\r\n        await this.execute(\"hideLoadingAnimation\", { windowId: w.id });\r\n        return w;\r\n    }\r\n\r\n    public async updateContext(w: Glue42.Windows.GDWindow, context: any, replace: boolean): Promise<Glue42.Windows.GDWindow> {\r\n        let un: UnsubscribeFunction;\r\n        try {\r\n            // as undefined values do not go through interop, setting a prop to undefined will lead to no change\r\n            // set this to null so it actually removes the prop\r\n            const contextWithoutUndefinedValues = this.swapUndefinedToNull(context);\r\n\r\n            const done = new Promise<void>((resolve, reject) => {\r\n                un = w.onContextUpdated(() => {\r\n                    resolve();\r\n                });\r\n            });\r\n            await Promise.all([this.execute(\"updateContext\", {\r\n                windowId: w.id, context: contextWithoutUndefinedValues, replace\r\n            }), done]);\r\n            return w;\r\n        } catch (error) {\r\n            throw error;\r\n        } finally {\r\n            if (un) {\r\n                un();\r\n            }\r\n        }\r\n    }\r\n\r\n    public async lock(w: Glue42.Windows.GDWindow): Promise<Glue42.Windows.GDWindow> {\r\n        await this.execute(\"lockUnlock\", { windowId: w.id, options: { lock: true } }, \"FrameIsLockedChanged\");\r\n        return w;\r\n    }\r\n\r\n    public async unlock(w: Glue42.Windows.GDWindow): Promise<Glue42.Windows.GDWindow> {\r\n        await this.execute(\"lockUnlock\", { windowId: w.id, options: { lock: false } }, \"FrameIsLockedChanged\");\r\n        return w;\r\n    }\r\n\r\n    public async getIcon(w: Glue42.Windows.GDWindow): Promise<string> {\r\n        const result = await this.execute(\"getIcon\", {\r\n            windowId: w.id,\r\n            options: {}\r\n        });\r\n        return result.icon;\r\n    }\r\n\r\n    public async setIcon(w: Glue42.Windows.GDWindow, base64Image: string): Promise<Glue42.Windows.GDWindow> {\r\n        await this.execute(\"setIcon\", {\r\n            windowId: w.id,\r\n            options: {\r\n                dataURL: base64Image\r\n            }\r\n        });\r\n        return w;\r\n    }\r\n\r\n    public async setFrameColor(w: Glue42.Windows.GDWindow, frameColor: string): Promise<Glue42.Windows.GDWindow> {\r\n        await this.execute(\"setFrameColor\", { windowId: w.id, options: { frameColor } }, \"FrameColorChanged\");\r\n        return w;\r\n    }\r\n\r\n    public async setTabHeaderVisible(w: Glue42.Windows.GDWindow, toBeTabHeaderVisible: boolean): Promise<Glue42.Windows.GDWindow> {\r\n        await this.execute(\"setTabHeaderVisible\", {\r\n            windowId: w.id,\r\n            options: {\r\n                toShow: toBeTabHeaderVisible\r\n            }\r\n        }, \"TabHeaderVisibilityChanged\");\r\n        return w;\r\n    }\r\n\r\n    public async showPopup(targetWindow: Glue42.Windows.GDWindow, options: Glue42.Windows.PopupOptions): Promise<Glue42.Windows.GDWindow> {\r\n        if (!options) {\r\n            throw new Error(\"The options object is not valid!\");\r\n        }\r\n\r\n        const optionsCopy = { ...options };\r\n\r\n        if (!optionsCopy.targetLocation) {\r\n            optionsCopy.targetLocation = \"bottom\" as Glue42.Windows.PopupTargetLocation;\r\n        }\r\n\r\n        const reformatedOptions: ReformatedPopupOptions & { targetId: string } = {\r\n            ...optionsCopy,\r\n            popupBounds: optionsCopy.size,\r\n            targetId: targetWindow.id,\r\n            popupId: optionsCopy.windowId\r\n        };\r\n\r\n        await this.execute(\"showPopupWindow\", {\r\n            windowId: targetWindow.id,\r\n            options: reformatedOptions\r\n        });\r\n\r\n        return targetWindow;\r\n    }\r\n\r\n    public async createFlydown(windowId: string, options: Glue42.Windows.FlydownOptions) {\r\n        if (!options) {\r\n            throw new Error(\"The options object is not valid!\");\r\n        }\r\n\r\n        const optionsCopy = { ...options };\r\n\r\n        if (!optionsCopy.horizontalOffset) {\r\n            optionsCopy.horizontalOffset = 0;\r\n        }\r\n\r\n        if (!optionsCopy.verticalOffset) {\r\n            optionsCopy.verticalOffset = 0;\r\n        }\r\n\r\n        const fullOptions: Glue42.Windows.FlydownOptions & { targetId: string, flydownBounds: Glue42.Windows.FlydownOptions[\"size\"] } = this.reformatFlydownOptions(windowId, optionsCopy);\r\n\r\n        return this.execute(\"setFlydownArea\", { windowId, options: fullOptions }).then(() => {\r\n            const zoneIds = fullOptions.zones.map((z) => z.id);\r\n\r\n            fullOptions.zones.forEach((z) => {\r\n                let callback: (...args: any[]) => any = typeof (z.flydownSize) === \"function\" ?\r\n                    z.flydownSize : () => z.flydownSize;\r\n\r\n                if (options.size instanceof Function && z.flydownSize) {\r\n                    callback = async (data: Glue42.Windows.ShowFlydownData, cancel: () => void) => {\r\n                        let result;\r\n                        // The options callback must be always invoked\r\n                        // If the property in the zone is null it will be automatically\r\n                        // assigned to the same callback from the code above reformatFlydownOptions\r\n                        if (options.size instanceof Function) {\r\n                            result = await options.size(data, cancel);\r\n                        }\r\n\r\n                        // If both are callbacks the zone has higher priority\r\n                        // If they are the same only one should be invoked\r\n                        if (z.flydownSize instanceof Function && z.flydownSize !== options.size) {\r\n                            return await z.flydownSize(data, cancel) || result;\r\n                        }\r\n\r\n                        // The options callback overwrites the bounds object specified in the zone\r\n                        return result || z.flydownSize;\r\n                    };\r\n                }\r\n                this._registry.clearKey(`${fullOptions.targetId}_${z.id}`);\r\n                this._registry.add(`${fullOptions.targetId}_${z.id}`, callback);\r\n            });\r\n\r\n            return {\r\n                destroy: () => this.clearFlydownArea(fullOptions.targetId, zoneIds),\r\n                options: optionsCopy\r\n            };\r\n        });\r\n    }\r\n\r\n    public async setModalState(windowId: string, isModal: boolean): Promise<void> {\r\n        return this.execute(\"setModalState\", { windowId, options: { isModal } });\r\n    }\r\n\r\n    public async handleFlydownBoundsRequested(targetId: string, data: ShowFlydownData) {\r\n        const cancelCallback = () => data.cancel = true;\r\n\r\n        const callbackData: Glue42.Windows.ShowFlydownData = {\r\n            zoneId: data.flydownId,\r\n            flydownWindowBounds: data.flydownWindowBounds,\r\n            flydownWindowId: data.flydownWindowId,\r\n        };\r\n\r\n        const responses = await Promise.all(this._registry.execute(`${targetId}_${data.flydownId}`, callbackData, cancelCallback));\r\n\r\n        if (responses.length === 1) {\r\n            const defaultResponse = { height: 0, width: 0, top: 0, left: 0 };\r\n            const response = typeof (responses[0]) === \"object\" && !Array.isArray(responses[0]) ? responses[0] : defaultResponse;\r\n            const responseOptions: ShowFlydownData = { ...data, flydownWindowBounds: response };\r\n\r\n            return responseOptions;\r\n        }\r\n    }\r\n\r\n    public async handleOnEventRequested(callbackId: string, args?: { newUrl: string }) {\r\n        const callbacks = this.unsubCallbacks[callbackId] ?? [];\r\n        let prevented = false;\r\n        await Promise.all(callbacks.map((cb) => {\r\n            return new Promise<void>((resolve, reject) => {\r\n                cb(() => {\r\n                    resolve();\r\n                }, () => {\r\n                    reject();\r\n                }, () => {\r\n                    prevented = true;\r\n                }, args);\r\n            });\r\n        }));\r\n        return { prevented };\r\n    }\r\n\r\n    public async zoomIn(window: Glue42.Windows.GDWindow): Promise<Glue42.Windows.GDWindow> {\r\n        await this.execute(\"zoomIn\", {\r\n            windowId: window.id,\r\n        });\r\n        return window;\r\n    }\r\n\r\n    public async zoomOut(window: Glue42.Windows.GDWindow): Promise<Glue42.Windows.GDWindow> {\r\n        await this.execute(\"zoomOut\", {\r\n            windowId: window.id,\r\n        });\r\n        return window;\r\n    }\r\n\r\n    public async setZoomFactor(window: Glue42.Windows.GDWindow, zoomFactor: number): Promise<Glue42.Windows.GDWindow> {\r\n        await this.execute(\"setZoomFactor\", {\r\n            windowId: window.id,\r\n            options: {\r\n                zoomFactor\r\n            }\r\n        });\r\n        return window;\r\n    }\r\n\r\n    public async showDevTools(window: Glue42.Windows.GDWindow): Promise<Glue42.Windows.GDWindow> {\r\n        await this.execute(\"showDevTools\", {\r\n            windowId: window.id,\r\n        });\r\n\r\n        return window;\r\n    }\r\n\r\n    public async capture(window: Glue42.Windows.GDWindow, options: Glue42.Windows.CaptureOptions): Promise<string> {\r\n        const base64screenshot = (await this.execute(\r\n            \"captureScreenshot\",\r\n            { windowId: window.id, options: { ...options } }\r\n        )).data;\r\n\r\n        return base64screenshot;\r\n    }\r\n\r\n    public async captureGroup(windowIds: string[], options: Glue42.Windows.CaptureOptions): Promise<string> {\r\n        const base64screenshot: string = (await this.execute(\r\n            \"captureGroupScreenshot\",\r\n            { windowId: windowIds[0], options: { groupWindowIds: windowIds, ...options } }\r\n        )).data;\r\n\r\n        return base64screenshot;\r\n    }\r\n\r\n    public async flash(resultWindow: Glue42.Windows.GDWindow, options: FlashOptions): Promise<Glue42.Windows.GDWindow> {\r\n        await this.execute(\r\n            \"flash\",\r\n            { windowId: resultWindow.id, options: { ...options } }\r\n        );\r\n\r\n        return resultWindow;\r\n    }\r\n\r\n    public async configure(windowId: string, options: Glue42.Windows.WindowsConfiguration): Promise<void> {\r\n        return this.execute(\r\n            \"configure\",\r\n            { windowId, options: { ...options } }\r\n        );\r\n    }\r\n\r\n    public async print(resultWindow: Glue42.Windows.GDWindow, options: Glue42.Windows.PrintOptions): Promise<Glue42.Windows.GDWindow> {\r\n        await this.execute(\r\n            \"print\",\r\n            { windowId: resultWindow.id, options: { ...options } }\r\n        );\r\n        return resultWindow;\r\n    }\r\n\r\n    public async printToPDF(resultWindow: Glue42.Windows.GDWindow, options: Glue42.Windows.PrintToPDFOptions): Promise<string> {\r\n        const filePath: string = (await this.execute(\r\n            \"printToPDF\",\r\n            { windowId: resultWindow.id, options: { ...options } }\r\n        )).filePath;\r\n\r\n        return filePath;\r\n    }\r\n\r\n    public async place(window: Glue42.Windows.GDWindow, options: Glue42.Windows.PlacementSettings): Promise<void> {\r\n        const copy = { ...options } as any;\r\n        if (!options.display || options.display === \"current\") {\r\n            copy.display = await window.getDisplay();\r\n        }\r\n        // Glue42.Displays.API works with zero based array of displays, which means that the first monitor has index 0\r\n        // whereas GD works with non zero based array of displays, which means that the first monitor has index 1\r\n        copy.display = copy.display.index + 1;\r\n        return this.execute(\r\n            \"place\",\r\n            { windowId: window.id, options: { ...copy } }\r\n        );\r\n    }\r\n\r\n    public async refresh(resultWindow: Glue42.Windows.GDWindow, ignoreCache: boolean): Promise<Glue42.Windows.GDWindow> {\r\n        await this.execute(\"refresh\", { windowId: resultWindow.id, options: { ignoreCache } });\r\n        return resultWindow;\r\n    }\r\n\r\n    public async download(resultWindow: Glue42.Windows.GDWindow, url: string, options: Glue42.Windows.DownloadOptions & { enableDownloadBar?: boolean } = {}): Promise<Glue42.Windows.DownloadResult> {\r\n        options.enableDownloadBar = !options.silent;\r\n        const result: { fileSize: number, fullPath: string, success: boolean } = await this.execute(\"downloadURL\", { windowId: resultWindow.id, options: { url, options } });\r\n        return {\r\n            url,\r\n            path: result.fullPath,\r\n            size: result.fileSize,\r\n        };\r\n    }\r\n\r\n    public async configureWindow(resultWindow: Glue42.Windows.GDWindow, options: Glue42.Windows.WindowConfiguration): Promise<Glue42.Windows.GDWindow> {\r\n        await this.execute(\"configureWindow\", { windowId: resultWindow.id, options });\r\n        return resultWindow;\r\n    }\r\n\r\n    /**\r\n     * Invokes the container\r\n     * @param command\r\n     * @param options\r\n     * @param {...string} eventKeys which events types to be awaited before resolving - used only < GD 3.12\r\n     * @returns Invocation result\r\n     */\r\n    public async execute(command: string, options: any & { windowId: string }, ...eventKeys: string[]): Promise<any> {\r\n        const params = {\r\n            ...options,\r\n            command,\r\n        };\r\n        let finishedResolve: () => void;\r\n        this._finished = new Promise((resolve) => {\r\n            finishedResolve = resolve;\r\n        });\r\n        try {\r\n            if (typeof window !== \"undefined\" && (window.glueDesktop as any).versionNum < 31200) {\r\n                return await this.executeWithoutToken(params, ...eventKeys);\r\n            } else {\r\n                return await this.executeWithToken(params);\r\n            }\r\n        } catch (error) {\r\n            throw error;\r\n        } finally {\r\n            finishedResolve();\r\n        }\r\n    }\r\n\r\n    public async ungroup(w: Glue42.Windows.GDWindow, options: Glue42.Windows.UngroupOptions): Promise<Glue42.Windows.GDWindow> {\r\n        const args = {\r\n            windowId: w.id,\r\n            options\r\n        };\r\n        await this.execute(\"ungroup\", args);\r\n        return w;\r\n    }\r\n\r\n    public async updateJumpList(windowId: string, options: JumpListUpdateSettings): Promise<void> {\r\n        const args = {\r\n            windowId,\r\n            options\r\n        };\r\n        await this.execute(\"updateJumplist\", args);\r\n    }\r\n\r\n    public async getJumpList(windowId: string): Promise<JumpListSettingsInternal> {\r\n        const args = {\r\n            windowId,\r\n        };\r\n        const result = await this.execute(\"getJumplist\", args);\r\n        return result;\r\n    }\r\n\r\n    public onClosing(callback: (success: () => void, error: () => void) => void, id: string): () => void {\r\n        const glue42gd = typeof window !== \"undefined\" && (window as any).glue42gd;\r\n        if (glue42gd) {\r\n            return glue42gd.addCloseHandler(callback, id);\r\n        } else {\r\n            return this.nodeHandlers(callback, id, \"OnClosing\");\r\n        }\r\n    }\r\n\r\n    public onRefreshing(callback: (success: () => void, error: () => void, prevent: () => void) => void, id: string): () => void {\r\n        const glue42gd = typeof window !== \"undefined\" && (window as any).glue42gd;\r\n        if (glue42gd) {\r\n            return glue42gd.addRefreshHandler(callback, id);\r\n        } else {\r\n            return this.nodeHandlers(callback, id, \"OnRefreshing\");\r\n        }\r\n    }\r\n\r\n    public onNavigating(callback: (success: () => void, error: () => void, prevent: () => void, args: { newUrl: string }) => void, id: string): () => void {\r\n        const glue42gd = typeof window !== \"undefined\" && (window as any).glue42gd;\r\n        if (glue42gd) {\r\n            return glue42gd.addWillNavigateHandler(callback, id);\r\n        } else {\r\n            return this.nodeHandlers(callback, id, \"OnNavigating\");\r\n        }\r\n    }\r\n\r\n    public async goBack(resultWindow: Glue42.Windows.GDWindow): Promise<void> {\r\n        await this.execute(\"goBack\", { windowId: resultWindow.id });\r\n    }\r\n\r\n    public async goForward(resultWindow: Glue42.Windows.GDWindow): Promise<void> {\r\n        await this.execute(\"goForward\", { windowId: resultWindow.id });\r\n    }\r\n\r\n    private nodeHandlers(callback: (success: () => void, error: () => void, prevent?: () => void, args?: { newUrl: string }) => void, winId: string, type: string): () => void {\r\n        const id = `${winId}-${type}`;\r\n        const unsub = () => {\r\n            if (this.unsubCallbacks[id]) {\r\n                const callbacks = this.unsubCallbacks[id];\r\n                this.unsubCallbacks[id] = callbacks.filter((cb) => cb !== callback);\r\n            }\r\n            const cbs = this.unsubCallbacks[id];\r\n            if (cbs.length === 0) {\r\n                this.execute(type, {\r\n                    windowId: winId,\r\n                    options: {\r\n                        unsubscribe: true\r\n                    }\r\n                });\r\n            }\r\n        };\r\n        if (this.unsubCallbacks[id]) {\r\n            this.unsubCallbacks[id].push(callback);\r\n            return unsub;\r\n        } else {\r\n            this.unsubCallbacks[id] = [callback];\r\n        }\r\n        const args = {\r\n            windowId: winId\r\n        };\r\n        this.execute(type, args);\r\n        return unsub;\r\n    }\r\n    private reformatFlydownOptions(windowId: string, options: Glue42.Windows.FlydownOptions) {\r\n        const assignGeneralIfUnassigned = (zone: Glue42.Windows.FlydownZone, prop: keyof Glue42.Windows.FlydownZone & keyof Glue42.Windows.FlydownOptions) => {\r\n            if (options[prop] && (zone[prop] === undefined || zone[prop] === null)) {\r\n                const valueFromOptions = options[prop];\r\n                (zone[prop] as any) = valueFromOptions;\r\n            }\r\n        };\r\n\r\n        const zones: ReformatedFlydownOptions[\"zones\"] = options.zones.map((z) => {\r\n            assignGeneralIfUnassigned(z, \"windowId\");\r\n            assignGeneralIfUnassigned(z, \"targetLocation\");\r\n\r\n            if (options.size && (z.flydownSize === undefined || z.flydownSize === null)) {\r\n                z.flydownSize = options.size;\r\n            }\r\n\r\n            (z as ReformatedFlydownZone).flydownBounds = z.flydownSize as any;\r\n            (z as ReformatedFlydownZone).flydownId = z.windowId;\r\n\r\n            if (!z.targetLocation) {\r\n                z.targetLocation = \"bottom\" as Glue42.Windows.PopupTargetLocation.Bottom;\r\n            }\r\n\r\n            return z;\r\n        });\r\n\r\n        return {\r\n            ...options,\r\n            zones,\r\n            targetId: windowId,\r\n            flydownBounds: options.size,\r\n            flydownActiveArea: options.activeArea\r\n        };\r\n    }\r\n\r\n    private clearFlydownArea(windowId: string, areaIds: string[]) {\r\n        return this.execute(\"clearFlydownWindowArea\", {\r\n            windowId,\r\n            options: {}\r\n        }).then(() => {\r\n            areaIds.forEach((id) => {\r\n                this._registry.clearKey(`${windowId}_${id}`);\r\n            });\r\n        });\r\n    }\r\n\r\n    private executeWithoutToken(params: { windowId: string }, ...eventKeys: string[]) {\r\n        const uns: UnsubscribeFunction[] = [];\r\n        const executed = eventKeys?.filter((k) => !isUndefinedOrNull(k)).map((key) => {\r\n            return new Promise<void>((r) => {\r\n                const [type, windowId = params.windowId] = key.split(\"-\");\r\n                uns.push(this._registry.add(\"event\", (data: { windowId: string, type: string }) => {\r\n                    if (data.type === type && data.windowId === windowId) {\r\n                        r();\r\n                    }\r\n                }));\r\n            });\r\n        });\r\n        const action = new Promise<any>((resolve, reject) => {\r\n            this.agm.invoke<any>(\"T42.Wnd.Execute\", params, this.agmTarget)\r\n                .then((i) => {\r\n                    if (i.returned && i.returned.errorMsg) {\r\n                        reject(i);\r\n                    } else {\r\n                        resolve(i.returned);\r\n                    }\r\n                })\r\n                .catch((e) => reject(e));\r\n        });\r\n        return Promise.all([action, ...executed])\r\n            .then((r) => {\r\n                return r[0];\r\n            })\r\n            .finally(() => {\r\n                uns.forEach((un) => un());\r\n            });\r\n    }\r\n\r\n    private async executeWithToken(options: any) {\r\n        let un: UnsubscribeFunction;\r\n        try {\r\n            const token = shortid.generate();\r\n            const event = new Promise<void>((r) => {\r\n                un = this._registry.add(\"event\", (data: any) => {\r\n                    if (data.token === token) {\r\n                        r();\r\n                    }\r\n                });\r\n            });\r\n            const execute = new Promise<any>((resolve, reject) => {\r\n                options.token = token;\r\n                this.agm.invoke<any>(\"T42.Wnd.Execute\", options, this.agmTarget)\r\n                    .then((i) => {\r\n                        if (i.returned && i.returned.errorMsg) {\r\n                            reject(i);\r\n                        } else {\r\n                            resolve(i.returned);\r\n                        }\r\n                    })\r\n                    .catch((i) => {\r\n                        reject(i);\r\n                    });\r\n            });\r\n\r\n            const result = await Promise.all([execute, event]);\r\n            return result[0];\r\n        } catch (error) {\r\n            throw error;\r\n        } finally {\r\n            if (un) {\r\n                un();\r\n            }\r\n        }\r\n    }\r\n\r\n    private areBoundsEqual(requested: Partial<Glue42.Windows.Bounds>, w: Glue42.Windows.GDWindow) {\r\n        const current = w.bounds;\r\n        const settings = w.settings;\r\n        let height = requested.height;\r\n        let width = requested.width;\r\n        if (requested.height < settings.minHeight) {\r\n            height = settings.minHeight;\r\n        }\r\n        if (requested.height > settings.maxHeight) {\r\n            height = settings.maxHeight;\r\n        }\r\n        if (requested.width < settings.minWidth) {\r\n            width = settings.minWidth;\r\n        }\r\n        if (requested.width > settings.maxWidth) {\r\n            width = settings.maxWidth;\r\n        }\r\n\r\n        const areHeightsEqual = height ? current.height === height : true;\r\n        const areWidthsEqual = width ? current.width === width : true;\r\n        const areLeftsEqual = requested.left ? current.left === requested.left : true;\r\n        const areTopsEqual = requested.top ? current.top === requested.top : true;\r\n\r\n        return areHeightsEqual && areWidthsEqual && areLeftsEqual && areTopsEqual;\r\n    }\r\n\r\n    private swapUndefinedToNull(context: any) {\r\n        try {\r\n            // swap top level undefined values to null-s\r\n            const copy: any = {};\r\n            for (const key of Object.keys(context)) {\r\n                let value = context[key];\r\n                if (typeof value === \"undefined\") {\r\n                    value = null;\r\n                }\r\n                copy[key] = value;\r\n            }\r\n            return copy;\r\n        } catch {\r\n            return context;\r\n        }\r\n    }\r\n}\r\n\r\nexport default new GDExecutor();\r\n","import { default as windowStore } from \"../store\";\r\nimport { WindowWrapper } from \"../types\";\r\n\r\nexport function getWindowsByTabGroupId(windowId: string, tabGroupId: string): WindowWrapper[] {\r\n    const windows = windowStore.list;\r\n    return Object.keys(windows).reduce((memo, id) => {\r\n        const win = windows[id];\r\n        if (win.API.tabGroupId === tabGroupId && win.API.id !== windowId) {\r\n            memo.push(win);\r\n        }\r\n        return memo;\r\n    }, []);\r\n}\r\n","import { Glue42Core } from \"@glue42/core\";\r\nimport { Glue42 } from \"../../../../glue\";\r\nimport { default as windowStore } from \"../../store\";\r\nimport { Environment, Executor, WindowConstructorOptions, WindowEvents, WindowWrapper } from \"../../types\";\r\nimport windowFactory from \"../../window\";\r\nimport { default as executor } from \"./executor\";\r\nimport { CallbackRegistry, UnsubscribeFunction, default as CallbackFactory } from \"callback-registry\";\r\nimport {\r\n    FullInfoEvent,\r\n    StreamEvent,\r\n    WindowInfo,\r\n    GroupHeaderVisibilityChanged,\r\n    UrlChanged,\r\n    TitleChanged,\r\n    BoundsChanged,\r\n    FocusChanged,\r\n    CompositionChanged,\r\n    ExtendedStreamEvent,\r\n    EventWithResponseData,\r\n    ResponseTypes,\r\n    IsStickyChanged,\r\n} from \"./types\";\r\nimport { getWindowsByTabGroupId } from \"../helpers\";\r\n\r\nexport default class GDEnvironment implements Environment {\r\n\r\n    private _registry: CallbackRegistry = CallbackFactory();\r\n    private _agm: Glue42Core.AGM.API;\r\n    private _logger: Glue42Core.Logger.API;\r\n    private _waitTimeout: number = 10000;\r\n    private _agmInstance: Glue42Core.AGM.Instance | \"best\" | \"all\";\r\n    private _windowId: string;\r\n    private _appManagerGetter: () => Glue42.AppManager.API;\r\n    private _displayAPIGetter: () => Glue42.Displays.API;\r\n    private _channelsAPIGetter: () => Glue42.Channels;\r\n\r\n    constructor(agm: Glue42Core.AGM.API, logger: Glue42Core.Logger.API, appManagerGetter: () => Glue42.AppManager.API, displayAPIGetter: () => Glue42.Displays.API, channelsAPIGetter: () => Glue42.Channels, instance?: Glue42Core.AGM.Instance, wndId?: string) {\r\n        this._agm = agm;\r\n        this._logger = logger.subLogger(\"gd-env\");\r\n        this._agmInstance = this.normalizeInstance(instance);\r\n        this._windowId = wndId;\r\n        this._appManagerGetter = appManagerGetter;\r\n        this._displayAPIGetter = displayAPIGetter;\r\n        this._channelsAPIGetter = channelsAPIGetter;\r\n    }\r\n\r\n    public init(): Promise<GDEnvironment> {\r\n        return new Promise((resolve, reject) => {\r\n            // if we don't have an Instance, thats means that we are running outside from any Tick42 Containers\r\n            // so our target is best\r\n            if (typeof this._agmInstance === \"undefined\") {\r\n                this._agmInstance = \"best\";\r\n            }\r\n\r\n            this._agm.registerAsync(\"T42.Wnd.OnEventWithResponse\", (args, caller, success, err) => {\r\n                this.respondToEvent(args as any).then(success).catch(err);\r\n            });\r\n\r\n            const streamPromise = new Promise<void>((streamResolve, streamReject) => {\r\n                this._agm.subscribe(\"T42.Wnd.OnEvent\", {\r\n                    waitTimeoutMs: this._waitTimeout,\r\n                    target: this._agmInstance,\r\n                    onData: (streamData: any) => {\r\n                        this.updateWindow(streamData.data, resolve);\r\n                        executor.handleEvent(streamData.data);\r\n                    },\r\n                    onConnected: (instance) => {\r\n                        this._agmInstance = this.normalizeInstance(instance);\r\n                        // Init the executor\r\n                        executor.init(this._agm, this._agmInstance);\r\n                    }\r\n                }).catch((err: any) => {\r\n                    reject(\"Can not subscribe for stream T42.Wnd.OnEvent. Err: \" + err);\r\n                });\r\n            });\r\n        });\r\n    }\r\n\r\n    public get executor(): Executor {\r\n        return executor;\r\n    }\r\n\r\n    public open(name: string, url: string, options: any): Promise<Glue42.Windows.GDWindow> {\r\n        options = options || {};\r\n        const copyOptions = { ...options };\r\n\r\n        if (copyOptions.relativeTo !== undefined && typeof copyOptions.relativeTo !== \"string\") {\r\n            copyOptions.relativeTo = copyOptions.relativeTo.id || \"\";\r\n        }\r\n\r\n        copyOptions.name = name;\r\n        copyOptions.url = url;\r\n\r\n        // This is for compatibility between gd2 and gd3\r\n        copyOptions.windowState = options.windowState || options.state;\r\n        // Otherwise glue desktop throws an error for extra properties\r\n        delete copyOptions.state;\r\n\r\n        return this.executor.open(copyOptions);\r\n    }\r\n\r\n    public createFlydown(windowId: string, options: Glue42.Windows.FlydownOptions): Promise<Glue42.Windows.Flydown> {\r\n        return this.executor.createFlydown(windowId, options);\r\n    }\r\n\r\n    public async showPopup(windowId: string, options: Glue42.Windows.PopupOptions): Promise<void> {\r\n        const window = windowStore.get(windowId);\r\n        await this.executor.showPopup(window.API, options);\r\n    }\r\n\r\n    public tabAttached(callback: (tabWindow: Glue42.Windows.GDWindow, newTabGroupId: string, tabHeaderVisible: boolean) => void): UnsubscribeFunction {\r\n        return this._registry.add(\"tab-attached\", callback);\r\n    }\r\n\r\n    public tabDetached(callback: (window: Glue42.Windows.GDWindow, tabGroupId: string, oldTabGroupId: string) => void): UnsubscribeFunction {\r\n        return this._registry.add(\"tab-detached\", callback);\r\n    }\r\n\r\n    public onWindowFrameColorChanged(callback: (window: Glue42.Windows.GDWindow) => void) {\r\n        return this._registry.add(\"frame-color-changed\", callback);\r\n    }\r\n\r\n    public onEvent(callback: (windowInfo: any) => void): UnsubscribeFunction {\r\n        return this._registry.add(\"window-event\", callback);\r\n    }\r\n\r\n    public my(): string {\r\n        return this._windowId;\r\n    }\r\n\r\n    public execute<T>(command: string, windowId: string, options: {}): Promise<Glue42Core.AGM.InvocationResult<T>> {\r\n        return this._agm.invoke<T>(\"T42.Wnd.Execute\", {\r\n            command,\r\n            options,\r\n            windowId,\r\n        });\r\n    }\r\n\r\n    /** Groups */\r\n    public onCompositionChanged(callback: (windowInfo: any) => void): UnsubscribeFunction {\r\n        return this._registry.add(\"composition-changed\", callback);\r\n    }\r\n\r\n    public onGroupHeaderVisibilityChanged(callback: (stream: any) => void): UnsubscribeFunction {\r\n        return this._registry.add(\"group-header-changed\", callback);\r\n    }\r\n\r\n    public onWindowGotFocus(callback: (window: Glue42.Windows.GDWindow) => void): UnsubscribeFunction {\r\n        return this._registry.add(\"got-focus\", callback);\r\n    }\r\n\r\n    public onWindowLostFocus(callback: (window: Glue42.Windows.GDWindow) => void): UnsubscribeFunction {\r\n        return this._registry.add(\"lost-focus\", callback);\r\n    }\r\n\r\n    // TODO revise it\r\n    private normalizeInstance(instance: Glue42Core.AGM.Instance) {\r\n        if (!instance) {\r\n            return undefined;\r\n        }\r\n        return {\r\n            application: instance.application,\r\n            machine: instance.machine,\r\n            user: instance.user,\r\n        };\r\n    }\r\n    private respondToEvent(args: EventWithResponseData): Promise<ResponseTypes> {\r\n        if (args.type === \"ShowFlydownBoundsRequested\") {\r\n            return this.executor.handleFlydownBoundsRequested(args.data.windowId, args.data);\r\n        } else if (args.type === \"OnClosing\" || args.type === \"OnRefreshing\" || args.type === \"OnNavigating\") {\r\n            return this.executor.handleOnEventRequested(args.data.callbackId, args.data.args);\r\n        }\r\n        return Promise.reject(`There isn't a handler for ${(args as any).type}`);\r\n    }\r\n\r\n    private updateWindow(windowInfo: StreamEvent, readyResolve: (env: GDEnvironment) => void) {\r\n        const extendedStreamEvent = this.getExtendedStreamEvent(windowInfo);\r\n\r\n        // this is the snapshot of all windows\r\n        if (windowInfo.type === \"Snapshot\") {\r\n            const windowInfoFullInfoEvent = (windowInfo as FullInfoEvent);\r\n            windowInfoFullInfoEvent.windows.forEach((w) => {\r\n                const existingWindow = windowStore.get(w.id);\r\n                if (existingWindow) {\r\n                    existingWindow.Events.handleUpdate(this.mapToWindowConstructorOptions(w));\r\n                } else {\r\n                    const win = this.createWindow(w.id, w);\r\n                    windowStore.markReadyToShow(win.API.id);\r\n                }\r\n                this._registry.execute(\"window-event\", extendedStreamEvent);\r\n            });\r\n            readyResolve(this);\r\n            return;\r\n        }\r\n\r\n        // global event\r\n        if (windowInfo.type === \"CommandExecuted\") {\r\n            this._registry.execute(\"window-event\", extendedStreamEvent);\r\n            return;\r\n        }\r\n\r\n        // if new window handle it separately\r\n        if (windowInfo.type === \"Created\") {\r\n            const windowInfoCreatedEvent = (windowInfo as StreamEvent);\r\n            const win = this.createWindow(windowInfoCreatedEvent.windowId, windowInfoCreatedEvent.data || {});\r\n            windowStore.setReadyState(win.API.id);\r\n            this._registry.execute(\"window-event\", extendedStreamEvent);\r\n            return;\r\n        }\r\n\r\n        // otherwise check if the window is in our internal collections and update its state\r\n        const windowObjectAndEvents: WindowWrapper = windowStore.get((windowInfo as StreamEvent).windowId);\r\n        if (!windowObjectAndEvents) {\r\n            this._logger.error(`received update for unknown window. Stream:', ${JSON.stringify(windowInfo, null, 4)}`);\r\n            return;\r\n        }\r\n\r\n        const theWindow: Glue42.Windows.GDWindow = windowObjectAndEvents.API;\r\n        const theWindowEvents: WindowEvents = windowObjectAndEvents.Events;\r\n\r\n        // handle bounds changed\r\n        if (windowInfo.type === \"BoundsChanged\") {\r\n            const windowInfoBoundsChangedEvent = (windowInfo as BoundsChanged);\r\n            theWindowEvents.handleBoundsChanged(windowInfoBoundsChangedEvent.data);\r\n        }\r\n\r\n        // handle url changed\r\n        if (windowInfo.type === \"UrlChanged\") {\r\n            const windowInfoUrlChangedEvent = (windowInfo as UrlChanged);\r\n            windowStore.setUrlChangedState(windowInfoUrlChangedEvent.windowId);\r\n            theWindowEvents.handleUrlChanged(windowInfoUrlChangedEvent.data);\r\n        }\r\n\r\n        // handle title changed\r\n        if (windowInfo.type === \"TitleChanged\") {\r\n            const windowInfoTitleChanged = (windowInfo as TitleChanged);\r\n            theWindowEvents.handleTitleChanged(windowInfoTitleChanged.data);\r\n        }\r\n\r\n        // handle isSticky changed\r\n        if (windowInfo.type === \"IsStickyChanged\") {\r\n            const windowInfoIsStickyChangedChanged = (windowInfo as IsStickyChanged);\r\n            theWindowEvents.handleIsStickyChanged(windowInfoIsStickyChangedChanged.data);\r\n        }\r\n\r\n        // handle visibility changed\r\n        if (windowInfo.type === \"VisibilityChanged\") {\r\n            theWindowEvents.handleVisibilityChanged(windowInfo.data);\r\n        }\r\n\r\n        // handle context changed\r\n        if (windowInfo.type === \"ContextChanged\") {\r\n            theWindowEvents.handleContextUpdated(windowInfo.data);\r\n        }\r\n\r\n        // handle window state changed\r\n        if (windowInfo.type === \"StateChanged\") {\r\n            theWindowEvents.handleWindowChangeState(windowInfo.data);\r\n        }\r\n\r\n        // handle frame color changed\r\n        if (windowInfo.type === \"FrameColorChanged\") {\r\n            theWindowEvents.handleFrameColorChanged(windowInfo.data);\r\n            this._registry.execute(\"frame-color-changed\", theWindow);\r\n        }\r\n\r\n        // handle composition changed - groups API\r\n        if (windowInfo.type === \"CompositionChanged\") {\r\n            const windowInfoCompositionChanged = windowInfo as CompositionChanged;\r\n            theWindowEvents.handleCompositionChanged(windowInfoCompositionChanged.data);\r\n            this._registry.execute(\"composition-changed\", windowInfoCompositionChanged.data);\r\n        }\r\n\r\n        if (windowInfo.type === \"GroupHeaderVisibilityChanged\") {\r\n            const info = windowInfo as GroupHeaderVisibilityChanged;\r\n            theWindowEvents.handleGroupHeaderVisibilityChanged(info.data.groupHeaderVisible);\r\n            this._registry.execute(\"group-header-changed\", info.data);\r\n        }\r\n\r\n        // handle focus changed\r\n        if (windowInfo.type === \"FocusChanged\") {\r\n            const windowInfoFocusChanged = (windowInfo as FocusChanged);\r\n            this.focusChanged(theWindowEvents, theWindow, windowInfoFocusChanged.data);\r\n        }\r\n\r\n        if (windowInfo.type === \"WindowFrameChanged\") {\r\n            theWindowEvents.handleFrameAttached(windowInfo.data.frameId, windowInfo.data.frameId, windowInfo.data.isTabHeaderVisible);\r\n            this._registry.execute(\"frame-changed\");\r\n        }\r\n\r\n        if (windowInfo.type === \"WindowFrameAdded\") {\r\n            const winsToBeNotified = getWindowsByTabGroupId(theWindow.id, windowInfo.data.frameId);\r\n            const data = windowInfo.data;\r\n            theWindowEvents.handleAttached(data.frameId, data.frameId, data.isTabHeaderVisible, data.isLocked, winsToBeNotified)\r\n                .then(async () => {\r\n                    // don't fire the event if it is the first window\r\n                    if (winsToBeNotified.length > 0) {\r\n                        await executor.finished;\r\n                        this._registry.execute(\"tab-attached\", theWindow, windowInfo.data.frameId, windowInfo.data.isTabHeaderVisible);\r\n                    }\r\n                });\r\n        }\r\n\r\n        if (windowInfo.type === \"WindowFrameRemoved\") {\r\n            // In the event, tabGroupId is empty, will be update on the next event FrameAttached\r\n            const oldTabGroupId = theWindow.tabGroupId;\r\n            const winsToBeNotified = getWindowsByTabGroupId(theWindow.id, oldTabGroupId);\r\n            theWindowEvents.handleDetached(windowInfo.data.isLocked, winsToBeNotified)\r\n                .then(async () => {\r\n                    // don't fire the event if it is the first window\r\n                    if (winsToBeNotified.length > 0) {\r\n                        await executor.finished;\r\n                        this._registry.execute(\"tab-detached\", theWindow, windowInfo.data.frameId, theWindow.tabGroupId);\r\n                    }\r\n                });\r\n        }\r\n\r\n        if (windowInfo.type === \"TabHeaderVisibilityChanged\") {\r\n            theWindowEvents.handleTabHeaderVisibilityChanged(windowInfo.data.isTabHeaderVisible);\r\n        }\r\n\r\n        if (windowInfo.type === \"FrameSelectionChanged\") {\r\n            theWindowEvents.handleFrameSelectionChanged(windowInfo.data.newWindowId, windowInfo.data.prevWindowId);\r\n        }\r\n\r\n        if (windowInfo.type === \"ButtonClicked\") {\r\n            theWindowEvents.handleFrameButtonClicked(windowInfo.data);\r\n        }\r\n\r\n        if (windowInfo.type === \"ButtonAdded\") {\r\n            theWindowEvents.handleFrameButtonAdded(windowInfo.data);\r\n        }\r\n\r\n        if (windowInfo.type === \"ButtonRemoved\") {\r\n            theWindowEvents.handleFrameButtonRemoved(windowInfo.data);\r\n        }\r\n\r\n        if (windowInfo.type === \"WindowZoomFactorChanged\") {\r\n            theWindowEvents.handleZoomFactorChanged(windowInfo.data);\r\n        }\r\n\r\n        // Clear the window on close event\r\n        if (windowInfo.type === \"Closed\") {\r\n            windowStore.remove(windowObjectAndEvents);\r\n            theWindowEvents.handleWindowClose();\r\n        }\r\n\r\n        if (windowInfo.type === \"FrameIsLockedChanged\") {\r\n            theWindowEvents.handleFrameIsLockedChanged(windowInfo.data);\r\n        }\r\n\r\n        if (windowInfo.type === \"PlacementSettingsChanged\") {\r\n            theWindowEvents.handlePlacementSettingsChanged(windowInfo.data);\r\n        }\r\n\r\n        // expose to external listeners\r\n        this._registry.execute(\"window-event\", extendedStreamEvent);\r\n    }\r\n\r\n    private createWindow(windowId: string, options: WindowInfo): WindowWrapper {\r\n        const windowObjAndEvents: WindowWrapper = windowFactory(windowId, this.mapToWindowConstructorOptions(options), executor, this._logger, this._appManagerGetter, this._displayAPIGetter, this._channelsAPIGetter, this._agm);\r\n        windowStore.add(windowObjAndEvents);\r\n        return windowObjAndEvents;\r\n    }\r\n\r\n    private focusChanged(theWindowEvents: WindowEvents, theWindow: Glue42.Windows.GDWindow, focus: boolean) {\r\n        theWindowEvents.handleFocusChanged(focus);\r\n        if (focus) {\r\n            this._registry.execute(\"got-focus\", theWindow);\r\n        } else {\r\n            this._registry.execute(\"lost-focus\", theWindow);\r\n        }\r\n    }\r\n\r\n    private mapToWindowConstructorOptions(args: WindowInfo): WindowConstructorOptions {\r\n        // TODO\r\n        return {\r\n            name: args.name,\r\n            context: args.context,\r\n            bounds: args.bounds,\r\n            url: args.url,\r\n            title: args.title,\r\n            isVisible: args.isVisible,\r\n            focus: args.isFocused,\r\n            state: args.state,\r\n            frameColor: args.frameColor,\r\n            groupId: args.groupId,\r\n            neighbours: args.neighbors,\r\n            isFocused: args.isFocused,\r\n            isGroupHeaderVisible: args.groupHeaderVisible,\r\n            isCollapsed: args.isCollapsed,\r\n            tabGroupId: args.frameId,\r\n            frameId: args.frameId,\r\n            mode: args.mode,\r\n            isTabHeaderVisible: args.isTabHeaderVisible,\r\n            isTabSelected: args.isActiveTab,\r\n            settings: args.settings,\r\n            windowType: args.windowType,\r\n            zoomFactor: args.zoomFactor,\r\n            // focus: args.focus,\r\n            isLocked: args.isLocked,\r\n            placementSettings: args.placementSettings,\r\n            isSticky: args.isSticky,\r\n            tabIndex: args.tabIndex,\r\n            // settings: windowStyleAttributes,\r\n            frameButtons: args.frameButtons,\r\n            jumpListOptions: args.jumpList,\r\n            applicationName: args.applicationName\r\n        };\r\n    }\r\n\r\n    private getExtendedStreamEvent(streamEvent: StreamEvent): StreamEvent | ExtendedStreamEvent {\r\n        try {\r\n            // some events (e.g. Snapshot) do not have windowIds\r\n            if (!streamEvent.windowId) {\r\n                return streamEvent;\r\n            }\r\n\r\n            // try to get the window, if not there return the original event\r\n            const window = windowStore.get(streamEvent.windowId);\r\n            if (!window) {\r\n                return streamEvent;\r\n            }\r\n\r\n            const result: ExtendedStreamEvent = {\r\n                state: streamEvent.type,\r\n                windowName: window.API.name,\r\n                ...streamEvent\r\n            };\r\n\r\n            if (result.state === \"WindowFrameAdded\") {\r\n                result.state = \"TabAttached\";\r\n            }\r\n\r\n            if (result.state === \"StateChanged\") {\r\n                result.state = result.data.charAt(0).toUpperCase() + result.data.slice(1);\r\n            }\r\n\r\n            if (result.state === \"ButtonAdded\") {\r\n                result.state = \"FrameButtonAdded\";\r\n            }\r\n\r\n            if (result.state === \"ButtonRemoved\") {\r\n                result.state = \"FrameButtonRemoved\";\r\n            }\r\n\r\n            return result;\r\n        } catch (error) {\r\n            return streamEvent;\r\n        }\r\n    }\r\n}\r\n","import { Glue42Core } from \"@glue42/core\";\r\nimport { Environment } from \"./../types\";\r\nimport { default as GD } from \"./gd/gd\";\r\nimport { Glue42 } from \"../../../glue\";\r\n\r\nexport default (agm: Glue42Core.AGM.API, logger: Glue42Core.Logger.API, appManagerGetter: () => Glue42.AppManager.API, displayAPIGetter: () => Glue42.Displays.API, channelsAPIGetter: () => Glue42.Channels, gdMajorVersion: number): Promise<Environment> => {\r\n    const _logger = logger;\r\n    return new Promise((resolve, reject) => {\r\n        if (gdMajorVersion === 2) {\r\n            // We are running in HC\r\n            _logger.trace(\"running in HC\");\r\n            throw new Error(\"GD2 not supported\");\r\n        } else if (gdMajorVersion >= 3) {\r\n            // We are running in GD 3\r\n            // TODO expose instance in glu42gd\r\n            _logger.trace(\"running in GD 3\");\r\n            const gd = new GD(agm, _logger, appManagerGetter, displayAPIGetter, channelsAPIGetter, undefined, window.glue42gd.windowId);\r\n            gd.init()\r\n                .then(resolve)\r\n                .catch(reject);\r\n        } else {\r\n            // We are running in Browser or Node, we should check which stream is available\r\n            // But we need to pass the container as dependency\r\n            const gdPromise = new GD(agm, _logger, appManagerGetter, displayAPIGetter, channelsAPIGetter).init();\r\n            const wait = (ms: number) => new Promise((res, rej) => setTimeout(() => { rej(\"timeout waiting for streams\"); }, ms));\r\n            Promise.race([gdPromise, wait(10000)])\r\n                .then(resolve)\r\n                .catch(reject);\r\n        }\r\n    });\r\n};\r\n","import callbackRegistry, { CallbackRegistry } from \"callback-registry\";\r\nimport { Glue42 } from \"../../glue\";\r\nimport { default as windowStore } from \"./store\";\r\nimport { Executor, GroupInternal, GroupWrapper, WindowWrapper } from \"./types\";\r\nimport { isNullOrWhiteSpace, isUndefinedOrNull } from \"../activity/helpers/util\";\r\nimport utils from \"../utils\";\r\n\r\nexport default (id: string, executor: Executor): GroupWrapper => {\r\n\r\n    const _registry: CallbackRegistry = callbackRegistry();\r\n\r\n    const _windowsId: string[] = [];\r\n\r\n    //#region \"API functions\"\r\n\r\n    async function addWindow(winId: string): Promise<void> {\r\n        if (_windowsId.indexOf(winId) === -1) {\r\n            _windowsId.push(winId);\r\n            const win: WindowWrapper = windowStore.get(winId);\r\n            win.Events.handleGroupChanged(groupObject, undefined);\r\n            await executor.finished;\r\n            _registry.execute(\"window-added\", groupObject, win.API);\r\n        }\r\n    }\r\n\r\n    async function removeWindow(win: WindowWrapper): Promise<void> {\r\n        const index: number = _windowsId.indexOf(win.API.id);\r\n        if (index !== -1) {\r\n            _windowsId.splice(index, 1);\r\n            win.Events.handleGroupChanged(undefined, groupObject);\r\n            await executor.finished;\r\n            _registry.execute(\"window-removed\", groupObject, win.API);\r\n        }\r\n    }\r\n\r\n    function find(window: string | Glue42.Windows.GDWindow, success?: (window: Glue42.Windows.GDWindow) => void, error?: (error: string) => void): Glue42.Windows.GDWindow {\r\n        let winId: string;\r\n        if (typeof window === \"string\") {\r\n            winId = window;\r\n        } else if (!isUndefinedOrNull(window)) {\r\n            winId = window.id;\r\n        }\r\n\r\n        const win = _mapToWindowObject(winId);\r\n        if (win) {\r\n            if (typeof success === \"function\") {\r\n                success(win);\r\n            }\r\n            return win;\r\n        } else {\r\n            if (typeof error === \"function\") {\r\n                error(`No window with ID: ${winId}`);\r\n            }\r\n        }\r\n    }\r\n\r\n    function windows(success?: (windows: Glue42.Windows.GDWindow[]) => void): Glue42.Windows.GDWindow[] {\r\n        const mappedWindows: Glue42.Windows.GDWindow[] = _mapToWindowObjects();\r\n        if (typeof success === \"function\") {\r\n            success(mappedWindows);\r\n        }\r\n        return mappedWindows;\r\n    }\r\n\r\n    async function execute(command: string, options: any & { windowId: string }, ...keys: string[]): Promise<Glue42.Windows.Group> {\r\n        await executor.execute<Glue42.Windows.Group>(command, options, ...keys);\r\n        return groupObject;\r\n    }\r\n\r\n    //#endregion \"API functions\"\r\n\r\n    //#region \"Stream function\"\r\n\r\n    function handleGroupHeaderVisibilityChanged(windowInfo: any): void {\r\n        _registry.execute(\"header-visibility-changed\", groupObject);\r\n    }\r\n\r\n    //#endregion \"Stream function\"\r\n\r\n    //#region \"Internal function\"\r\n\r\n    function _mapToWindowObjects(): Glue42.Windows.GDWindow[] {\r\n        const winObjects: Glue42.Windows.GDWindow[] = [];\r\n\r\n        _windowsId.forEach((winId) => {\r\n            const windowObject = _mapToWindowObject(winId);\r\n            if (typeof windowObject !== \"undefined\") {\r\n                winObjects.push(windowObject);\r\n            }\r\n        });\r\n\r\n        return winObjects;\r\n    }\r\n\r\n    function _mapToWindowObject(windowId: string): Glue42.Windows.GDWindow {\r\n        return windowStore.get(windowId) ? windowStore.get(windowId).API : undefined;\r\n    }\r\n\r\n    function _getGroupHeaderVisibility(): boolean {\r\n        // if one of the windows has a flag hideGroupHeader the group header should be off.\r\n        const windowWithHiddenHeader = _mapToWindowObjects().find((w) => !w.isGroupHeaderVisible);\r\n        const _isGroupHeaderVisible = windowWithHiddenHeader === undefined;\r\n\r\n        return _isGroupHeaderVisible;\r\n    }\r\n\r\n    //#endregion \"Internal function\"\r\n\r\n    //#region \"Events\"\r\n\r\n    function onHeaderVisibilityChanged(callback?: (group: Glue42.Windows.Group) => void): () => void {\r\n        return _registry.add(\"header-visibility-changed\", callback);\r\n    }\r\n\r\n    function onWindowAdded(callback?: (group: Glue42.Windows.Group, window: Glue42.Windows.GDWindow) => void): () => void {\r\n        return _registry.add(\"window-added\", callback);\r\n    }\r\n\r\n    function onWindowRemoved(callback?: (group: Glue42.Windows.Group, window: Glue42.Windows.GDWindow) => void): () => void {\r\n        return _registry.add(\"window-removed\", callback);\r\n    }\r\n\r\n    //#endregion \"Events\"\r\n\r\n    //#region \"API\"\r\n\r\n    const groupObject: Glue42.Windows.Group = {\r\n        id,\r\n        get windows() {\r\n            return windows();\r\n        },\r\n        find,\r\n        get isHeaderVisible() {\r\n            return _getGroupHeaderVisibility();\r\n        },\r\n        showHeader: (success, error) => {\r\n            return utils.callbackifyPromise(() => {\r\n                return execute(\"setGroupHeaderVisibility\", { windowId: _windowsId[0], options: { toShow: true } }, ..._windowsId.map((w) => `GroupHeaderVisibilityChanged-${w}`));\r\n            }, success, error);\r\n        },\r\n        hideHeader: (success, error) => {\r\n            return utils.callbackifyPromise(() => {\r\n                return execute(\"setGroupHeaderVisibility\", { windowId: _windowsId[0], options: { toShow: false } }, ..._windowsId.map((w) => `GroupHeaderVisibilityChanged-${w}`));\r\n            }, success, error);\r\n        },\r\n        getTitle: async () => {\r\n            const r = await executor.execute<{ title: string }>(\"getGroupTitle\", { windowId: _windowsId[0] });\r\n            return r.title;\r\n        },\r\n        setTitle: async (title: string) => {\r\n            if (isNullOrWhiteSpace(title)) {\r\n                throw new Error(\"`title` must not be null or undefined.\");\r\n            }\r\n            return execute(\"setGroupTitle\", { windowId: _windowsId[0], options: { title } });\r\n        },\r\n        capture: (captureOptions: Glue42.Windows.CaptureOptions) => {\r\n            return executor.captureGroup(_windowsId, captureOptions);\r\n        },\r\n        maximize: (success, error) => {\r\n            return utils.callbackifyPromise(() => {\r\n                return execute(\"maximizeGroup\", { windowId: _windowsId[0] }, ..._windowsId.map((w) => `StateChanged-${w}`));\r\n            }, success, error);\r\n        },\r\n        restore: (success, error) => {\r\n            return utils.callbackifyPromise(() => {\r\n                return execute(\"restoreGroup\", { windowId: _windowsId[0] }, ..._windowsId.map((w) => `StateChanged-${w}`));\r\n            }, success, error);\r\n        },\r\n        onHeaderVisibilityChanged,\r\n        onWindowAdded,\r\n        onWindowRemoved,\r\n    };\r\n\r\n    const internal: GroupInternal = {\r\n        get windows() {\r\n            return _windowsId;\r\n        },\r\n        addWindow,\r\n        removeWindow,\r\n        handleGroupHeaderVisibilityChanged,\r\n    };\r\n\r\n    return {\r\n        groupAPI: groupObject,\r\n        groupInternal: internal,\r\n    };\r\n\r\n    //#endregion \"API\"\r\n};\r\n","import { Glue42Core } from \"@glue42/core\";\r\nimport callbackRegistry, { CallbackRegistry, UnsubscribeFunction } from \"callback-registry\";\r\nimport { Glue42 } from \"../../glue\";\r\nimport { isNullOrWhiteSpace, isUndefinedOrNull } from \"../activity/helpers/util\";\r\nimport { CompositionChangedData } from \"./environment/gd/types\";\r\nimport groupFactory from \"./group\";\r\nimport { default as windowStore } from \"./store\";\r\nimport {\r\n    Environment,\r\n    GroupsInternal,\r\n    GroupsWrapper,\r\n    GroupWrapper,\r\n    WindowWrapper\r\n} from \"./types\";\r\n\r\nexport default (environment: Environment, logger: Glue42Core.Logger.API): GroupsWrapper => {\r\n    const _registry: CallbackRegistry = callbackRegistry();\r\n    const _groups: { [key: string]: GroupWrapper } = {};\r\n    let heardForWindowsCounter: number = -1;\r\n\r\n    // Getting already existing windows and create Group API for each window\r\n    const windows = windowStore.list;\r\n    Object.keys(windows).forEach((k) => {\r\n        const win = windows[k];\r\n        const groupId = win.API.groupId;\r\n        const winId = win.API.id;\r\n        // hidden windows doesn't have groupId\r\n        if (!isNullOrWhiteSpace(groupId)) {\r\n            addWindow(groupId, winId);\r\n        }\r\n    });\r\n\r\n    windowStore.onRemoved((w) => {\r\n        const group = findGroupWrapperByWindow(w.API);\r\n        removeWindow(group, w);\r\n    });\r\n\r\n    environment.onCompositionChanged((windowInfo: CompositionChangedData) => {\r\n        handleCompositionChanged(windowInfo);\r\n    });\r\n\r\n    environment.onGroupHeaderVisibilityChanged((windowInfo) => {\r\n        const windowId = windowInfo.windowId;\r\n        const group: Glue42.Windows.Group = findGroupByWindow(windowId);\r\n        if (typeof group !== \"undefined\") {\r\n            const groupEvents: GroupWrapper = _groups[group.id];\r\n\r\n            if (heardForWindowsCounter === -1) {\r\n                heardForWindowsCounter = group.windows.length;\r\n            }\r\n\r\n            heardForWindowsCounter--;\r\n            if (heardForWindowsCounter === 0) {\r\n                heardForWindowsCounter = -1;\r\n                groupEvents.groupInternal.handleGroupHeaderVisibilityChanged(windowInfo);\r\n            }\r\n        }\r\n    });\r\n\r\n    // Methods\r\n\r\n    function my(): Glue42.Windows.Group {\r\n        return findGroupByWindow(environment.my());\r\n    }\r\n\r\n    function list(success?: (groups: Glue42.Windows.Group[]) => void): Glue42.Windows.Group[] {\r\n        const result: Glue42.Windows.Group[] = Object.keys(_groups).map((groupId) => {\r\n            if (_groups[groupId]) {\r\n                return _groups[groupId].groupAPI;\r\n            }\r\n\r\n        });\r\n\r\n        if (typeof success === \"function\") {\r\n            success(result);\r\n        }\r\n        return result;\r\n    }\r\n\r\n    function findGroupByWindow(winId: string | Glue42.Windows.GDWindow, success?: (group: Glue42.Windows.Group) => void, error?: (error: string) => void): Glue42.Windows.Group {\r\n        let windowId: string;\r\n        if (typeof winId === \"string\") {\r\n            windowId = winId;\r\n        } else if (!isUndefinedOrNull(winId)) {\r\n            windowId = winId.id;\r\n        }\r\n        const result = Object.values(_groups).find((groupObj) => {\r\n            const group: Glue42.Windows.Group = groupObj.groupAPI;\r\n            const wins = group.windows.filter((w) => w.id === windowId);\r\n            return wins.length;\r\n        });\r\n        if (result) {\r\n            if (typeof success === \"function\") {\r\n                success(result.groupAPI);\r\n            }\r\n            return result.groupAPI;\r\n        } else {\r\n            if (typeof error === \"function\") {\r\n                error(`Cannot find the group of the window.`);\r\n            }\r\n        }\r\n    }\r\n\r\n    // Events\r\n    function onWindowMoved(callback?: (windowId: string, oldTabGroupId: string, newGroupId: string) => void): UnsubscribeFunction {\r\n        return _registry.add(\"window-moved\", callback);\r\n    }\r\n\r\n    // Private\r\n\r\n    function createOrGet(groupId: string): GroupWrapper {\r\n        if (!_groups.hasOwnProperty(groupId)) {\r\n            const createdGroup: GroupWrapper = groupFactory(groupId, environment.executor);\r\n            _groups[groupId] = createdGroup;\r\n            return createdGroup;\r\n        } else {\r\n            return _groups[groupId];\r\n        }\r\n    }\r\n\r\n    function deleteIfEmpty(group: GroupWrapper): void {\r\n        if (group.groupAPI.windows.length === 0) {\r\n            delete _groups[group.groupAPI.id];\r\n        }\r\n    }\r\n\r\n    // hidden window doesn't have a groupId\r\n    function addWindow(groupId: string, winId: string) {\r\n        const group = createOrGet(groupId);\r\n        group.groupInternal.addWindow(winId);\r\n        return group;\r\n    }\r\n\r\n    function removeWindow(group: GroupWrapper, win: WindowWrapper) {\r\n        if (!group) {\r\n            return;\r\n        }\r\n        group.groupInternal.removeWindow(win);\r\n        deleteIfEmpty(group);\r\n    }\r\n\r\n    function handleCompositionChanged(state: CompositionChangedData): void {\r\n        const groupId = state.groupId;\r\n        const windowId = state.windowId;\r\n        const win = windowStore.get(windowId);\r\n        if (!win) {\r\n            return;\r\n        }\r\n        const currentGroup = findGroupWrapperByWindow(win.API);\r\n        // if the window's visibility is changed to hidden, remove from the group\r\n        // or the window is closed.\r\n        if (isUndefinedOrNull(groupId)) {\r\n            removeWindow(currentGroup, win);\r\n            return;\r\n        }\r\n        // if the window's visibility is changed to visible, addOrCreate the group\r\n        if (isUndefinedOrNull(currentGroup) && !isUndefinedOrNull(groupId)) {\r\n            addWindow(groupId, win.API.id);\r\n            return;\r\n        }\r\n\r\n        if (currentGroup.groupAPI.id !== groupId) {\r\n            moveWindow(win, currentGroup.groupAPI.id, groupId);\r\n        }\r\n    }\r\n\r\n    function moveWindow(win: WindowWrapper, from: string, to: string) {\r\n        const winId = win.API.id;\r\n        const fromGroup = _groups[from];\r\n        removeWindow(fromGroup, win);\r\n        const toGroup = addWindow(to, winId);\r\n        win.Events.handleGroupChanged(toGroup.groupAPI, fromGroup.groupAPI);\r\n        _registry.execute(\"window-moved\", winId, from, to);\r\n    }\r\n\r\n    function findGroupWrapperByWindow(winId: string | Glue42.Windows.GDWindow): GroupWrapper {\r\n        let windowId: string;\r\n        if (typeof winId === \"string\") {\r\n            windowId = winId;\r\n        } else if (!isUndefinedOrNull(winId)) {\r\n            windowId = winId.id;\r\n        }\r\n        return Object.values(_groups).find((groupObj) => {\r\n            const groupInternal = groupObj.groupInternal;\r\n            const wins = groupInternal.windows.filter((id) => id === windowId);\r\n            return wins.length;\r\n        });\r\n    }\r\n\r\n    //#region \"API\"\r\n\r\n    const groups = {\r\n        get my() {\r\n            return my();\r\n        },\r\n        list,\r\n        findGroupByWindow,\r\n    };\r\n\r\n    //#endregion \"API\r\n\r\n    const events: GroupsInternal = { onWindowMoved };\r\n\r\n    return {\r\n        groupsAPI: groups,\r\n        groupsEvents: events,\r\n    };\r\n};\r\n","import { Glue42Core } from \"@glue42/core\";\r\nimport { CallbackRegistry, UnsubscribeFunction, default as CallbackFactory } from \"callback-registry\";\r\nimport { Glue42 } from \"../../glue\";\r\nimport { Environment, GroupsWrapper, WindowWrapper } from \"./types\";\r\nimport jumpListManager from \"./jumpList/manager\";\r\n\r\nimport { default as envDetector } from \"./environment/detector\";\r\nimport groupsFactory from \"./groups\";\r\nimport { default as windowStore } from \"./store\";\r\nimport executor from \"./environment/gd/executor\";\r\nimport * as util from \"../activity/helpers/util\";\r\nimport utils from \"../utils\";\r\n\r\nexport default (agm: Glue42Core.AGM.API, logger: Glue42Core.Logger.API, appManagerGetter: () => Glue42.AppManager.API, displayAPIGetter: () => Glue42.Displays.API, channelsGetter: () => Glue42.Channels, gdMajorVersion: number): Glue42.Windows.API => {\r\n    const _registry: CallbackRegistry = CallbackFactory();\r\n    const _logger = logger;\r\n    let groups: GroupsWrapper;\r\n    let environment: Environment;\r\n\r\n    windowStore.init(_logger);\r\n\r\n    const isReady = new Promise<void>((resolve, reject) => {\r\n        envDetector(agm, _logger, appManagerGetter, displayAPIGetter, channelsGetter, gdMajorVersion)\r\n            .then((env) => {\r\n                environment = env;\r\n                groups = groupsFactory(env, _logger);\r\n                jumpListManager.init(env.executor, agm, _logger);\r\n                resolve();\r\n            })\r\n            .catch((e) => {\r\n                const err = `Environment detector fails with: ${e}`;\r\n                _logger.error(err);\r\n                reject(err);\r\n            });\r\n    });\r\n\r\n    function ready() {\r\n        return isReady;\r\n    }\r\n\r\n    function my(): Glue42.Windows.GDWindow {\r\n        const myWindow = windowStore.getIfReady(environment.my());\r\n        return myWindow ? myWindow.API : undefined;\r\n    }\r\n\r\n    function open(name: string, url: string, options?: Glue42.Windows.WindowSettings, success?: (window: Glue42.Windows.GDWindow) => void, error?: (error: string) => void): Promise<Glue42.Windows.GDWindow> {\r\n        return utils.callbackifyPromise(() => {\r\n            if (util.isNullOrWhiteSpace(name)) {\r\n                throw new Error(\"The window name is missing.\");\r\n            }\r\n            if (util.isNullOrWhiteSpace(url)) {\r\n                throw new Error(\"The window URL is missing.\");\r\n            }\r\n\r\n            if (!util.isUndefinedOrNull(options)) {\r\n                const optionsAsAny = options as any;\r\n                for (const prop of [\"minHeight\", \"maxHeight\", \"minWidth\", \"maxWidth\", \"width\", \"height\", \"top\", \"left\"]) {\r\n                    if (prop in optionsAsAny) {\r\n                        const value = optionsAsAny[prop];\r\n                        if (util.isUndefinedOrNull(value)) {\r\n                            delete optionsAsAny[prop];\r\n                            continue;\r\n                        }\r\n                        if (!util.isNumber(value)) {\r\n                            const errMessage = `${prop} must be a number`;\r\n                            throw new Error(errMessage);\r\n                        }\r\n                        if (optionsAsAny[prop] === \"width\" || optionsAsAny[prop] === \"height\") {\r\n                            if (value <= 0) {\r\n                                const errMessage = `${prop} must be a positive number`;\r\n                                throw new Error(errMessage);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return environment.open(name, url, options);\r\n        }, success, error);\r\n    }\r\n\r\n    function find(name: string, success?: (window: Glue42.Windows.GDWindow) => void, error?: (error: string) => void): Glue42.Windows.GDWindow {\r\n        const windows: { [key: string]: WindowWrapper } = windowStore.list;\r\n\r\n        const windowsForListing: Glue42.Windows.GDWindow[] = Object.keys(windows).reduce((memo, winId) => {\r\n            const window: WindowWrapper = windows[winId];\r\n            if (window?.API?.name === name) {\r\n                memo.push(window.API);\r\n            }\r\n            return memo;\r\n        }, []);\r\n\r\n        const win = windowsForListing[0];\r\n        if (win) {\r\n            if (typeof success === \"function\") {\r\n                success(windowsForListing[0]);\r\n            }\r\n            return windowsForListing[0];\r\n        } else {\r\n            if (typeof error === \"function\") {\r\n                error(\"There is no window with name:\" + name);\r\n            }\r\n        }\r\n    }\r\n\r\n    function findById(id: string, success?: (window: Glue42.Windows.GDWindow) => void, error?: (error: string) => void): Glue42.Windows.GDWindow {\r\n        const windows: { [key: string]: WindowWrapper } = windowStore.list;\r\n        const windowsForListing: Glue42.Windows.GDWindow[] = Object.keys(windows).reduce((memo, winId) => {\r\n            const window: WindowWrapper = windows[winId];\r\n            if (typeof window !== \"undefined\" && window.API.id === id) {\r\n                memo.push(window.API);\r\n            }\r\n            return memo;\r\n        }, []);\r\n        const win = windowsForListing[0];\r\n        if (win) {\r\n            if (typeof success === \"function\") {\r\n                success(windowsForListing[0]);\r\n            }\r\n            return windowsForListing[0];\r\n        } else {\r\n            if (typeof error === \"function\") {\r\n                error(\"There is no window with such id:\" + id);\r\n            }\r\n        }\r\n    }\r\n\r\n    function list(success?: (window: Glue42.Windows.GDWindow[]) => void): Glue42.Windows.GDWindow[] {\r\n        const windows: { [key: string]: WindowWrapper } = windowStore.list;\r\n\r\n        const windowsForListing: Glue42.Windows.GDWindow[] = Object.keys(windows)\r\n            .map((k) => {\r\n                return windows[k].API;\r\n            });\r\n\r\n        if (typeof success !== \"function\") {\r\n            return windowsForListing;\r\n        }\r\n\r\n        success(windowsForListing);\r\n    }\r\n\r\n    function configure(options: Glue42.Windows.WindowsConfiguration): Promise<void> {\r\n        const win = my();\r\n        const winId = win ? win.id : \"\";\r\n        return executor.configure(winId, options);\r\n    }\r\n\r\n    function windowAdded(callback: (window: Glue42.Windows.GDWindow) => void): UnsubscribeFunction {\r\n        return _registry.add(\"window-added\", callback);\r\n    }\r\n\r\n    function windowRemoved(callback: (window: Glue42.Windows.GDWindow) => void): UnsubscribeFunction {\r\n        return _registry.add(\"window-removed\", callback);\r\n    }\r\n\r\n    function tabAttached(callback: (tabWindow: Glue42.Windows.GDWindow, newTabGroupId: string, tabHeaderVisible: boolean) => void): UnsubscribeFunction {\r\n        let unsubFunc: UnsubscribeFunction;\r\n        let unsubscribed = false;\r\n        isReady.then(() => {\r\n            if (unsubscribed) {\r\n                return;\r\n            }\r\n            unsubFunc = environment.tabAttached(callback);\r\n        });\r\n\r\n        return () => {\r\n            unsubscribed = true;\r\n            if (unsubFunc) {\r\n                unsubFunc();\r\n            }\r\n        };\r\n    }\r\n\r\n    function tabDetached(callback: (window: Glue42.Windows.GDWindow, tabGroupId: string, oldTabGroupId: string) => void): UnsubscribeFunction {\r\n        let unsubFunc: UnsubscribeFunction;\r\n        let unsubscribed = false;\r\n        isReady.then(() => {\r\n            if (unsubscribed) {\r\n                return;\r\n            }\r\n            unsubFunc = environment.tabDetached(callback);\r\n        });\r\n\r\n        return () => {\r\n            unsubscribed = true;\r\n            if (unsubFunc) {\r\n                unsubFunc();\r\n            }\r\n        };\r\n    }\r\n\r\n    function onWindowFrameColorChanged(callback: (window: Glue42.Windows.GDWindow) => void): UnsubscribeFunction {\r\n        let unsubFunc: UnsubscribeFunction;\r\n        let unsubscribed = false;\r\n        isReady.then(() => {\r\n            if (unsubscribed) {\r\n                return;\r\n            }\r\n            unsubFunc = environment.onWindowFrameColorChanged(callback);\r\n        });\r\n\r\n        return () => {\r\n            unsubscribed = true;\r\n            if (unsubFunc) {\r\n                unsubFunc();\r\n            }\r\n        };\r\n    }\r\n\r\n    function onWindowGotFocus(callback: (window: Glue42.Windows.GDWindow) => void) {\r\n        let unsubFunc: UnsubscribeFunction;\r\n        let unsubscribed = false;\r\n        isReady.then(() => {\r\n            if (unsubscribed) {\r\n                return;\r\n            }\r\n            unsubFunc = environment.onWindowGotFocus(callback);\r\n        });\r\n\r\n        return () => {\r\n            unsubscribed = true;\r\n            if (unsubFunc) {\r\n                unsubFunc();\r\n            }\r\n        };\r\n    }\r\n\r\n    function onWindowLostFocus(callback: (window: Glue42.Windows.GDWindow) => void) {\r\n        let unsubFunc: UnsubscribeFunction;\r\n        let unsubscribed = false;\r\n        isReady.then(() => {\r\n            if (unsubscribed) {\r\n                return;\r\n            }\r\n            unsubFunc = environment.onWindowLostFocus(callback);\r\n        });\r\n\r\n        return () => {\r\n            unsubscribed = true;\r\n            if (unsubFunc) {\r\n                unsubFunc();\r\n            }\r\n        };\r\n    }\r\n\r\n    function onEvent(callback: (stream: any) => void): UnsubscribeFunction {\r\n        let unsubFunc: UnsubscribeFunction;\r\n        let unsubscribed = false;\r\n        isReady.then(() => {\r\n            if (unsubscribed) {\r\n                return;\r\n            }\r\n            unsubFunc = environment.onEvent(callback);\r\n        });\r\n\r\n        return () => {\r\n            unsubscribed = true;\r\n            if (unsubFunc) {\r\n                unsubFunc();\r\n            }\r\n        };\r\n    }\r\n\r\n    function createFlydown(targetId: string, config: Glue42.Windows.FlydownOptions): Promise<Glue42.Windows.Flydown> {\r\n        return environment.createFlydown(targetId, config);\r\n    }\r\n\r\n    function showPopup(targetId: string, config: Glue42.Windows.PopupOptions): Promise<void> {\r\n        return environment.showPopup(targetId, config);\r\n    }\r\n\r\n    function handleWindowAdded(w: WindowWrapper) {\r\n        _registry.execute(\"window-added\", w.API);\r\n    }\r\n\r\n    function handleWindowRemoved(w: WindowWrapper) {\r\n        _registry.execute(\"window-removed\", w.API);\r\n    }\r\n\r\n    windowStore.onReadyWindow(handleWindowAdded);\r\n    windowStore.onRemoved(handleWindowRemoved);\r\n\r\n    // The API itself\r\n    return {\r\n        my,\r\n        open,\r\n        find,\r\n        findById,\r\n        list,\r\n        ready,\r\n        onWindowAdded: windowAdded,\r\n        windowAdded,\r\n        onWindowRemoved: windowRemoved,\r\n        windowRemoved,\r\n        onTabAttached: tabAttached,\r\n        onTabDetached: tabDetached,\r\n        onWindowFrameColorChanged,\r\n\r\n        get groups() {\r\n            return groups.groupsAPI;\r\n        },\r\n        onWindowGotFocus,\r\n        onWindowLostFocus,\r\n        onEvent,\r\n        createFlydown,\r\n        showPopup,\r\n        configure\r\n    };\r\n};\r\n","import { Glue42 } from \"../../glue\";\r\n\r\n// provides a unified way to access layouts array\r\nexport class LayoutStore {\r\n    private layouts: Glue42.Layouts.Layout[] = [];\r\n\r\n    public removeWhere(condition: (l: Glue42.Layouts.Layout) => boolean) {\r\n        this.layouts = this.layouts.filter(condition);\r\n    }\r\n\r\n    public add(item: Glue42.Layouts.Layout) {\r\n        this.layouts.push(item);\r\n    }\r\n\r\n    public get all(): Glue42.Layouts.Layout[] {\r\n        return this.layouts;\r\n    }\r\n\r\n    public where(condition: (l: Glue42.Layouts.Layout) => boolean): Glue42.Layouts.Layout[] {\r\n        return this.layouts.filter(condition);\r\n    }\r\n\r\n    public first(condition: (l: Glue42.Layouts.Layout) => boolean): Glue42.Layouts.Layout {\r\n        return this.where(condition)[0];\r\n    }\r\n}\r\n\r\nexport default new LayoutStore();\r\n","import { Glue42 } from \"../../glue\";\r\nimport { CallbackRegistry } from \"callback-registry\";\r\nimport { LayoutsLibConfiguration } from \"./types\";\r\n\r\nconst SaveContextMethodName = \"T42.HC.GetSaveContext\";\r\ndeclare var htmlContainer: any;\r\n\r\n/**\r\n * Logic for apps that want to provide custom context on save\r\n */\r\nexport default class ContextProvider {\r\n\r\n    private interop: Glue42.Interop.API;\r\n\r\n    constructor(private config: LayoutsLibConfiguration, private activitiesGetter: () => Glue42.Activities.API, private callbacks: CallbackRegistry, private logger: Glue42.Logger.API) {\r\n        this.interop = config.agm;\r\n        this.registerRequestMethods();\r\n    }\r\n\r\n    public onSaveRequested(callback: (info?: Glue42.Layouts.SaveRequestContext) => Glue42.Layouts.SaveRequestResponse) {\r\n        return this.callbacks.add(\"saveRequested\", callback);\r\n    }\r\n\r\n    private isActivityOwner() {\r\n        // fallback for GD2 - remove once the bellow code is tested\r\n        if (typeof htmlContainer !== \"undefined\") {\r\n            const context = htmlContainer.getContext();\r\n            return context && context._t42 && context._t42.activityIsOwner;\r\n        }\r\n\r\n        // check if we're the activity owners\r\n        const activities = this.activitiesGetter();\r\n        if (!activities) {\r\n            return false;\r\n        }\r\n\r\n        if (!activities.inActivity) {\r\n            return false;\r\n        }\r\n\r\n        const myWindow = activities.my.window;\r\n        const myActivity = activities.my.activity;\r\n\r\n        if (!myActivity && !myWindow) {\r\n            return false;\r\n        }\r\n\r\n        return myActivity.owner.id === myWindow.id;\r\n    }\r\n\r\n    private registerRequestMethods() {\r\n        this.interop.register<Glue42.Layouts.SaveRequestContext>(SaveContextMethodName, (args) => {\r\n            const usersCbs = this.callbacks.execute(\"saveRequested\", args);\r\n            if (usersCbs?.length > 1) {\r\n                this.logger.warn(`Multiple subscriptions for \"glue.layouts.onSaveRequested\" - only the first one will be used`);\r\n            }\r\n            const requestResult = usersCbs[0] as Glue42.Layouts.SaveRequestResponse;\r\n            const autoSaveWindowContext = this.config.autoSaveWindowContext;\r\n\r\n            if (typeof autoSaveWindowContext === \"boolean\" && autoSaveWindowContext) {\r\n                return { autoSaveWindowContext };\r\n            } else if (Array.isArray(autoSaveWindowContext) && autoSaveWindowContext.length > 0) {\r\n                return { autoSaveWindowContext };\r\n            }\r\n            // always include the window context\r\n            const result: Glue42.Layouts.SaveRequestResponse = { windowContext: requestResult?.windowContext, activityContext: undefined };\r\n\r\n            // if we're the activity owner put the context too\r\n            if (this.isActivityOwner()) {\r\n                result.activityContext = requestResult?.activityContext;\r\n            }\r\n\r\n            return result;\r\n        });\r\n    }\r\n}\r\n","// A simple transformation that makes object to start with lowercase\r\n// Note that this is not full implementation as it supports only:\r\n// undefined, null, arrays, number, string, bool. Anything out of this\r\n// list is considered Object\r\nexport default function transformACSLayout(something: { [key: string]: any }): { [key: string]: any } {\r\n    if (!something) {\r\n        return something;\r\n    }\r\n\r\n    if (Array.isArray(something)) {\r\n        return something.map((item) => {\r\n            return transformACSLayout(item);\r\n        });\r\n    }\r\n\r\n    if (typeof something === \"string\" || typeof something === \"number\" || typeof something === \"boolean\") {\r\n        return something;\r\n    }\r\n\r\n    const initial: { [key: string]: any } = {};\r\n    return Object.keys(something).reduce((accumulator, current) => {\r\n        const value = something[current];\r\n        const convertedValue = transformACSLayout(value);\r\n\r\n        let key = current;\r\n        if (current[0].toLowerCase() !== current[0]) {\r\n            key = current[0].toLowerCase() + current.substr(1);\r\n        }\r\n\r\n        accumulator[key] = convertedValue;\r\n        return accumulator;\r\n    }, initial);\r\n}\r\n","import { Glue42 } from \"../../glue\";\r\n\r\nexport default class LayoutImpl implements Glue42.Layouts.Layout {\r\n    /** Name of the layout */\r\n    public name: string;\r\n\r\n    /** Type of the layout */\r\n    public type: Glue42.Layouts.LayoutType;\r\n\r\n    /** Array of components describing the applications that are saved in the layout */\r\n    public components: Glue42.Layouts.LayoutComponent[];\r\n\r\n    /** Context passed when the layout was saved */\r\n    public context: any;\r\n\r\n    /** Metadata passed when the layout was saved */\r\n    public metadata: any;\r\n\r\n    /** Version of the layout */\r\n    public version: number;\r\n\r\n    /** Displays of the layout */\r\n    public displays: any;\r\n\r\n    constructor(data: any) {\r\n        this.name = data.name;\r\n        this.type = data.type;\r\n        this.components = data.components;\r\n        this.context = data.context;\r\n        this.metadata = data.metadata;\r\n        this.version = data.version;\r\n        this.displays = data.displays;\r\n    }\r\n}\r\n","import { Glue42 } from \"../../glue\";\r\nimport { CallbackRegistry, UnsubscribeFunction } from \"callback-registry\";\r\nimport { LayoutsStream, HibernationResumeMessage, UpdateLayoutComponentContextMessage, LayoutsLibConfiguration } from \"./types\";\r\nimport store from \"./store\";\r\nimport generate from \"shortid\";\r\nimport { ACSSaveLayoutMessage, ACSRestoreMessage, ACSRestoreOptionsMessage, ACSMessage, ACSRenameMessage, ACSRemoveLayoutMessage, ACSImportMessage, ExportResultMessage } from \"./types\";\r\nimport { Glue42Core } from \"@glue42/core\";\r\nimport ContextProvider from \"./contextProvider\";\r\nimport transformACSLayout from \"./transform\";\r\nimport LayoutImpl from \"./layout\";\r\nimport { isBoolean, isNullOrWhiteSpace, isNumber, isObject, isString, isUndefinedOrNull } from \"../activity/helpers/util\";\r\n\r\nexport default class LayoutsAPIImpl implements Glue42.Layouts.API {\r\n    private appManager: Glue42.AppManager.API;\r\n    private provider: ContextProvider;\r\n\r\n    constructor(private config: LayoutsLibConfiguration, private stream: LayoutsStream, private callbacks: CallbackRegistry, logger: Glue42.Logger.API) {\r\n        this.appManager = config.appManager;\r\n        this.onEvent = stream.onEvent;\r\n        this.provider = new ContextProvider(config, config.activityGetter, callbacks, logger);\r\n        stream.subscribe();\r\n    }\r\n\r\n    public async setDefaultGlobal(name: string): Promise<void> {\r\n        await this.config.agm.invoke(\"T42.ACS.SelectDefaultLayout\", { name });\r\n        return;\r\n    }\r\n\r\n    public async clearDefaultGlobal(): Promise<void> {\r\n        await this.config.agm.invoke(\"T42.ACS.DeselectDefaultLayout\");\r\n        return;\r\n    }\r\n\r\n    public async getDefaultGlobal(): Promise<Glue42.Layouts.Layout | undefined> {\r\n        const result = await this.config.agm.invoke(\"T42.ACS.GetDefaultLayout\");\r\n        const layout = result.returned;\r\n        if (!layout) {\r\n            return undefined;\r\n        }\r\n        if (this.isSlimMode()) {\r\n            return layout;\r\n        }\r\n        return this.list().find((l) => l.name === layout.name && l.type === \"Global\");\r\n    }\r\n\r\n    public ready(): Promise<void> {\r\n        if (this.config.mode === \"fullWaitSnapshot\") {\r\n            return this.stream.gotSnapshot;\r\n        }\r\n        return this.stream.ready;\r\n    }\r\n\r\n    public save(layout: Glue42.Layouts.NewLayoutOptions): Promise<Glue42.Layouts.Layout> {\r\n        return new Promise<Glue42.Layouts.Layout>((resolve, reject) => {\r\n\r\n            this.verifyNotSlimMode();\r\n\r\n            if (isUndefinedOrNull(layout)) {\r\n                return reject(new Error(\"layout is required\"));\r\n            }\r\n\r\n            if (isNullOrWhiteSpace(layout.name)) {\r\n                return reject(new Error(\"layout.name argument is required\"));\r\n            }\r\n\r\n            if (isNullOrWhiteSpace(layout.type)) {\r\n                layout.type = \"Global\";\r\n            }\r\n\r\n            if (!isNullOrWhiteSpace(layout.activityId)) {\r\n                layout.type = \"Activity\";\r\n            }\r\n\r\n            const layoutObject: ACSSaveLayoutMessage = {\r\n                name: layout.name,\r\n                type: layout.type,\r\n                context: layout.context ?? {},\r\n                metadata: layout.metadata ?? {},\r\n                options: {},\r\n            };\r\n\r\n            if (layout.type === \"Activity\") {\r\n                let actId = layout.activityId;\r\n                if (!actId) {\r\n                    if (!this.appManager.myInstance.inActivity) {\r\n                        return reject(new Error(\"Current application is not in activity. Cannot save activity layout for it.\"));\r\n                    }\r\n                    actId = this.appManager.myInstance.activityId;\r\n                }\r\n                layoutObject.activityId = actId;\r\n            } else if (layout.type === \"Global\") {\r\n                if (Array.isArray(layout.ignoreInstances)) {\r\n                    layoutObject.options.ignoreInstances = layout.ignoreInstances;\r\n                }\r\n                if (Array.isArray(layout.instances)) {\r\n                    layoutObject.options.instances = layout.instances;\r\n                }\r\n            } else {\r\n                return reject(new Error(`layout type ${layout.type} is not supported`));\r\n            }\r\n\r\n            this.invokeMethodAndTrack(\"T42.ACS.SaveLayout\", layoutObject, resolve, reject);\r\n        });\r\n    }\r\n\r\n    public restore(options: Glue42.Layouts.RestoreOptions): Promise<void> {\r\n        return new Promise<void>((resolve, reject) => {\r\n            this.verifyNotSlimMode();\r\n            // TODO add validations...\r\n            if (isUndefinedOrNull(options)) {\r\n                return reject(new Error(\"options argument is required\"));\r\n            }\r\n\r\n            if (isNullOrWhiteSpace(options.name)) {\r\n                return reject(new Error(\"options.name argument is required\"));\r\n            }\r\n\r\n            if (isNullOrWhiteSpace(options.type)) {\r\n                options.type = \"Global\";\r\n            }\r\n\r\n            if (!isNullOrWhiteSpace(options.activityIdToJoin)) {\r\n                options.type = \"Activity\";\r\n            }\r\n\r\n            if (options.type === \"Activity\") {\r\n                if (isUndefinedOrNull(options.setActivityContext)) {\r\n                    options.setActivityContext = true;\r\n                }\r\n                if (typeof options.setActivityContext !== \"boolean\") {\r\n                    return reject(new Error(\"`setActivityContext` must hold a boolean value.\"));\r\n                }\r\n                options.activityIdToJoin = options.activityIdToJoin ?? this.appManager.myInstance.activityId;\r\n            }\r\n\r\n            // backwards compatibility\r\n            if (!isUndefinedOrNull(options.closeRunningInstance)) {\r\n                options.closeRunningInstances = options.closeRunningInstance;\r\n            }\r\n\r\n            if (isUndefinedOrNull(options.closeRunningInstances)) {\r\n                options.closeRunningInstances = true;\r\n            }\r\n\r\n            if (!isBoolean(options.closeRunningInstances)) {\r\n                return reject(new Error(\"`closeRunningInstances` must hold a boolean value.\"));\r\n            }\r\n\r\n            if (isUndefinedOrNull(options.closeMe)) {\r\n                options.closeMe = options.closeRunningInstances;\r\n            }\r\n\r\n            if (!isBoolean(options.closeMe)) {\r\n                return reject(new Error(\"`closeMe` must hold a boolean value.\"));\r\n            }\r\n\r\n            if (!isUndefinedOrNull(options.context) && !isObject(options.context)) {\r\n                return reject(new Error(\"`context` must hold an object value.\"));\r\n            }\r\n\r\n            if (!isUndefinedOrNull(options.timeout) && typeof options.timeout !== \"number\") {\r\n                return reject(new Error(\"`timeout` must hold an number value.\"));\r\n            }\r\n\r\n            options.context = options.context ?? {};\r\n\r\n            const restoreOptions: ACSRestoreOptionsMessage = {\r\n                activityToJoin: options.activityIdToJoin,\r\n                setActivityContext: options.setActivityContext,\r\n                ignoreActivityWindowTypes: options.ignoreActivityWindowTypes,\r\n                // not used in GD3\r\n                // restoreActivityOwner: options.restoreActivityOwner,\r\n                // closeOldWindows: options.closeRunningInstance,\r\n                reuseExistingWindows: options.reuseWindows,\r\n\r\n                closeRunningInstances: options.closeRunningInstances, // new\r\n                excludeFromClosing: options.closeMe ? [] : [this.appManager.myInstance?.id]\r\n            };\r\n\r\n            const arg: ACSRestoreMessage = {\r\n                type: options.type,\r\n                name: options.name,\r\n                context: options.context,\r\n                options: restoreOptions\r\n            };\r\n            if (options.timeout) {\r\n                arg.timeout = options.timeout;\r\n            }\r\n\r\n            this.invokeMethodAndTrack(\"T42.ACS.RestoreLayout\", arg, resolve, reject, true);\r\n        });\r\n    }\r\n\r\n    public remove(type: string, name: string): Promise<void> {\r\n        return new Promise<void>((resolve, reject) => {\r\n            this.verifyNotSlimMode();\r\n\r\n            if (!name) {\r\n                return reject(new Error(\"name argument is required\"));\r\n            }\r\n\r\n            if (!type) {\r\n                return reject(new Error(\"type argument is required\"));\r\n            }\r\n\r\n            const msg: ACSRemoveLayoutMessage = {\r\n                type,\r\n                name,\r\n            };\r\n\r\n            this.invokeMethodAndTrack(\"T42.ACS.RemoveLayout\", msg, resolve, reject);\r\n        });\r\n    }\r\n\r\n    public list(): Glue42.Layouts.Layout[] {\r\n        this.verifyNotSlimMode();\r\n        return store.all;\r\n    }\r\n\r\n    public import(layouts: Glue42.Layouts.Layout[], mode?: Glue42.Layouts.ImportMode): Promise<void> {\r\n        return new Promise<void>((resolve, reject) => {\r\n            this.verifyNotSlimMode();\r\n            if (!isUndefinedOrNull(mode)) {\r\n                if (mode !== \"merge\" && mode !== \"replace\") {\r\n                    return reject(new Error(`${mode} is not supported - only \"merge\" and \"replace\"`));\r\n                }\r\n            }\r\n            if (!Array.isArray(layouts)) {\r\n                return reject(new Error(\"layouts arguments is not an array\"));\r\n            }\r\n            const msg: ACSImportMessage = {\r\n                mode: mode || \"replace\",\r\n                layouts\r\n            };\r\n\r\n            this.invokeMethodAndTrack(\"T42.ACS.ImportLayouts\", msg, resolve, reject, true);\r\n        });\r\n    }\r\n\r\n    public export(layoutType?: Glue42.Layouts.LayoutType): Promise<Glue42.Layouts.Layout[]> {\r\n        return new Promise<Glue42.Layouts.Layout[]>((resolve, reject) => {\r\n            const handleResult = (result: ExportResultMessage) => {\r\n                let layouts: Glue42.Layouts.Layout[] = this.getObjectValues(result.Layouts).map((t) => new LayoutImpl(transformACSLayout(t)));\r\n                if (layoutType) {\r\n                    layouts = layouts.filter((l) => l.type === layoutType);\r\n                }\r\n                resolve(layouts);\r\n            };\r\n\r\n            this.invokeMethodAndTrack(\"T42.ACS.ExportLayouts\", {}, handleResult, reject, true);\r\n        });\r\n    }\r\n\r\n    public rename(layout: Glue42.Layouts.Layout, newName: string): Promise<void> {\r\n        return new Promise<void>((resolve, reject) => {\r\n            this.verifyNotSlimMode();\r\n\r\n            if (!layout) {\r\n                return reject(new Error(\"layout argument is required\"));\r\n            }\r\n\r\n            if (!layout.name) {\r\n                return reject(new Error(\"name argument is required\"));\r\n            }\r\n\r\n            if (!layout.type) {\r\n                return reject(new Error(\"type argument is required\"));\r\n            }\r\n\r\n            const msg: ACSRenameMessage = { type: layout.type, oldName: layout.name, newName };\r\n\r\n            this.invokeMethodAndTrack(\"T42.ACS.RenameLayout\", msg, resolve, reject);\r\n        });\r\n    }\r\n\r\n    public updateMetadata(layout: Glue42.Layouts.Layout): Promise<void> {\r\n        return new Promise((resolve, reject) => {\r\n            if (!layout) {\r\n                return reject(new Error(\"layout argument is required\"));\r\n            }\r\n\r\n            if (!layout.name) {\r\n                return reject(new Error(\"name argument is required\"));\r\n            }\r\n\r\n            if (!layout.type) {\r\n                return reject(new Error(\"type argument is required\"));\r\n            }\r\n\r\n            if (!layout.metadata) {\r\n                return reject(new Error(\"metadata argument is required\"));\r\n            }\r\n\r\n            const layoutObject: any = {\r\n                name: layout.name,\r\n                type: layout.type,\r\n                metadata: layout.metadata\r\n            };\r\n\r\n            this.invokeMethodAndTrack(\"T42.ACS.UpdateMetadata\", layoutObject, resolve, reject, true);\r\n        });\r\n    }\r\n\r\n    public hibernate(name: string, options?: Glue42.Layouts.HibernationOptions): Promise<void> {\r\n        return new Promise((resolve, reject) => {\r\n            if (!name) {\r\n                return reject(new Error(\"name cannot be empty\"));\r\n            }\r\n            options = options || {};\r\n            const request: HibernationResumeMessage = {\r\n                name,\r\n                type: \"Global\",\r\n                context: options.context || {},\r\n                metadata: options.metadata || {},\r\n            };\r\n            this.invokeMethodAndTrack(\"T42.ACS.HibernateLayout\", request, resolve, reject, true);\r\n        });\r\n    }\r\n\r\n    public resume(name: string, context?: any, options?: Glue42.Layouts.ResumeOptions): Promise<void> {\r\n        return new Promise((resolve, reject) => {\r\n            if (!name) {\r\n                return reject(new Error(\"name cannot be empty\"));\r\n            }\r\n            const request: HibernationResumeMessage = {\r\n                name,\r\n                type: \"Global\",\r\n                context,\r\n                ...options\r\n            };\r\n            this.invokeMethodAndTrack(\"T42.ACS.ResumeLayout\", request, resolve, reject, true);\r\n        });\r\n    }\r\n\r\n    public async getCurrentLayout(): Promise<Glue42.Layouts.Layout | undefined> {\r\n        const result = await this.config.agm.invoke(\"T42.ACS.GetCurrentLayout\", {}, \"best\", { methodResponseTimeoutMs: 120 * 1000 });\r\n        let layout = result.returned.layout;\r\n        if (!layout) {\r\n            return undefined;\r\n        }\r\n        if (!this.isSlimMode()) {\r\n            // we have internal if we track layouts (so not slim mode), if not return the object we received from GD\r\n            layout = this.list().find((l) => l.name === layout.name && l.type === layout.type);\r\n        }\r\n        return layout;\r\n    }\r\n\r\n    public onAdded(callback: (layout: Glue42.Layouts.Layout) => void): () => void {\r\n        const result = this.callbacks.add(\"added\", callback);\r\n\r\n        if (store.all.length > 0) {\r\n            store.all.forEach((layout) => {\r\n                try {\r\n                    callback(layout);\r\n                } catch (err) { /** */ }\r\n            });\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    public onRemoved(callback: (layout: Glue42.Layouts.Layout) => void): () => void {\r\n        return this.callbacks.add(\"removed\", callback);\r\n    }\r\n\r\n    public onChanged(callback: (layout: Glue42.Layouts.Layout) => void): () => void {\r\n        return this.callbacks.add(\"changed\", callback);\r\n    }\r\n\r\n    public onRestored(callback: (layout: Glue42.Layouts.Layout) => void): () => void {\r\n        return this.callbacks.add(\"restored\", callback);\r\n    }\r\n\r\n    public onRenamed(callback: (layout: Glue42.Layouts.Layout) => void): () => void {\r\n        return this.callbacks.add(\"renamed\", callback);\r\n    }\r\n\r\n    public onEvent(callback: (event: any) => void): () => void {\r\n        return this.stream.onEvent(callback);\r\n    }\r\n\r\n    public onSaveRequested(callback: (info?: Glue42.Layouts.SaveRequestContext) => Glue42.Layouts.SaveRequestResponse): UnsubscribeFunction {\r\n        return this.provider.onSaveRequested(callback);\r\n    }\r\n\r\n    public updateAppContextInCurrent(context: object): Promise<void> {\r\n        return new Promise((resolve, reject) => {\r\n            if (context && typeof context !== \"object\") {\r\n                return reject(new Error(\"context must be an object\"));\r\n            }\r\n            context = context ?? {};\r\n            const request: UpdateLayoutComponentContextMessage = {\r\n                context\r\n            };\r\n            this.invokeMethodAndTrack(\"T42.ACS.UpdateLayoutComponentContext\", request, resolve, reject, true);\r\n        });\r\n    }\r\n\r\n    public updateDefaultContext(context: object): Promise<void> {\r\n        return new Promise((resolve, reject) => {\r\n            if (context && typeof context !== \"object\") {\r\n                return reject(new Error(\"context must be an object\"));\r\n            }\r\n            context = context ?? {};\r\n            const request: UpdateLayoutComponentContextMessage = {\r\n                context\r\n            };\r\n            this.invokeMethodAndTrack(\"T42.ACS.UpdateDefaultContext\", request, resolve, reject, true);\r\n        });\r\n    }\r\n\r\n    public async get(name: string, type: Glue42.Layouts.LayoutType): Promise<Glue42.Layouts.Layout> {\r\n        const matching = this.list().find((l) => l.name === name && l.type === type);\r\n        if (!matching) {\r\n            throw new Error(`cannot find layout with name=${name} and type=${type}`);\r\n        }\r\n        return matching;\r\n    }\r\n\r\n    public async getAll(type: Glue42.Layouts.LayoutType): Promise<Glue42.Layouts.LayoutSummary[]> {\r\n        const matching = this.list().filter((l) => type === l.type);\r\n        return matching;\r\n    }\r\n\r\n    private isSlimMode() {\r\n        return this.config.mode === \"slim\";\r\n    }\r\n\r\n    private verifyNotSlimMode() {\r\n        if (this.isSlimMode()) {\r\n            throw Error(\"Operation not allowed in slim mode. Run in full mode.\");\r\n        }\r\n    }\r\n\r\n    private invokeMethodAndTrack(methodName: string, args: ACSMessage, resolve: (result: any) => void, reject: (err: any) => void, skipStreamEvent?: boolean) {\r\n        let streamEventReceived = skipStreamEvent;\r\n        let agmResult: any;\r\n\r\n        const token = generate();\r\n        args.token = token;\r\n\r\n        const handleResult = () => {\r\n            if (streamEventReceived && agmResult) {\r\n                resolve(agmResult);\r\n            }\r\n        };\r\n\r\n        if (!skipStreamEvent) {\r\n            this.stream.waitFor(token)\r\n                .then(() => {\r\n                    streamEventReceived = true;\r\n                    handleResult();\r\n                })\r\n                .catch((err: any) => {\r\n                    reject(err);\r\n                });\r\n        }\r\n\r\n        const responseHandler = (result: Glue42Core.AGM.InvocationResult<any>) => {\r\n            if (!result.returned) {\r\n                return reject(new Error(\"No result from method \" + methodName));\r\n            }\r\n\r\n            if (result.returned.status && (result.returned.status !== \"Success\" && result.returned.status !== \"PartialSuccess\")) {\r\n                if (typeof (result.returned) === \"string\") {\r\n                    return reject(new Error(result.returned));\r\n                } else if (typeof (result.returned) === \"object\") {\r\n                    if (result.returned.status && result.returned.failed) {\r\n                        return reject(new Error(`${result.returned.status}: ${JSON.stringify(result.returned.failed)}`));\r\n                    } else {\r\n                        return reject(new Error(result.returned));\r\n                    }\r\n                }\r\n            }\r\n\r\n            agmResult = result.returned;\r\n            handleResult();\r\n        };\r\n\r\n        this.config.agm.invoke(methodName, args, \"best\", { methodResponseTimeoutMs: 120 * 1000 })\r\n            .then(responseHandler)\r\n            .catch((err: any) => reject(err));\r\n    }\r\n\r\n    private getObjectValues(obj: any) {\r\n        if (!obj) {\r\n            return [];\r\n        }\r\n\r\n        return Object.keys(obj).map((k) => obj[k]);\r\n    }\r\n}\r\n","import { LayoutsStream } from \"../types\";\r\nimport store, { LayoutStore } from \"../store\";\r\nimport { ACSStreamData, ACSLayout } from \"./messages\";\r\nimport LayoutImpl from \"../layout\";\r\nimport { CallbackRegistry, UnsubscribeFunction } from \"callback-registry\";\r\nimport transformACSLayout from \"../transform\";\r\n\r\nimport { Glue42Core } from \"@glue42/core\";\r\n\r\n/**\r\n * ACS event stream related to layouts\r\n */\r\nexport default class ACSStream implements LayoutsStream {\r\n\r\n    public ready: Promise<void>;\r\n    public gotSnapshot: Promise<void>;\r\n\r\n    private resolveReady: () => void;\r\n    private rejectReady: (err: any) => void;\r\n\r\n    private resolveGotSnapshot: () => void;\r\n    private rejectGotSnapshot: (err: any) => void;\r\n\r\n    constructor(private agm: Glue42Core.AGM.API, private callbacks: CallbackRegistry) {\r\n\r\n        this.ready = new Promise<void>((resolve, reject) => {\r\n            this.resolveReady = resolve;\r\n            this.rejectReady = reject;\r\n        });\r\n\r\n        this.gotSnapshot = new Promise<void>((resolve, reject) => {\r\n            this.resolveGotSnapshot = resolve;\r\n            this.rejectGotSnapshot = reject;\r\n        });\r\n    }\r\n\r\n    public subscribe(noRetry?: boolean) {\r\n        const transform = (obj: object) => {\r\n            return this.getObjectValues(obj).map((t) => transformACSLayout(t));\r\n        };\r\n\r\n        // if we don't have OnLayoutEvent stream  we're running pre 2.1 GD version or outside GD,\r\n        if (!this.checkForLayoutEventMethod()) {\r\n            // if no retry resolve right away\r\n            if (noRetry) {\r\n                this.resolveReady();\r\n            }\r\n\r\n            // if we should retry, schedule  one more time\r\n            setTimeout(() => {\r\n                this.subscribe(true);\r\n            }, 500);\r\n        } else {\r\n            this.agm.subscribe(\"T42.ACS.OnLayoutEvent\", { waitTimeoutMs: 10000 })\r\n                .then((subs) => {\r\n                    subs.onData((args) => {\r\n                        const data = args.data as ACSStreamData;\r\n                        if (data.IsSnapshot) {\r\n                            this.resolveGotSnapshot();\r\n                        }\r\n\r\n                        this.addLayouts(transform(data.OnLayoutAdded));\r\n                        this.removeLayouts(transform(data.OnLayoutRemoved));\r\n                        this.changeLayouts(transform(data.OnLayoutChanged));\r\n                        this.renameLayouts(transform(data.OnLayoutRenamed));\r\n                        this.restoredLayout(transform(data.OnLayoutRestored));\r\n                        this.callbacks.execute(\"streamEvent\", data);\r\n                    });\r\n\r\n                    subs.onFailed((err) => {\r\n                        const msg = \"can not subscribe to T42.ACS.OnLayoutEvent \" + err;\r\n                        this.rejectReady(msg);\r\n                        this.rejectGotSnapshot(msg);\r\n                    });\r\n\r\n                    this.resolveReady();\r\n                })\r\n                .catch((err) => {\r\n                    const msg = \"Error subscribing for T42.ACS.OnLayoutEvent stream. Err: \" + err;\r\n                    this.rejectReady(msg);\r\n                    this.rejectGotSnapshot(msg);\r\n                });\r\n        }\r\n    }\r\n\r\n    public onEvent(callback: (streamEvent: ACSStreamData) => void): UnsubscribeFunction {\r\n        return this.callbacks.add(\"streamEvent\", callback);\r\n    }\r\n\r\n    public waitFor(token: string, timeout?: number): Promise<void> {\r\n        if (!timeout) {\r\n            timeout = 10000; // default timeout is 10 seconds\r\n        }\r\n        return new Promise<void>((resolve, reject) => {\r\n            let done = false;\r\n            const unsubscribe = this.onEvent((streamEvent) => {\r\n                if (streamEvent.Token === token) {\r\n                    done = true;\r\n                    unsubscribe();\r\n                    resolve();\r\n                }\r\n            });\r\n\r\n            setTimeout(() => {\r\n                if (!done) {\r\n                    reject(\"timed out\");\r\n                }\r\n            }, timeout);\r\n        });\r\n    }\r\n\r\n    private checkForLayoutEventMethod() {\r\n        try {\r\n            return this.agm\r\n                .methods()\r\n                .map((m) => m.name)\r\n                .indexOf(\"T42.ACS.OnLayoutEvent\") !== -1;\r\n        } catch (e) {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    private addLayouts(layoutsData: any[]) {\r\n        if (!layoutsData) {\r\n            return;\r\n        }\r\n\r\n        layoutsData.forEach((layoutData) => {\r\n            const layout = new LayoutImpl(layoutData);\r\n            store.add(layout);\r\n            this.callbacks.execute(\"added\", layout);\r\n        });\r\n    }\r\n\r\n    private removeLayouts(removedLayouts: any[]) {\r\n        if (!removedLayouts) {\r\n            return;\r\n        }\r\n        removedLayouts.forEach((removedLayout) => {\r\n            store.removeWhere((existingLayout) => !this.compareLayouts(existingLayout, removedLayout));\r\n\r\n            this.callbacks.execute(\"removed\", removedLayout);\r\n        });\r\n    }\r\n\r\n    private changeLayouts(changedLayouts: any[]) {\r\n        if (!changedLayouts) {\r\n            return;\r\n        }\r\n\r\n        changedLayouts.forEach((changedLayout) => {\r\n            // removed the changed layout and push it again\r\n            store.removeWhere((existingLayout) => !this.compareLayouts(existingLayout, changedLayout));\r\n            store.add(new LayoutImpl(changedLayout));\r\n            // execute callback\r\n            this.callbacks.execute(\"changed\", changedLayout);\r\n        });\r\n\r\n    }\r\n\r\n    private renameLayouts(renamedLayouts: any[]) {\r\n        if (!renamedLayouts) {\r\n            return;\r\n        }\r\n\r\n        renamedLayouts.forEach((renamedLayout) => {\r\n            const existingLayout = store.first((current) => this.compareLayouts(current, { type: renamedLayout.type, name: renamedLayout.oldName }));\r\n\r\n            if (!existingLayout) {\r\n                throw Error(\"received rename event for unknown layout with type \" + renamedLayout.type + \" and name \" + renamedLayout.oldName);\r\n            }\r\n\r\n            existingLayout.name = renamedLayout.newName;\r\n\r\n            this.callbacks.execute(\"renamed\", existingLayout);\r\n        });\r\n    }\r\n\r\n    private compareLayouts(layout1: { name: string, type: string }, layout2: { name: string, type: string }) {\r\n        return layout1.name === layout2.name && layout1.type === layout2.type;\r\n    }\r\n\r\n    private getObjectValues(obj: any) {\r\n        if (!obj) {\r\n            return [];\r\n        }\r\n\r\n        return Object.keys(obj).map((k) => obj[k]);\r\n    }\r\n\r\n    private restoredLayout(restoredLayouts: any[]) {\r\n\r\n        if (!restoredLayouts) {\r\n            return;\r\n        }\r\n\r\n        restoredLayouts.forEach((restoredLayout) => {\r\n            const existingLayout = store.first((current) => this.compareLayouts(current, { type: restoredLayout.type, name: restoredLayout.name }));\r\n            this.callbacks.execute(\"restored\", existingLayout);\r\n        });\r\n    }\r\n}\r\n","import { LayoutsStream } from \"../types\";\r\n\r\nexport default function(): LayoutsStream {\r\n    return {\r\n        ready: Promise.resolve(undefined),\r\n        subscribe: () => { /** */ },\r\n        onEvent: (callback: (streamEvent: any) => void) => () => {/** */ },\r\n        waitFor: (token: string, timeout: number) => Promise.resolve(undefined),\r\n        gotSnapshot: Promise.resolve(undefined),\r\n    };\r\n}\r\n","import Layouts from \"./layouts\";\r\nimport ACSStream from \"./stream/acsStream\";\r\nimport streamNull from \"./stream/nullStream\";\r\nimport {LayoutsLibConfiguration, LayoutsStream } from \"./types\";\r\nimport callbackRegistry, { CallbackRegistry } from \"callback-registry\";\r\n\r\nexport default function(config: LayoutsLibConfiguration): Layouts {\r\n\r\n    if (!config.agm) {\r\n        throw Error(\"config.agm is required\");\r\n    }\r\n\r\n    if (!config.logger) {\r\n        throw Error(\"config.logger is required\");\r\n    }\r\n\r\n    // default mode to slim\r\n    config.mode = config.mode || \"slim\";\r\n\r\n    const logger = config.logger;\r\n    const callbacks: CallbackRegistry = callbackRegistry();\r\n\r\n    let acsStream: LayoutsStream;\r\n\r\n    if (config.mode === \"full\" || \"fullWaitSnapshot\") {\r\n        acsStream = new ACSStream(config.agm, callbacks);\r\n    } else {\r\n        acsStream = streamNull();\r\n    }\r\n\r\n    return new Layouts(config, acsStream, callbacks, logger);\r\n}\r\n","import { Glue42 } from \"../../glue\";\r\nimport { Glue42Core } from \"@glue42/core\";\r\nimport CallbackFactory, { CallbackRegistry, UnsubscribeFunction } from \"callback-registry\";\r\nimport CaptureOptions = Glue42.Displays.CaptureOptions;\r\n\r\nconst T42DisplayCommand = \"T42.Displays.Command\";\r\nconst T42DisplayOnEvent = \"T42.Displays.OnEvent\";\r\n\r\nexport default class DisplayManager implements Glue42.Displays.API {\r\n    private _registry: CallbackRegistry = CallbackFactory();\r\n    private _registered = false;\r\n\r\n    constructor(\r\n        private _agm: Glue42Core.AGM.API,\r\n        private _logger: Glue42Core.Logger.API,\r\n    ) {\r\n        //\r\n    }\r\n\r\n    public all = async (): Promise<Glue42.Displays.Display[]> => {\r\n        const displays = await this.callGD<Glue42.Displays.Display[]>(DisplayCommand.GetAll, {});\r\n        return displays.map(this.decorateDisplay);\r\n    }\r\n\r\n    public get = async (id: number): Promise<Glue42.Displays.Display> => {\r\n        const display = await this.callGD<Glue42.Displays.Display>(DisplayCommand.Get, { id });\r\n        return this.decorateDisplay(display);\r\n    }\r\n\r\n    public getPrimary = async (): Promise<Glue42.Displays.Display> => {\r\n        const primary = (await this.all()).find((d) => d.isPrimary);\r\n        return primary;\r\n    }\r\n\r\n    public getByWindowId(id: string): Promise<Glue42.Displays.Display> {\r\n        const current = this.callGD<Glue42.Displays.Display>(DisplayCommand.GetByWindowId, { id });\r\n        return current;\r\n    }\r\n\r\n    public capture = async (options: CaptureOptions): Promise<string> => {\r\n        const screenshot = await this.callGD<string>(DisplayCommand.Capture, { ...options });\r\n        return screenshot;\r\n    }\r\n\r\n    public captureAll = async (options: Glue42.Displays.CaptureAllOptions): Promise<string | string[]> => {\r\n        const screenshots = await this.callGD<string | string[]>(DisplayCommand.CaptureAll, { ...options });\r\n        return screenshots;\r\n    }\r\n\r\n    public getMousePosition = async (): Promise<Glue42.Displays.Point> => {\r\n        const point = await this.callGD<Glue42.Displays.Point>(DisplayCommand.GetMousePosition);\r\n        return point;\r\n    }\r\n\r\n    public onDisplayChanged(cb: (displays: Glue42.Displays.Display[]) => void) {\r\n        this.register();\r\n        return this._registry.add(\"on-display-changed\", cb);\r\n    }\r\n\r\n    private callGD = async <T>(command: string, options?: object): Promise<T> => {\r\n        // Consider targeting only GD\r\n        const invocationResult = await this._agm.invoke(T42DisplayCommand, { options: { ...options }, command });\r\n        return invocationResult.returned.data;\r\n    }\r\n\r\n    private decorateDisplay = (original: Glue42.Displays.Display): Glue42.Displays.Display => {\r\n        const decoratedDisplay = {\r\n            ...original,\r\n            capture: (size: SizeOptions) => this.capture({ id: original.id, size })\r\n        };\r\n        const workAreaAsAny = decoratedDisplay.workArea as any;\r\n        workAreaAsAny.x = workAreaAsAny.left;\r\n        workAreaAsAny.y = decoratedDisplay.workArea.top;\r\n        return decoratedDisplay;\r\n    }\r\n\r\n    private register() {\r\n        if (this._registered) {\r\n            return;\r\n        }\r\n        this._registered = true;\r\n        this._agm.register(T42DisplayOnEvent, (args, caller) => {\r\n            const event = args.event;\r\n            const data = args.data;\r\n            switch (event) {\r\n                case \"display-changed\":\r\n                    this._registry.execute(\"on-display-changed\", data.displays.map(this.decorateDisplay));\r\n                    break;\r\n                default:\r\n                    this._logger.warn(`unknown event - ${event}`);\r\n                    break;\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\ntype SizeOptions = Glue42.Displays.ScaleOptions | Glue42.Displays.AbsoluteSizeOptions;\r\n\r\nenum DisplayCommand {\r\n    Capture = \"capture\",\r\n    CaptureAll = \"captureAll\",\r\n    GetAll = \"getAll\",\r\n    Get = \"get\",\r\n    GetByWindowId = \"getByWindowId\",\r\n    GetMousePosition = \"getMousePosition\",\r\n}\r\n","import { Glue42 } from \"../../glue\";\r\nimport { ChannelsImpl } from \"./channels\";\r\n\r\nlet interop: Glue42.Interop.API;\r\nlet windowId: string;\r\n\r\nexport async function setupAGM(interopLib: Glue42.Interop.API, channels: ChannelsImpl) {\r\n    interop = interopLib;\r\n\r\n    if (typeof window !== \"undefined\") {\r\n        if (window.glue42gd) {\r\n            windowId = window.glue42gd.windowId;\r\n        }\r\n    }\r\n\r\n    if (!windowId) {\r\n        // not supported\r\n        return;\r\n    }\r\n\r\n    await interop.register(\"T42.Channels.Command\", (args: any) => {\r\n        const command = args.command;\r\n        if (!command) {\r\n            throw new Error(\"missing command argument\");\r\n        }\r\n        if (command === \"join\") {\r\n            const id = args.channel;\r\n            if (!id) {\r\n                throw new Error(\"missing argument id\");\r\n            }\r\n            // this is coming from GD (which means from selector switch, join without triggering selection change again)\r\n            channels.joinNoSelectorSwitch(id);\r\n            return;\r\n        }\r\n        if (command === \"leave\") {\r\n            channels.leaveNoSelectorSwitch();\r\n            return;\r\n        }\r\n        if (command === \"get\") {\r\n            const id = channels.current();\r\n            return { id };\r\n        }\r\n        throw new Error(`unknown command ${command}`);\r\n    });\r\n\r\n    // agm interface is available for SW windows only\r\n    interop.invoke(\"T42.Channels.Announce\", { swId: windowId, instance: interop.instance.instance });\r\n}\r\n\r\nexport async function switchChannel(channel?: string, id?: string) {\r\n    interop.invoke(\"T42.Channels.Announce\", {\r\n        swId: id ?? windowId,\r\n        command: \"switchChannel\",\r\n        data: { newChannel: channel }\r\n    });\r\n}\r\n","import { Glue42 } from \"../../glue\";\r\n\r\nconst CONTEXT_PREFIX = \"___channel___\";\r\nconst LATEST_FDC3_TYPE = \"latest_fdc3_type\";\r\n\r\nexport class SharedContextSubscriber {\r\n    private unsubscribeFunc: () => void;\r\n    private callback: any;\r\n\r\n    constructor(private contexts: Glue42.Contexts.API) {\r\n    }\r\n\r\n    public subscribe(callback: any): void {\r\n        this.callback = callback;\r\n    }\r\n\r\n    public subscribeFor(name: string, callback: (data: object, context: Glue42.Channels.ChannelContext, updaterId: string) => void): Promise<() => void> {\r\n        if (!this.isChannel(name)) {\r\n            return Promise.reject(new Error(`Channel with name: ${name} doesn't exist!`));\r\n        }\r\n\r\n        const contextName = this.createContextName(name);\r\n\r\n        return this.contexts.subscribe(contextName, (data, _, __, ___, extraData) => {\r\n            callback(data.data, data, extraData?.updaterId);\r\n        });\r\n    }\r\n\r\n    /** Unsubscribes from the current shared context, and subscribe to the passed one */\r\n    public async switchChannel(name: string): Promise<void> {\r\n        this.unsubscribe();\r\n        const contextName = this.createContextName(name);\r\n        this.unsubscribeFunc = await this.contexts.subscribe(contextName, (data, _, __, ___, extraData) => {\r\n            if (this.callback) {\r\n                this.callback(data.data, data, extraData?.updaterId);\r\n            }\r\n        });\r\n    }\r\n\r\n    public leave() {\r\n        if (this.callback) {\r\n            this.callback({}, undefined);\r\n        }\r\n        this.unsubscribe();\r\n    }\r\n\r\n    public all(): string[] {\r\n        const contextNames = this.contexts.all();\r\n        const channelContextNames = contextNames.filter((contextName) => contextName.startsWith(CONTEXT_PREFIX));\r\n        const channelNames = channelContextNames.map((channelContextName) => channelContextName.substr(CONTEXT_PREFIX.length));\r\n        return channelNames;\r\n    }\r\n\r\n    public getContextData(name: string): Promise<Glue42.Channels.ChannelContext> {\r\n        return new Promise((resolve, reject) => {\r\n            if (!this.isChannel(name)) {\r\n                return reject(new Error(`A channel with name: ${name} doesn't exist!`));\r\n            }\r\n\r\n            const contextName = this.createContextName(name);\r\n\r\n            this.contexts.subscribe(contextName, (data) => {\r\n                if (data[LATEST_FDC3_TYPE]) {\r\n                    const { latest_fdc3_type, ...rest } = data;\r\n\r\n                    resolve(rest);\r\n                }\r\n\r\n                resolve(data);\r\n            }).then((unsubscribeFunc) => unsubscribeFunc());\r\n        });\r\n    }\r\n\r\n    public updateChannel(name: string, data: { name: string, meta: any, data: any }): Promise<void> {\r\n        const contextName = this.createContextName(name);\r\n        return this.contexts.update(contextName, data);\r\n    }\r\n\r\n    public updateData(name: string, data: any) {\r\n        const contextName = this.createContextName(name);\r\n        const fdc3Type = this.getFDC3Type(data);\r\n\r\n        if (this.contexts.setPathSupported) {\r\n            const pathValues: Glue42.Contexts.PathValue[] = Object.keys(data).map((key) => {\r\n                return {\r\n                    path: `data.` + key,\r\n                    value: data[key]\r\n                };\r\n            });\r\n\r\n            if (fdc3Type) {\r\n                pathValues.push({ path: LATEST_FDC3_TYPE, value: fdc3Type });\r\n            }\r\n\r\n            return this.contexts.setPaths(contextName, pathValues);\r\n        } else {\r\n            if (fdc3Type) {\r\n                data[LATEST_FDC3_TYPE] = fdc3Type;\r\n            }\r\n\r\n            // pre 3.10, note that we update the data property only\r\n            return this.contexts.update(contextName, { data });\r\n        }\r\n    }\r\n\r\n    public isChannel(name: string): boolean {\r\n        return this.all().some((channelName) => channelName === name);\r\n    }\r\n\r\n    private unsubscribe(): void {\r\n        if (this.unsubscribeFunc) {\r\n            this.unsubscribeFunc();\r\n        }\r\n    }\r\n\r\n    private createContextName(name: string): string {\r\n        return CONTEXT_PREFIX + name;\r\n    }\r\n\r\n    private getFDC3Type(data: any): string | undefined {\r\n        const fdc3PropsArr = Object.keys(data).filter((key: string) => key.indexOf(\"fdc3_\") === 0);\r\n\r\n        if (fdc3PropsArr.length === 0) {\r\n            return;\r\n        }\r\n\r\n        if (fdc3PropsArr.length > 1) {\r\n            throw new Error(\"FDC3 does not support updating of multiple context keys\");\r\n        }\r\n\r\n        return fdc3PropsArr[0].split(\"_\").slice(1).join(\"_\");\r\n    }\r\n}\r\n","import { Glue42 } from \"../../glue\";\r\nimport { default as CallbackRegistryFactory, CallbackRegistry } from \"callback-registry\";\r\nimport { SharedContextSubscriber } from \"./contexts\";\r\nimport { switchChannel } from \"./agm\";\r\nimport shortid from \"shortid\";\r\nexport class ChannelsImpl implements Glue42.Channels.API {\r\n    private subsKey = \"subs\";\r\n    private changedKey = \"changed\";\r\n    private isInitialJoin = true;\r\n\r\n    private registry: CallbackRegistry = CallbackRegistryFactory();\r\n    private currentContext: string;\r\n    private lastUpdate: { context: Glue42.Channels.ChannelContext, updaterId?: string };\r\n    private pendingReplays: any = {};\r\n\r\n    constructor(private shared: SharedContextSubscriber, private interop: Glue42.Interop.API, private getWindows: () => Glue42.Windows.API, private logger: Glue42.Logger.API) {\r\n        this.shared.subscribe(this.handler.bind(this));\r\n\r\n        if (typeof window !== \"undefined\" && typeof window.glue42gd !== \"undefined\") {\r\n            this.currentContext = (window.glue42gd as any).initialChannel;\r\n            if (this.currentContext) {\r\n                this.joinNoSelectorSwitch(this.currentContext);\r\n            }\r\n        }\r\n    }\r\n\r\n    public subscribe(callback: (data: object, context: Glue42.Channels.ChannelContext, updaterId: string) => void): () => void {\r\n        if (typeof callback !== \"function\") {\r\n            throw new Error(\"Please provide the callback as a function!\");\r\n        }\r\n\r\n        // We want to replay the current context for late joiners\r\n        // Some caveats:\r\n        // 1. We need to consider that unsub might be called before we replay the initial set - in which case we should not do the replay - we wrap unsubscribe\r\n        // and use pendingReplays to handle this well)\r\n        // 2. We need to prevent double context updated calls with the same value. This  might happen if you do subscirbe -> publish fast - we use pendingReplays to prevent double calls.\r\n        // 3. We don't use replay args of callback registry, as they might reorder updates in case of fast updates (e.g. subscribe -> leave might result in [undefined, context] updates,\r\n        // instead of [context, undefined]\r\n        const id = shortid();\r\n        this.pendingReplays[id] = true;\r\n        if (this.lastUpdate) {\r\n            let lastUpdate = Object.assign({}, this.lastUpdate);\r\n            setTimeout(() => {\r\n                if (this.pendingReplays[id]) {\r\n                    if (this.lastUpdate) {\r\n                        lastUpdate = this.lastUpdate;\r\n                    }\r\n                    callback(lastUpdate.context.data, lastUpdate.context, lastUpdate.updaterId);\r\n                }\r\n                delete this.pendingReplays[id];\r\n            }, 0);\r\n        }\r\n\r\n        const unsub = this.registry.add(this.subsKey, callback);\r\n        return () => {\r\n            this.pendingReplays[id] = false;\r\n            unsub();\r\n        };\r\n    }\r\n\r\n    public async subscribeFor(name: string, callback: (data: object, context: Glue42.Channels.ChannelContext, updaterId: string) => void): Promise<() => void> {\r\n        if (typeof name !== \"string\") {\r\n            throw new Error(\"Please provide the name as a string!\");\r\n        }\r\n        if (typeof callback !== \"function\") {\r\n            throw new Error(\"Please provide the callback as a function!\");\r\n        }\r\n        const unsubscribeFunc = await this.shared.subscribeFor(name, callback);\r\n        return unsubscribeFunc;\r\n    }\r\n\r\n    public async publish(data: object, name?: string): Promise<void> {\r\n        if (typeof data !== \"object\") {\r\n            throw new Error(\"Please provide the data as an object!\");\r\n        }\r\n\r\n        if (name) {\r\n            if (typeof name !== \"string\") {\r\n                throw new Error(\"Please provide the name as a string!\");\r\n            }\r\n\r\n            if (!this.shared.isChannel(name)) {\r\n                return Promise.reject(new Error(`A channel with name: ${name} doesn't exist!`));\r\n            }\r\n\r\n            return this.shared.updateData(name, data);\r\n        }\r\n\r\n        if (!this.currentContext) {\r\n            throw new Error(\"Not joined to any channel!\");\r\n        }\r\n        return this.shared.updateData(this.currentContext, data);\r\n    }\r\n\r\n    public all(): Promise<string[]> {\r\n        const channelNames = this.shared.all();\r\n        return Promise.resolve(channelNames);\r\n    }\r\n\r\n    public async list(): Promise<Glue42.Channels.ChannelContext[]> {\r\n        const channelNames = await this.all();\r\n        const channelContexts = await Promise.all(channelNames.map((channelName) => this.get(channelName)));\r\n        return channelContexts;\r\n    }\r\n\r\n    public get(name: string): Promise<Glue42.Channels.ChannelContext> {\r\n        if (typeof name !== \"string\") {\r\n            return Promise.reject(new Error(\"Please provide the channel name as a string!\"));\r\n        }\r\n\r\n        return this.shared.getContextData(name);\r\n    }\r\n\r\n    /* Returns info about my channel */\r\n    public getMy(): Promise<Glue42.Channels.ChannelContext> {\r\n        if (!this.currentContext) {\r\n            return Promise.resolve(undefined);\r\n        }\r\n        return this.get(this.currentContext);\r\n    }\r\n\r\n    public async join(name: string, windowId?: string): Promise<void> {\r\n        if (windowId) {\r\n            return switchChannel(name, windowId);\r\n        }\r\n        return this.joinCore(name);\r\n    }\r\n\r\n    public async joinNoSelectorSwitch(name: string): Promise<void> {\r\n        return this.joinCore(name, false);\r\n    }\r\n\r\n    public leave(windowId?: string) {\r\n        if (windowId) {\r\n            return switchChannel(undefined, windowId);\r\n        }\r\n        return this.leaveCore();\r\n    }\r\n\r\n    public leaveNoSelectorSwitch() {\r\n        return this.leaveCore(false);\r\n    }\r\n\r\n    public current(): string {\r\n        return this.currentContext;\r\n    }\r\n\r\n    public my(): string {\r\n        return this.current();\r\n    }\r\n\r\n    public changed(callback: (channel: string) => void): () => void {\r\n        if (typeof callback !== \"function\") {\r\n            throw new Error(\"Please provide the callback as a function!\");\r\n        }\r\n\r\n        // don't use replay args as they might fail if changed->leave\r\n        const current = this.current();\r\n        if (current) {\r\n            setTimeout(() => {\r\n                callback(this.current());\r\n            }, 0);\r\n        }\r\n\r\n        return this.registry.add(this.changedKey, callback);\r\n    }\r\n\r\n    public onChanged(callback: (channel: string) => void): () => void {\r\n        return this.changed(callback);\r\n    }\r\n\r\n    public async add(info: Glue42.Channels.ChannelContext): Promise<Glue42.Channels.ChannelContext> {\r\n        if (typeof info !== \"object\") {\r\n            throw new Error(\"Please provide the info as an object!\");\r\n        }\r\n        if (typeof info.name === \"undefined\") {\r\n            throw new Error(\"info.name is missing!\");\r\n        }\r\n        if (typeof info.name !== \"string\") {\r\n            throw new Error(\"Please provide the info.name as a string!\");\r\n        }\r\n        if (typeof info.meta === \"undefined\") {\r\n            throw new Error(\"info.meta is missing!\");\r\n        }\r\n        if (typeof info.meta !== \"object\") {\r\n            throw new Error(\"Please provide the info.meta as an object!\");\r\n        }\r\n        if (typeof info.meta.color === \"undefined\") {\r\n            throw new Error(\"info.meta.color is missing!\");\r\n        }\r\n        if (typeof info.meta.color !== \"string\") {\r\n            throw new Error(\"Please provide the info.meta.color as a string!\");\r\n        }\r\n\r\n        const context: Glue42.Channels.ChannelContext = {\r\n            name: info.name,\r\n            meta: info.meta || {},\r\n            data: info.data || {}\r\n        };\r\n\r\n        // Note that we use `update` instead of `add` so that if the channel already exists we don't overwrite it.\r\n        await this.shared.updateChannel(info.name, context);\r\n\r\n        return context;\r\n    }\r\n\r\n    public async getWindowsOnChannel(channel: string): Promise<Glue42.Windows.GDWindow[]> {\r\n        const windowInfos = await this.getWindowsWithChannels({ channels: [channel] });\r\n        return windowInfos.map((w) => w.window);\r\n    }\r\n\r\n    public async getWindowsWithChannels(filter: Glue42.Channels.WindowWithChannelFilter): Promise<Glue42.Channels.WindowOnChannelInfo[]> {\r\n        try {\r\n            const info = await this.interop.invoke<{ windows: Array<{ windowId: string, channel: string, application: string }> }>(\"T42.Channels.Announce\", { command: \"getChannelsInfo\", data: { filter } });\r\n            const windows = this.getWindows();\r\n            if (info?.returned?.windows) {\r\n                return info.returned.windows.map((windowInfo) => {\r\n                    const window = windows.findById(windowInfo.windowId);\r\n                    return {\r\n                        window,\r\n                        channel: windowInfo.channel,\r\n                        application: windowInfo.application\r\n                    };\r\n                });\r\n            }\r\n        } catch (er) {\r\n            this.logger.error(`Error getting all channel enabled windows. This method is available since Glue42 3.12`, er);\r\n        }\r\n        return [];\r\n    }\r\n\r\n    private handler(data: object, context: Glue42.Channels.ChannelContext, updaterId: string): any {\r\n        this.lastUpdate = { context, updaterId };\r\n        this.pendingReplays = {};\r\n        this.registry.execute(this.subsKey, data, context, updaterId);\r\n    }\r\n\r\n    private async joinCore(name: string, changeSelector: boolean = true) {\r\n        if (typeof name !== \"string\") {\r\n            throw new Error(\"Please provide the channel name as a string!\");\r\n        }\r\n\r\n        if (!this.isInitialJoin && name === this.currentContext) {\r\n            // ignore joining the channel that we're already on, except when this is the very first call\r\n            return;\r\n        }\r\n        this.isInitialJoin = false;\r\n\r\n        // Checks if a channel exists with the provided name.\r\n        const doesChannelExist = (channelName: string): boolean => {\r\n            const channelNames = this.shared.all();\r\n            return channelNames.includes(channelName);\r\n        };\r\n\r\n        // Wait for 3k ms for the channel to appear if it doesn't already exist.\r\n        if (!doesChannelExist(name)) {\r\n            const channelExistsPromise = new Promise<void>((resolve, reject) => {\r\n                let timeoutId: NodeJS.Timeout;\r\n\r\n                // Check every 100 ms for a channel with the provided name.\r\n                const intervalId = setInterval(() => {\r\n                    if (doesChannelExist(name)) {\r\n                        clearTimeout(timeoutId);\r\n                        clearInterval(intervalId);\r\n                        resolve();\r\n                    }\r\n                }, 100);\r\n\r\n                timeoutId = setTimeout(() => {\r\n                    clearInterval(intervalId);\r\n\r\n                    return reject(new Error(`A channel with name: ${name} doesn't exist!`));\r\n                }, 3000);\r\n            });\r\n\r\n            await channelExistsPromise;\r\n        }\r\n\r\n        this.currentContext = name;\r\n        this.lastUpdate = undefined;\r\n\r\n        await this.shared.switchChannel(name);\r\n        if (changeSelector) {\r\n            switchChannel(name);\r\n        }\r\n        this.registry.execute(this.changedKey, name);\r\n    }\r\n\r\n    private leaveCore(changeSelector = true): Promise<void> {\r\n        this.currentContext = undefined;\r\n        this.registry.execute(this.changedKey, undefined);\r\n        this.shared.leave();\r\n        if (changeSelector) {\r\n            switchChannel();\r\n        }\r\n        return Promise.resolve();\r\n    }\r\n}\r\n","import { Glue42 } from \"../../glue\";\r\nimport { setupAGM } from \"./agm\";\r\nimport { SharedContextSubscriber } from \"./contexts\";\r\nimport { ChannelsImpl } from \"./channels\";\r\n\r\nexport function factory(contexts: Glue42.Contexts.API, agm: Glue42.AGM.API, getWindows: () => Glue42.Windows.API, logger: Glue42.Logger.API): Glue42.Channels.API & { ready: () => Promise<void>; } {\r\n    const sharedContexts = new SharedContextSubscriber(contexts);\r\n    const channels = new ChannelsImpl(sharedContexts, agm, getWindows, logger);\r\n\r\n    setupAGM(agm, channels);\r\n\r\n    return {\r\n        subscribe: channels.subscribe.bind(channels),\r\n        subscribeFor: channels.subscribeFor.bind(channels),\r\n        publish: channels.publish.bind(channels),\r\n        all: channels.all.bind(channels),\r\n        list: channels.list.bind(channels),\r\n        get: channels.get.bind(channels),\r\n        join: channels.join.bind(channels),\r\n        leave: channels.leave.bind(channels),\r\n        // @ignore-ed, but kept for backwards compatibility.\r\n        current: channels.current.bind(channels),\r\n        my: channels.my.bind(channels),\r\n        // @ignore-ed, but kept for backwards compatibility.\r\n        changed: channels.changed.bind(channels),\r\n        onChanged: channels.onChanged.bind(channels),\r\n        // @ignore-ed as currently not entirely supported by the framework.\r\n        add: channels.add.bind(channels),\r\n        getWindowsOnChannel: channels.getWindowsOnChannel.bind(channels),\r\n        getWindowsWithChannels: channels.getWindowsWithChannels.bind(channels),\r\n        getMy: channels.getMy.bind(channels),\r\n        ready: () => (contexts as any).ready()\r\n    };\r\n}\r\n","import { Glue42 } from \"../../glue\";\r\nimport { default as CallbackRegistryFactory, CallbackRegistry, UnsubscribeFunction } from \"callback-registry\";\r\n\r\nconst CommandMethod = \"T42.Hotkeys.Command\";\r\nconst InvokeMethod = \"T42.Hotkeys.Invoke\";\r\n\r\nconst RegisterCommand = \"register\";\r\nconst UnregisterCommand = \"unregister\";\r\nconst UnregisterAllCommand = \"unregisterAll\";\r\n\r\nexport class HotkeysImpl implements Glue42.Hotkeys.API {\r\n\r\n    private registry: CallbackRegistry = CallbackRegistryFactory();\r\n    private firstHotkey = true;\r\n    private hotkeys = new Map<string, Glue42.Hotkeys.HotkeyInfo>();\r\n\r\n    constructor(private agm: Glue42.AGM.API) {\r\n    }\r\n\r\n    public async register(info: string | Glue42.Hotkeys.HotkeyInfo, callback: Glue42.Hotkeys.HotkeyCallback): Promise<void> {\r\n        if (typeof info === \"undefined\") {\r\n            throw new Error(\"Hotkey parameter missing\");\r\n        }\r\n\r\n        if (typeof info === \"string\") {\r\n            info = {\r\n                hotkey: info\r\n            };\r\n        } else {\r\n            if (!info.hotkey) {\r\n                throw new Error(\"Info's hotkey parameter missing\");\r\n            }\r\n\r\n            info = {\r\n                hotkey: info.hotkey,\r\n                description: info.description\r\n            };\r\n        }\r\n\r\n        const hkToLower = this.formatHotkey(info.hotkey);\r\n        if (this.hotkeys.has(hkToLower)) {\r\n            throw new Error(`Shortcut for ${hkToLower} already registered`);\r\n        }\r\n\r\n        // if very first a hotkey is registered by this application register invoke AGM method\r\n        if (this.firstHotkey) {\r\n            this.firstHotkey = false;\r\n            await this.registerInvokeAGMMethod();\r\n        }\r\n        // store the callback\r\n        this.registry.add(hkToLower, callback);\r\n\r\n        // invoke GD method\r\n        await this.agm.invoke(CommandMethod, { command: RegisterCommand, hotkey: hkToLower, description: info.description });\r\n\r\n        this.hotkeys.set(hkToLower, info);\r\n    }\r\n\r\n    public async unregister(hotkey: string): Promise<void> {\r\n        if (typeof hotkey === \"undefined\") {\r\n            throw new Error(\"hotkey parameter missing\");\r\n        }\r\n\r\n        if (typeof hotkey !== \"string\") {\r\n            throw new Error(\"hotkey parameter must be string\");\r\n        }\r\n\r\n        const hkToLower = this.formatHotkey(hotkey);\r\n        await this.agm.invoke(CommandMethod, { command: UnregisterCommand, hotkey: hkToLower });\r\n        this.hotkeys.delete(hkToLower);\r\n        this.registry.clearKey(hkToLower);\r\n    }\r\n\r\n    public async unregisterAll(): Promise<void> {\r\n        await this.agm.invoke(CommandMethod, { command: UnregisterAllCommand });\r\n        this.hotkeys.clear();\r\n        this.registry.clear();\r\n    }\r\n\r\n    /**\r\n     * Whether this application has registered accelerator.\r\n     * @param hotkey\r\n     */\r\n    public isRegistered(hotkey: string): boolean {\r\n        const hkToLower = this.formatHotkey(hotkey);\r\n        return this.hotkeys.has(hkToLower);\r\n    }\r\n\r\n    private registerInvokeAGMMethod(): void {\r\n        this.agm.register(InvokeMethod, (args: {\r\n            key: string;\r\n        }) => {\r\n            const hkToLower = args.key.toLowerCase();\r\n            const info = this.hotkeys.get(hkToLower);\r\n            this.registry.execute(hkToLower, info);\r\n        });\r\n    }\r\n\r\n    private formatHotkey(hotkey: string): string {\r\n        if (hotkey) {\r\n            return hotkey.replace(/\\s/g, \"\").toLowerCase();\r\n        }\r\n    }\r\n}\r\n","import { Glue42 } from \"../../glue\";\r\nimport { HotkeysImpl } from \"./hotkeys\";\r\n\r\nexport function factory(agm: Glue42.AGM.API): Glue42.Hotkeys.API & { ready: () => Promise<void>; } {\r\n    const hotkeys = new HotkeysImpl(agm);\r\n\r\n    return {\r\n        register: hotkeys.register.bind(hotkeys),\r\n        unregister: hotkeys.unregister.bind(hotkeys),\r\n        unregisterAll: hotkeys.unregisterAll.bind(hotkeys),\r\n        isRegistered: hotkeys.isRegistered.bind(hotkeys),\r\n\r\n        ready: () => Promise.resolve()\r\n    };\r\n}\r\n","import { Glue42 } from \"../glue\";\r\nimport { ActivitiesLibConfigObject, LibConfigObject, InternalConfig, LayoutsLibConfigObject, AppManagerLibConfigObject } from \"./types\";\r\n\r\ninterface InputModeObject {\r\n    mode?: boolean | string;\r\n    logger?: Glue42.LoggerConfig;\r\n}\r\n\r\nexport default (options: Glue42.Config): InternalConfig => {\r\n\r\n    // Possible options per lib (this is InputLibConfig type)\r\n    // * false - library is disabled (e.g. config.appManager = false)\r\n    // * true - library is enabled in running in default mode (e.g config.appManager = true).\r\n    //          Exception is if default mode is false - in that case it runs default true mode.\r\n    // * string - start in some mode (e.g. config.appManager = \"full\")\r\n    // * object - allows further customization (e.g config.appManager = {mode: \"full\", someSetting: 42})\r\n    //\r\n    // Some libs support different running modes, some do not.\r\n    //\r\n    // Currently defaults are:\r\n    // appManager: disabled\r\n    // layouts: enabled in 'slim' mode\r\n    // activities: enabled in 'trackMyTypeAndInitiatedFromMe' mode\r\n    // windows: enabled (does not support modes)\r\n    //\r\n    // InputLibConfig is transformed to LibConfigObject\r\n\r\n    type InputLibConfig = boolean | string | InputModeObject;\r\n\r\n    /**\r\n     * Transforms InputLibConfig (the config as specified from the user)\r\n     * to LibConfigObject(internal library configuration)\r\n     */\r\n    function getLibConfig<T extends LibConfigObject<string>>(value: InputLibConfig, defaultMode: boolean | string, trueMode?: boolean | string): T {\r\n\r\n        // if value is false return undefined\r\n        if (typeof value === \"boolean\" && !value) {\r\n            return undefined;\r\n        }\r\n\r\n        // find the mode of the library\r\n        const mode = getModeAsString(value, defaultMode, trueMode);\r\n\r\n        // if object we will replace the mode because appManager = {mode: true, setting: 42}\r\n        // should be turned into appManager = {mode: 'slim', setting: 42}\r\n        if (typeof value === \"object\") {\r\n            value.mode = mode;\r\n            return value as T;\r\n        }\r\n\r\n        return {\r\n            mode,\r\n        } as T;\r\n    }\r\n\r\n    /**\r\n     * Finds the mode based for a given library\r\n     * 1. If object we call recursively using object.mode for value\r\n     * 1. If the user hasn't specified anything we use the hard coded defaults\r\n     * 3. If the value is false or it got defaulted to false, we return undefined\r\n     * 4. If the value is true we return trueMode or defaultMode (if trueMode is undefined)\r\n     */\r\n    function getModeAsString(value: InputLibConfig, defaultMode: boolean | string, trueMode?: boolean | string): string {\r\n\r\n        if (typeof value === \"object\") {\r\n            // 1. if object\r\n            return getModeAsString(value.mode, defaultMode, trueMode) + \"\";\r\n        } else if (typeof value === \"undefined\") {\r\n            // 2. if the user does not pass anything\r\n            if (typeof defaultMode === \"boolean\" && !defaultMode) {\r\n                // 3. if gets defaulted to false, the library should be off\r\n                return undefined;\r\n            } else {\r\n                return defaultMode + \"\";\r\n            }\r\n        } else if (typeof value === \"boolean\") {\r\n            // 4. if the user passes true, use trueMode or defaultMode\r\n            if (value) {\r\n                // if the user passes true, use trueMode or defaultMode\r\n                return ((trueMode === undefined) ? defaultMode : trueMode) + \"\";\r\n            } else {\r\n                // 3. if the user passes false, the library should be off\r\n                return undefined;\r\n            }\r\n        }\r\n\r\n        return value + \"\";\r\n    }\r\n\r\n    const appDefaultMode = false;\r\n    const appDefaultTrueMode = \"startOnly\";\r\n\r\n    const activitiesDefaultMode = \"trackMyTypeAndInitiatedFromMe\";\r\n\r\n    const layoutsDefaultMode = \"slim\";\r\n\r\n    const exposeGlue = typeof options.exposeGlue === \"boolean\" ? options.exposeGlue : true;\r\n\r\n    return {\r\n        layouts: getLibConfig<LayoutsLibConfigObject>(options.layouts, layoutsDefaultMode),\r\n        activities: getLibConfig<ActivitiesLibConfigObject>(options.activities, activitiesDefaultMode),\r\n        appManager: getLibConfig<AppManagerLibConfigObject>(options.appManager, appDefaultMode, appDefaultTrueMode),\r\n        windows: getLibConfig<LibConfigObject<string>>(options.windows, true),\r\n        channels: getLibConfig<LibConfigObject<string>>(options.channels || false, false),\r\n        displays: getLibConfig<LibConfigObject<string>>(options.displays, true),\r\n        exposeGlue\r\n    };\r\n};\r\n","import { Glue42 } from \"../../glue\";\r\nimport callbackRegistry, { CallbackRegistry, UnsubscribeFunction } from \"callback-registry\";\r\n\r\nexport class Glue42Notification implements Glue42.Notifications.Glue42Notification {\r\n    public readonly actions: Glue42.Notifications.Glue42NotificationAction[];\r\n    public badge: string;\r\n    public body: string;\r\n    public data: any;\r\n    public dir: NotificationDirection;\r\n    public icon: string;\r\n    public image: string;\r\n    public lang: string;\r\n    public renotify: boolean;\r\n    public requireInteraction: boolean;\r\n    public silent: boolean;\r\n    public tag: string;\r\n    public timestamp: number;\r\n    public title: string;\r\n    public readonly vibrate: number[];\r\n\r\n    public onclick: ((this: Notification, ev: Event) => any) | null;\r\n    public onclose: ((this: Notification, ev: Event) => any) | null;\r\n    public onerror: ((this: Notification, ev: Event) => any) | null;\r\n    public onshow: ((this: Notification, ev: Event) => any) | null;\r\n    public onaction: ((this: Notification, ev: Glue42.Notifications.ActionEvent) => any) | null;\r\n\r\n    private callbacks: CallbackRegistry = callbackRegistry();\r\n\r\n    public constructor(public options: Glue42.Notifications.Glue42NotificationOptions) {\r\n        this.actions = options.actions;\r\n        this.body = options.body;\r\n        this.badge = options.badge;\r\n        this.data = options.data;\r\n        this.dir = options.dir;\r\n        this.icon = options.icon;\r\n        this.image = options.image;\r\n        this.lang = options.lang;\r\n        this.renotify = options.renotify;\r\n        this.requireInteraction = options.requireInteraction;\r\n        this.silent = options.silent;\r\n        this.tag = options.tag;\r\n        this.timestamp = options.timestamp;\r\n        this.title = options.title;\r\n    }\r\n\r\n    public close(): void {\r\n        throw new Error(\"Method not implemented.\");\r\n    }\r\n    public addEventListener<K extends \"click\" | \"close\" | \"error\" | \"show\">(type: K, listener: (this: Notification, ev: NotificationEventMap[K]) => any, options?: boolean | AddEventListenerOptions): void;\r\n    public addEventListener(type: string, listener: EventListenerOrEventListenerObject, options?: boolean | AddEventListenerOptions): void;\r\n    public addEventListener(type: any, listener: any, options?: any) {\r\n        this.callbacks.add(type, listener);\r\n    }\r\n    public removeEventListener<K extends \"click\" | \"close\" | \"error\" | \"show\">(type: K, listener: (this: Notification, ev: NotificationEventMap[K]) => any, options?: boolean | EventListenerOptions): void;\r\n    public removeEventListener(type: string, listener: EventListenerOrEventListenerObject, options?: boolean | EventListenerOptions): void;\r\n    public removeEventListener(type: any, listener: any, options?: any) {\r\n        // DO NOTHING FOR NOW\r\n    }\r\n    public dispatchEvent(event: Event): boolean {\r\n        this.callbacks.execute(event.type, event);\r\n        return true;\r\n    }\r\n}\r\n","import { Glue42 } from \"../../glue\";\r\n\r\nexport class PanelAPI implements Glue42.Notifications.NotificationPanelAPI {\r\n    constructor(private interop: Glue42.Interop.API) {\r\n    }\r\n\r\n    public toggle(): Promise<any> {\r\n        return this.interop.invoke(\"T42.Notifications.Show\");\r\n    }\r\n    public show(): Promise<any> {\r\n        return this.interop.invoke(\"T42.Notifications.Show\", { show: true });\r\n    }\r\n    public hide(): Promise<any> {\r\n        return this.interop.invoke(\"T42.Notifications.Hide\");\r\n    }\r\n    public isVisible(): Promise<boolean> {\r\n        throw new Error(\"Method not implemented.\");\r\n    }\r\n}\r\n","import { Glue42 } from \"../../glue\";\r\nimport { Glue42Notification } from \"./notification\";\r\nimport { GnsNotificationSettings, GnsNotificationActionSettings, GnsNotificationActionPayload } from \"./types\";\r\nimport generate from \"shortid\";\r\nimport { PanelAPI } from \"./panel\";\r\nconst STARTING_INDEX = 0;\r\n\r\nexport class Notifications implements Glue42.Notifications.API {\r\n    public panel: PanelAPI;\r\n\r\n    private methodsRegistered: boolean = false;\r\n    private NOTIFICATIONS_CONFIGURE_METHOD_NAME = \"T42.Notifications.Configure\";\r\n    private readonly methodNameRoot = \"T42.Notifications.Handler-\" + generate();\r\n    private nextId = 0;\r\n    private notifications: { [id: string]: Glue42Notification } = {};\r\n\r\n    constructor(private interop: Glue42.Interop.API) {\r\n        this.panel = new PanelAPI(interop);\r\n    }\r\n\r\n    public get maxActions(): number {\r\n        return 2;\r\n    }\r\n\r\n    public async raise(options: Glue42.Notifications.Glue42NotificationOptions): Promise<Glue42.Notifications.Glue42Notification> {\r\n        if (!options) {\r\n            throw new Error(\"invalid options - should be an object\");\r\n        }\r\n        if (!options.title) {\r\n            throw new Error(\"invalid options - should have title\");\r\n        }\r\n        if (!this.methodsRegistered) {\r\n            const bunchOfPromises = [];\r\n            for (let index = STARTING_INDEX; index < this.maxActions; index++) {\r\n                bunchOfPromises.push(\r\n                    this.interop.register(this.methodNameRoot + \"_\" + index, this.handleNotificationAction.bind(this))\r\n                );\r\n            }\r\n\r\n            await Promise.all(bunchOfPromises);\r\n            this.methodsRegistered = true;\r\n        }\r\n\r\n        // transform actions\r\n        const id = String(this.nextId++);\r\n        const type = options.type ?? \"Notification\";\r\n        const notification: GnsNotificationSettings = {\r\n            title: options.title,\r\n            type,\r\n            severity: options.severity ?? \"None\",\r\n            description: options.body,\r\n            glueRoutingDetailMethodName: this.methodNameRoot + \"_\" + STARTING_INDEX,\r\n            actions: [],\r\n            sourceId: id,\r\n            source: options.source\r\n        };\r\n\r\n        if (options.actions) {\r\n            const validActions = options.actions.slice(0, this.maxActions);\r\n\r\n            let index = STARTING_INDEX;\r\n            for (const action of validActions) {\r\n                const args: GnsNotificationActionPayload = { // this should include user arguments (action.interop?.arguments)\r\n                    g42notificationId: id,\r\n                    g42action: action.action,\r\n                    g42interopMethod: action.interop?.method,\r\n                    g42interopTarget: action.interop?.target,\r\n                };\r\n                // TODO, properly convert between args and GNS value\r\n                const parameters = Object.keys(args).map((key) => {\r\n                    const value = (args as any)[key];\r\n                    return {\r\n                        name: key,\r\n                        value: {\r\n                            stringValue: value\r\n                        }\r\n                    };\r\n                });\r\n\r\n                const glueAction: GnsNotificationActionSettings = {\r\n                    name: this.methodNameRoot + \"_\" + index,\r\n                    description: action.title,\r\n                    displayName: action.title,\r\n                    parameters\r\n                };\r\n\r\n                notification.actions.push(glueAction);\r\n                index++;\r\n            }\r\n        }\r\n\r\n        if (options.icon) {\r\n            notification.attributes = notification.attributes || [];\r\n            notification.attributes.push(\r\n                { key: \"icon\", value: { stringValue: options.icon } }\r\n            );\r\n        }\r\n\r\n        if (options.data) {\r\n            notification.attributes = notification.attributes || [];\r\n            const dataAsString = JSON.stringify(options.data);\r\n            notification.attributes.push(\r\n                { key: \"data\", value: { stringValue: dataAsString } }\r\n            );\r\n        }\r\n\r\n        if (typeof options.panelExpiry === \"number\") {\r\n            notification.attributes = notification.attributes || [];\r\n            notification.attributes.push(\r\n                { key: \"panelExpiry\", value: { stringValue: options.panelExpiry + \"\" } }\r\n            );\r\n        }\r\n\r\n        if (typeof options.toastExpiry === \"number\") {\r\n            notification.attributes = notification.attributes || [];\r\n            notification.attributes.push(\r\n                { key: \"toastExpiry\", value: { stringValue: options.toastExpiry + \"\" } }\r\n            );\r\n        }\r\n\r\n        await this.interop.invoke(\"T42.GNS.Publish.RaiseNotification\", { notification });\r\n\r\n        const g42notification = new Glue42Notification(options);\r\n        this.notifications[id] = g42notification;\r\n        return g42notification;\r\n    }\r\n\r\n    public async setFilter(filter: Glue42.Notifications.NotificationFilter): Promise<Glue42.Notifications.NotificationFilter> {\r\n        const result = await this.interop.invoke(\"T42.Notifications.Filter\", filter);\r\n        return result.returned;\r\n    }\r\n\r\n    public async getFilter(): Promise<Glue42.Notifications.NotificationFilter> {\r\n        const result = await this.interop.invoke(\"T42.Notifications.Filter\");\r\n        return result.returned;\r\n    }\r\n\r\n    public async configure(options: Glue42.Notifications.Configuration): Promise<void> {\r\n        if (!options || Array.isArray(options)) {\r\n            throw new Error(\"Invalid options - should be an object.\");\r\n        }\r\n\r\n        if (Object.values(options).length === 0) {\r\n            throw new Error(\"The argument must be a non-empty object.\");\r\n        }\r\n\r\n        Object.values(options).forEach((value) => {\r\n            if (typeof value !== undefined && typeof value !== \"boolean\") {\r\n                throw new Error(\"Expected type of option values - boolean.\");\r\n            }\r\n        });\r\n\r\n        const result = await this.interop.invoke(this.NOTIFICATIONS_CONFIGURE_METHOD_NAME, options);\r\n        return result.returned;\r\n    }\r\n\r\n    private handleNotificationAction(args: any) {\r\n        if (args.g42notificationId) {\r\n            // action click\r\n            const payload: GnsNotificationActionPayload = args as GnsNotificationActionPayload;\r\n            const id = payload.g42notificationId;\r\n            const notification = this.notifications[id];\r\n            if (!notification) {\r\n                return;\r\n            }\r\n\r\n            // user event\r\n            const event: { type: string, action?: string } = {\r\n                type: \"onaction\",\r\n                action: payload.g42action\r\n            };\r\n\r\n            if (notification.onaction) {\r\n                notification.onaction(event as Glue42.Notifications.ActionEvent);\r\n            }\r\n\r\n            // interop\r\n            const actionDefinition = (notification.actions || []).find((item) => item.action === payload.g42action);\r\n            const actionInterop = actionDefinition.interop;\r\n            if (actionInterop) {\r\n                this.interop.invoke(actionInterop.method, actionInterop.arguments || {}, actionInterop.target || \"best\");\r\n            }\r\n\r\n            // dispatch\r\n            notification.dispatchEvent(event as Glue42.Notifications.ActionEvent);\r\n        } else if (args.notification && args.notification.sourceNotificationId) {\r\n            // notification click\r\n            const id = args.notification.sourceNotificationId;\r\n            const notification = this.notifications[id];\r\n            if (!notification) {\r\n                return;\r\n            }\r\n\r\n            // user event\r\n            const event = { type: \"onclick\" };\r\n            if (notification.onclick) {\r\n                notification.onclick(event as Event);\r\n            }\r\n\r\n            // interop call\r\n            const clickInterop = notification.options.clickInterop;\r\n            if (clickInterop) {\r\n                this.interop.invoke(clickInterop.method, clickInterop.arguments || {}, clickInterop.target || \"best\");\r\n            }\r\n\r\n            // dispatch\r\n            notification.dispatchEvent(event as Event);\r\n        }\r\n    }\r\n}\r\n","import CallbackRegistryFactory, { CallbackRegistry, UnsubscribeFunction } from \"callback-registry\";\r\nimport { Glue42 } from \"../../glue\";\r\nimport { Glue42Core } from \"@glue42/core\";\r\n\r\nconst ThemesConfigurationMethodName = \"T42.Themes.Configuration\";\r\ninterface ThemesConfiguration {\r\n    setThemesMethodName: string;\r\n    getThemesMethodName: string;\r\n    sharedContextName: string;\r\n    getThemesConfigurationMethodName: string;\r\n}\r\ninterface GetResult {\r\n    all: Glue42.Themes.Theme[];\r\n    selected: string;\r\n}\r\nexport class ThemesImpl implements Glue42.Themes.API {\r\n    private registry: CallbackRegistry = CallbackRegistryFactory();\r\n    private sharedContextName: string;\r\n    private getMethodName: string;\r\n    private setMethodName: string;\r\n    private isSubscribed = false;\r\n\r\n    constructor(private core: Glue42Core.GlueCore) {\r\n        this.getConfiguration();\r\n    }\r\n\r\n    public async list(): Promise<Glue42.Themes.Theme[]> {\r\n        await this.getConfiguration();\r\n        if (!this.getMethodName) {\r\n            throw new Error(\"not supported\");\r\n        }\r\n        return (await this.getAll()).returned.all;\r\n    }\r\n\r\n    public async getCurrent(): Promise<Glue42.Themes.Theme> {\r\n        await this.getConfiguration();\r\n        if (!this.getMethodName) {\r\n            throw new Error(\"not supported\");\r\n        }\r\n        const all = await this.getAll();\r\n        return all.returned.all.find((t) => t.name === all.returned.selected);\r\n    }\r\n\r\n    public async select(theme: string): Promise<void> {\r\n        await this.getConfiguration();\r\n        if (!this.setMethodName) {\r\n            throw new Error(\"not supported\");\r\n        }\r\n\r\n        await this.core.interop.invoke(this.setMethodName, { theme });\r\n    }\r\n\r\n    public onChanged(callback: (theme: Glue42.Themes.Theme) => any): UnsubscribeFunction {\r\n        this.subscribe();\r\n        return this.registry.add(\"changed\", callback);\r\n    }\r\n\r\n    private async getConfiguration() {\r\n        try {\r\n            if (this.sharedContextName) {\r\n                return;\r\n            }\r\n            const config = await this.core.interop.invoke<ThemesConfiguration>(ThemesConfigurationMethodName);\r\n            this.sharedContextName = config.returned.sharedContextName;\r\n            this.getMethodName = config.returned.getThemesMethodName;\r\n            this.setMethodName = config.returned.setThemesMethodName;\r\n        } catch (error) {\r\n            return;\r\n        }\r\n    }\r\n\r\n    private async getAll() {\r\n        await this.getConfiguration();\r\n        return await this.core.interop.invoke<GetResult>(this.getMethodName);\r\n    }\r\n\r\n    private async subscribe() {\r\n        await this.getConfiguration();\r\n        if (this.isSubscribed) {\r\n            return;\r\n        }\r\n        this.isSubscribed = true;\r\n        this.core.contexts.subscribe(this.sharedContextName, (data: { all: Glue42.Themes.Theme[], selected: string }) => {\r\n            if (data && data.all && data.selected) {\r\n                this.registry.execute(\"changed\", data.all.find((t) => t.name === data.selected));\r\n            }\r\n        });\r\n    }\r\n}\r\n","import { Glue42 } from \"../../glue\";\r\nimport { ThemesImpl } from \"./themes\";\r\nimport { Glue42Core } from \"@glue42/core\";\r\n\r\nexport function factory(core: Glue42Core.GlueCore): Glue42.Themes.API & { ready: () => Promise<void>; } {\r\n    const themes = new ThemesImpl(core);\r\n\r\n    return {\r\n        list: themes.list.bind(themes),\r\n        getCurrent: themes.getCurrent.bind(themes),\r\n        select: themes.select.bind(themes),\r\n        onChanged: themes.onChanged.bind(themes),\r\n        ready: () => Promise.resolve(),\r\n    };\r\n}\r\n","\r\nexport const GLUE42_FDC3_INTENTS_METHOD_PREFIX = \"Tick42.FDC3.Intents.\";\r\nexport const INTENTS_RESOLVER_INTEROP_PREFIX = \"T42.Intents.Resolver.Control\";\r\n\r\nexport const INTENTS_RESOLVER_WIDTH = 400;\r\nexport const INTENTS_RESOLVER_HEIGHT = 440;\r\n\r\nexport const INTENT_HANDLER_DEFAULT_PROPS = [\"applicationName\", \"applicationTitle\", \"type\"];\r\nexport const INTENTS_RESOLVER_APP_NAME = \"intentsResolver\";\r\n","import shortid from \"shortid\";\r\nimport { Glue42 } from \"../../glue\";\r\nimport { AppDefinition, GetWindowsInfoResult, GetWindowsInfoResultItem, IntentInfo, IntentsResolverResponse, IntentsResolverResponsePromise, IntentsResolverResponseValidator, IntentsResolverStartContext } from \"./types\";\r\nimport { INTENTS_RESOLVER_INTEROP_PREFIX, GLUE42_FDC3_INTENTS_METHOD_PREFIX, INTENTS_RESOLVER_HEIGHT, INTENTS_RESOLVER_WIDTH, INTENT_HANDLER_DEFAULT_PROPS, INTENTS_RESOLVER_APP_NAME } from \"./constants\";\r\nexport class Intents implements Glue42.Intents.API {\r\n    private myIntents = new Set<string>();\r\n\r\n    private intentsResolverAppName: string;\r\n    private readonly intentsResolverResponsePromises: { [ instanceId: string ]: IntentsResolverResponsePromise } = {};\r\n\r\n    private useIntentsResolverUI: boolean = true;\r\n\r\n    constructor(private interop: Glue42.Interop.API, private windows: Glue42.Windows.API, private logger: Glue42.Logger.API, options: Glue42.Config, private appManager?: Glue42.AppManager.API) {\r\n        this.checkIfIntentsResolverIsEnabled(options, appManager);\r\n    }\r\n\r\n    public async find(intentFilter?: string | Glue42.Intents.IntentFilter): Promise<Glue42.Intents.Intent[]> {\r\n        let intents = await this.all();\r\n        if (typeof intentFilter === \"undefined\") {\r\n            return intents;\r\n        }\r\n\r\n        if (typeof intentFilter === \"string\") {\r\n            return intents.filter((intent) => intent.name === intentFilter);\r\n        }\r\n\r\n        if (typeof intentFilter !== \"object\") {\r\n            throw new Error(\"Please provide the intentFilter as a string or an object!\");\r\n        }\r\n\r\n        if (intentFilter.contextType) {\r\n            const ctToLower = intentFilter.contextType.toLowerCase();\r\n            intents = intents.filter((intent) => intent.handlers.some((handler) => handler.contextTypes?.some((ct) => ct.toLowerCase() === ctToLower)));\r\n        }\r\n\r\n        if (intentFilter.resultType) {\r\n            const resultTypeToLower = intentFilter.resultType.toLowerCase();\r\n            intents = intents.filter((intent) => intent.handlers.some((handler) => handler.resultType?.toLowerCase() === resultTypeToLower));\r\n        }\r\n\r\n        if (intentFilter.name) {\r\n            intents = intents.filter((intent) => intent.name === intentFilter.name);\r\n        }\r\n\r\n        return intents;\r\n    }\r\n\r\n    public async raise(intent: string | Glue42.Intents.IntentRequest): Promise<Glue42.Intents.IntentResult> {\r\n        if ((typeof intent !== \"string\" && typeof intent !== \"object\") || (typeof intent === \"object\" && typeof intent.intent !== \"string\")) {\r\n            throw new Error(\"Please provide the intent as a string or an object with an intent property!\");\r\n        }\r\n\r\n        if (typeof intent === \"string\") {\r\n            intent = { intent };\r\n        }\r\n\r\n        const intentDef = await this.get(intent.intent);\r\n\r\n        if (typeof intentDef === \"undefined\") {\r\n            throw new Error(`Intent ${intent.intent} not found.`);\r\n        }\r\n\r\n        if (intent.target || !this.useIntentsResolverUI) {\r\n            return this.raiseIntent(intent);\r\n        }\r\n\r\n        const intentsResolverApp = this.appManager.application(this.intentsResolverAppName);\r\n\r\n        if (!intentsResolverApp) {\r\n            this.logger.warn(`Intent Resolver Application with name ${this.intentsResolverAppName} not found. Intents Resolver won't be used for handling raised intents`);\r\n\r\n            return this.raiseIntent(intent);\r\n        }\r\n\r\n        const hasOneHandler = (await this.getIntentHandlers(intent.intent)).length === 1;\r\n\r\n        if (hasOneHandler) {\r\n            return this.raiseIntent(intent);\r\n        }\r\n\r\n        const registeredMethod = await this.registerIntentResolverMethod();\r\n\r\n        const resolverInstance = await this.openIntentResolverApplication(intent, registeredMethod);\r\n\r\n        const { handler } = await this.intentsResolverResponsePromises[resolverInstance.id].promise;\r\n\r\n        resolverInstance.stop().catch((err) => this.logger.warn(err));\r\n\r\n        const target = handler.type === \"app\"\r\n            ? { app: handler.applicationName }\r\n            : { instance: handler.instanceId };\r\n\r\n        const intentRequestData = { ...intent, target };\r\n\r\n        return this.raiseIntent(intentRequestData);\r\n    }\r\n\r\n    public async all(): Promise<Glue42.Intents.Intent[]> {\r\n        // Gathers all intents from:\r\n        // 1. Application definitions\r\n        // 2. Running instances (application can register dynamic intents by calling `addIntentListener()` that aren't predefined inside of their application definitions)\r\n        // It also populates intent handlers (actual entities that can handle the intent).\r\n        let apps: AppDefinition[];\r\n        try {\r\n            const result = await this.interop.invoke<{ applications: AppDefinition[] }>(\"T42.ACS.GetApplications\", { withIntentsInfo: true });\r\n            apps = result.returned.applications;\r\n        } catch (e) {\r\n            this.logger.error(`Failed to get the applications!`, e);\r\n            return [];\r\n        }\r\n        const intents: { [key: string]: Glue42.Intents.Intent } = {};\r\n        const appsWithIntents = apps.filter((app) => app.intents && app.intents.length > 0);\r\n        //  Gather app handlers from application definitions.\r\n        for (const app of appsWithIntents) {\r\n            for (const intentDef of app.intents) {\r\n                let intent = intents[intentDef.name];\r\n                if (!intent) {\r\n                    intent = {\r\n                        name: intentDef.name,\r\n                        handlers: [],\r\n                    };\r\n                    intents[intentDef.name] = intent;\r\n                }\r\n\r\n                const handler: Glue42.Intents.IntentHandler = {\r\n                    applicationName: app.name,\r\n                    applicationTitle: app.title || \"\",\r\n                    applicationDescription: app.caption,\r\n                    displayName: intentDef.displayName,\r\n                    contextTypes: intentDef.contexts,\r\n                    applicationIcon: app.icon,\r\n                    type: \"app\",\r\n                    resultType: intentDef.resultType\r\n                };\r\n\r\n                intent.handlers.push(handler);\r\n            }\r\n        }\r\n\r\n        const servers = this.interop.servers();\r\n        const serverWindowIds = servers.map((server) => server.windowId).filter((serverWindowId) => typeof serverWindowId !== \"undefined\");\r\n\r\n        const T42WndGetInfo = \"T42.Wnd.GetInfo\";\r\n        const isT42WndGetInfoMethodRegistered = this.interop.methods().some((method) => method.name === T42WndGetInfo);\r\n\r\n        let windowsInfos: GetWindowsInfoResultItem[];\r\n        // For backwards compatibility with previous versions of Glue Desktop, the windows' titles will be attempted to be obtained using the Windows API.\r\n        if (isT42WndGetInfoMethodRegistered) {\r\n            try {\r\n                const result = await this.interop.invoke<GetWindowsInfoResult>(T42WndGetInfo, { ids: serverWindowIds });\r\n                windowsInfos = result.returned.windows;\r\n            } catch (e) {\r\n                // Swallow the error. The windows' titles will be attempted to be obtained using the Windows API.\r\n            }\r\n        }\r\n\r\n        // Discover all running instances that provide intents, and add them to the corresponding intent.\r\n        for (const server of servers) {\r\n            await Promise.all(server.getMethods()\r\n                .filter((method) => method.name.startsWith(GLUE42_FDC3_INTENTS_METHOD_PREFIX))\r\n                .map(async (method) => {\r\n                    const intentName = method.name.replace(GLUE42_FDC3_INTENTS_METHOD_PREFIX, \"\");\r\n                    let intent = intents[intentName];\r\n                    if (!intent) {\r\n                        intent = {\r\n                            name: intentName,\r\n                            handlers: [],\r\n                        };\r\n                        intents[intentName] = intent;\r\n                    }\r\n                    const info = method.flags.intent as Omit<Glue42.Intents.AddIntentListenerRequest, \"intent\">;\r\n\r\n                    const app = apps.find((appWithIntents) => appWithIntents.name === server.application);\r\n                    let appIntent: IntentInfo | undefined;\r\n                    if (app && app.intents) {\r\n                        appIntent = app.intents.find((appDefIntent) => appDefIntent.name === intentName);\r\n                    }\r\n\r\n                    const title = await this.windowsIdToTitle(server.windowId, windowsInfos);\r\n                    const handler: Glue42.Intents.IntentHandler = {\r\n                        instanceId: server.instance,\r\n                        applicationName: server.application,\r\n                        applicationIcon: info.icon || app?.icon,\r\n                        applicationTitle: app?.title || \"\",\r\n                        applicationDescription: info.description || app?.caption,\r\n                        displayName: info.displayName || appIntent?.displayName,\r\n                        contextTypes: info.contextTypes || appIntent?.contexts,\r\n                        instanceTitle: title,\r\n                        type: \"instance\",\r\n                        resultType: appIntent?.resultType || info.resultType\r\n                    };\r\n                    intent.handlers.push(handler);\r\n                }));\r\n        }\r\n\r\n        return Object.values(intents);\r\n    }\r\n\r\n    public addIntentListener(intent: string | Glue42.Intents.AddIntentListenerRequest, handler: (context: Glue42.Intents.IntentContext) => any): { unsubscribe: () => void } {\r\n        if ((typeof intent !== \"string\" && typeof intent !== \"object\") || (typeof intent === \"object\" && typeof intent.intent !== \"string\")) {\r\n            throw new Error(\"Please provide the intent as a string or an object with an intent property!\");\r\n        }\r\n        if (typeof handler !== \"function\") {\r\n            throw new Error(\"Please provide the handler as a function!\");\r\n        }\r\n\r\n        // `addIntentListener()` is sync.\r\n        // tslint:disable-next-line:no-console\r\n        const intentName = typeof intent === \"string\" ? intent : intent.intent;\r\n        const methodName = `${GLUE42_FDC3_INTENTS_METHOD_PREFIX}${intentName}`;\r\n        let intentFlag: Omit<Glue42.Intents.AddIntentListenerRequest, \"intent\"> = {};\r\n        let registerPromise: Promise<void>;\r\n\r\n        const alreadyRegistered = this.myIntents.has(intentName);\r\n\r\n        if (alreadyRegistered) {\r\n            throw new Error(`Intent listener for intent ${intentName} already registered!`);\r\n        }\r\n\r\n        this.myIntents.add(intentName);\r\n\r\n        const result = {\r\n            unsubscribe: (): void => {\r\n                this.myIntents.delete(intentName);\r\n\r\n                registerPromise\r\n                    .then(() => this.interop.unregister(methodName))\r\n                    .catch((err) => this.logger.trace(`Unregistration of a method with name ${methodName} failed with reason: ${err}`));\r\n            }\r\n        };\r\n\r\n        if (typeof intent === \"object\") {\r\n            const { intent: removed, ...rest } = intent;\r\n            intentFlag = rest;\r\n        }\r\n\r\n        registerPromise = this.interop.register({ name: methodName, flags: { intent: intentFlag } }, (args: Glue42.Intents.IntentContext) => {\r\n            if (this.myIntents.has(intentName)) {\r\n                return handler(args);\r\n            }\r\n        });\r\n\r\n        registerPromise.catch((err) => {\r\n            this.myIntents.delete(intentName);\r\n\r\n            this.logger.warn(`Registration of a method with name ${methodName} failed with reason: ${err}`);\r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n    private async get(intent: string): Promise<Glue42.Intents.Intent> {\r\n        return (await this.all()).find((registeredIntent) => registeredIntent.name === intent);\r\n    }\r\n\r\n    private async raiseIntent(intent: Glue42.Intents.IntentRequest): Promise<Glue42.Intents.IntentResult> {\r\n        const intentName = intent.intent;\r\n        const intentDef = await this.get(intentName);\r\n\r\n        if (typeof intentDef === \"undefined\") {\r\n            throw new Error(`Intent ${intentName} not found.`);\r\n        }\r\n\r\n        const isDynamicIntent = !intentDef.handlers.some((intentDefHandler) => intentDefHandler.type === \"app\");\r\n\r\n        // Default to \"reuse\" in the case of a dynamic intent and to \"startNew\" if target isn't provided.\r\n        const target = intent.target || (isDynamicIntent ? \"reuse\" : \"startNew\");\r\n        // The handler that will execute the intent.\r\n        let handler: Glue42.Intents.IntentHandler;\r\n        const anAppHandler = intentDef.handlers.find((intentHandler) => intentHandler.type === \"app\");\r\n        if (target === \"startNew\") {\r\n            handler = anAppHandler;\r\n        } else if (target === \"reuse\") {\r\n            const anInstanceHandler = intentDef.handlers.find((intentHandler) => intentHandler.type === \"instance\");\r\n            handler = anInstanceHandler || anAppHandler;\r\n        } else if (target.instance) {\r\n            handler = intentDef.handlers.find((intentHandler) => intentHandler.type === \"instance\" && intentHandler.instanceId === target.instance);\r\n        } else if (target.app) {\r\n            handler = intentDef.handlers.find((intentHandler) => intentHandler.type === \"app\" && intentHandler.applicationName === target.app);\r\n        } else {\r\n            throw new Error(`Invalid intent target: ${JSON.stringify(target)}`);\r\n        }\r\n\r\n        if (!handler) {\r\n            throw new Error(`Can not raise intent for request ${JSON.stringify(intent)} - can not find intent handler.`);\r\n        }\r\n\r\n        let instanceId = handler.instanceId;\r\n        if (handler.type === \"app\") {\r\n            instanceId = await this.invokeStartApp(handler.applicationName, intent.context, intent.options);\r\n        }\r\n\r\n        const result: Partial<Glue42.Intents.IntentResult> = await this.raiseIntentToInstance(instanceId, intentName, intent.context);\r\n        result.request = intent;\r\n        result.handler = handler;\r\n\r\n        return result as Glue42.Intents.IntentResult;\r\n\r\n    }\r\n\r\n    private async raiseIntentToInstance(instanceId: string, intent: string, context?: Glue42.Intents.IntentContext): Promise<{ result: any }> {\r\n        const methodName = `${GLUE42_FDC3_INTENTS_METHOD_PREFIX}${intent}`;\r\n        let interopServer = this.interop.servers().find((server) => server.instance === instanceId);\r\n        if (!interopServer) {\r\n            // Wait 30 sec for the server to appear.\r\n            await (new Promise<void>((resolve, reject) => {\r\n                let timeoutId: any;\r\n\r\n                const unsub = this.interop.serverAdded((server) => {\r\n                    if (server.instance === instanceId) {\r\n                        interopServer = server;\r\n                        resolve();\r\n                        clearTimeout(timeoutId);\r\n                        unsub();\r\n                    }\r\n                });\r\n\r\n                timeoutId = setTimeout(() => {\r\n                    unsub();\r\n                    reject(new Error(`Can not find interop server for instance ${instanceId}`));\r\n                }, 30 * 1000);\r\n            }));\r\n        }\r\n\r\n        const method = interopServer.getMethods().find((registeredMethod) => registeredMethod.name === methodName);\r\n        if (!method) {\r\n            // Wait 10 sec for the method to appear.\r\n            await (new Promise<void>((resolve, reject) => {\r\n                let timeoutId: any;\r\n\r\n                const unsub = this.interop.methodAdded((addedMethod) => {\r\n                    if (addedMethod.name === methodName) {\r\n                        resolve();\r\n                        clearTimeout(timeoutId);\r\n                        unsub();\r\n                    }\r\n                });\r\n\r\n                timeoutId = setTimeout(() => {\r\n                    unsub();\r\n                    reject(new Error(`Can not find interop method ${methodName} for instance ${instanceId}`));\r\n                }, 120000);\r\n            }));\r\n        }\r\n\r\n        const result = await this.interop.invoke(methodName, context, { instance: instanceId });\r\n\r\n        const gdWin = this.windows.findById(instanceId);\r\n        gdWin.focus();\r\n\r\n        return {\r\n            result: result.returned\r\n        };\r\n    }\r\n\r\n    private async windowsIdToTitle(id: string, windowsInfos?: GetWindowsInfoResultItem[]): Promise<string> {\r\n        if (typeof windowsInfos !== \"undefined\") {\r\n            return windowsInfos.find((windowsInfo) => windowsInfo.id === id)?.title;\r\n        }\r\n\r\n        // The Windows API could be undefined e.g. when running inside of a node environment.\r\n        const window = this.windows?.findById(id);\r\n        const title = await window?.getTitle();\r\n        return title;\r\n    }\r\n\r\n    private async openIntentResolverApplication(requestObj: Glue42.Intents.IntentRequest, methodName: string): Promise<Glue42.AppManager.Instance> {\r\n        const startContext: IntentsResolverStartContext = {\r\n            intent: requestObj.intent,\r\n            callerId: this.interop.instance.instance!,\r\n            methodName\r\n        };\r\n\r\n        const startOptions = await this.composeStartOptions();\r\n\r\n        const instance = await this.appManager.application(this.intentsResolverAppName).start(startContext, startOptions);\r\n\r\n        this.subscribeOnInstanceStopped(instance);\r\n\r\n        this.createResponsePromise(requestObj.intent, instance.id, methodName);\r\n\r\n        return instance;\r\n    }\r\n\r\n    private async registerIntentResolverMethod(): Promise<string> {\r\n        const methodName = INTENTS_RESOLVER_INTEROP_PREFIX + shortid();\r\n\r\n        await this.interop.register(methodName, this.resolverResponseHandler.bind(this));\r\n\r\n        return methodName;\r\n    }\r\n\r\n    private resolverResponseHandler(args: any, callerId: Glue42.Interop.Instance): void {\r\n        const { instance } = callerId;\r\n\r\n        const isValid = this.validateIntentsResolverResponse(args);\r\n\r\n        if (!isValid) {\r\n            this.intentsResolverResponsePromises[instance].reject(isValid.error);\r\n\r\n            this.cleanUpIntentResolverPromise(instance);\r\n        }\r\n\r\n        const validResponse = isValid.ok;\r\n\r\n        this.intentsResolverResponsePromises[instance].resolve(validResponse);\r\n\r\n        this.cleanUpIntentResolverPromise(instance);\r\n    }\r\n\r\n    private async composeStartOptions(): Promise<Glue42.AppManager.ApplicationStartOptions> {\r\n        const bounds = await this.windows.my().getBounds();\r\n\r\n        return {\r\n            top: (bounds.height - INTENTS_RESOLVER_HEIGHT) / 2 + bounds.top,\r\n            left: (bounds.width - INTENTS_RESOLVER_WIDTH) / 2 + bounds.left,\r\n        };\r\n    }\r\n\r\n    private createResponsePromise(intent: string, instanceId: string, methodName: string): void {\r\n        let resolve;\r\n        let reject;\r\n\r\n        const promise = new Promise<IntentsResolverResponse>((res, rej) => {\r\n            resolve = res;\r\n            reject = rej;\r\n        });\r\n\r\n        this.intentsResolverResponsePromises[instanceId] = { intent, resolve, reject, promise, methodName };\r\n    }\r\n\r\n    private async invokeStartApp(application: string, context: any, options?: Glue42.AppManager.ApplicationStartOptions) {\r\n        const result = await this.interop.invoke<{ Name: string, Id: string }>(\"T42.ACS.StartApplication\", { Name: application, options });\r\n        return result.returned.Id;\r\n    }\r\n\r\n    private subscribeOnInstanceStopped(instance: Glue42.AppManager.Instance): void {\r\n        const unsub = instance.onStopped((inst: Glue42.AppManager.Instance) => {\r\n            const intentPromise = this.intentsResolverResponsePromises[inst.id];\r\n\r\n            if (!intentPromise) {\r\n                return unsub();\r\n            }\r\n\r\n            intentPromise.reject(`Cannot resolve raise intent ${intentPromise.intent} - User closed ${this.intentsResolverAppName} app without choosing an intent handler`);\r\n\r\n            this.cleanUpIntentResolverPromise(inst.id);\r\n\r\n            unsub();\r\n        });\r\n    }\r\n\r\n    private async getIntentHandlers(intentName: string): Promise<Glue42.Intents.IntentHandler[]> {\r\n        const intents = await this.find(intentName);\r\n\r\n        return intents.reduce((flattenHandlers: Glue42.Intents.IntentHandler[], currentIntent: Glue42.Intents.Intent) => flattenHandlers.concat(...currentIntent.handlers), []);\r\n    }\r\n\r\n    private async cleanUpIntentResolverPromise(instanceId: string) {\r\n        const intentPromise = this.intentsResolverResponsePromises[instanceId];\r\n\r\n        if (!intentPromise) {\r\n            return;\r\n        }\r\n\r\n        // typings are wrong and mark unregister as a sync method\r\n        const unregisterPromise = this.interop.unregister(intentPromise.methodName) as unknown as Promise<void>;\r\n\r\n        unregisterPromise.catch((error) => this.logger.warn(error));\r\n\r\n        delete this.intentsResolverResponsePromises[instanceId];\r\n    }\r\n\r\n    private validateIntentsResolverResponse(responseObj: any): IntentsResolverResponseValidator {\r\n        const invalidKey = Object.keys(responseObj).some((key) => key !== \"intent\" && key !== \"handler\");\r\n\r\n        if (invalidKey) {\r\n            return { isValid: false, error: \"Response is not a valid object. Expected { intent: string, handler: IntentHandler }\"};\r\n        }\r\n\r\n        if (typeof responseObj.intent !== \"string\") {\r\n            return { isValid: false, error: `Response object has invalid 'intent' key. Expected a string, got ${typeof responseObj.intent}` };\r\n        }\r\n\r\n        if (typeof responseObj.handler !== \"object\") {\r\n            return { isValid: false, error: `Response object has invalid 'handler' key. Expected an object, got ${typeof responseObj.handler}` };\r\n        }\r\n\r\n        const compulsoryKeysExist = INTENT_HANDLER_DEFAULT_PROPS.every((key) => key in responseObj.handler);\r\n\r\n        if (!compulsoryKeysExist) {\r\n            return { isValid: false, error: `Handler in Response object does not provide the compulsory key: ${compulsoryKeysExist}`};\r\n        }\r\n\r\n        return { isValid: true, ok: { intent: responseObj.intent, handler: { ...responseObj.handler }} };\r\n    }\r\n\r\n    private checkIfIntentsResolverIsEnabled(options: Glue42.Config, appManager: Glue42.AppManager.API): void {\r\n        /* if Glue is initialized with { appManager: false }, fallback to previous implementation and do not use Intents Resolver UI */\r\n        if (!appManager) {\r\n            this.useIntentsResolverUI = false;\r\n            return;\r\n        }\r\n\r\n        this.useIntentsResolverUI = typeof options.intents?.enableIntentsResolverUI === \"boolean\"\r\n            ? options.intents.enableIntentsResolverUI\r\n            : true;\r\n\r\n        this.intentsResolverAppName = options.intents?.intentsResolverAppName ?? INTENTS_RESOLVER_APP_NAME;\r\n    }\r\n}\r\n","import { Glue42 } from \"../glue\";\r\n\r\ninterface CallDetails {\r\n    date: Date;\r\n    config: Glue42.Config;\r\n}\r\n\r\nexport class FactoryCallInfo {\r\n\r\n    public promise: Promise<Glue42.Glue>;\r\n    public initialized = false;\r\n    public details: CallDetails[] = [];\r\n    public reject: (reason?: any) => void = () => { /** Do nothing - default impl. - will be replaced */};\r\n    public resolve: (value: Glue42.Glue | PromiseLike<Glue42.Glue>) => void = () => { /** Do nothing - default impl. - will be replaced */};\r\n\r\n    public init(config: Glue42.Config) {\r\n        this.initialized = true;\r\n        this.addCall(config);\r\n        this.promise = new Promise((resolve, reject) => {\r\n            this.resolve = resolve;\r\n            this.reject = reject;\r\n        });\r\n    }\r\n\r\n    public addCall(config: Glue42.Config) {\r\n        this.details.push({ date: new Date(), config });\r\n    }\r\n\r\n    public done(g: Glue42.Glue) {\r\n        this.resolve(g);\r\n    }\r\n\r\n    public error(e: Error) {\r\n        this.reject(e);\r\n    }\r\n}\r\n","import { Glue42 } from \"../../glue\";\r\nimport { default as CallbackRegistryFactory, CallbackRegistry } from \"callback-registry\";\r\nimport { isFunction, isObject, isString } from \"../activity/helpers/util\";\r\n\r\nexport interface AppPreferences {\r\n    app: string;\r\n    data: any;\r\n    lastUpdate: Date;\r\n}\r\n\r\nexport class Prefs {\r\n\r\n    private registry: CallbackRegistry = CallbackRegistryFactory();\r\n    private interopMethodRegistered = false;\r\n\r\n    constructor(private appName: string, private interop: Glue42.Interop.API) {\r\n    }\r\n\r\n    public async get(app?: string): Promise<AppPreferences | undefined> {\r\n        const data = (await this.interop.invoke(\"T42.Prefs.Get\", { app: app ?? this.appName }));\r\n        return data.returned;\r\n    }\r\n\r\n    public async set(data: any, options?: { app: string }): Promise<void> {\r\n        this.verifyDataObject(data);\r\n        await this.interop.invoke(\"T42.Prefs.Set\", { app: options?.app ?? this.appName, data, merge: false });\r\n    }\r\n\r\n    public async setFor(app: string, data: any): Promise<void> {\r\n        this.verifyApp(app);\r\n        this.verifyDataObject(data);\r\n        return this.set(data, { app });\r\n    }\r\n\r\n    public async update(data: any, options?: { app: string }) {\r\n        this.verifyDataObject(data);\r\n        await this.interop.invoke(\"T42.Prefs.Set\", { app: options?.app ?? this.appName, data, merge: true });\r\n    }\r\n\r\n    public async updateFor(app: string, data: any) {\r\n        this.verifyApp(app);\r\n        this.verifyDataObject(data);\r\n        return this.update(data, { app });\r\n    }\r\n\r\n    public async clear(app?: string) {\r\n        await this.interop.invoke(\"T42.Prefs.Set\", { app: app ?? this.appName, clear: true });\r\n    }\r\n\r\n    public async clearFor(app: string) {\r\n        this.verifyApp(app);\r\n        await this.interop.invoke(\"T42.Prefs.Set\", { app, clear: true });\r\n    }\r\n\r\n    public async getAll(): Promise<AppPreferences[]> {\r\n        const data = (await this.interop.invoke(\"T42.Prefs.Get\"));\r\n        return data.returned;\r\n    }\r\n\r\n    public async clearAll() {\r\n        await this.interop.invoke(\"T42.Prefs.Set\", { clear: true });\r\n    }\r\n\r\n    public subscribe(callback: (prefs: AppPreferences) => void): () => void {\r\n        this.verifyCallback(callback);\r\n        return this.subscribeFor(this.appName, callback);\r\n    }\r\n\r\n    public subscribeFor(app: string, callback: (prefs: AppPreferences) => void): () => void {\r\n        this.verifyApp(app);\r\n        this.verifyCallback(callback);\r\n        const unsubscribeFn = this.registry.add(app, callback);\r\n\r\n        // register the method if needed and then send the subscription request\r\n        this.registerInteropIfNeeded()\r\n            .then(() => {\r\n                this.interop.invoke(\"T42.Prefs.Get\", { app, subscribe: true });\r\n            });\r\n\r\n        return () => {\r\n            unsubscribeFn();\r\n        };\r\n    }\r\n\r\n    private async registerInteropIfNeeded() {\r\n        if (this.interopMethodRegistered) {\r\n            return;\r\n        }\r\n        this.interopMethodRegistered = true;\r\n\r\n        await this.interop.register(\"T42.Prefs.Update\", (args) => {\r\n            this.registry.execute(args.app, args);\r\n        });\r\n    }\r\n\r\n    private verifyApp(app: string) {\r\n        if (!app) {\r\n            throw new Error(`app should be defined`);\r\n        }\r\n        if (!isString(app)) {\r\n            throw new Error(`app should be a string`);\r\n        }\r\n    }\r\n    private verifyDataObject(data: any) {\r\n        if (!data) {\r\n            throw new Error(`data should be defined`);\r\n        }\r\n        if (!isObject(data)) {\r\n            throw new Error(`data should be an object`);\r\n        }\r\n    }\r\n\r\n    private verifyCallback(callback: any) {\r\n        if (!isFunction(callback)) {\r\n            throw new Error(`callback should be defined`);\r\n        }\r\n    }\r\n}\r\n","import { Glue42 } from \"../../glue\";\r\nimport { isObject, isString } from \"../activity/helpers/util\";\r\n\r\nconst enum Commands {\r\n    GetCookies = \"get-cookies\",\r\n    SetCookie = \"set-cookie\",\r\n    RemoveCookie = \"remove-cookie\"\r\n}\r\n\r\nexport class Cookies implements Glue42.Cookies.API {\r\n\r\n    constructor(private methodName: string, private interop: Glue42.Interop.API) {\r\n    }\r\n\r\n    public async get(filter?: Glue42.Cookies.CookiesGetFilter): Promise<Glue42.Cookies.Cookie[]> {\r\n        const result = await this.invoke<{ cookies: Glue42.Cookies.Cookie[] }>(Commands.GetCookies, { filter });\r\n        return result.returned.cookies;\r\n    }\r\n\r\n    public async set(cookie: Glue42.Cookies.CookiesSetDetails): Promise<void> {\r\n        this.verifyCookieObject(cookie);\r\n        await this.invoke<Glue42.Cookies.Cookie[]>(Commands.SetCookie, cookie);\r\n    }\r\n\r\n    public async remove(url: string, name: string): Promise<void> {\r\n        if (!isString(url)) {\r\n            throw new Error(`url should be a string`);\r\n        }\r\n        if (!isString(name)) {\r\n            throw new Error(`name should be a string`);\r\n        }\r\n        await this.invoke<Glue42.Cookies.Cookie[]>(Commands.RemoveCookie, { url, name });\r\n    }\r\n\r\n    private invoke<T>(command: Commands, data: any) {\r\n        return this.interop.invoke<T>(this.methodName, { command, args: data });\r\n    }\r\n\r\n    private verifyCookieObject(cookie: Glue42.Cookies.CookiesSetDetails) {\r\n        if (!cookie) {\r\n            throw new Error(`cookie should be defined`);\r\n        }\r\n        if (!isObject(cookie)) {\r\n            throw new Error(`cookie should be an object`);\r\n        }\r\n    }\r\n}\r\n","import { Glue42 } from \"../../glue\";\r\nimport { Cookies } from \"./index\";\r\n\r\nexport function factory(agm: Glue42.AGM.API, methodName: string): Glue42.Cookies.API & { ready: () => Promise<void>; } {\r\n    const cookies = new Cookies(methodName, agm);\r\n\r\n    return {\r\n        get: cookies.get.bind(cookies),\r\n        remove: cookies.remove.bind(cookies),\r\n        set: cookies.set.bind(cookies),\r\n        ready: () => Promise.resolve()\r\n    };\r\n}\r\n","/* eslint-disable @typescript-eslint/no-explicit-any */\r\nimport { Glue42 } from \"../glue\";\r\nimport { InternalConfig } from \"./types\";\r\nimport Utils from \"./utils\";\r\n\r\nexport class EventsDispatcher {\r\n    private glue!: Glue42.Glue;\r\n    private readonly glue42EventName = \"Glue42\";\r\n\r\n    private readonly events: { [key in string]: { name: string; handle: (glue42Data: any) => void | Promise<void> } } = {\r\n        notifyStarted: { name: \"notifyStarted\", handle: this.handleNotifyStarted.bind(this) },\r\n        requestGlue: { name: \"requestGlue\", handle: this.handleRequestGlue.bind(this) }\r\n    };\r\n\r\n    constructor(private readonly config: InternalConfig) { }\r\n\r\n    public start(glue: Glue42.Glue): void {\r\n\r\n        if (Utils.isNode()) {\r\n            // raising custom events is not supported in Node, because we can't raise global events and we do not at this\r\n            // point expose an EventEmitter instance via the API\r\n            return;\r\n        }\r\n\r\n        this.glue = glue;\r\n\r\n        this.wireCustomEventListener();\r\n\r\n        this.announceStarted();\r\n    }\r\n\r\n    private wireCustomEventListener(): void {\r\n        window.addEventListener(this.glue42EventName, (event) => {\r\n            const data = (event as CustomEvent).detail;\r\n\r\n            if (!data || !data.glue42) {\r\n                return;\r\n            }\r\n\r\n            const glue42Event: string = data.glue42.event;\r\n\r\n            const foundHandler = this.events[glue42Event];\r\n\r\n            if (!foundHandler) {\r\n                return;\r\n            }\r\n\r\n            foundHandler.handle(data.glue42.message);\r\n\r\n        });\r\n    }\r\n\r\n    private announceStarted(): void {\r\n        this.send(\"start\");\r\n    }\r\n\r\n    private handleRequestGlue(): void {\r\n        if (!this.config.exposeGlue) {\r\n            this.send(\"requestGlueResponse\", { error: \"Will not give access to the underlying Glue API, because it was explicitly denied upon initialization.\" });\r\n            return;\r\n        }\r\n\r\n        this.send(\"requestGlueResponse\", { glue: this.glue });\r\n    }\r\n\r\n    private handleNotifyStarted(): void {\r\n        this.announceStarted();\r\n    }\r\n\r\n    private send(eventName: string, message?: any): void {\r\n        const payload = { glue42: { event: eventName, message } };\r\n\r\n        const event = new CustomEvent(this.glue42EventName, { detail: payload });\r\n\r\n        window.dispatchEvent(event);\r\n    }\r\n}\r\n","import CoreFactory, { Glue42Core } from \"@glue42/core\";\r\nimport { ActivityModule } from \"./activity/main\";\r\nimport AppManagerFactory from \"./app-manager/main\";\r\nimport WindowsFactory from \"./windows/main\";\r\nimport LayoutsFactory from \"./layouts/main\";\r\nimport DisplayManager from \"./displays/displayManager\";\r\nimport { factory as channels } from \"./channels/main\";\r\nimport { factory as hotkeys } from \"./hotkeys/main\";\r\n\r\nimport { Glue42 } from \"../glue\";\r\nimport { version } from \"../package.json\";\r\nimport prepareConfig from \"./config\";\r\nimport { LibConfigObject } from \"./types\";\r\nimport { ActivityMode } from \"./activity/activityConfig\";\r\nimport Utils from \"./utils\";\r\nimport { Notifications } from \"./notifications/main\";\r\nimport { factory as themes } from \"./themes/main\";\r\nimport { Intents } from \"./intents/intents\";\r\nimport { FactoryCallInfo } from \"./factoryCallInfo\";\r\nimport { Prefs } from \"./prefs/index\";\r\nimport { factory as cookies } from \"./cookies/main\";\r\nimport { EventsDispatcher } from \"./eventsDispatcher\";\r\n\r\nconst callInfo: FactoryCallInfo = new FactoryCallInfo();\r\n\r\nconst factory = async (options: Glue42.Config): Promise<Glue42.Glue> => {\r\n    let firstRun = false;\r\n    if (!callInfo.initialized) {\r\n        firstRun = true;\r\n        callInfo.init(options);\r\n    }\r\n\r\n    // if running in GD, do not allow creating multiple instance of this API in the same page\r\n    const glue42gd: Glue42.GDObject = typeof window !== \"undefined\" && window.glue42gd;\r\n    if (glue42gd) {\r\n        if (!firstRun) {\r\n            callInfo.addCall(options);\r\n            return callInfo.promise;\r\n        }\r\n    }\r\n    const g = await factoryCore(options, glue42gd);\r\n    callInfo.resolve(g);\r\n    return g;\r\n};\r\n\r\nconst factoryCore = async (options: Glue42.Config, glue42gd: Glue42.GDObject): Promise<Glue42.Glue> => {\r\n    const T42GDExecuteMethod = \"T42.GD.Execute\";\r\n    const gdMajorVersion = Utils.getGDMajorVersion();\r\n    // get config object\r\n    // basically selecting some properties (and defaulting them)\r\n    // it's used to extract things like layouts, appManager, activities etc things\r\n    // that glueCore itself doesn't know about\r\n    options = options || {};\r\n    const glueConfig = prepareConfig(options);\r\n    options.gateway = options.gateway || {};\r\n\r\n    let _appManager: any;\r\n    let _activity: any;\r\n    let _windows: any;\r\n    let _displays: any;\r\n    let _channels: Glue42.Channels;\r\n    const _browserEventsDispatcher = new EventsDispatcher(glueConfig);\r\n\r\n    // dependency graph:\r\n    //   windows: agm, appManager (via getter)\r\n    //   activities: contexts, agm, logger, windows, appManager (via getter)\r\n    //   appManager: agm, windows, logger, activities\r\n    //   layouts: agm, appManager, logger\r\n    function createWindows(core: Glue42Core.GlueCore) {\r\n        if (glueConfig.windows) {\r\n\r\n            const windowsLogger = getLibLogger(\"windows\", core.logger, glueConfig.windows);\r\n\r\n            _windows = WindowsFactory(\r\n                core.agm,\r\n                windowsLogger,\r\n                () => {\r\n                    return _appManager;\r\n                },\r\n                () => {\r\n                    return _displays;\r\n                },\r\n                () => {\r\n                    return _channels;\r\n                },\r\n                gdMajorVersion);\r\n            debugLog(_windows);\r\n            return _windows;\r\n        }\r\n    }\r\n\r\n    function createActivities(core: Glue42Core.GlueCore) {\r\n        if (glueConfig.activities) {\r\n            if (ActivityModule.checkIsUsingGW3Implementation && ActivityModule.checkIsUsingGW3Implementation(core.connection)) {\r\n\r\n                const activityLogger = getLibLogger(\"activity\", core.logger, glueConfig.activities);\r\n\r\n                _activity = new ActivityModule({\r\n                    connection: core.connection,\r\n                    contexts: core.contexts,\r\n                    agm: core.agm,\r\n                    logger: activityLogger,\r\n                    logLevel: \"info\",\r\n                    disableAutoAnnounce: false,\r\n                    disposeRequestHandling: \"exit\",\r\n                    announcementInfo: null,\r\n                    windows: _windows,\r\n                    appManagerGetter: () => {\r\n                        return _appManager;\r\n                    },\r\n                    mode: glueConfig.activities.mode as ActivityMode,\r\n                    typesToTrack: glueConfig.activities.typesToTrack,\r\n                    activityId: glue42gd?.activityInfo?.activityId,\r\n                    gdMajorVersion\r\n                }).api;\r\n                debugLog(_activity);\r\n                return _activity;\r\n            }\r\n        }\r\n    }\r\n\r\n    function createAppManager(core: Glue42Core.GlueCore) {\r\n        if (!glueConfig.appManager) {\r\n            return;\r\n        }\r\n\r\n        const logger = getLibLogger(\"appManager\", core.logger, glueConfig.appManager);\r\n\r\n        // AppManager v3\r\n        _appManager = AppManagerFactory({\r\n            agm: core.agm,\r\n            windows: _windows,\r\n            logger,\r\n            activities: _activity,\r\n            mode: glueConfig.appManager.mode,\r\n            gdMajorVersion\r\n        });\r\n        debugLog(_appManager);\r\n        return _appManager;\r\n    }\r\n\r\n    function createLayouts(core: Glue42Core.GlueCore) {\r\n        if (!glueConfig.layouts) {\r\n            return;\r\n        }\r\n\r\n        const logger = getLibLogger(\"layouts\", core.logger, glueConfig.layouts);\r\n        const layoutsConfig = glueConfig.layouts;\r\n        const lay = LayoutsFactory({\r\n            agm: core.agm,\r\n            appManager: _appManager,\r\n            activityGetter: () => _activity,\r\n            logger,\r\n            mode: layoutsConfig.mode,\r\n            autoSaveWindowContext: layoutsConfig.autoSaveWindowContext ?? false,\r\n            gdMajorVersion\r\n        });\r\n        debugLog(lay);\r\n        return lay;\r\n    }\r\n\r\n    function createChannels(core: Glue42Core.GlueCore) {\r\n        if (!glueConfig.channels) {\r\n            return;\r\n        }\r\n\r\n        if (!core.contexts) {\r\n            // TODO log - notify the user that he can not use channels without context\r\n            return;\r\n        }\r\n\r\n        // Logger\r\n        const logger = getLibLogger(\"channels\", core.logger, glueConfig.channels);\r\n\r\n        _channels = channels(core.contexts, core.agm, () => _windows, logger);\r\n\r\n        debugLog(_channels);\r\n        return _channels;\r\n    }\r\n\r\n    function createHotkeys(core: Glue42Core.GlueCore) {\r\n        const hotkeysAPI = hotkeys(core.agm);\r\n\r\n        debugLog(hotkeysAPI);\r\n        return hotkeysAPI;\r\n    }\r\n\r\n    function createIntents(core: Glue42Core.GlueCore) {\r\n        const intentsAPI = new Intents(core.agm, _windows, core.logger.subLogger(\"intents\"), options, _appManager);\r\n\r\n        debugLog(intentsAPI);\r\n        return intentsAPI;\r\n    }\r\n\r\n    function createNotifications(core: Glue42Core.GlueCore) {\r\n        const notificationsAPI = new Notifications(core.interop);\r\n\r\n        debugLog(notificationsAPI);\r\n        return notificationsAPI;\r\n    }\r\n\r\n    function createDisplaysApi(core: Glue42Core.GlueCore) {\r\n        if (glueConfig.displays) {\r\n            const displaysLogger = getLibLogger(\"displays\", core.logger, glueConfig.displays);\r\n\r\n            _displays = new DisplayManager(core.agm, displaysLogger);\r\n            debugLog(_displays);\r\n            return _displays;\r\n        }\r\n    }\r\n\r\n    function createThemes(core: Glue42Core.GlueCore) {\r\n        if (!core.contexts) {\r\n            // TODO log - notify the user that he can not use themes without context\r\n            return;\r\n        }\r\n        const themesAPI = themes(core);\r\n\r\n        debugLog(themesAPI);\r\n        return themesAPI;\r\n    }\r\n\r\n    function createPrefs(core: Glue42Core.GlueCore) {\r\n        const appName = options.application ?? glue42gd?.application ?? core.interop.instance.application;\r\n        const prefs = new Prefs(appName, core.interop);\r\n\r\n        debugLog(prefs);\r\n        return prefs;\r\n    }\r\n\r\n    function createCookies(core: Glue42Core.GlueCore) {\r\n        const api = cookies(core.interop, T42GDExecuteMethod);\r\n\r\n        debugLog(api);\r\n        return api;\r\n    }\r\n\r\n    function getLibLogger(loggerName: string, logger: Glue42Core.Logger.API, config: LibConfigObject<string>) {\r\n        const newLogger = logger.subLogger(loggerName);\r\n\r\n        if (config && config.logger) {\r\n            const loggerConfig = config.logger;\r\n            if (loggerConfig.console) {\r\n                newLogger.consoleLevel(loggerConfig.console);\r\n            }\r\n            if (loggerConfig.publish) {\r\n                newLogger.publishLevel(loggerConfig.publish);\r\n            }\r\n            // not supported in GD3\r\n            // if (loggerConfig.metrics) {\r\n            //  newLogger.metricsLevel(loggerConfig.metrics);\r\n            // }\r\n        }\r\n\r\n        return newLogger;\r\n    }\r\n\r\n    const ext: Glue42Core.Extension = {\r\n        // define extra libraries for glue-core to raise\r\n        libs: [\r\n            { name: \"windows\", create: createWindows },\r\n            { name: \"activities\", create: createActivities },\r\n            { name: \"appManager\", create: createAppManager },\r\n            { name: \"layouts\", create: createLayouts },\r\n            { name: \"channels\", create: createChannels },\r\n            { name: \"hotkeys\", create: createHotkeys },\r\n            { name: \"displays\", create: createDisplaysApi },\r\n            { name: \"intents\", create: createIntents },\r\n            { name: \"notifications\", create: createNotifications },\r\n            { name: \"themes\", create: createThemes },\r\n            { name: \"prefs\", create: createPrefs },\r\n            { name: \"cookies\", create: createCookies }\r\n        ],\r\n\r\n        version,\r\n\r\n        enrichGlue: (glue: Glue42Core.GlueCore) => {\r\n            // put some data to config\r\n            glue.config.activities = glueConfig.activities;\r\n            glue.config.windows = glueConfig.windows;\r\n            glue.config.appManager = glueConfig.appManager;\r\n            glue.config.layouts = glueConfig.layouts;\r\n            glue.config.channels = glueConfig.channels;\r\n            glue.config.displays = glueConfig.displays;\r\n        },\r\n    };\r\n\r\n    const currentLog: any[] = [];\r\n    if (typeof window !== \"undefined\") {\r\n        if (!(window as any).glueFactoryLog) {\r\n            (window as any).glueFactoryLog = [];\r\n        }\r\n        (window as any).glueFactoryLog.push(currentLog);\r\n    }\r\n\r\n    function debugLog(entry: any) {\r\n        currentLog.push(entry);\r\n    }\r\n\r\n    const glueApi = (await CoreFactory(options, ext)) as Glue42.Glue;\r\n\r\n    // Decorate the ready glue object with extra functionalities coming from the user-defined libraries.\r\n    if (Array.isArray(options?.libraries) && options.libraries.length) {\r\n        await Promise.all(options.libraries.map((lib) => lib(glueApi, options)));\r\n    }\r\n\r\n    _browserEventsDispatcher.start(glueApi);\r\n\r\n    return glueApi;\r\n};\r\n\r\nfactory.coreVersion = (CoreFactory as any).version;\r\nfactory.version = version;\r\nfactory.calls = callInfo;\r\n\r\nexport default factory;\r\n","import CreateGlue from \"./glue\";\r\n\r\nlet whatToExpose = CreateGlue;\r\nlet shouldSetToWindow = true;\r\n\r\nif (typeof window !== \"undefined\") {\r\n    // if glue42gd (running in GD3) and autoInjected\r\n    const glue42gd = (window as any).glue42gd;\r\n    if (glue42gd && glue42gd.autoInjected) {\r\n        whatToExpose = (window as any).Glue;\r\n        // no need to set to window, it's already there\r\n        shouldSetToWindow = false;\r\n    }\r\n\r\n    if (shouldSetToWindow) {\r\n        (window as any).Glue = whatToExpose;\r\n    }\r\n\r\n    // remove GlueCore from the window object (injected by Glue-core)\r\n    delete (window as any).GlueCore;\r\n}\r\n// add default library for ES6 modules\r\n(whatToExpose as any).default = whatToExpose;\r\n\r\nexport default whatToExpose;\r\n"],"names":["createRegistry","lib","Utils","createCommonjsModule","seed","getNextValue","setSeed","randomFromSeed","ORIGINAL","alphabet","previousSeed","shuffled","reset","setCharacters","characters","setSeed$1","shuffle","getShuffled","lookup","alphabet_1","crypto","randomByte","randomByteBrowser","encode","encode_1","decode","decode_1","isShortId","isValid","lib$1","shortid","Logger","version","prepareConfig","GW3Bridge","promisify","util.isUndefinedOrNull","util.isString","util.isArray","util.isFunction","util.isUndefined","util.isObject","util.some","My","CallbackRegistryFactory","AgmNames.StartApplicationMethodName","AgmNames.StopApplicationMethodName","AgmNames.ActivateApplicationMethodName","AgmNames.GetConfigurationRegionMethodName","AgmNames.GetBranchesMethodName","AgmNames.GetCurrentBranchMethodName","AgmNames.SetConfigurationRegionMethodName","AgmNames.SetCurrentBranchMethodName","AgmNames.GetUserMethodName","AgmNames.GetFunctionalEntitlementMethodName","AgmNames.CanIMethodName","AgmNames.ShutdownMethodName","AgmNames.RestartMethodName","AgmNames.GetApplicationsMethodName","AgmNames.OnEventMethodName","EventNames.OnApplicationAddedEvent","EventNames.OnApplicationChangedEvent","EventNames.OnApplicationRemovedEvent","EventNames.OnApplicationReadyEvent","EventNames.OnApplicationStartedEvent","EventNames.OnApplicationStartFailedEvent","EventNames.OnApplicationStoppedEvent","EventNames.OnApplicationUpdatedEvent","EventNames.OnApplicationAgmServerReadyEvent","EventNames.OnBranchChangedEvent","EventNames.OnBranchesModifiedEvent","subscriptionFactory","build","require$$0","CallbackFactory","utils","util.isNullOrWhiteSpace","util.isNumber","GD","callbackRegistry","generate","Layouts","factory","channels","hotkeys","themes","cookies","CoreFactory","CreateGlue"],"mappings":"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"}